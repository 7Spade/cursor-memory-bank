This file is a merged representation of the entire codebase, combined into a single document by Repomix.
The content has been processed where content has been compressed (code blocks are separated by â‹®---- delimiter).

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Content has been compressed - code blocks are separated by â‹®---- delimiter
- Files are sorted by Git change count (files with more changes are at the bottom)

# Directory Structure
```
.cursor/
  rules/
    isolation_rules/
      Core/
        command-execution.mdc
        complexity-decision-tree.mdc
        creative-phase-enforcement.mdc
        creative-phase-metrics.mdc
        file-verification.mdc
        graph-bank-paths.mdc
        hierarchical-rule-loading.mdc
        mcp-command-mapping.mdc
        mcp-context7.mdc
        mcp-graph-bank-integration.mdc
        mcp-memory-server.mdc
        mode-transition-optimization.mdc
        modern-angular-guidelines.mdc
        optimization-integration.mdc
        platform-awareness.mdc
      Level1/
        optimized-workflow-level1.mdc
        quick-documentation.mdc
        workflow-level1.mdc
      Level2/
        archive-basic.mdc
        reflection-basic.mdc
        task-tracking-basic.mdc
        workflow-level2.mdc
      Level3/
        archive-intermediate.mdc
        implementation-intermediate.mdc
        planning-comprehensive.mdc
        reflection-intermediate.mdc
        task-tracking-intermediate.mdc
        workflow-level3.mdc
      Level4/
        architectural-planning.mdc
        archive-comprehensive.mdc
        phased-implementation.mdc
        reflection-comprehensive.mdc
        task-tracking-advanced.mdc
        workflow-level4.mdc
      Modes/
        creative-mode-detailed.mdc
        implement-mode-detailed.mdc
        init-mode-detailed.mdc
        plan-mode-detailed.mdc
        reflect-archive-mode-detailed.mdc
        repo-mode-detailed.mdc
        van-mode-detailed.mdc
      Phases/
        CreativePhase/
          creative-phase-architecture.mdc
          creative-phase-uiux.mdc
          optimized-creative-template.mdc
      visual-maps/
        van_mode_split/
          van-qa-checks/
            build-test.mdc
            config-check.mdc
            dependency-check.mdc
            environment-check.mdc
            file-verification.mdc
          van-qa-utils/
            common-fixes.mdc
            mode-transitions.mdc
            reports.mdc
            rule-calling-guide.mdc
            rule-calling-help.mdc
          van-complexity-determination.mdc
          van-file-verification.mdc
          van-mode-map.mdc
          van-platform-detection.mdc
          van-qa-main.mdc
          van-qa-validation.md.old
        archive-mode-map.mdc
        creative-mode-map.mdc
        implement-mode-map.mdc
        plan-mode-map.mdc
        qa-mode-map.mdc
        reflect-mode-map.mdc
        van-mode-map.mdc
      main-optimized.mdc
      main.mdc
  mcp.json
angular/
  public/
    favicon.copy.ico
    favicon.ico
  src/
    app/
      core/
        guards/
          permission.guard.ts
        models/
          auth.model.ts
        services/
          auth.service.ts
          organization.service.ts
          permission.service.ts
          repository.service.ts
        utils/
          avatar.utils.ts
          validation.utils.ts
      dashboard/
        admin.component.ts
        dashboard.component.ts
        editor.component.ts
        viewer.component.ts
      features/
        organization/
          components/
            organization-card.component.ts
            organization-roles.component.ts
            security-manager.component.ts
            team-management.component.ts
          models/
            github-aligned-organization.model.ts
          routes/
            organization.routes.ts
          services/
            github-aligned-api.service.ts
            permission-calculation.service.ts
          index.ts
        repository/
          components/
            collaborator-management.component.ts
            repository-detail.component.ts
            repository-list.component.ts
          models/
            repository.model.ts
          routes/
            repository.routes.ts
        user/
          auth/
            auth.guard.ts
            auth.service.ts
            index.ts
            login.component.ts
            role.guard.ts
            signup.component.ts
            unauthorized.component.ts
          profile/
            profile-management.component.ts
          index.ts
          user.model.ts
          user.routes.ts
          user.service.ts
      landing/
        landing.component.ts
      app.config.ts
      app.html
      app.routes.ts
      app.scss
      app.spec.ts
      app.ts
    environments/
      environment.prod.ts
      environment.sample.ts
    index.html
    main.ts
    styles.scss
  .editorconfig
  .gitignore
  angular.json
  firebase.json
  package.json
  README.md
  tsconfig.app.json
  tsconfig.json
  tsconfig.spec.json
docs/
  account.md
  DEVELOPMENT_GUIDE.md
  PROJECT_STRUCTURE.md
  SYSTEM_ARCHITECTURE.md
  TREE.md
graph-bank/
  activeContext.md
  plan-github-account-architecture.md
  plan-qa-final-report.md
  plan-qa-quality-check-report.md
  productContext.md
  progress.md
  projectbrief.md
  qa-task-logic-validation-report.md
  systemPatterns.md
  tasks.md
  techContext.md
.cursorrules
.gitignore
AGENTS.md
memory.json
README.md
repomix-dev-workflow.md
SYSTEM_ARCHITECTURE.md
TREE.md
```

# Files

## File: .cursor/rules/isolation_rules/Core/complexity-decision-tree.mdc
`````
---
description: complexity decision tree
globs: complexity-decision-tree.mdc
alwaysApply: false
---
# TASK COMPLEXITY DETERMINATION

> **TL;DR:** This document helps determine the appropriate complexity level (1-4) for any task. Use the decision tree and indicators to select the right process level, then load the corresponding process map.

## ğŸŒ³ COMPLEXITY DECISION TREE

```mermaid
graph TD
    Start["New Task"] --> Q1{"Bug fix or<br>error correction?"}
    Q1 -->|Yes| Q1a{"Affects single<br>component?"}
    Q1a -->|Yes| L1["Level 1:<br>Quick Bug Fix"]
    Q1a -->|No| Q1b{"Affects multiple<br>components?"}
    Q1b -->|Yes| L2["Level 2:<br>Simple Enhancement"]
    Q1b -->|No| Q1c{"Affects system<br>architecture?"}
    Q1c -->|Yes| L3["Level 3:<br>Intermediate Feature"]
    Q1c -->|No| L2
    
    Q1 -->|No| Q2{"Adding small<br>feature or<br>enhancement?"}
    Q2 -->|Yes| Q2a{"Self-contained<br>change?"}
    Q2a -->|Yes| L2
    Q2a -->|No| Q2b{"Affects multiple<br>components?"}
    Q2b -->|Yes| L3
    Q2b -->|No| L2
    
    Q2 -->|No| Q3{"Complete feature<br>requiring multiple<br>components?"}
    Q3 -->|Yes| Q3a{"Architectural<br>implications?"}
    Q3a -->|Yes| L4["Level 4:<br>Complex System"]
    Q3a -->|No| L3
    
    Q3 -->|No| Q4{"System-wide or<br>architectural<br>change?"}
    Q4 -->|Yes| L4
    Q4 -->|No| L3
    
    L1 --> LoadL1["Load Level 1 Map"]
    L2 --> LoadL2["Load Level 2 Map"]
    L3 --> LoadL3["Load Level 3 Map"]
    L4 --> LoadL4["Load Level 4 Map"]
```

## ğŸ“Š COMPLEXITY LEVEL INDICATORS

Use these indicators to help determine task complexity:

### Level 1: Quick Bug Fix
- **Keywords**: "fix", "broken", "not working", "issue", "bug", "error", "crash"
- **Scope**: Single component or UI element
- **Duration**: Can be completed quickly (minutes to hours)
- **Risk**: Low, isolated changes
- **Examples**:
  - Fix button not working
  - Correct styling issue
  - Fix validation error
  - Resolve broken link
  - Fix typo or text issue

### Level 2: Simple Enhancement
- **Keywords**: "add", "improve", "update", "change", "enhance", "modify"
- **Scope**: Single component or subsystem
- **Duration**: Hours to 1-2 days
- **Risk**: Moderate, contained to specific area
- **Examples**:
  - Add form field
  - Improve validation
  - Update styling
  - Add simple feature
  - Change text content
  - Enhance existing component

### Level 3: Intermediate Feature
- **Keywords**: "implement", "create", "develop", "build", "feature"
- **Scope**: Multiple components, complete feature
- **Duration**: Days to 1-2 weeks
- **Risk**: Significant, affects multiple areas
- **Examples**:
  - Implement user authentication
  - Create dashboard
  - Develop search functionality
  - Build user profile system
  - Implement data visualization
  - Create complex form system

### Level 4: Complex System
- **Keywords**: "system", "architecture", "redesign", "integration", "framework"
- **Scope**: Multiple subsystems or entire application
- **Duration**: Weeks to months
- **Risk**: High, architectural implications
- **Examples**:
  - Implement authentication system
  - Build payment processing framework
  - Create microservice architecture
  - Implement database migration system
  - Develop real-time communication system
  - Create multi-tenant architecture

## ğŸ” COMPLEXITY ASSESSMENT QUESTIONS

Answer these questions to determine complexity:

1. **Scope Impact**
   - Does it affect a single component or multiple?
   - Are there system-wide implications?
   - How many files will need to be modified?

2. **Design Decisions**
   - Are complex design decisions required?
   - Will it require creative phases for design?
   - Are there architectural considerations?

3. **Risk Assessment**
   - What happens if it fails?
   - Are there security implications?
   - Will it affect critical functionality?

4. **Implementation Effort**
   - How long will it take to implement?
   - Does it require specialized knowledge?
   - Is extensive testing needed?

## ğŸ“Š KEYWORD ANALYSIS TABLE

| Keyword | Likely Level | Notes |
|---------|--------------|-------|
| "Fix" | Level 1 | Unless system-wide |
| "Bug" | Level 1 | Unless multiple components |
| "Error" | Level 1 | Unless architectural |
| "Add" | Level 2 | Unless complex feature |
| "Update" | Level 2 | Unless architectural |
| "Improve" | Level 2 | Unless system-wide |
| "Implement" | Level 3 | Complex components |
| "Create" | Level 3 | New functionality |
| "Develop" | Level 3 | Significant scope |
| "System" | Level 4 | Architectural implications |
| "Architecture" | Level 4 | Major structural changes |
| "Framework" | Level 4 | Core infrastructure |

## ğŸ”„ COMPLEXITY ESCALATION

If during a task you discover it's more complex than initially determined:

```
âš ï¸ TASK ESCALATION NEEDED
Current Level: Level [X]
Recommended Level: Level [Y]
Reason: [Brief explanation]

Would you like me to escalate this task to Level [Y]?
```

If approved, switch to the appropriate higher-level process map.

## ğŸ¯ PROCESS SELECTION

After determining complexity, load the appropriate process map:

| Level | Description | Process Map |
|-------|-------------|-------------|
| 1 | Quick Bug Fix | [Level 1 Map](mdc:.cursor/rules/visual-maps/level1-map.mdc) |
| 2 | Simple Enhancement | [Level 2 Map](mdc:.cursor/rules/visual-maps/level2-map.mdc) |
| 3 | Intermediate Feature | [Level 3 Map](mdc:.cursor/rules/visual-maps/level3-map.mdc) |
| 4 | Complex System | [Level 4 Map](mdc:.cursor/rules/visual-maps/level4-map.mdc) |

## ğŸ“ COMPLEXITY DETERMINATION TEMPLATE

Use this template to document complexity determination:

```
## COMPLEXITY DETERMINATION

Task: [Task description]

Assessment:
- Scope: [Single component/Multiple components/System-wide]
- Design decisions: [Simple/Moderate/Complex]
- Risk: [Low/Moderate/High]
- Implementation effort: [Low/Moderate/High]

Keywords identified: [List relevant keywords]

Determination: Level [1/2/3/4] - [Quick Bug Fix/Simple Enhancement/Intermediate Feature/Complex System]

Loading process map: [Level X Map]
```
`````

## File: .cursor/rules/isolation_rules/Core/hierarchical-rule-loading.mdc
`````
---
description: Hierarchical rule loading system for optimized token usage
globs: "**/rule-loading*/**", "**/optimization*/**"
alwaysApply: false
---

# HIERARCHICAL RULE LOADING SYSTEM

> **TL;DR:** This rule implements an optimized loading system that only loads necessary rules based on context, complexity level, and current phase to maximize token efficiency.

## ğŸ§  HIERARCHICAL RULE STRUCTURE

```mermaid
graph TD
    Root["Root Rules"] --> Core["Core Rules<br>(Always Loaded)"]
    Root --> Common["Common Rules<br>(Mode Independent)"]
    Root --> Mode["Mode-Specific<br>Rules"]
    Root --> Level["Complexity Level<br>Rules"]
    
    Core --> Platform["Platform<br>Detection"]
    Core --> File["File<br>Operations"]
    Core --> Transition["Mode<br>Transitions"]
    
    Mode --> VAN["VAN Mode<br>Rules"]
    Mode --> PLAN["PLAN Mode<br>Rules"]
    Mode --> CREATIVE["CREATIVE Mode<br>Rules"]
    Mode --> IMPLEMENT["IMPLEMENT Mode<br>Rules"]
    Mode --> REFLECT["REFLECT Mode<br>Rules"]
    
    Level --> Level1["Level 1<br>Rules"]
    Level --> Level2["Level 2<br>Rules"]
    Level --> Level3["Level 3<br>Rules"]
    Level --> Level4["Level 4<br>Rules"]
    
    style Root fill:#4da6ff,stroke:#0066cc,color:white
    style Core fill:#ffa64d,stroke:#cc7a30,color:white
    style Common fill:#4dbb5f,stroke:#36873f,color:white
    style Mode fill:#d94dbb,stroke:#a3378a,color:white
    style Level fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ“Š RULE LOADING PROTOCOL

```mermaid
sequenceDiagram
    participant User
    participant LoadManager
    participant RuleCache
    participant FileSystem
    
    User->>LoadManager: Request mode activation
    LoadManager->>RuleCache: Check cached core rules
    RuleCache-->>LoadManager: Return cached rules if available
    
    LoadManager->>FileSystem: Load essential mode rules
    FileSystem-->>LoadManager: Return essential rules
    
    LoadManager->>LoadManager: Register lazy loaders for specialized rules
    LoadManager->>User: Return initialized mode
    
    User->>LoadManager: Request specialized functionality
    LoadManager->>RuleCache: Check specialized rule cache
    RuleCache-->>LoadManager: Return cached rule if available
    
    alt Rule not in cache
        LoadManager->>FileSystem: Load specialized rule
        FileSystem-->>LoadManager: Return specialized rule
        LoadManager->>RuleCache: Cache specialized rule
    end
    
    LoadManager->>User: Execute specialized functionality
```

## ğŸ”„ RULE LOADING IMPLEMENTATION

```javascript
// Pseudocode for hierarchical rule loading
class RuleLoadManager {
  constructor() {
    this.cache = {
      core: {},
      common: {},
      mode: {},
      level: {}
    };
    this.lazyLoaders = {};
  }
  
  // Initialize a mode with only essential rules
  initializeMode(modeName, complexityLevel) {
    // Always load core rules
    this.loadCoreRules();
    
    // Load common rules
    this.loadCommonRules();
    
    // Load essential mode-specific rules
    this.loadEssentialModeRules(modeName);
    
    // Load complexity level rules
    this.loadComplexityRules(complexityLevel);
    
    // Register lazy loaders for specialized functionality
    this.registerLazyLoaders(modeName, complexityLevel);
    
    return {
      modeName,
      complexityLevel,
      status: "initialized"
    };
  }
  
  // Load only when specialized functionality is needed
  loadSpecializedRule(ruleType) {
    if (this.lazyLoaders[ruleType]) {
      if (!this.cache.specialized[ruleType]) {
        const rule = this.lazyLoaders[ruleType]();
        this.cache.specialized[ruleType] = rule;
      }
      return this.cache.specialized[ruleType];
    }
    return null;
  }
  
  // Register specialized rule loaders based on mode and complexity
  registerLazyLoaders(modeName, complexityLevel) {
    // Clear existing lazy loaders
    this.lazyLoaders = {};
    
    // Register mode-specific lazy loaders
    if (modeName === "CREATIVE") {
      this.lazyLoaders["architecture"] = () => this.loadRule("creative-phase-architecture.mdc");
      this.lazyLoaders["algorithm"] = () => this.loadRule("creative-phase-algorithm.mdc");
      this.lazyLoaders["uiux"] = () => this.loadRule("creative-phase-uiux.mdc");
    } else if (modeName === "IMPLEMENT") {
      this.lazyLoaders["testing"] = () => this.loadRule("implementation-testing.mdc");
      this.lazyLoaders["deployment"] = () => this.loadRule("implementation-deployment.mdc");
    }
    
    // Register complexity-specific lazy loaders
    if (complexityLevel >= 3) {
      this.lazyLoaders["comprehensive-planning"] = () => this.loadRule("planning-comprehensive.mdc");
      this.lazyLoaders["advanced-verification"] = () => this.loadRule("verification-advanced.mdc");
    }
  }
}
```

## ğŸ“‹ RULE DEPENDENCY MAP

```mermaid
graph TD
    Main["main.mdc"] --> Core1["platform-awareness.mdc"]
    Main --> Core2["file-verification.mdc"]
    Main --> Core3["command-execution.mdc"]
    
    subgraph "VAN Mode"
        VanMap["van-mode-map.mdc"] --> Van1["van-complexity-determination.mdc"]
        VanMap --> Van2["van-file-verification.mdc"]
        VanMap --> Van3["van-platform-detection.mdc"]
    end
    
    subgraph "PLAN Mode"
        PlanMap["plan-mode-map.mdc"] --> Plan1["task-tracking-basic.mdc"]
        PlanMap --> Plan2["planning-comprehensive.mdc"]
    end
    
    subgraph "CREATIVE Mode"
        CreativeMap["creative-mode-map.mdc"] --> Creative1["creative-phase-enforcement.mdc"]
        CreativeMap --> Creative2["creative-phase-metrics.mdc"]
        Creative1 & Creative2 -.-> CreativeSpecialized["Specialized Creative Rules"]
        CreativeSpecialized --> CArch["creative-phase-architecture.mdc"]
        CreativeSpecialized --> CAlgo["creative-phase-algorithm.mdc"]
        CreativeSpecialized --> CUIUX["creative-phase-uiux.mdc"]
    end
    
    subgraph "IMPLEMENT Mode"
        ImplementMap["implement-mode-map.mdc"] --> Impl1["implementation-guide.mdc"]
        ImplementMap --> Impl2["testing-strategy.mdc"]
    end
```

## ğŸ” MODE-SPECIFIC RULE LOADING

### VAN Mode Essential Rules
```markdown
- main.mdc (Core)
- platform-awareness.mdc (Core)
- file-verification.mdc (Core)
- van-mode-map.mdc (Mode)
```

### PLAN Mode Essential Rules
```markdown
- main.mdc (Core)
- plan-mode-map.mdc (Mode)
- task-tracking-[complexity].mdc (Level)
```

### CREATIVE Mode Essential Rules
```markdown
- main.mdc (Core)
- creative-mode-map.mdc (Mode)
- creative-phase-enforcement.mdc (Mode)
```

### CREATIVE Mode Specialized Rules (Lazy Loaded)
```markdown
- creative-phase-architecture.mdc (Specialized)
- creative-phase-algorithm.mdc (Specialized)
- creative-phase-uiux.mdc (Specialized)
```

### IMPLEMENT Mode Essential Rules
```markdown
- main.mdc (Core)
- command-execution.mdc (Core)
- implement-mode-map.mdc (Mode)
```

## ğŸš€ IMPLEMENTATION BENEFITS

The hierarchical loading system provides:

1. **Reduced Initial Loading**: Only essential rules loaded at start (~70% token reduction)
2. **Cached Core Rules**: Rules shared between modes are cached
3. **Specialized Rule Loading**: Specialized rules loaded only when needed
4. **Complexity-Based Loading**: Only load rules appropriate for task complexity

## ğŸ“ˆ TOKEN USAGE COMPARISON

| Approach | Initial Tokens | Specialized Tokens | Total Tokens |
|----------|---------------|-------------------|--------------|
| Original System | ~70,000 | Included in initial | ~70,000 |
| Hierarchical System | ~15,000 | ~10,000 (on demand) | ~25,000 |
| **Token Reduction** | **~55,000 (78%)** | **N/A** | **~45,000 (64%)** |

## ğŸ”„ USAGE EXAMPLE

### Example: Creative Phase with Architecture Rule

```javascript
// Initialize the CREATIVE mode with only essential rules
const mode = ruleManager.initializeMode("CREATIVE", 3);

// Core and essential mode rules are loaded 
// Architecture rules are NOT loaded yet

// Later, when architecture design is needed:
const architectureRule = ruleManager.loadSpecializedRule("architecture");

// Now the architecture rule is loaded and cached
```

## ğŸ§ª RULE LOADING VERIFICATION

To ensure the rule loading system is working optimally:

```markdown
## Rule Loading Verification

- Core Rules: [Loaded]
- Mode-Essential Rules: [Loaded]
- Complexity-Level Rules: [Loaded]
- Specialized Rules: [Not Loaded]

Current Token Usage: [X] tokens
Potential Token Savings: [Y] tokens
```

This hierarchical approach ensures optimal token usage while maintaining all functionality.
`````

## File: .cursor/rules/isolation_rules/Phases/CreativePhase/creative-phase-architecture.mdc
`````
---
description: creative phase architecture
globs: creative-phase-architecture.md
alwaysApply: false
---

# CREATIVE PHASE: ARCHITECTURE DESIGN

> **TL;DR:** This document provides structured guidance for architectural design decisions during creative phases, ensuring comprehensive evaluation of options and clear documentation of architectural choices.

## ğŸ—ï¸ ARCHITECTURE DESIGN WORKFLOW

```mermaid
graph TD
    Start["Architecture<br>Design Start"] --> Req["1. Requirements<br>Analysis"]
    Req --> Comp["2. Component<br>Identification"]
    Comp --> Options["3. Architecture<br>Options"]
    Options --> Eval["4. Option<br>Evaluation"]
    Eval --> Decision["5. Decision &<br>Documentation"]
    Decision --> Valid["6. Validation &<br>Verification"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Req fill:#ffa64d,stroke:#cc7a30,color:white
    style Comp fill:#4dbb5f,stroke:#36873f,color:white
    style Options fill:#d94dbb,stroke:#a3378a,color:white
    style Eval fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#d971ff,stroke:#a33bc2,color:white
    style Valid fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ“‹ ARCHITECTURE DECISION TEMPLATE

```markdown
# Architecture Decision Record

## Context
- System Requirements:
  - [Requirement 1]
  - [Requirement 2]
- Technical Constraints:
  - [Constraint 1]
  - [Constraint 2]

## Component Analysis
- Core Components:
  - [Component 1]: [Purpose/Role]
  - [Component 2]: [Purpose/Role]
- Interactions:
  - [Interaction 1]
  - [Interaction 2]

## Architecture Options
### Option 1: [Name]
- Description: [Brief description]
- Pros:
  - [Pro 1]
  - [Pro 2]
- Cons:
  - [Con 1]
  - [Con 2]
- Technical Fit: [High/Medium/Low]
- Complexity: [High/Medium/Low]
- Scalability: [High/Medium/Low]

### Option 2: [Name]
[Same structure as Option 1]

## Decision
- Chosen Option: [Option name]
- Rationale: [Explanation]
- Implementation Considerations:
  - [Consideration 1]
  - [Consideration 2]

## Validation
- Requirements Met:
  - [âœ“] Requirement 1
  - [âœ“] Requirement 2
- Technical Feasibility: [Assessment]
- Risk Assessment: [Evaluation]
```

## ğŸ¯ ARCHITECTURE EVALUATION CRITERIA

```mermaid
graph TD
    subgraph "EVALUATION CRITERIA"
    C1["Scalability"]
    C2["Maintainability"]
    C3["Performance"]
    C4["Security"]
    C5["Cost"]
    C6["Time to Market"]
    end
    
    style C1 fill:#4dbb5f,stroke:#36873f,color:white
    style C2 fill:#ffa64d,stroke:#cc7a30,color:white
    style C3 fill:#d94dbb,stroke:#a3378a,color:white
    style C4 fill:#4dbbbb,stroke:#368787,color:white
    style C5 fill:#d971ff,stroke:#a33bc2,color:white
    style C6 fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ“Š ARCHITECTURE VISUALIZATION TEMPLATES

### Component Diagram Template
```mermaid
graph TD
    subgraph "SYSTEM ARCHITECTURE"
    C1["Component 1"]
    C2["Component 2"]
    C3["Component 3"]
    
    C1 -->|"Interface 1"| C2
    C2 -->|"Interface 2"| C3
    end
    
    style C1 fill:#4dbb5f,stroke:#36873f,color:white
    style C2 fill:#ffa64d,stroke:#cc7a30,color:white
    style C3 fill:#d94dbb,stroke:#a3378a,color:white
```

### Data Flow Template
```mermaid
sequenceDiagram
    participant C1 as Component 1
    participant C2 as Component 2
    participant C3 as Component 3
    
    C1->>C2: Request
    C2->>C3: Process
    C3-->>C2: Response
    C2-->>C1: Result
```

## âœ… VERIFICATION CHECKLIST

```markdown
## Architecture Design Verification
- [ ] All system requirements addressed
- [ ] Component responsibilities defined
- [ ] Interfaces specified
- [ ] Data flows documented
- [ ] Security considerations addressed
- [ ] Scalability requirements met
- [ ] Performance requirements met
- [ ] Maintenance approach defined

## Implementation Readiness
- [ ] All components identified
- [ ] Dependencies mapped
- [ ] Technical constraints documented
- [ ] Risk assessment completed
- [ ] Resource requirements defined
- [ ] Timeline estimates provided
```

## ğŸ”„ ARCHITECTURE REVIEW PROCESS

```mermaid
graph TD
    subgraph "REVIEW PROCESS"
    R1["Technical<br>Review"]
    R2["Security<br>Review"]
    R3["Performance<br>Review"]
    R4["Final<br>Approval"]
    end
    
    R1 --> R2 --> R3 --> R4
    
    style R1 fill:#4dbb5f,stroke:#36873f,color:white
    style R2 fill:#ffa64d,stroke:#cc7a30,color:white
    style R3 fill:#d94dbb,stroke:#a3378a,color:white
    style R4 fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ”„ DOCUMENT MANAGEMENT

```mermaid
graph TD
    Current["Current Document"] --> Active["Active:<br>- creative-phase-architecture.md"]
    Current --> Related["Related:<br>- creative-phase-enforcement.md<br>- planning-comprehensive.md"]
    
    style Current fill:#4da6ff,stroke:#0066cc,color:white
    style Active fill:#4dbb5f,stroke:#36873f,color:white
    style Related fill:#ffa64d,stroke:#cc7a30,color:white
```
`````

## File: .cursor/rules/isolation_rules/Phases/CreativePhase/optimized-creative-template.mdc
`````
---
description: Optimized creative phase template with progressive documentation
globs: "**/creative*/**", "**/design*/**", "**/decision*/**"
alwaysApply: false
---

# OPTIMIZED CREATIVE PHASE TEMPLATE

> **TL;DR:** This template implements a progressive documentation approach for creative phases, optimizing token usage while maintaining thorough design exploration.

## ğŸ“ PROGRESSIVE DOCUMENTATION MODEL

```mermaid
graph TD
    Start["Creative Phase Start"] --> P1["1ï¸âƒ£ PROBLEM<br>Define scope"]
    P1 --> P2["2ï¸âƒ£ OPTIONS<br>Explore alternatives"]
    P2 --> P3["3ï¸âƒ£ ANALYSIS<br>Evaluate selected options"]
    P3 --> P4["4ï¸âƒ£ DECISION<br>Finalize approach"]
    P4 --> P5["5ï¸âƒ£ IMPLEMENTATION<br>Document guidelines"]
    
    style Start fill:#d971ff,stroke:#a33bc2,color:white
    style P1 fill:#4da6ff,stroke:#0066cc,color:white
    style P2 fill:#ffa64d,stroke:#cc7a30,color:white
    style P3 fill:#4dbb5f,stroke:#36873f,color:white
    style P4 fill:#d94dbb,stroke:#a3378a,color:white
    style P5 fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ“‹ TEMPLATE STRUCTURE

```markdown
ğŸ“Œ CREATIVE PHASE START: [Component Name]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ PROBLEM
   Description: [Brief problem description]
   Requirements: [Key requirements as bullet points]
   Constraints: [Technical or business constraints]

2ï¸âƒ£ OPTIONS
   Option A: [Name] - [One-line description]
   Option B: [Name] - [One-line description]
   Option C: [Name] - [One-line description]

3ï¸âƒ£ ANALYSIS
   | Criterion | Option A | Option B | Option C |
   |-----------|----------|----------|----------|
   | Performance | â­â­â­ | â­â­ | â­â­â­â­ |
   | Complexity | â­â­ | â­â­â­ | â­â­â­â­ |
   | Maintainability | â­â­â­â­ | â­â­â­ | â­â­ |
   
   Key Insights:
   - [Insight 1]
   - [Insight 2]

4ï¸âƒ£ DECISION
   Selected: [Option X]
   Rationale: [Brief justification]
   
5ï¸âƒ£ IMPLEMENTATION NOTES
   - [Implementation note 1]
   - [Implementation note 2]
   - [Implementation note 3]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Œ CREATIVE PHASE END
```

## ğŸ§© DETAILED OPTION ANALYSIS (ON DEMAND)

Detailed analysis can be provided on demand for selected options:

```markdown
<details>
  <summary>Detailed Analysis: Option A</summary>
  
  ### Option A: [Full Name]
  
  **Complete Description**:
  [Detailed description of how the option works]
  
  **Pros**:
  - [Pro 1 with explanation]
  - [Pro 2 with explanation]
  - [Pro 3 with explanation]
  
  **Cons**:
  - [Con 1 with explanation]
  - [Con 2 with explanation]
  
  **Implementation Complexity**: [Low/Medium/High]
  [Explanation of complexity factors]
  
  **Resource Requirements**:
  [Details on resource needs]
  
  **Risk Assessment**:
  [Analysis of risks]
</details>
```

## ğŸ“Š COMPLEXITY-BASED SCALING

The template automatically scales documentation requirements based on task complexity level:

### Level 1-2 (Quick Fix/Enhancement)
- Simplified problem/solution
- Focus on implementation
- Minimal option exploration

### Level 3 (Feature Development)
- Multiple options required
- Analysis table with key criteria
- Implementation guidelines

### Level 4 (Enterprise Development)
- Comprehensive analysis
- Multiple viewpoints considered
- Detailed implementation plan
- Expanded verification criteria

## âœ… VERIFICATION PROTOCOL

Quality verification is condensed into a simple checklist:

```markdown
VERIFICATION:
[x] Problem clearly defined
[x] Multiple options considered
[x] Decision made with rationale
[x] Implementation guidance provided
```

## ğŸ”„ USAGE EXAMPLES

### Architecture Decision (Level 3)

```markdown
ğŸ“Œ CREATIVE PHASE START: Authentication System
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ PROBLEM
   Description: Design an authentication system for the application
   Requirements: Secure, scalable, supports SSO, easy to maintain
   Constraints: Must work with existing user database, <100ms response time

2ï¸âƒ£ OPTIONS
   Option A: JWT-based stateless auth - Simple token-based approach
   Option B: Session-based auth with Redis - Server-side session storage
   Option C: OAuth2 implementation - Delegated authorization framework

3ï¸âƒ£ ANALYSIS
   | Criterion | JWT | Sessions | OAuth2 |
   |-----------|-----|----------|--------|
   | Security | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
   | Scalability | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
   | Complexity | â­â­ | â­â­â­ | â­â­â­â­ |
   | Performance | â­â­â­â­â­ | â­â­â­ | â­â­â­ |
   
   Key Insights:
   - JWT offers best performance but limited revocation options
   - Sessions provide better security control but require more infrastructure
   - OAuth2 most complex but offers best integration possibilities

4ï¸âƒ£ DECISION
   Selected: Option A: JWT-based auth with refresh tokens
   Rationale: Best balance of performance and scalability while meeting security needs
   
5ï¸âƒ£ IMPLEMENTATION NOTES
   - Use HS256 algorithm for token signing
   - Implement short-lived access tokens (15min) with longer refresh tokens (7 days)
   - Store token blacklist in Redis for revocation capability
   - Add rate limiting on token endpoints

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Œ CREATIVE PHASE END
```

### Algorithm Decision (Level 2)

```markdown
ğŸ“Œ CREATIVE PHASE START: Search Algorithm
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ PROBLEM
   Description: Implement efficient text search for product catalog
   Requirements: Fast results, support for partial matches, case insensitive
   Constraints: Dataset < 10,000 items, must work in browser environment

2ï¸âƒ£ OPTIONS
   Option A: Simple regex search - Basic pattern matching
   Option B: Trie-based search - Prefix tree structure
   Option C: Fuzzy search with Levenshtein - Edit distance algorithm

3ï¸âƒ£ DECISION
   Selected: Option B: Trie-based search
   Rationale: Best performance for prefix searches with manageable memory usage
   
4ï¸âƒ£ IMPLEMENTATION NOTES
   - Use existing trie library
   - Preprocess text to lowercase during indexing
   - Implement letter-by-letter search for instant results
   - Add debounce (300ms) to prevent excessive rebuilding

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Œ CREATIVE PHASE END
```

## ğŸ† TOKEN EFFICIENCY BENEFITS

This template significantly reduces token usage by:

1. Focusing on essential information without unnecessary verbosity
2. Using compact tabular formats for comparisons
3. Implementing progressive disclosure for detailed information
4. Scaling documentation requirements by task complexity
5. Using visual indicators (emojis) for quick scanning

The template maintains the rigor of the creative process while improving token efficiency by approximately 60% over the previous format.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-checks/environment-check.mdc
`````
---
description: Process map for VAN QA environment validation
globs: van-qa-checks/environment-check.mdc
alwaysApply: false
---
# VAN QA: ENVIRONMENT VALIDATION

> **TL;DR:** This component verifies that the build environment is properly set up with required tools and permissions.

## 3ï¸âƒ£ ENVIRONMENT VALIDATION PROCESS

```mermaid
graph TD
    Start["Environment Validation"] --> CheckEnv["Check Build Environment"]
    CheckEnv --> VerifyBuildTools["Verify Build Tools"]
    VerifyBuildTools --> ToolsStatus{"Build Tools<br>Available?"}
    
    ToolsStatus -->|"Yes"| CheckPerms["Check Permissions<br>and Access"]
    ToolsStatus -->|"No"| InstallTools["Install Required<br>Build Tools"]
    InstallTools --> RetryTools["Retry Verification"]
    RetryTools --> ToolsStatus
    
    CheckPerms --> PermsStatus{"Permissions<br>Sufficient?"}
    PermsStatus -->|"Yes"| EnvSuccess["Environment Validated<br>âœ… PASS"]
    PermsStatus -->|"No"| FixPerms["Fix Permission<br>Issues"]
    FixPerms --> RetryPerms["Retry Permission<br>Check"]
    RetryPerms --> PermsStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style EnvSuccess fill:#10b981,stroke:#059669,color:white
    style ToolsStatus fill:#f6546a,stroke:#c30052,color:white
    style PermsStatus fill:#f6546a,stroke:#c30052,color:white
```

### Environment Validation Implementation:
```powershell
# Example: Validate environment for a web project
function Validate-Environment {
    $requiredTools = @(
        @{Name = "git"; Command = "git --version"},
        @{Name = "node"; Command = "node --version"},
        @{Name = "npm"; Command = "npm --version"}
    )
    
    $missingTools = @()
    $permissionIssues = @()
    
    # Check build tools
    foreach ($tool in $requiredTools) {
        try {
            Invoke-Expression $tool.Command | Out-Null
        } catch {
            $missingTools += $tool.Name
        }
    }
    
    # Check write permissions in project directory
    try {
        $testFile = ".__permission_test"
        New-Item -Path $testFile -ItemType File -Force | Out-Null
        Remove-Item -Path $testFile -Force
    } catch {
        $permissionIssues += "Current directory (write permission denied)"
    }
    
    # Check if port 3000 is available (commonly used for dev servers)
    try {
        $listener = New-Object System.Net.Sockets.TcpListener([System.Net.IPAddress]::Loopback, 3000)
        $listener.Start()
        $listener.Stop()
    } catch {
        $permissionIssues += "Port 3000 (already in use or access denied)"
    }
    
    # Display results
    if ($missingTools.Count -eq 0 -and $permissionIssues.Count -eq 0) {
        Write-Output "âœ… Environment validated successfully"
        return $true
    } else {
        if ($missingTools.Count -gt 0) {
            Write-Output "âŒ Missing tools: $($missingTools -join ', ')"
        }
        if ($permissionIssues.Count -gt 0) {
            Write-Output "âŒ Permission issues: $($permissionIssues -join ', ')"
        }
        return $false
    }
}
```

## ğŸ“‹ ENVIRONMENT VALIDATION CHECKPOINT

```
âœ“ CHECKPOINT: ENVIRONMENT VALIDATION
- All required build tools installed? [YES/NO]
- Project directory permissions sufficient? [YES/NO]
- Required ports available? [YES/NO]

â†’ If all YES: Continue to Minimal Build Test.
â†’ If any NO: Fix environment issues before continuing.
```

**Next Step (on PASS):** Load `van-qa-checks/build-test.mdc`.
**Next Step (on FAIL):** Check `van-qa-utils/common-fixes.mdc` for environment fixes.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-checks/file-verification.mdc
`````

`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-utils/rule-calling-guide.mdc
`````
---
description: Comprehensive guide for calling VAN QA rules
globs: van-qa-utils/rule-calling-guide.mdc
alwaysApply: false
---
# VAN QA: COMPREHENSIVE RULE CALLING GUIDE

> **TL;DR:** This reference guide shows how to properly call all VAN QA rules at the right time during the validation process.

## ğŸ” RULE CALLING BASICS

Remember these key principles:
1. Always use the `fetch_rules` tool to load rules
2. Use exact rule paths
3. Load components only when needed

## ğŸ“‹ MAIN QA ENTRY POINT

When user types "VAN QA", load the main entry point:

```
fetch_rules with "isolation_rules/visual-maps/van-qa-main"
```

## ğŸ“‹ VALIDATION CHECKS

Load these components sequentially during validation:

```
1. fetch_rules with "isolation_rules/visual-maps/van-qa-checks/dependency-check"
2. fetch_rules with "isolation_rules/visual-maps/van-qa-checks/config-check"
3. fetch_rules with "isolation_rules/visual-maps/van-qa-checks/environment-check"
4. fetch_rules with "isolation_rules/visual-maps/van-qa-checks/build-test"
```

## ğŸ“‹ UTILITY COMPONENTS

Load these when needed based on validation results:

```
- For reports: fetch_rules with "isolation_rules/visual-maps/van-qa-utils/reports"
- For fixes: fetch_rules with "isolation_rules/visual-maps/van-qa-utils/common-fixes"
- For transitions: fetch_rules with "isolation_rules/visual-maps/van-qa-utils/mode-transitions"
```

## âš ï¸ CRITICAL REMINDERS

Remember to call these rules at these specific points:
- ALWAYS load the main QA entry point when "VAN QA" is typed
- ALWAYS load dependency-check before starting validation
- ALWAYS load reports after completing validation
- ALWAYS load mode-transitions after successful validation
- ALWAYS load common-fixes after failed validation

## ğŸ”„ FULL VALIDATION SEQUENCE

Complete sequence for a QA validation process:

1. Load main entry: `isolation_rules/visual-maps/van-qa-main`
2. Load first check: `isolation_rules/visual-maps/van-qa-checks/dependency-check`
3. Load second check: `isolation_rules/visual-maps/van-qa-checks/config-check`
4. Load third check: `isolation_rules/visual-maps/van-qa-checks/environment-check`
5. Load fourth check: `isolation_rules/visual-maps/van-qa-checks/build-test`
6. If pass, load: `isolation_rules/visual-maps/van-qa-utils/reports`
7. If pass, load: `isolation_rules/visual-maps/van-qa-utils/mode-transitions` 
8. If fail, load: `isolation_rules/visual-maps/van-qa-utils/common-fixes`
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-utils/rule-calling-help.mdc
`````
---
description: Utility for remembering how to call VAN QA rules
globs: van-qa-utils/rule-calling-help.mdc
alwaysApply: false
---
# VAN QA: HOW TO CALL RULES

> **TL;DR:** This file provides examples and reminders on how to properly call VAN QA rules using the fetch_rules tool.

## ğŸš¨ RULE CALLING SYNTAX

Always use the `fetch_rules` tool with the correct syntax:

```
<function_calls>
<invoke name="fetch_rules">
<parameter name="rule_names">["isolation_rules/visual-maps/rule-name"]
</invoke>
</function_calls>
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-platform-detection.mdc
`````
---
description: Visual process map for VAN mode platform detection
globs: van-platform-detection.mdc
alwaysApply: false
---
# VAN MODE: PLATFORM DETECTION

> **TL;DR:** Detects the OS, determines path separators, and notes command adaptations required.

## ğŸŒ PLATFORM DETECTION PROCESS

```mermaid
graph TD
    PD["Platform Detection"] --> CheckOS["Detect Operating System"]
    CheckOS --> Win["Windows"]
    CheckOS --> Mac["macOS"]
    CheckOS --> Lin["Linux"]
    
    Win & Mac & Lin --> Adapt["Adapt Commands<br>for Platform"]
    
    Win --> WinPath["Path: Backslash (\\)"]
    Mac --> MacPath["Path: Forward Slash (/)"]
    Lin --> LinPath["Path: Forward Slash (/)"]
    
    Win --> WinCmd["Command Adaptations:<br>dir, icacls, etc."]
    Mac --> MacCmd["Command Adaptations:<br>ls, chmod, etc."]
    Lin --> LinCmd["Command Adaptations:<br>ls, chmod, etc."]
    
    WinPath & MacPath & LinPath --> PathCP["Path Separator<br>Checkpoint"]
    WinCmd & MacCmd & LinCmd --> CmdCP["Command<br>Checkpoint"]
    
    PathCP & CmdCP --> PlatformComplete["Platform Detection<br>Complete"]
    
    style PD fill:#4da6ff,stroke:#0066cc,color:white
    style PlatformComplete fill:#10b981,stroke:#059669,color:white
```

## ğŸ“‹ CHECKPOINT VERIFICATION TEMPLATE (Example)

```
âœ“ SECTION CHECKPOINT: PLATFORM DETECTION
- Operating System Detected? [YES/NO]
- Path Separator Confirmed? [YES/NO]
- Command Adaptations Noted? [YES/NO]

â†’ If all YES: Platform Detection Complete.
â†’ If any NO: Resolve before proceeding.
```

**Next Step:** Load and process `van-file-verification.mdc`.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-main.mdc
`````
---
description: Visual process map for VAN QA mode (Technical Validation Entry Point)
globs: van-qa-main.mdc
alwaysApply: false
---
# VAN MODE: QA TECHNICAL VALIDATION (Main Entry)

> **TL;DR:** This is the entry point for the QA validation process that executes *after* CREATIVE mode and *before* BUILD mode. It ensures technical requirements are met before implementation begins.

## ğŸ“£ HOW TO USE THESE QA RULES

To access any QA validation rule or component, use the `fetch_rules` tool with exact rule names:

```
// CRITICAL: Always use fetch_rules to load validation components
// For detailed examples and guidance, load:
// isolation_rules/visual-maps/van-qa-utils/rule-calling-guide
```

## ğŸš€ VAN QA MODE ACTIVATION

After completing CREATIVE mode, when the user types "VAN QA", respond:

```mermaid
graph TD
    UserQA["User Types: QA"] --> HighPriority["âš ï¸ HIGH PRIORITY COMMAND"]
    HighPriority --> CurrentTask["Pause Current Task/Process"]
    CurrentTask --> LoadQA["Load QA Main Map (This File)"]
    LoadQA --> RunQA["Execute QA Validation Process"]
    RunQA --> QAResults{"QA Results"}
    
    QAResults -->|"PASS"| ResumeFlow["Resume Prior Process Flow"]
    QAResults -->|"FAIL"| FixIssues["Fix Identified Issues"]
    FixIssues --> ReRunQA["Re-run QA Validation"]
    ReRunQA --> QAResults
    
    style UserQA fill:#f8d486,stroke:#e8b84d,color:black
    style HighPriority fill:#ff0000,stroke:#cc0000,color:white,stroke-width:3px
    style LoadQA fill:#4da6ff,stroke:#0066cc,color:white
    style RunQA fill:#4da6ff,stroke:#0066cc,color:white
    style QAResults fill:#f6546a,stroke:#c30052,color:white
```

### QA Interruption Rules

1. **Immediate Precedence:** `QA` command interrupts everything.
2. **Load & Execute:** Load this map (`van-qa-main.mdc`) and its components (see below).
3. **Remediation Priority:** Fixes take priority over pending mode switches.
4. **Resume:** On PASS, resume the previous flow.

```
âš ï¸ QA OVERRIDE ACTIVATED
All other processes paused
QA validation checks now running...
Any issues found MUST be remediated before continuing with normal process flow
```

## ğŸ” TECHNICAL VALIDATION OVERVIEW

Four-point validation process with selective loading:

```mermaid
graph TD
    VANQA["VAN QA MODE"] --> FourChecks["FOUR-POINT VALIDATION"]
    
    FourChecks --> DepCheck["1ï¸âƒ£ DEPENDENCY VERIFICATION
    Load: van-qa-checks/dependency-check.mdc"]
    DepCheck --> ConfigCheck["2ï¸âƒ£ CONFIGURATION VALIDATION
    Load: van-qa-checks/config-check.mdc"]
    ConfigCheck --> EnvCheck["3ï¸âƒ£ ENVIRONMENT VALIDATION
    Load: van-qa-checks/environment-check.mdc"]
    EnvCheck --> MinBuildCheck["4ï¸âƒ£ MINIMAL BUILD TEST
    Load: van-qa-checks/build-test.mdc"]
    
    MinBuildCheck --> ValidationResults{"All Checks<br>Passed?"}
    ValidationResults -->|"Yes"| SuccessReport["GENERATE SUCCESS REPORT
    Load: van-qa-utils/reports.mdc"]
    ValidationResults -->|"No"| FailureReport["GENERATE FAILURE REPORT
    Load: van-qa-utils/reports.mdc"]
    
    SuccessReport --> BUILD_Transition["Trigger BUILD Mode
    Load: van-qa-utils/mode-transitions.mdc"]
    FailureReport --> FixIssues["Fix Technical Issues
    Load: van-qa-utils/common-fixes.mdc"]
    FixIssues --> ReValidate["Re-validate (Re-run VAN QA)"]
    ReValidate --> FourChecks
    
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white
    style FourChecks fill:#f6546a,stroke:#c30052,color:white
    style ValidationResults fill:#f6546a,stroke:#c30052,color:white
    style BUILD_Transition fill:#10b981,stroke:#059669,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ”„ INTEGRATION WITH DESIGN DECISIONS

Reads Creative Phase outputs to inform validation:

```mermaid
graph TD
    Start["Read Design Decisions"] --> ReadCreative["Parse Creative Phase<br>Documentation"]
    ReadCreative --> ExtractTech["Extract Technology<br>Choices"]
    ExtractTech --> ExtractDeps["Extract Required<br>Dependencies"]
    ExtractDeps --> BuildValidationPlan["Build Validation<br>Plan"]
    BuildValidationPlan --> StartValidation["Start Four-Point<br>Validation Process"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ExtractTech fill:#f6546a,stroke:#c30052,color:white
    style BuildValidationPlan fill:#10b981,stroke:#059669,color:white
    style StartValidation fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ“‹ COMPONENT LOADING SEQUENCE

The QA validation process follows this selective loading sequence:

1. **Main Entry (This File)**: `van-qa-main.mdc`
2. **Validation Checks**:
   - `van-qa-checks/dependency-check.mdc`
   - `van-qa-checks/config-check.mdc`
   - `van-qa-checks/environment-check.mdc`
   - `van-qa-checks/build-test.mdc`
3. **Utilities (As Needed)**:
   - `van-qa-utils/reports.mdc`
   - `van-qa-utils/common-fixes.mdc`
   - `van-qa-utils/mode-transitions.mdc`

## ğŸ“‹ FINAL QA VALIDATION CHECKPOINT

```
âœ“ SECTION CHECKPOINT: QA VALIDATION
- Dependency Verification Passed? [YES/NO]
- Configuration Validation Passed? [YES/NO]
- Environment Validation Passed? [YES/NO]
- Minimal Build Test Passed? [YES/NO]

â†’ If all YES: Ready for BUILD mode transition.
â†’ If any NO: Fix identified issues and re-run VAN QA.
```

**Next Step (on PASS):** Trigger BUILD mode (load `van-qa-utils/mode-transitions.mdc`).
**Next Step (on FAIL):** Address issues (load `van-qa-utils/common-fixes.mdc`) and re-run `VAN QA`.
`````

## File: .cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc
`````
---
description: Visual process map for CREATIVE mode (Design Decisions)
globs: "**/creative*/**", "**/design*/**", "**/decision*/**"
alwaysApply: false
---

# CREATIVE MODE: DESIGN PROCESS MAP

> **TL;DR:** This visual map guides the CREATIVE mode process, focusing on structured design decision-making for components that require deeper exploration before implementation.

## ğŸ§­ CREATIVE MODE PROCESS FLOW

```mermaid
graph TD
    Start["START CREATIVE MODE"] --> ReadTasks["Read tasks.md<br>For Creative Requirements"]
    
    %% Initial Assessment
    ReadTasks --> VerifyPlan{"Plan Complete<br>& Creative Phases<br>Identified?"}
    VerifyPlan -->|"No"| ReturnPlan["Return to<br>PLAN Mode"]
    VerifyPlan -->|"Yes"| IdentifyPhases["Identify Creative<br>Phases Required"]
    
    %% Creative Phase Selection
    IdentifyPhases --> SelectPhase["Select Next<br>Creative Phase"]
    SelectPhase --> PhaseType{"Creative<br>Phase Type?"}
    
    %% Creative Phase Types
    PhaseType -->|"UI/UX<br>Design"| UIPhase["UI/UX CREATIVE PHASE<br>Core/creative-phase-uiux.md"]
    PhaseType -->|"Architecture<br>Design"| ArchPhase["ARCHITECTURE CREATIVE PHASE<br>Core/creative-phase-architecture.md"]
    PhaseType -->|"Data Model<br>Design"| DataPhase["DATA MODEL CREATIVE PHASE<br>Core/creative-phase-data.md"]
    PhaseType -->|"Algorithm<br>Design"| AlgoPhase["ALGORITHM CREATIVE PHASE<br>Core/creative-phase-algorithm.md"]
    
    %% UI/UX Creative Phase
    UIPhase --> UI_Problem["Define UI/UX<br>Problem"]
    UI_Problem --> UI_Research["Research UI<br>Patterns"]
    UI_Research --> UI_Options["Explore UI<br>Options"]
    UI_Options --> UI_Evaluate["Evaluate User<br>Experience"]
    UI_Evaluate --> UI_Decision["Make Design<br>Decision"]
    UI_Decision --> UI_Document["Document UI<br>Design"]
    
    %% Architecture Creative Phase
    ArchPhase --> Arch_Problem["Define Architecture<br>Challenge"]
    Arch_Problem --> Arch_Options["Explore Architecture<br>Options"]
    Arch_Options --> Arch_Analyze["Analyze Tradeoffs"]
    Arch_Analyze --> Arch_Decision["Make Architecture<br>Decision"]
    Arch_Decision --> Arch_Document["Document<br>Architecture"]
    Arch_Document --> Arch_Diagram["Create Architecture<br>Diagram"]
    
    %% Data Model Creative Phase
    DataPhase --> Data_Requirements["Define Data<br>Requirements"]
    Data_Requirements --> Data_Structure["Design Data<br>Structure"]
    Data_Structure --> Data_Relations["Define<br>Relationships"]
    Data_Relations --> Data_Validation["Design<br>Validation"]
    Data_Validation --> Data_Document["Document<br>Data Model"]
    
    %% Algorithm Creative Phase
    AlgoPhase --> Algo_Problem["Define Algorithm<br>Problem"]
    Algo_Problem --> Algo_Options["Explore Algorithm<br>Approaches"]
    Algo_Options --> Algo_Evaluate["Evaluate Time/Space<br>Complexity"]
    Algo_Evaluate --> Algo_Decision["Make Algorithm<br>Decision"]
    Algo_Decision --> Algo_Document["Document<br>Algorithm"]
    
    %% Documentation & Completion
    UI_Document & Arch_Diagram & Data_Document & Algo_Document --> CreateDoc["Create Creative<br>Phase Document"]
    CreateDoc --> UpdateTasks["Update tasks.md<br>with Decision"]
    UpdateTasks --> MorePhases{"More Creative<br>Phases?"}
    MorePhases -->|"Yes"| SelectPhase
    MorePhases -->|"No"| VerifyComplete["Verify All<br>Phases Complete"]
    VerifyComplete --> NotifyComplete["Signal Creative<br>Phases Complete"]
```

## ğŸ“‹ CREATIVE PHASE DOCUMENT FORMAT

Each creative phase should produce a document with this structure:

```mermaid
graph TD
    subgraph "Creative Phase Document"
        Header["ğŸ¨ CREATIVE PHASE: [TYPE]"]
        Problem["PROBLEM STATEMENT<br>Clear definition of the problem"]
        Options["OPTIONS ANALYSIS<br>Multiple approaches considered"]
        Pros["PROS & CONS<br>Tradeoffs for each option"]
        Decision["DECISION<br>Selected approach + rationale"]
        Impl["IMPLEMENTATION PLAN<br>Steps to implement the decision"]
        Diagram["VISUALIZATION<br>Diagrams of the solution"]
    end
    
    Header --> Problem --> Options --> Pros --> Decision --> Impl --> Diagram
```

## ğŸ” CREATIVE TYPES AND APPROACHES

```mermaid
graph TD
    subgraph "UI/UX Design"
        UI1["User Flow<br>Analysis"]
        UI2["Component<br>Hierarchy"]
        UI3["Interaction<br>Patterns"]
        UI4["Visual Design<br>Principles"]
    end
    
    subgraph "Architecture Design"
        A1["Component<br>Structure"]
        A2["Data Flow<br>Patterns"]
        A3["Interface<br>Design"]
        A4["System<br>Integration"]
    end
    
    subgraph "Data Model Design"
        D1["Entity<br>Relationships"]
        D2["Schema<br>Design"]
        D3["Validation<br>Rules"]
        D4["Query<br>Optimization"]
    end
    
    subgraph "Algorithm Design"
        AL1["Complexity<br>Analysis"]
        AL2["Efficiency<br>Optimization"]
        AL3["Edge Case<br>Handling"]
        AL4["Scaling<br>Considerations"]
    end
```

## ğŸ“Š REQUIRED FILE STATE VERIFICATION

Before creative phase work can begin, verify file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md has<br>planning complete?"}
    
    CheckTasks -->|"No"| ErrorPlan["ERROR:<br>Return to PLAN Mode"]
    CheckTasks -->|"Yes"| CheckCreative{"Creative phases<br>identified?"}
    
    CheckCreative -->|"No"| ErrorCreative["ERROR:<br>Return to PLAN Mode"]
    CheckCreative -->|"Yes"| ReadyCreative["Ready for<br>Creative Phase"]
```

## ğŸ“‹ OPTIONS ANALYSIS TEMPLATE

For each creative phase, analyze multiple options:

```
## OPTIONS ANALYSIS

### Option 1: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]

### Option 2: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]

### Option 3: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]
```

## ğŸ¨ CREATIVE PHASE MARKERS

Use these visual markers for creative phases:

```
ğŸ¨ğŸ¨ğŸ¨ ENTERING CREATIVE PHASE: [TYPE] ğŸ¨ğŸ¨ğŸ¨

[Creative phase content]

ğŸ¨ CREATIVE CHECKPOINT: [Milestone]

[Additional content]

ğŸ¨ğŸ¨ğŸ¨ EXITING CREATIVE PHASE - DECISION MADE ğŸ¨ğŸ¨ğŸ¨
```

## ğŸ“Š CREATIVE PHASE VERIFICATION CHECKLIST

```
âœ“ CREATIVE PHASE VERIFICATION
- Problem clearly defined? [YES/NO]
- Multiple options considered (3+)? [YES/NO]
- Pros/cons documented for each option? [YES/NO]
- Decision made with clear rationale? [YES/NO]
- Implementation plan included? [YES/NO]
- Visualization/diagrams created? [YES/NO]
- tasks.md updated with decision? [YES/NO]

â†’ If all YES: Creative phase complete
â†’ If any NO: Complete missing elements
```

## ğŸ”„ MODE TRANSITION NOTIFICATION

When all creative phases are complete, notify user with:

```
## CREATIVE PHASES COMPLETE

âœ… All required design decisions made
âœ… Creative phase documents created
âœ… tasks.md updated with decisions
âœ… Implementation plan updated

â†’ NEXT RECOMMENDED MODE: IMPLEMENT MODE
```
`````

## File: .cursor/rules/isolation_rules/visual-maps/implement-mode-map.mdc
`````
---
description: Visual process map for BUILD mode (Code Implementation)
globs: implementation-mode-map.mdc
alwaysApply: false
---

# BUILD MODE: CODE EXECUTION PROCESS MAP

> **TL;DR:** This visual map guides the BUILD mode process, focusing on efficient code implementation based on the planning and creative phases, with proper command execution and progress tracking.

## ğŸ§­ BUILD MODE PROCESS FLOW

```mermaid
graph TD
    Start["START BUILD MODE"] --> ReadDocs["Read Reference Documents<br>Core/command-execution.md"]
    
    %% Initialization
    ReadDocs --> CheckLevel{"Determine<br>Complexity Level<br>from tasks.md"}
    
    %% Level 1 Implementation
    CheckLevel -->|"Level 1<br>Quick Bug Fix"| L1Process["LEVEL 1 PROCESS<br>Level1/quick-bug-workflow.md"]
    L1Process --> L1Review["Review Bug<br>Report"]
    L1Review --> L1Examine["Examine<br>Relevant Code"]
    L1Examine --> L1Fix["Implement<br>Targeted Fix"]
    L1Fix --> L1Test["Test<br>Fix"]
    L1Test --> L1Update["Update<br>tasks.md"]
    
    %% Level 2 Implementation
    CheckLevel -->|"Level 2<br>Simple Enhancement"| L2Process["LEVEL 2 PROCESS<br>Level2/enhancement-workflow.md"]
    L2Process --> L2Review["Review Build<br>Plan"]
    L2Review --> L2Examine["Examine Relevant<br>Code Areas"]
    L2Examine --> L2Implement["Implement Changes<br>Sequentially"]
    L2Implement --> L2Test["Test<br>Changes"]
    L2Test --> L2Update["Update<br>tasks.md"]
    
    %% Level 3-4 Implementation
    CheckLevel -->|"Level 3-4<br>Feature/System"| L34Process["LEVEL 3-4 PROCESS<br>Level3/feature-workflow.md<br>Level4/system-workflow.md"]
    L34Process --> L34Review["Review Plan &<br>Creative Decisions"]
    L34Review --> L34Phase{"Creative Phase<br>Documents<br>Complete?"}
    
    L34Phase -->|"No"| L34Error["ERROR:<br>Return to CREATIVE Mode"]
    L34Phase -->|"Yes"| L34DirSetup["Create Directory<br>Structure"]
    L34DirSetup --> L34VerifyDirs["VERIFY Directories<br>Created Successfully"]
    L34VerifyDirs --> L34Implementation["Build<br>Phase"]
    
    %% Implementation Phases
    L34Implementation --> L34Phase1["Phase 1<br>Build"]
    L34Phase1 --> L34VerifyFiles["VERIFY Files<br>Created Successfully"]
    L34VerifyFiles --> L34Test1["Test<br>Phase 1"]
    L34Test1 --> L34Document1["Document<br>Phase 1"]
    L34Document1 --> L34Next1{"Next<br>Phase?"}
    L34Next1 -->|"Yes"| L34Implementation
    
    L34Next1 -->|"No"| L34Integration["Integration<br>Testing"]
    L34Integration --> L34Document["Document<br>Integration Points"]
    L34Document --> L34Update["Update<br>tasks.md"]
    
    %% Command Execution
    L1Fix & L2Implement & L34Phase1 --> CommandExec["COMMAND EXECUTION<br>Core/command-execution.md"]
    CommandExec --> DocCommands["Document Commands<br>& Results"]
    
    %% Completion & Transition
    L1Update & L2Update & L34Update --> VerifyComplete["Verify Build<br>Complete"]
    VerifyComplete --> UpdateProgress["Update progress.md<br>with Status"]
    UpdateProgress --> Transition["NEXT MODE:<br>REFLECT MODE"]
```

## ğŸ“‹ REQUIRED FILE STATE VERIFICATION

Before implementation can begin, verify file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md has<br>planning complete?"}
    
    CheckTasks -->|"No"| ErrorPlan["ERROR:<br>Return to PLAN Mode"]
    CheckTasks -->|"Yes"| CheckLevel{"Task<br>Complexity?"}
    
    CheckLevel -->|"Level 1"| L1Ready["Ready for<br>Implementation"]
    
    CheckLevel -->|"Level 2"| L2Ready["Ready for<br>Implementation"]
    
    CheckLevel -->|"Level 3-4"| CheckCreative{"Creative phases<br>required?"}
    
    CheckCreative -->|"No"| L34Ready["Ready for<br>Implementation"]
    CheckCreative -->|"Yes"| VerifyCreative{"Creative phases<br>completed?"}
    
    VerifyCreative -->|"No"| ErrorCreative["ERROR:<br>Return to CREATIVE Mode"]
    VerifyCreative -->|"Yes"| L34Ready
```

## ğŸ”„ FILE SYSTEM VERIFICATION PROCESS

```mermaid
graph TD
    Start["Start File<br>Verification"] --> CheckDir["Check Directory<br>Structure"]
    CheckDir --> DirResult{"Directories<br>Exist?"}
    
    DirResult -->|"No"| ErrorDir["âŒ ERROR:<br>Missing Directories"]
    DirResult -->|"Yes"| CheckFiles["Check Each<br>Created File"]
    
    ErrorDir --> FixDir["Fix Directory<br>Structure"]
    FixDir --> CheckDir
    
    CheckFiles --> FileResult{"All Files<br>Exist?"}
    FileResult -->|"No"| ErrorFile["âŒ ERROR:<br>Missing/Wrong Path Files"]
    FileResult -->|"Yes"| Complete["âœ… Verification<br>Complete"]
    
    ErrorFile --> FixFile["Fix File Paths<br>or Recreate Files"]
    FixFile --> CheckFiles
```

## ğŸ“‹ DIRECTORY VERIFICATION STEPS

Before beginning any file creation:

```
âœ“ DIRECTORY VERIFICATION PROCEDURE
1. Create all directories first before any files
2. Use ABSOLUTE paths: /full/path/to/directory
3. Verify each directory after creation:
   ls -la /full/path/to/directory     # Linux/Mac
   dir "C:\full\path\to\directory"    # Windows
4. Document directory structure in progress.md
5. Only proceed to file creation AFTER verifying ALL directories exist
```

## ğŸ“‹ FILE CREATION VERIFICATION

After creating files:

```
âœ“ FILE VERIFICATION PROCEDURE
1. Use ABSOLUTE paths for all file operations: /full/path/to/file.ext
2. Verify each file creation was successful:
   ls -la /full/path/to/file.ext     # Linux/Mac
   dir "C:\full\path\to\file.ext"    # Windows 
3. If verification fails:
   a. Check for path resolution issues
   b. Verify directory exists
   c. Try creating with corrected path
   d. Recheck file exists after correction
4. Document all file paths in progress.md
```

## ğŸ”„ COMMAND EXECUTION WORKFLOW

```mermaid
graph TD
    Start["Command<br>Execution"] --> Analyze["Analyze Command<br>Requirements"]
    Analyze --> Complexity{"Command<br>Complexity?"}
    
    Complexity -->|"Simple"| Simple["Execute<br>Single Command"]
    Complexity -->|"Moderate"| Chain["Use Efficient<br>Command Chaining"]
    Complexity -->|"Complex"| Break["Break Into<br>Logical Steps"]
    
    Simple & Chain & Break --> Verify["Verify<br>Results"]
    Verify --> Document["Document<br>Command & Result"]
    Document --> Next["Next<br>Command"]
```

## ğŸ“‹ LEVEL-SPECIFIC BUILD APPROACHES

```mermaid
graph TD
    subgraph "Level 1: Quick Bug Fix"
        L1A["Targeted Code<br>Examination"]
        L1B["Minimal<br>Change Scope"]
        L1C["Direct<br>Fix"]
        L1D["Verify<br>Fix"]
    end
    
    subgraph "Level 2: Enhancement"
        L2A["Sequential<br>Build"]
        L2B["Contained<br>Changes"]
        L2C["Standard<br>Testing"]
        L2D["Component<br>Documentation"]
    end
    
    subgraph "Level 3-4: Feature/System"
        L3A["Directory<br>Structure First"]
        L3B["Verify Dirs<br>Before Files"]
        L3C["Phased<br>Build"]
        L3D["Verify Files<br>After Creation"]
        L3E["Integration<br>Testing"]
        L3F["Detailed<br>Documentation"]
    end
    
    L1A --> L1B --> L1C --> L1D
    L2A --> L2B --> L2C --> L2D
    L3A --> L3B --> L3C --> L3D --> L3E --> L3F
```

## ğŸ“ BUILD DOCUMENTATION FORMAT

Document builds with:

```
## Build: [Component/Feature]

### Approach
[Brief description of build approach]

### Directory Structure
- [/absolute/path/to/dir1/]: [Purpose]
- [/absolute/path/to/dir2/]: [Purpose]

### Code Changes
- [/absolute/path/to/file1.ext]: [Description of changes]
- [/absolute/path/to/file2.ext]: [Description of changes]

### Verification Steps
- [âœ“] Directory structure created and verified
- [âœ“] All files created in correct locations
- [âœ“] File content verified

### Commands Executed
```
[Command 1]
[Result]
```

```
[Command 2]
[Result]
```

### Testing
- [Test 1]: [Result]
- [Test 2]: [Result]

### Status
- [x] Build complete
- [x] Testing performed
- [x] File verification completed
- [ ] Documentation updated
```

## ğŸ“Š TASKS.MD UPDATE FORMAT

During the build process, update tasks.md with progress:

```
## Status
- [x] Initialization complete
- [x] Planning complete
[For Level 3-4:]
- [x] Creative phases complete
- [x] Directory structure created and verified
- [x] [Built component 1]
- [x] [Built component 2]
- [ ] [Remaining component]

## Build Progress
- [Component 1]: Complete
  - Files: [/absolute/path/to/files]
  - [Details about implementation]
- [Component 2]: Complete
  - Files: [/absolute/path/to/files]
  - [Details about implementation]
- [Component 3]: In Progress
  - [Current status]
```

## ğŸ“‹ PROGRESS.MD UPDATE FORMAT

Update progress.md with:

```
# Build Progress

## Directory Structure
- [/absolute/path/to/dir1/]: Created and verified
- [/absolute/path/to/dir2/]: Created and verified

## [Date]: [Component/Feature] Built
- **Files Created**: 
  - [/absolute/path/to/file1.ext]: Verified
  - [/absolute/path/to/file2.ext]: Verified
- **Key Changes**: 
  - [Change 1]
  - [Change 2]
- **Testing**: [Test results]
- **Next Steps**: [What comes next]
```

## ğŸ“Š BUILD VERIFICATION CHECKLIST

```
âœ“ BUILD VERIFICATION
- Directory structure created correctly? [YES/NO]
- All files created in correct locations? [YES/NO]
- All file paths verified with absolute paths? [YES/NO]
- All planned changes implemented? [YES/NO]
- Testing performed for all changes? [YES/NO]
- Code follows project standards? [YES/NO]
- Edge cases handled appropriately? [YES/NO]
- Build documented with absolute paths? [YES/NO]
- tasks.md updated with progress? [YES/NO]
- progress.md updated with details? [YES/NO]

â†’ If all YES: Build complete - ready for REFLECT mode
â†’ If any NO: Complete missing build elements
```

## ğŸ”„ MODE TRANSITION NOTIFICATION

When the build is complete, notify user with:

```
## BUILD COMPLETE

âœ… Directory structure verified
âœ… All files created in correct locations
âœ… All planned changes implemented
âœ… Testing performed successfully
âœ… tasks.md updated with status
âœ… progress.md updated with details

â†’ NEXT RECOMMENDED MODE: REFLECT MODE
```
`````

## File: .cursor/rules/isolation_rules/visual-maps/plan-mode-map.mdc
`````
---
description: Visual process map for PLAN mode (Code Implementation)
globs: plan-mode-map.mdc
alwaysApply: false
---

# PLAN MODE: TASK PLANNING PROCESS MAP

> **TL;DR:** This visual map guides the PLAN mode process, focusing on creating detailed implementation plans based on the complexity level determined during initialization, with mandatory technology validation before implementation.

## ğŸ§­ PLAN MODE PROCESS FLOW

```mermaid
graph TD
    Start["START PLANNING"] --> ReadTasks["Read tasks.md<br>Core/task-tracking.md"]
    
    %% Complexity Level Determination
    ReadTasks --> CheckLevel{"Determine<br>Complexity Level"}
    CheckLevel -->|"Level 2"| Level2["LEVEL 2 PLANNING<br>Level2/enhancement-planning.md"]
    CheckLevel -->|"Level 3"| Level3["LEVEL 3 PLANNING<br>Level3/feature-planning.md"]
    CheckLevel -->|"Level 4"| Level4["LEVEL 4 PLANNING<br>Level4/system-planning.md"]
    
    %% Level 2 Planning
    Level2 --> L2Review["Review Code<br>Structure"]
    L2Review --> L2Document["Document<br>Planned Changes"]
    L2Document --> L2Challenges["Identify<br>Challenges"]
    L2Challenges --> L2Checklist["Create Task<br>Checklist"]
    L2Checklist --> L2Update["Update tasks.md<br>with Plan"]
    L2Update --> L2Tech["TECHNOLOGY<br>VALIDATION"]
    L2Tech --> L2Verify["Verify Plan<br>Completeness"]
    
    %% Level 3 Planning
    Level3 --> L3Review["Review Codebase<br>Structure"]
    L3Review --> L3Requirements["Document Detailed<br>Requirements"]
    L3Requirements --> L3Components["Identify Affected<br>Components"]
    L3Components --> L3Plan["Create Comprehensive<br>Implementation Plan"]
    L3Plan --> L3Challenges["Document Challenges<br>& Solutions"]
    L3Challenges --> L3Update["Update tasks.md<br>with Plan"]
    L3Update --> L3Tech["TECHNOLOGY<br>VALIDATION"]
    L3Tech --> L3Flag["Flag Components<br>Requiring Creative"]
    L3Flag --> L3Verify["Verify Plan<br>Completeness"]
    
    %% Level 4 Planning
    Level4 --> L4Analysis["Codebase Structure<br>Analysis"]
    L4Analysis --> L4Requirements["Document Comprehensive<br>Requirements"]
    L4Requirements --> L4Diagrams["Create Architectural<br>Diagrams"]
    L4Diagrams --> L4Subsystems["Identify Affected<br>Subsystems"]
    L4Subsystems --> L4Dependencies["Document Dependencies<br>& Integration Points"]
    L4Dependencies --> L4Plan["Create Phased<br>Implementation Plan"]
    L4Plan --> L4Update["Update tasks.md<br>with Plan"]
    L4Update --> L4Tech["TECHNOLOGY<br>VALIDATION"]
    L4Tech --> L4Flag["Flag Components<br>Requiring Creative"]
    L4Flag --> L4Verify["Verify Plan<br>Completeness"]
    
    %% Technology Validation Gate - NEW
    L2Tech & L3Tech & L4Tech --> TechGate["â›” TECHNOLOGY<br>VALIDATION GATE"]
    TechGate --> TechSelection["Document Technology<br>Stack Selection"]
    TechSelection --> TechHelloWorld["Create Hello World<br>Proof of Concept"]
    TechHelloWorld --> TechDependencies["Verify Required<br>Dependencies"]
    TechDependencies --> TechConfig["Validate Build<br>Configuration"]
    TechConfig --> TechBuild["Complete Test<br>Build"]
    TechBuild --> TechVerify["â›” TECHNOLOGY<br>CHECKPOINT"]
    
    %% Verification & Completion
    L2Verify & L3Verify & L4Verify & TechVerify --> CheckCreative{"Creative<br>Phases<br>Required?"}
    
    %% Mode Transition
    CheckCreative -->|"Yes"| RecCreative["NEXT MODE:<br>CREATIVE MODE"]
    CheckCreative -->|"No"| RecImplement["NEXT MODE:<br>IMPLEMENT MODE"]
    
    %% Style for Technology Gate
    style TechGate fill:#ff5555,stroke:#dd3333,color:white,stroke-width:3px
    style TechVerify fill:#ff5555,stroke:#dd3333,color:white,stroke-width:3px
    style TechSelection fill:#4da6ff,stroke:#0066cc,color:white
    style TechHelloWorld fill:#4da6ff,stroke:#0066cc,color:white
    style TechDependencies fill:#4da6ff,stroke:#0066cc,color:white
    style TechConfig fill:#4da6ff,stroke:#0066cc,color:white
    style TechBuild fill:#4da6ff,stroke:#0066cc,color:white
```

## ğŸ“‹ LEVEL-SPECIFIC PLANNING APPROACHES

```mermaid
graph TD
    subgraph "Level 2: Enhancement"
        L2A["Basic Requirements<br>Analysis"]
        L2B["Simple Component<br>Identification"]
        L2C["Linear Implementation<br>Plan"]
        L2D["Basic Checklist<br>Creation"]
    end
    
    subgraph "Level 3: Feature"
        L3A["Detailed Requirements<br>Analysis"]
        L3B["Component Mapping<br>with Dependencies"]
        L3C["Multi-Phase<br>Implementation Plan"]
        L3D["Comprehensive<br>Checklist"]
        L3E["Creative Phase<br>Identification"]
    end
    
    subgraph "Level 4: System"
        L4A["Architectural<br>Requirements Analysis"]
        L4B["System Component<br>Mapping"]
        L4C["Subsystem<br>Integration Plan"]
        L4D["Phased Implementation<br>Strategy"]
        L4E["Risk Assessment<br>& Mitigation"]
        L4F["Multiple Creative<br>Phase Requirements"]
    end
    
    L2A --> L2B --> L2C --> L2D
    L3A --> L3B --> L3C --> L3D --> L3E
    L4A --> L4B --> L4C --> L4D --> L4E --> L4F
```

## ğŸ”§ TECHNOLOGY VALIDATION WORKFLOW

```mermaid
graph TD
    Start["Technology<br>Validation Start"] --> Select["Technology<br>Stack Selection"]
    Select --> Document["Document Chosen<br>Technologies"]
    Document --> POC["Create Minimal<br>Proof of Concept"]
    POC --> Build["Verify Build<br>Process Works"]
    Build --> Dependencies["Validate All<br>Dependencies"]
    Dependencies --> Config["Confirm Configuration<br>Files Are Correct"]
    Config --> Test["Complete Test<br>Build/Run"]
    Test --> Success{"All Checks<br>Pass?"}
    
    Success -->|"Yes"| Ready["Ready for<br>Implementation"]
    Success -->|"No"| Fix["Fix Technology<br>Issues"]
    Fix --> Document
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style POC fill:#4da6ff,stroke:#0066cc,color:white
    style Success fill:#ff5555,stroke:#dd3333,color:white
    style Fix fill:#ff5555,stroke:#dd3333,color:white
    style Ready fill:#10b981,stroke:#059669,color:white
```

## ğŸ“Š REQUIRED FILE STATE VERIFICATION

Before planning can begin, verify the file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md<br>initialized?"}
    
    CheckTasks -->|"No"| ErrorTasks["ERROR:<br>Return to VAN Mode"]
    CheckTasks -->|"Yes"| CheckActive{"activeContext.md<br>exists?"}
    
    CheckActive -->|"No"| ErrorActive["ERROR:<br>Return to VAN Mode"]
    CheckActive -->|"Yes"| ReadyPlan["Ready for<br>Planning"]
```

## ğŸ“ TASKS.MD UPDATE FORMAT

During planning, update tasks.md with this structure:

```
# Task: [Task name]

## Description
[Detailed description]

## Complexity
Level: [2/3/4]
Type: [Enhancement/Feature/Complex System]

## Technology Stack
- Framework: [Selected framework]
- Build Tool: [Selected build tool]
- Language: [Selected language]
- Storage: [Selected storage mechanism]

## Technology Validation Checkpoints
- [ ] Project initialization command verified
- [ ] Required dependencies identified and installed
- [ ] Build configuration validated
- [ ] Hello world verification completed
- [ ] Test build passes successfully

## Status
- [x] Initialization complete
- [x] Planning complete
- [ ] Technology validation complete
- [ ] [Implementation steps]

## Implementation Plan
1. [Step 1]
   - [Subtask 1.1]
   - [Subtask 1.2]
2. [Step 2]
   - [Subtask 2.1]
   - [Subtask 2.2]

## Creative Phases Required
- [ ] [Component 1] Design
- [ ] [Component 2] Architecture
- [ ] [Component 3] Data Model

## Dependencies
- [Dependency 1]
- [Dependency 2]

## Challenges & Mitigations
- [Challenge 1]: [Mitigation strategy]
- [Challenge 2]: [Mitigation strategy]
```

## ğŸ“‹ CREATIVE PHASE IDENTIFICATION

For Level 3-4 tasks, identify components requiring creative phases:

```mermaid
graph TD
    Start["Creative Phase<br>Identification"] --> CheckComp{"Component<br>Analysis"}
    
    CheckComp --> UI["UI/UX<br>Components"]
    CheckComp --> Data["Data Model<br>Components"]
    CheckComp --> Arch["Architecture<br>Components"]
    CheckComp --> Algo["Algorithm<br>Components"]
    
    UI & Data & Arch & Algo --> Decision{"Design Decisions<br>Required?"}
    
    Decision -->|"Yes"| Flag["Flag for<br>Creative Phase"]
    Decision -->|"No"| Skip["Standard<br>Implementation"]
    
    Flag --> Document["Document in<br>tasks.md"]
```

## ğŸ“Š TECHNOLOGY VALIDATION CHECKLIST

```
âœ“ TECHNOLOGY VALIDATION CHECKLIST
- Technology stack clearly defined? [YES/NO]
- Project initialization command documented? [YES/NO]
- Required dependencies identified? [YES/NO]
- Minimal proof of concept created? [YES/NO]
- Hello world build/run successful? [YES/NO]
- Configuration files validated? [YES/NO]
- Test build completes successfully? [YES/NO]

â†’ If all YES: Technology validation complete - ready for next phase
â†’ If any NO: Resolve technology issues before proceeding
```

## ğŸ“Š PLAN VERIFICATION CHECKLIST

```
âœ“ PLAN VERIFICATION CHECKLIST
- Requirements clearly documented? [YES/NO]
- Technology stack validated? [YES/NO]
- Affected components identified? [YES/NO]
- Implementation steps detailed? [YES/NO]
- Dependencies documented? [YES/NO]
- Challenges & mitigations addressed? [YES/NO]
- Creative phases identified (Level 3-4)? [YES/NO/NA]
- tasks.md updated with plan? [YES/NO]

â†’ If all YES: Planning complete - ready for next mode
â†’ If any NO: Complete missing plan elements
```

## ğŸ”„ MODE TRANSITION NOTIFICATION

When planning is complete, notify user with:

```
## PLANNING COMPLETE

âœ… Implementation plan created
âœ… Technology stack validated
âœ… tasks.md updated with plan
âœ… Challenges and mitigations documented
[âœ… Creative phases identified (for Level 3-4)]

â†’ NEXT RECOMMENDED MODE: [CREATIVE/IMPLEMENT] MODE
`````

## File: .cursor/rules/isolation_rules/visual-maps/reflect-mode-map.mdc
`````
---
description: Visual process map for REFLECT mode (Task Reflection)
globs: "**/reflect*/**", "**/review*/**", "**/retrospect*/**"
alwaysApply: false
---

# REFLECT MODE: TASK REVIEW PROCESS MAP

> **TL;DR:** This visual map guides the REFLECT mode process, focusing on structured review of the implementation, documenting lessons learned, and preparing insights for future reference.

## ğŸ§­ REFLECT MODE PROCESS FLOW

```mermaid
graph TD
    Start["START REFLECT MODE"] --> ReadTasks["Read tasks.md<br>and progress.md"]
    
    %% Initial Assessment
    ReadTasks --> VerifyImplement{"Implementation<br>Complete?"}
    VerifyImplement -->|"No"| ReturnImplement["Return to<br>IMPLEMENT Mode"]
    VerifyImplement -->|"Yes"| AssessLevel{"Determine<br>Complexity Level"}
    
    %% Level-Based Reflection
    AssessLevel -->|"Level 1"| L1Reflect["LEVEL 1 REFLECTION<br>Level1/reflection-basic.md"]
    AssessLevel -->|"Level 2"| L2Reflect["LEVEL 2 REFLECTION<br>Level2/reflection-standard.md"]
    AssessLevel -->|"Level 3"| L3Reflect["LEVEL 3 REFLECTION<br>Level3/reflection-comprehensive.md"]
    AssessLevel -->|"Level 4"| L4Reflect["LEVEL 4 REFLECTION<br>Level4/reflection-advanced.md"]
    
    %% Level 1 Reflection (Quick)
    L1Reflect --> L1Review["Review<br>Bug Fix"]
    L1Review --> L1Document["Document<br>Solution"]
    L1Document --> L1Update["Update<br>tasks.md"]
    
    %% Level 2 Reflection (Standard)
    L2Reflect --> L2Review["Review<br>Enhancement"]
    L2Review --> L2WWW["Document<br>What Went Well"]
    L2WWW --> L2Challenges["Document<br>Challenges"]
    L2Challenges --> L2Lessons["Document<br>Lessons Learned"]
    L2Lessons --> L2Update["Update<br>tasks.md"]
    
    %% Level 3-4 Reflection (Comprehensive)
    L3Reflect & L4Reflect --> L34Review["Review Implementation<br>& Creative Phases"]
    L34Review --> L34Plan["Compare Against<br>Original Plan"]
    L34Plan --> L34WWW["Document<br>What Went Well"]
    L34WWW --> L34Challenges["Document<br>Challenges"]
    L34Challenges --> L34Lessons["Document<br>Lessons Learned"]
    L34Lessons --> L34ImproveProcess["Document Process<br>Improvements"]
    L34ImproveProcess --> L34Update["Update<br>tasks.md"]
    
    %% Completion & Transition
    L1Update & L2Update & L34Update --> CreateReflection["Create<br>reflection.md"]
    CreateReflection --> UpdateSystem["Update System<br>Documentation"]
    UpdateSystem --> Transition["NEXT MODE:<br>ARCHIVE MODE"]
```

## ğŸ“‹ REFLECTION STRUCTURE

The reflection should follow this structured format:

```mermaid
graph TD
    subgraph "Reflection Document Structure"
        Header["# TASK REFLECTION: [Task Name]"]
        Summary["## SUMMARY<br>Brief summary of completed task"]
        WWW["## WHAT WENT WELL<br>Successful aspects of implementation"]
        Challenges["## CHALLENGES<br>Difficulties encountered during implementation"]
        Lessons["## LESSONS LEARNED<br>Key insights gained from the experience"]
        ProcessImp["## PROCESS IMPROVEMENTS<br>How to improve for future tasks"]
        TechImp["## TECHNICAL IMPROVEMENTS<br>Better approaches for similar tasks"]
        NextSteps["## NEXT STEPS<br>Follow-up actions or future work"]
    end
    
    Header --> Summary --> WWW --> Challenges --> Lessons --> ProcessImp --> TechImp --> NextSteps
```

## ğŸ“Š REQUIRED FILE STATE VERIFICATION

Before reflection can begin, verify file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md has<br>implementation<br>complete?"}
    
    CheckTasks -->|"No"| ErrorImplement["ERROR:<br>Return to IMPLEMENT Mode"]
    CheckTasks -->|"Yes"| CheckProgress{"progress.md<br>has implementation<br>details?"}
    
    CheckProgress -->|"No"| ErrorProgress["ERROR:<br>Update progress.md first"]
    CheckProgress -->|"Yes"| ReadyReflect["Ready for<br>Reflection"]
```

## ğŸ” IMPLEMENTATION REVIEW APPROACH

```mermaid
graph TD
    subgraph "Implementation Review"
        Original["Review Original<br>Requirements"]
        Plan["Compare Against<br>Implementation Plan"]
        Actual["Assess Actual<br>Implementation"]
        Creative["Review Creative<br>Phase Decisions"]
        Changes["Identify Deviations<br>from Plan"]
        Results["Evaluate<br>Results"]
    end
    
    Original --> Plan --> Actual
    Plan --> Creative --> Changes
    Actual --> Results
    Changes --> Results
```

## ğŸ“ REFLECTION DOCUMENT TEMPLATES

### Level 1 (Basic) Reflection
```
# Bug Fix Reflection: [Bug Name]

## Summary
[Brief description of the bug and solution]

## Implementation
[Description of the fix implemented]

## Testing
[Description of testing performed]

## Additional Notes
[Any other relevant information]
```

### Levels 2-4 (Comprehensive) Reflection
```
# Task Reflection: [Task Name]

## Summary
[Brief summary of the task and what was achieved]

## What Went Well
- [Success point 1]
- [Success point 2]
- [Success point 3]

## Challenges
- [Challenge 1]: [How it was addressed]
- [Challenge 2]: [How it was addressed]
- [Challenge 3]: [How it was addressed]

## Lessons Learned
- [Lesson 1]
- [Lesson 2]
- [Lesson 3]

## Process Improvements
- [Process improvement 1]
- [Process improvement 2]

## Technical Improvements
- [Technical improvement 1]
- [Technical improvement 2]

## Next Steps
- [Follow-up task 1]
- [Follow-up task 2]
```

## ğŸ“Š REFLECTION QUALITY METRICS

```mermaid
graph TD
    subgraph "Reflection Quality Metrics"
        Specific["Specific<br>Not general or vague"]
        Actionable["Actionable<br>Provides clear direction"]
        Honest["Honest<br>Acknowledges successes and failures"]
        Forward["Forward-Looking<br>Focuses on future improvement"]
        Evidence["Evidence-Based<br>Based on concrete examples"]
    end
```

## ğŸ“‹ TASKS.MD UPDATE FORMAT

During reflection, update tasks.md with:

```
## Status
- [x] Initialization complete
- [x] Planning complete
[For Level 3-4:]
- [x] Creative phases complete
- [x] Implementation complete
- [x] Reflection complete
- [ ] Archiving

## Reflection Highlights
- **What Went Well**: [Key successes]
- **Challenges**: [Key challenges]
- **Lessons Learned**: [Key lessons]
- **Next Steps**: [Follow-up actions]
```

## ğŸ“Š REFLECTION VERIFICATION CHECKLIST

```
âœ“ REFLECTION VERIFICATION
- Implementation thoroughly reviewed? [YES/NO]
- What Went Well section completed? [YES/NO]
- Challenges section completed? [YES/NO]
- Lessons Learned section completed? [YES/NO]
- Process Improvements identified? [YES/NO]
- Technical Improvements identified? [YES/NO]
- Next Steps documented? [YES/NO]
- reflection.md created? [YES/NO]
- tasks.md updated with reflection status? [YES/NO]

â†’ If all YES: Reflection complete - ready for ARCHIVE mode
â†’ If any NO: Complete missing reflection elements
```

## ğŸ”„ MODE TRANSITION NOTIFICATION

When reflection is complete, notify user with:

```
## REFLECTION COMPLETE

âœ… Implementation thoroughly reviewed
âœ… Reflection document created
âœ… Lessons learned documented
âœ… Process improvements identified
âœ… tasks.md updated with reflection status

â†’ NEXT RECOMMENDED MODE: ARCHIVE MODE
```
`````

## File: .cursor/rules/isolation_rules/Core/mcp-command-mapping.mdc
`````
---
description: MCP Command Mapping for Zero-Cognition AI Agent Integration
globs: "**/mcp*/**", "**/command*/**", "**/mapping*/**"
alwaysApply: false
---

# MCP COMMAND MAPPING - ZERO-COGNITION INTERFACE

> **TL;DR:** This file serves as the technical lookup table that maps abstract, user-friendly commands to specific MCP tool calls, enabling zero-cognition AI agent integration.

## ğŸ¯ PURPOSE AND SCOPE

### Core Function
- **Command Translation**: Maps abstract commands to concrete MCP tool calls
- **Parameter Conversion**: Converts user-friendly parameters to MCP-specific formats
- **Result Processing**: Transforms MCP responses into user-friendly formats
- **Error Handling**: Provides fallback mechanisms for failed operations

### Integration Points
- **Abstract Commands**: From `.cursorrules` and `AGENTS.md`
- **Concrete Tools**: From `mcp.json` configuration
- **AI Agent Interface**: Zero-cognition abstraction layer

## ğŸ“‹ MCP MEMORY SERVER COMMAND MAPPING

### Abstract Command â†’ MCP Tool Mapping

#### `MEMORY.CHECK` â†’ MCP Memory Server Status Check
```yaml
Abstract Command: MEMORY.CHECK
Purpose: Verify MCP Memory Server status and connectivity
MCP Tools Used:
  - read_graph: Check graph database connectivity
  - search_nodes: Verify node search functionality
Parameters:
  - query: "system:health"
  - limit: 1
Result Processing:
  - Success: Return "MCP Memory Server: âœ… Connected"
  - Failure: Return "MCP Memory Server: âŒ Disconnected"
Error Handling:
  - Connection timeout: Retry with exponential backoff
  - Invalid response: Fallback to basic connectivity test
```

#### `MEMORY.LOAD` â†’ MCP Memory Server Context Loading
```yaml
Abstract Command: MEMORY.LOAD
Purpose: Load MCP Memory Server context and historical data
MCP Tools Used:
  - read_graph: Load full graph structure
  - search_nodes: Search for relevant nodes
  - open_nodes: Access specific node details
Parameters:
  - query: "user:preferences OR project:history"
  - limit: 50
Result Processing:
  - Extract user preferences
  - Load project history
  - Build context baseline
Error Handling:
  - Empty results: Initialize with default context
  - Partial results: Use available data with warnings
```

#### `MEMORY.SAVE` â†’ MCP Memory Server Data Storage
```yaml
Abstract Command: MEMORY.SAVE
Purpose: Save new information to MCP Memory Server
MCP Tools Used:
  - create_entities: Create new entities
  - create_relations: Establish relationships
  - add_observations: Add observations to existing entities
Parameters:
  - entity_type: "task|decision|learning"
  - content: "Actual content to store"
  - tags: ["tag1", "tag2"]
Result Processing:
  - Success: Return entity ID and confirmation
  - Failure: Return error details and suggestions
Error Handling:
  - Duplicate entities: Merge or update existing
  - Invalid content: Validate and sanitize
```

#### `MEMORY.FIND` â†’ MCP Memory Server Search
```yaml
Abstract Command: MEMORY.FIND
Purpose: Search for specific information in MCP Memory Server
MCP Tools Used:
  - search_nodes: Search for matching nodes
  - read_graph: Read graph structure for context
Parameters:
  - query: "Search terms or criteria"
  - filters: ["type", "date", "tags"]
Result Processing:
  - Rank results by relevance
  - Format for user consumption
  - Provide context and metadata
Error Handling:
  - No results: Suggest alternative searches
  - Too many results: Apply additional filters
```

#### `MEMORY.RECALL` â†’ MCP Memory Server Retrieval
```yaml
Abstract Command: MEMORY.RECALL
Purpose: Retrieve specific information from MCP Memory Server
MCP Tools Used:
  - open_nodes: Access specific node details
  - read_graph: Read related graph context
Parameters:
  - node_id: "Specific node identifier"
  - include_context: true/false
Result Processing:
  - Return node content
  - Include related context if requested
  - Format for user consumption
Error Handling:
  - Node not found: Return error with suggestions
  - Access denied: Request appropriate permissions
```

#### `MEMORY.TAG` â†’ MCP Memory Server Tagging
```yaml
Abstract Command: MEMORY.TAG
Purpose: Add or modify tags for MCP Memory Server entities
MCP Tools Used:
  - add_observations: Add tag observations
  - create_relations: Create tag relationships
Parameters:
  - entity_id: "Target entity identifier"
  - tags: ["new", "tags", "to", "add"]
  - operation: "add|remove|replace"
Result Processing:
  - Success: Return updated tag list
  - Failure: Return error details
Error Handling:
  - Invalid entity: Verify entity exists
  - Tag conflicts: Resolve naming conflicts
```

#### `MEMORY.DELETE` â†’ MCP Memory Server Deletion
```yaml
Abstract Command: MEMORY.DELETE
Purpose: Remove information from MCP Memory Server
MCP Tools Used:
  - delete_entities: Remove specific entities
  - delete_relations: Remove relationships
Parameters:
  - entity_id: "Entity to delete"
  - cascade: true/false
  - confirmation: "CONFIRM_DELETE"
Result Processing:
  - Success: Return deletion confirmation
  - Failure: Return error details
Error Handling:
  - Confirmation required: Request explicit confirmation
  - Cascade effects: Warn about related deletions
```

#### `MEMORY.HEALTH` â†’ MCP Memory Server Health Check
```yaml
Abstract Command: MEMORY.HEALTH
Purpose: Comprehensive health check of MCP Memory Server
MCP Tools Used:
  - read_graph: Check graph integrity
  - search_nodes: Test search functionality
  - open_nodes: Test node access
Parameters:
  - deep_check: true/false
  - include_metrics: true/false
Result Processing:
  - Return health status
  - Include performance metrics
  - Provide recommendations
Error Handling:
  - Partial failures: Report specific issues
  - Complete failure: Suggest recovery steps
```

#### `MEMORY.SUMMARY` â†’ MCP Memory Server Summary
```yaml
Abstract Command: MEMORY.SUMMARY
Purpose: Generate summary of MCP Memory Server contents
MCP Tools Used:
  - read_graph: Read full graph structure
  - search_nodes: Count different node types
Parameters:
  - summary_type: "overview|detailed|statistics"
  - date_range: "last_week|last_month|all_time"
Result Processing:
  - Generate formatted summary
  - Include key statistics
  - Highlight important trends
Error Handling:
  - Large datasets: Use sampling for performance
  - Empty database: Return initialization suggestions
```

## ğŸ“š MCP CONTEXT7 COMMAND MAPPING

### Abstract Command â†’ MCP Context7 Tool Mapping

#### `DOCS.FIND` â†’ MCP Context7 Library Resolution
```yaml
Abstract Command: DOCS.FIND
Purpose: Find relevant documentation libraries
MCP Tools Used:
  - resolve-library-id: Search for library matches
Parameters:
  - library_name: "Name of library to find"
  - category: "framework|library|tool"
Result Processing:
  - Return matching libraries
  - Rank by relevance and trust score
  - Provide selection recommendations
Error Handling:
  - No matches: Suggest alternative searches
  - Ambiguous matches: Request clarification
```

#### `DOCS.GET` â†’ MCP Context7 Documentation Retrieval
```yaml
Abstract Command: DOCS.GET
Purpose: Retrieve specific documentation content
MCP Tools Used:
  - get-library-docs: Fetch documentation
Parameters:
  - library_id: "Context7-compatible library ID"
  - topic: "Specific topic to focus on"
  - tokens: 5000
Result Processing:
  - Return formatted documentation
  - Include code examples
  - Provide usage guidance
Error Handling:
  - Library not found: Suggest alternatives
  - Content unavailable: Return partial results
```

#### `DOCS.SEARCH` â†’ MCP Context7 Content Search
```yaml
Abstract Command: DOCS.SEARCH
Purpose: Search within documentation content
MCP Tools Used:
  - get-library-docs: Fetch documentation
  - resolve-library-id: Find relevant libraries
Parameters:
  - search_term: "Terms to search for"
  - library_filter: "Specific library or category"
Result Processing:
  - Return matching content
  - Highlight search terms
  - Provide context and examples
Error Handling:
  - No results: Suggest broader searches
  - Too many results: Apply additional filters
```

#### `DOCS.HELP` â†’ MCP Context7 Usage Help
```yaml
Abstract Command: DOCS.HELP
Purpose: Get help with documentation usage
MCP Tools Used:
  - resolve-library-id: Find help resources
Parameters:
  - help_topic: "Specific help topic"
  - user_level: "beginner|intermediate|advanced"
Result Processing:
  - Return help content
  - Include examples and tutorials
  - Provide next steps
Error Handling:
  - Topic not found: Suggest related topics
  - Level mismatch: Adjust content complexity
```

#### `DOCS.EXAMPLES` â†’ MCP Context7 Code Examples
```yaml
Abstract Command: DOCS.EXAMPLES
Purpose: Get code examples for specific topics
MCP Tools Used:
  - get-library-docs: Fetch documentation with examples
Parameters:
  - library_id: "Target library"
  - example_type: "basic|advanced|integration"
Result Processing:
  - Return relevant code examples
  - Include explanations
  - Provide runnable code
Error Handling:
  - No examples: Suggest alternative resources
  - Outdated examples: Flag version issues
```

#### `DOCS.API` â†’ MCP Context7 API Documentation
```yaml
Abstract Command: DOCS.API
Purpose: Get API documentation and references
MCP Tools Used:
  - get-library-docs: Fetch API documentation
Parameters:
  - library_id: "Target library"
  - api_section: "Specific API section"
Result Processing:
  - Return API documentation
  - Include method signatures
  - Provide usage examples
Error Handling:
  - API not found: Suggest alternatives
  - Incomplete docs: Flag missing sections
```

#### `DOCS.CACHE` â†’ MCP Context7 Cache Management
```yaml
Abstract Command: DOCS.CACHE
Purpose: Manage documentation cache
MCP Tools Used:
  - get-library-docs: Fetch fresh content
Parameters:
  - action: "clear|refresh|status"
  - library_id: "Specific library or all"
Result Processing:
  - Return cache status
  - Confirm cache operations
  - Provide performance metrics
Error Handling:
  - Cache errors: Suggest manual refresh
  - Performance issues: Recommend optimization
```

#### `DOCS.UPDATE` â†’ MCP Context7 Content Update
```yaml
Abstract Command: DOCS.UPDATE
Purpose: Update documentation content
MCP Tools Used:
  - get-library-docs: Fetch latest content
Parameters:
  - library_id: "Target library"
  - force_update: true/false
Result Processing:
  - Return updated content
  - Highlight changes
  - Provide update summary
Error Handling:
  - Update failed: Retry with different parameters
  - Content unchanged: Confirm current version
```

#### `DOCS.VERSION` â†’ MCP Context7 Version Information
```yaml
Abstract Command: DOCS.VERSION
Purpose: Get version information for libraries
MCP Tools Used:
  - resolve-library-id: Get library versions
Parameters:
  - library_id: "Target library"
  - include_history: true/false
Result Processing:
  - Return version information
  - Include release notes
  - Provide upgrade guidance
Error Handling:
  - Version not found: Suggest alternatives
  - Outdated info: Flag potential issues
```

## ğŸ”„ COMMAND EXECUTION FLOW

### 1. Command Reception
```mermaid
graph TD
    User[User Input] --> Parser[Command Parser]
    Parser --> Validator[Command Validator]
    Validator --> Mapper[Command Mapper]
    Mapper --> Executor[MCP Tool Executor]
    Executor --> Processor[Result Processor]
    Processor --> User
```

### 2. Error Handling Flow
```mermaid
graph TD
    Error[Error Occurred] --> Classifier[Error Classifier]
    Classifier --> Retry{Retry Possible?}
    Retry -->|Yes| RetryLogic[Retry Logic]
    Retry -->|No| Fallback[Fallback Handler]
    RetryLogic --> Executor[MCP Tool Executor]
    Fallback --> User[User Notification]
```

### 3. Result Processing Flow
```mermaid
graph TD
    RawResult[Raw MCP Result] --> Validator[Result Validator]
    Validator --> Formatter[Result Formatter]
    Formatter --> Enhancer[Content Enhancer]
    Enhancer --> User[User Response]
```

## ğŸ› ï¸ IMPLEMENTATION GUIDELINES

### Command Mapping Rules
1. **One-to-One Mapping**: Each abstract command maps to one primary MCP tool
2. **Fallback Support**: Provide fallback mechanisms for failed operations
3. **Parameter Validation**: Validate all parameters before MCP tool calls
4. **Result Standardization**: Standardize all results for consistent user experience

### Error Handling Standards
1. **Graceful Degradation**: Provide partial results when possible
2. **User-Friendly Messages**: Convert technical errors to user-friendly messages
3. **Recovery Suggestions**: Provide actionable recovery suggestions
4. **Logging**: Log all errors for debugging and improvement

### Performance Optimization
1. **Caching**: Cache frequently accessed data
2. **Batch Operations**: Group related operations when possible
3. **Lazy Loading**: Load data only when needed
4. **Connection Pooling**: Reuse MCP connections

## ğŸ“Š MONITORING AND METRICS

### Key Metrics
- **Command Success Rate**: Percentage of successful command executions
- **Response Time**: Average time for command completion
- **Error Rate**: Frequency of command failures
- **Cache Hit Rate**: Effectiveness of caching mechanisms

### Monitoring Points
- **MCP Tool Calls**: Track all MCP tool invocations
- **Command Mapping**: Monitor mapping accuracy
- **Error Patterns**: Identify common failure modes
- **Performance Bottlenecks**: Locate slow operations

## ğŸ”§ MAINTENANCE AND UPDATES

### Regular Maintenance
1. **Command Validation**: Verify all commands work correctly
2. **Error Analysis**: Analyze error patterns and improve handling
3. **Performance Review**: Optimize slow operations
4. **Documentation Updates**: Keep mapping documentation current

### Update Procedures
1. **New Commands**: Add new command mappings as needed
2. **MCP Tool Changes**: Update mappings when MCP tools change
3. **Error Handling**: Improve error handling based on experience
4. **Performance Tuning**: Optimize based on usage patterns

## ğŸ¯ USAGE EXAMPLES

### Example 1: Memory Check
```yaml
User Input: "MEMORY.CHECK"
Mapped To: read_graph + search_nodes
Parameters: {query: "system:health", limit: 1}
Result: "MCP Memory Server: âœ… Connected"
```

### Example 2: Documentation Search
```yaml
User Input: "DOCS.FIND React"
Mapped To: resolve-library-id
Parameters: {library_name: "React"}
Result: "Found React libraries: /facebook/react (Trust: 9.5)"
```

### Example 3: Memory Save
```yaml
User Input: "MEMORY.SAVE task:implement-user-auth"
Mapped To: create_entities + add_observations
Parameters: {entity_type: "task", content: "implement-user-auth", tags: ["auth", "implementation"]}
Result: "Task saved with ID: task_12345"
```

## ğŸš€ FUTURE ENHANCEMENTS

### Planned Features
1. **Command Chaining**: Support for multi-step command sequences
2. **Smart Caching**: Intelligent caching based on usage patterns
3. **Predictive Commands**: Suggest commands based on context
4. **Custom Mappings**: Allow users to define custom command mappings

### Integration Opportunities
1. **Graph Bank Integration**: Enhanced integration with Graph Bank system
2. **Context7 Expansion**: Support for additional documentation sources
3. **AI Agent Enhancement**: Improved AI agent command understanding
4. **Performance Optimization**: Advanced performance tuning capabilities

---

**Note**: This mapping file serves as the technical bridge between abstract user commands and concrete MCP tool calls, enabling zero-cognition AI agent integration while maintaining full functionality and error resilience.
`````

## File: .cursor/rules/isolation_rules/Core/mcp-context7.mdc
`````
---
description: Zero-cognition MCP Context7 integration for AI agents
globs: mcp-context7.mdc
alwaysApply: false
---

# MCP CONTEXT7 - é›¶èªçŸ¥æ•´åˆè¦å‰‡

> **TL;DR:** æ­¤æ–‡ä»¶æä¾› AI agent é›¶èªçŸ¥çš„ MCP Context7 æ•´åˆï¼Œéš±è—åº•å±¤ API èª¿ç”¨ç´°ç¯€ï¼Œæä¾›ç°¡æ½”çš„æ–‡æª”æŸ¥è©¢æ¥å£ã€‚

## ğŸ“š é›¶èªçŸ¥æ–‡æª”æŸ¥è©¢æ¥å£

AI agent ç„¡éœ€äº†è§£ Context7 API çš„æŠ€è¡“å¯¦ç¾ï¼Œåªéœ€ä½¿ç”¨ä»¥ä¸‹ç°¡æ½”æŒ‡ä»¤ï¼š

### ğŸ“‹ æ ¸å¿ƒæ–‡æª”æŒ‡ä»¤

```markdown
## æ–‡æª”æŸ¥è©¢æŒ‡ä»¤
DOCS.FIND [åº«åç¨±] - æŸ¥æ‰¾ä¸¦è§£æåº« ID
DOCS.GET [åº«ID] [ä¸»é¡Œ] - ç²å–ç‰¹å®šåº«çš„æ–‡æª”
DOCS.SEARCH [æŸ¥è©¢è©] - æœç´¢ç›¸é—œæ–‡æª”å…§å®¹

## æ™ºèƒ½æŸ¥è©¢æŒ‡ä»¤
DOCS.HELP [æŠ€è¡“é ˜åŸŸ] - ç²å–æŠ€è¡“é ˜åŸŸçš„å¹«åŠ©æ–‡æª”
DOCS.EXAMPLES [åº«åç¨±] [åŠŸèƒ½] - ç²å–ä»£ç¢¼ç¯„ä¾‹
DOCS.API [åº«åç¨±] [ç«¯é»] - ç²å– API åƒè€ƒæ–‡æª”

## æ–‡æª”ç®¡ç†æŒ‡ä»¤
DOCS.CACHE - æª¢æŸ¥æ–‡æª”ç·©å­˜ç‹€æ…‹
DOCS.UPDATE - æ›´æ–°æ–‡æª”ç·©å­˜
DOCS.VERSION [åº«åç¨±] - æª¢æŸ¥åº«ç‰ˆæœ¬ä¿¡æ¯
```

## ğŸ”„ è‡ªå‹•åŒ–æ–‡æª”åŠŸèƒ½

### æ™ºèƒ½åº«è§£æ
```markdown
ç•¶ä½¿ç”¨ DOCS.FIND æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- è§£æåº«åç¨±åˆ° Context7 å…¼å®¹ ID
- åŒ¹é…æœ€ä½³ç‰ˆæœ¬
- é©—è­‰åº«å¯ç”¨æ€§
- æä¾›æ›¿ä»£å»ºè­°
```

### å…§å®¹éæ¿¾å„ªåŒ–
```markdown
ç•¶ä½¿ç”¨ DOCS.GET æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- éæ¿¾ç›¸é—œå…§å®¹
- æŒ‰ç›¸é—œæ€§æ’åº
- æä¾›ä»£ç¢¼ç¯„ä¾‹
- ç”Ÿæˆä½¿ç”¨æŒ‡å—
```

### èªç¾©æœç´¢å¢å¼·
```markdown
ç•¶ä½¿ç”¨ DOCS.SEARCH æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- åŸ·è¡Œèªç¾©æœç´¢
- è·¨åº«å…§å®¹æª¢ç´¢
- æä¾›ç›¸é—œå»ºè­°
- å»ºç«‹å…§å®¹é—œè¯
```

## ğŸ“Š æ–‡æª”æ“ä½œç¯„ä¾‹

### æŸ¥æ‰¾ React æ–‡æª”
```markdown
DOCS.FIND "React"

ç³»çµ±è‡ªå‹•è™•ç†ï¼š
- è§£æåˆ° /facebook/react
- åŒ¹é…æœ€æ–°ç‰ˆæœ¬
- æä¾›æ–‡æª”æ¦‚è¦½
- å»ºè­°ç›¸é—œä¸»é¡Œ
```

### ç²å–ç‰¹å®šåŠŸèƒ½æ–‡æª”
```markdown
DOCS.GET "/facebook/react" "hooks"

ç³»çµ±è‡ªå‹•è¿”å›ï¼š
- React Hooks å®Œæ•´æ–‡æª”
- ä½¿ç”¨ç¯„ä¾‹å’Œæœ€ä½³å¯¦è¸
- ç›¸é—œ API åƒè€ƒ
- å¸¸è¦‹å•é¡Œè§£ç­”
```

### æœç´¢ç›¸é—œæŠ€è¡“
```markdown
DOCS.SEARCH "ç‹€æ…‹ç®¡ç†"

ç³»çµ±è‡ªå‹•è¿”å›ï¼š
- Redux æ–‡æª”
- Zustand æ–‡æª”
- Context API æ–‡æª”
- ç›¸é—œæ¯”è¼ƒå’Œå»ºè­°
```

## ğŸ” æ™ºèƒ½æ–‡æª”åŠŸèƒ½

### æŠ€è¡“é ˜åŸŸå¹«åŠ©
```markdown
DOCS.HELP "å‰ç«¯é–‹ç™¼"

ç³»çµ±è‡ªå‹•æä¾›ï¼š
- å‰ç«¯æŠ€è¡“æ£§æ¦‚è¦½
- ç†±é–€åº«å’Œæ¡†æ¶
- å­¸ç¿’è·¯å¾‘å»ºè­°
- æœ€ä½³å¯¦è¸æŒ‡å—
```

### ä»£ç¢¼ç¯„ä¾‹ç²å–
```markdown
DOCS.EXAMPLES "Vue.js" "çµ„ä»¶é€šä¿¡"

ç³»çµ±è‡ªå‹•æä¾›ï¼š
- Props å‚³éç¯„ä¾‹
- Event ç™¼å°„ç¯„ä¾‹
- Provide/Inject ç¯„ä¾‹
- Vuex ç‹€æ…‹ç®¡ç†ç¯„ä¾‹
```

### API åƒè€ƒæŸ¥è©¢
```markdown
DOCS.API "Express.js" "è·¯ç”±"

ç³»çµ±è‡ªå‹•æä¾›ï¼š
- è·¯ç”±å®šç¾©æ–¹æ³•
- ä¸­é–“ä»¶ä½¿ç”¨
- åƒæ•¸è™•ç†
- éŒ¯èª¤è™•ç†
```

## ğŸš¨ éŒ¯èª¤è™•ç†èˆ‡æ¢å¾©

### è‡ªå‹•éŒ¯èª¤æ¢å¾©
```markdown
ç•¶æ–‡æª”æŸ¥è©¢å¤±æ•—æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- å˜—è©¦æ›¿ä»£åº«åç¨±
- æä¾›ç›¸ä¼¼åº«å»ºè­°
- ä½¿ç”¨ç·©å­˜å…§å®¹
- é™ç´šåˆ°åŸºæœ¬æœç´¢
```

### å„ªé›…é™ç´š
```markdown
ç•¶ Context7 æœå‹™ä¸å¯ç”¨æ™‚ï¼š
- ä½¿ç”¨æœ¬åœ°æ–‡æª”ç·©å­˜
- æä¾›åŸºæœ¬æœç´¢åŠŸèƒ½
- è¨˜éŒ„å¾…åŒæ­¥æŸ¥è©¢
- è‡ªå‹•é‡é€£æ©Ÿåˆ¶
```

## ğŸ”„ èˆ‡ Graph Bank æ•´åˆ

### è‡ªå‹•æ–‡æª”åŒæ­¥
```markdown
æ–‡æª”æŸ¥è©¢æœƒè‡ªå‹•åŒæ­¥åˆ° Graph Bankï¼š
- æŠ€è¡“æ±ºç­– â†’ techContext.md
- å­¸ç¿’ç­†è¨˜ â†’ activeContext.md
- å°ˆæ¡ˆæ–‡æª” â†’ projectbrief.md
- çŸ¥è­˜æ­¸æª” â†’ archive/
```

### ä¸Šä¸‹æ–‡å¢å¼·
```markdown
æ–‡æª”ç³»çµ±æœƒå¢å¼· Graph Bank ä¸Šä¸‹æ–‡ï¼š
- æä¾›æŠ€è¡“åƒè€ƒ
- è£œå……å°ˆæ¡ˆæ–‡æª”
- å»ºç«‹æŠ€è¡“é—œè¯
- å„ªåŒ–é–‹ç™¼æ±ºç­–
```

## ğŸ“‹ ä½¿ç”¨æª¢æŸ¥æ¸…å–®

### Agent å•Ÿå‹•æª¢æŸ¥
```markdown
âœ“ CONTEXT7 CHECKLIST
- Context7 æœå‹™ç‹€æ…‹æ­£å¸¸? [YES/NO]
- API é‡‘é‘°æœ‰æ•ˆ? [YES/NO]
- æ–‡æª”ç·©å­˜å®Œæ•´? [YES/NO]
- Graph Bank åŒæ­¥æ­£å¸¸? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: æ–‡æª”ç³»çµ±å°±ç·’
â†’ å¦‚æœæœ‰ NO: åŸ·è¡Œç›¸æ‡‰ä¿®å¾©æ­¥é©Ÿ
```

### æ–‡æª”æŸ¥è©¢æª¢æŸ¥
```markdown
âœ“ DOCUMENTATION CHECKLIST
- æŸ¥è©¢è©å…·é«”æ˜ç¢º? [YES/NO]
- åº«åç¨±æ­£ç¢º? [YES/NO]
- ä¸»é¡Œç›¸é—œä¸”æœ‰ç”¨? [YES/NO]
- çµæœå®Œæ•´ä¸”æº–ç¢º? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: æ–‡æª”æŸ¥è©¢æˆåŠŸ
â†’ å¦‚æœæœ‰ NO: å„ªåŒ–æŸ¥è©¢è©æˆ–åº«åç¨±
```

## ğŸ¯ æœ€ä½³å¯¦è¸

### æ–‡æª”æŸ¥è©¢æœ€ä½³å¯¦è¸
```markdown
1. ä½¿ç”¨å…·é«”çš„åº«åç¨±
2. æŒ‡å®šæ˜ç¢ºçš„ä¸»é¡Œæˆ–åŠŸèƒ½
3. åˆ©ç”¨æ™ºèƒ½æœç´¢åŠŸèƒ½
4. çµåˆå¤šå€‹ç›¸é—œåº«
```

### å…§å®¹ä½¿ç”¨æœ€ä½³å¯¦è¸
```markdown
1. é©—è­‰æ–‡æª”ç‰ˆæœ¬
2. æª¢æŸ¥ä»£ç¢¼ç¯„ä¾‹
3. åƒè€ƒæœ€ä½³å¯¦è¸
4. å»ºç«‹çŸ¥è­˜é—œè¯
```

## ğŸ”„ æŒçºŒæ”¹é€²

### æ–‡æª”ç³»çµ±å„ªåŒ–
- ç›£æ§æŸ¥è©¢ä½¿ç”¨æ¨¡å¼
- å„ªåŒ–æœç´¢ç®—æ³•
- æ”¹é€²å…§å®¹éæ¿¾
- å¢å¼·èªç¾©ç†è§£

### æ•´åˆå„ªåŒ–
- å„ªåŒ–èˆ‡ Graph Bank åŒæ­¥
- æ”¹é€²éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- å¢å¼·è‡ªå‹•åŒ–åŠŸèƒ½
- æå‡ç”¨æˆ¶é«”é©—

## ğŸ“š æ”¯æ´çš„æŠ€è¡“é ˜åŸŸ

### å‰ç«¯é–‹ç™¼
```markdown
- React, Vue.js, Angular
- TypeScript, JavaScript
- CSS, SCSS, Tailwind
- Webpack, Vite, Rollup
```

### å¾Œç«¯é–‹ç™¼
```markdown
- Node.js, Express.js
- Python, Django, Flask
- Java, Spring Boot
- C#, .NET Core
```

### è³‡æ–™åº«
```markdown
- MySQL, PostgreSQL
- MongoDB, Redis
- SQLite, MariaDB
- Elasticsearch
```

### é›²ç«¯æœå‹™
```markdown
- AWS, Azure, GCP
- Docker, Kubernetes
- Terraform, Ansible
- CI/CD å·¥å…·
```

é€™å€‹é›¶èªçŸ¥æ•´åˆç¢ºä¿ AI agent èƒ½å¤ ç„¡ç¸«ä½¿ç”¨ Context7 çš„å¼·å¤§æ–‡æª”æŸ¥è©¢åŠŸèƒ½ï¼Œè€Œç„¡éœ€äº†è§£è¤‡é›œçš„ API èª¿ç”¨ç´°ç¯€ã€‚
`````

## File: .cursor/rules/isolation_rules/Core/mcp-graph-bank-integration.mdc
`````
---
description: Integration rules for MCP Memory Server and Graph Bank coordination
globs: mcp-graph-bank-integration.mdc
alwaysApply: false
---

# MCP MEMORY SERVER èˆ‡ GRAPH BANK æ•´åˆè¦å‰‡

> **TL;DR:** æ­¤æ–‡ä»¶å®šç¾© MCP Memory Server å’Œ Graph Bank ç³»çµ±çš„å”ä½œæ©Ÿåˆ¶ï¼Œç¢ºä¿å…©å€‹ç³»çµ±ç„¡ç¸«æ•´åˆï¼Œé¿å…æ··æ·†ã€‚

## ğŸ”„ ç³»çµ±æ•´åˆæ¦‚è¦½

```mermaid
graph TD
    Agent["AI Agent å•Ÿå‹•"] --> MCPCheck["MCP Memory Server<br>æª¢æŸ¥"]
    MCPCheck --> MCPLoad["MCP Memory Server<br>è¼‰å…¥ä¸Šä¸‹æ–‡"]
    MCPLoad --> GraphUpdate["Graph Bank<br>æ–‡ä»¶æ›´æ–°"]
    GraphUpdate --> TaskStart["é–‹å§‹ä»»å‹™åŸ·è¡Œ"]
    
    TaskStart --> TaskProgress["ä»»å‹™é€²è¡Œä¸­"]
    TaskProgress --> GraphRealTime["Graph Bank<br>å¯¦æ™‚æ›´æ–°"]
    
    TaskProgress --> TaskComplete["ä»»å‹™å®Œæˆ"]
    TaskComplete --> MCPSave["MCP Memory Server<br>å„²å­˜ç¶“é©—"]
    TaskComplete --> GraphArchive["Graph Bank<br>æ­¸æª”æ–‡ä»¶"]
    
    style Agent fill:#4da6ff,stroke:#0066cc,color:white
    style MCPCheck fill:#ffa64d,stroke:#cc7a30,color:white
    style MCPLoad fill:#4dbb5f,stroke:#36873f,color:white
    style GraphUpdate fill:#d94dbb,stroke:#a3378a,color:white
    style TaskStart fill:#4dbbbb,stroke:#368787,color:white
    style GraphRealTime fill:#d971ff,stroke:#a33bc2,color:white
    style MCPSave fill:#ff71c2,stroke:#c23b8a,color:white
    style GraphArchive fill:#71c2ff,stroke:#3b8ac2,color:white
```

## ğŸ“‹ ç³»çµ±è·è²¬åˆ†å·¥

### MCP Memory Server è·è²¬
- **è·¨æœƒè©±è¨˜æ†¶**: å„²å­˜ AI æ¨¡å‹çš„æŒä¹…è¨˜æ†¶
- **èªç¾©æœç´¢**: æä¾›è¨˜æ†¶æª¢ç´¢å’Œæœç´¢åŠŸèƒ½
- **ç¶“é©—ç´¯ç©**: è¨˜éŒ„å’Œå­¸ç¿’éå¾€çš„æ±ºç­–ç¶“é©—
- **ä¸Šä¸‹æ–‡è¼‰å…¥**: ç‚ºæ–°æœƒè©±æä¾›æ­·å²ä¸Šä¸‹æ–‡

### Graph Bank è·è²¬
- **å°ˆæ¡ˆæ–‡ä»¶ç®¡ç†**: ç®¡ç† tasks.mdã€activeContext.md ç­‰æ–‡ä»¶
- **ä»»å‹™è¿½è¹¤**: è¨˜éŒ„ç•¶å‰ä»»å‹™çš„é€²åº¦å’Œç‹€æ…‹
- **æ±ºç­–è¨˜éŒ„**: ä¿å­˜è¨­è¨ˆæ±ºç­–å’Œå¯¦æ–½ç´°ç¯€
- **çŸ¥è­˜æ­¸æª”**: å»ºç«‹å°ˆæ¡ˆçŸ¥è­˜åº«å’Œæ–‡ä»¶

## ğŸ”„ å”ä½œæµç¨‹

### Phase 1: Agent åˆå§‹åŒ–
```markdown
1. MCP Memory Server æª¢æŸ¥
   - åŸ·è¡Œ MEMORY.CHECK é©—è­‰è¨˜æ†¶é«”ç‹€æ…‹
   - æª¢æŸ¥ memory.json æ–‡ä»¶å®Œæ•´æ€§
   - è¼‰å…¥ç›¸é—œæ­·å²è¨˜æ†¶

2. Graph Bank æ–‡ä»¶åŒæ­¥
   - è®€å– tasks.md ç•¶å‰ä»»å‹™ç‹€æ…‹
   - æ›´æ–° activeContext.md ç•¶å‰ç„¦é»
   - åŒæ­¥ progress.md é€²åº¦è¨˜éŒ„
```

### Phase 2: ä»»å‹™åŸ·è¡Œä¸­
```markdown
1. Graph Bank å¯¦æ™‚æ›´æ–°
   - ä»»å‹™é€²åº¦æ›´æ–°åˆ° tasks.md
   - ç•¶å‰ç„¦é»æ›´æ–°åˆ° activeContext.md
   - é‡è¦æ±ºç­–è¨˜éŒ„åˆ°ç›¸é—œæ–‡ä»¶

2. MCP Memory Server èƒŒæ™¯å­¸ç¿’
   - æŒçºŒå­¸ç¿’ä»»å‹™åŸ·è¡Œæ¨¡å¼
   - è¨˜éŒ„æ±ºç­–å’Œçµæœçš„é—œè¯
   - æ›´æ–°èªç¾©è¨˜æ†¶ç¶²çµ¡
```

### Phase 3: ä»»å‹™å®Œæˆ
```markdown
1. MCP Memory Server ç¶“é©—å„²å­˜
   - åŸ·è¡Œ MEMORY.UPDATE å„²å­˜æ–°ç¶“é©—
   - æ›´æ–°æ±ºç­–æ¨¡å¼è¨˜æ†¶
   - å¼·åŒ–æˆåŠŸè·¯å¾‘è¨˜æ†¶

2. Graph Bank æ­¸æª”è™•ç†
   - å‰µå»ºä»»å‹™æ­¸æª”æ–‡ä»¶
   - æ›´æ–°å°ˆæ¡ˆçŸ¥è­˜åº«
   - æ¸…ç†è‡¨æ™‚å·¥ä½œæ–‡ä»¶
```

## ğŸ“‹ è§¸ç™¼æŒ‡ä»¤æ˜ å°„

### MCP Memory Server æŒ‡ä»¤
```markdown
- MEMORY.CHECK: æª¢æŸ¥ MCP Memory Server ç‹€æ…‹
- MEMORY.LOAD: è¼‰å…¥ MCP Memory Server ä¸Šä¸‹æ–‡
- MEMORY.UPDATE: æ›´æ–° MCP Memory Server è¨˜æ†¶
```

### Graph Bank æŒ‡ä»¤
```markdown
- GRAPH.UPDATE: æ›´æ–° Graph Bank æ–‡ä»¶
- GRAPH.SYNC: åŒæ­¥ Graph Bank ç‹€æ…‹
- GRAPH.ARCHIVE: æ­¸æª” Graph Bank å…§å®¹
```

## ğŸ” æ•´åˆæª¢æŸ¥é»

### Agent å•Ÿå‹•æª¢æŸ¥
```markdown
âœ“ AGENT INITIALIZATION CHECKLIST
- MCP Memory Server ç‹€æ…‹æ­£å¸¸? [YES/NO]
- Graph Bank æ–‡ä»¶å¯è®€å¯«? [YES/NO]
- æ­·å²è¨˜æ†¶è¼‰å…¥å®Œæˆ? [YES/NO]
- ç•¶å‰ä»»å‹™ä¸Šä¸‹æ–‡åŒæ­¥? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: Agent åˆå§‹åŒ–å®Œæˆ
â†’ å¦‚æœæœ‰ NO: åŸ·è¡Œç›¸æ‡‰ä¿®å¾©æ­¥é©Ÿ
```

### ä»»å‹™åŸ·è¡Œæª¢æŸ¥
```markdown
âœ“ TASK EXECUTION CHECKLIST
- Graph Bank æ–‡ä»¶å¯¦æ™‚æ›´æ–°? [YES/NO]
- MCP Memory Server å­¸ç¿’æ­£å¸¸? [YES/NO]
- æ±ºç­–è¨˜éŒ„å®Œæ•´? [YES/NO]
- é€²åº¦è¿½è¹¤æº–ç¢º? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: ä»»å‹™åŸ·è¡Œæ­£å¸¸
â†’ å¦‚æœæœ‰ NO: æª¢æŸ¥æ•´åˆæ©Ÿåˆ¶
```

## ğŸš¨ å¸¸è¦‹æ•´åˆå•é¡Œ

### å•é¡Œ 1: è¨˜æ†¶é«”æ··æ·†
**ç—‡ç‹€**: Agent ç„¡æ³•å€åˆ† MCP Memory Server å’Œ Graph Bank
**è§£æ±º**: æ˜ç¢ºä½¿ç”¨ä¸åŒçš„è§¸ç™¼æŒ‡ä»¤å’Œæª¢æŸ¥æµç¨‹

### å•é¡Œ 2: æ–‡ä»¶åŒæ­¥å»¶é²
**ç—‡ç‹€**: Graph Bank æ–‡ä»¶æ›´æ–°èˆ‡ MCP Memory Server ä¸åŒæ­¥
**è§£æ±º**: å¯¦æ–½å¼·åˆ¶åŒæ­¥æª¢æŸ¥é»

### å•é¡Œ 3: ä¸Šä¸‹æ–‡ä¸Ÿå¤±
**ç—‡ç‹€**: ä»»å‹™åˆ‡æ›æ™‚ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸Ÿå¤±
**è§£æ±º**: ç¢ºä¿ MCP Memory Server å’Œ Graph Bank é›™é‡å‚™ä»½

## ğŸ“‹ æ•´åˆé©—è­‰æµç¨‹

```markdown
## æ•´åˆé©—è­‰æ­¥é©Ÿ

1. å•Ÿå‹• Agent ä¸¦åŸ·è¡Œåˆå§‹åŒ–æª¢æŸ¥
2. é©—è­‰ MCP Memory Server å’Œ Graph Bank ç‹€æ…‹
3. åŸ·è¡Œæ¸¬è©¦ä»»å‹™ä¸¦ç›£æ§æ•´åˆç‹€æ³
4. æª¢æŸ¥ä»»å‹™å®Œæˆå¾Œçš„æ­¸æª”å’Œå„²å­˜
5. é©—è­‰ä¸‹æ¬¡å•Ÿå‹•æ™‚çš„ä¸Šä¸‹æ–‡è¼‰å…¥

## æˆåŠŸæ¨™æº–

- MCP Memory Server å’Œ Graph Bank ç„¡ç¸«å”ä½œ
- ä»»å‹™ä¸Šä¸‹æ–‡å®Œæ•´ä¿å­˜å’Œè¼‰å…¥
- æ±ºç­–ç¶“é©—æ­£ç¢ºç´¯ç©å’Œæ‡‰ç”¨
- å°ˆæ¡ˆæ–‡ä»¶æº–ç¢ºæ›´æ–°å’Œæ­¸æª”
```

## ğŸ”„ æŒçºŒæ”¹é€²

### æ•´åˆå„ªåŒ–
- ç›£æ§æ•´åˆæ•ˆç‡
- è­˜åˆ¥å”ä½œç“¶é ¸
- å„ªåŒ–åŒæ­¥æ©Ÿåˆ¶
- æ”¹é€²éŒ¯èª¤è™•ç†

### å­¸ç¿’æ”¹é€²
- åˆ†ææ•´åˆæ¨¡å¼
- å„ªåŒ–å”ä½œæµç¨‹
- å¢å¼·éŒ¯èª¤æ¢å¾©
- æå‡æ•´åˆç©©å®šæ€§

é€™å€‹æ•´åˆè¦å‰‡ç¢ºä¿ MCP Memory Server å’Œ Graph Bank ç³»çµ±èƒ½å¤ ç„¡ç¸«å”ä½œï¼Œé¿å…æ··æ·†ï¼Œæä¾›å®Œæ•´çš„è¨˜æ†¶å’Œæ–‡ä»¶ç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚
`````

## File: .cursor/rules/isolation_rules/Core/mcp-memory-server.mdc
`````
---
description: Zero-cognition MCP Memory Server integration for AI agents
globs: mcp-memory-server.mdc
alwaysApply: false
---

# MCP MEMORY SERVER - é›¶èªçŸ¥æ•´åˆè¦å‰‡

> **TL;DR:** æ­¤æ–‡ä»¶æä¾› AI agent é›¶èªçŸ¥çš„ MCP Memory Server æ•´åˆï¼Œéš±è—åº•å±¤å¯¦ç¾ç´°ç¯€ï¼Œæä¾›ç°¡æ½”çš„è¨˜æ†¶ç®¡ç†æ¥å£ã€‚

## ğŸ§  é›¶èªçŸ¥è¨˜æ†¶ç®¡ç†æ¥å£

AI agent ç„¡éœ€äº†è§£ MCP Memory Server çš„æŠ€è¡“å¯¦ç¾ï¼Œåªéœ€ä½¿ç”¨ä»¥ä¸‹ç°¡æ½”æŒ‡ä»¤ï¼š

### ğŸ“‹ æ ¸å¿ƒè¨˜æ†¶æŒ‡ä»¤

```markdown
## è¨˜æ†¶å„²å­˜æŒ‡ä»¤
MEMORY.SAVE [å…§å®¹] [æ¨™ç±¤1,æ¨™ç±¤2] - å„²å­˜è¨˜æ†¶ä¸¦è‡ªå‹•æ¨™ç±¤
MEMORY.SAVE.QUICK [å…§å®¹] - å¿«é€Ÿå„²å­˜ï¼ˆè‡ªå‹•ç”Ÿæˆæ¨™ç±¤ï¼‰

## è¨˜æ†¶æª¢ç´¢æŒ‡ä»¤  
MEMORY.FIND [æŸ¥è©¢è©] - èªç¾©æœç´¢è¨˜æ†¶
MEMORY.RECALL [æ™‚é–“ç¯„åœ] - åŸºæ–¼æ™‚é–“å›æ†¶è¨˜æ†¶
MEMORY.TAG [æ¨™ç±¤] - æŒ‰æ¨™ç±¤æª¢ç´¢è¨˜æ†¶

## è¨˜æ†¶ç®¡ç†æŒ‡ä»¤
MEMORY.DELETE [è¨˜æ†¶ID] - åˆªé™¤ç‰¹å®šè¨˜æ†¶
MEMORY.HEALTH - æª¢æŸ¥è¨˜æ†¶ç³»çµ±å¥åº·ç‹€æ…‹
MEMORY.SUMMARY - ç”Ÿæˆè¨˜æ†¶æ‘˜è¦
```

## ğŸ”„ è‡ªå‹•åŒ–è¨˜æ†¶åŠŸèƒ½

### æ™ºèƒ½æ¨™ç±¤ç”Ÿæˆ
```markdown
ç•¶ä½¿ç”¨ MEMORY.SAVE æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- åˆ†æå…§å®¹èªç¾©
- ç”Ÿæˆç›¸é—œæ¨™ç±¤
- å»ºç«‹æ™‚é–“æˆ³è¨˜
- å‰µå»ºé—œè¯ç´¢å¼•
```

### èªç¾©æœç´¢å„ªåŒ–
```markdown
ç•¶ä½¿ç”¨ MEMORY.FIND æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- åŸ·è¡Œèªç¾©ç›¸ä¼¼åº¦æœç´¢
- æŒ‰ç›¸é—œæ€§æ’åºçµæœ
- æä¾›ä¸Šä¸‹æ–‡é—œè¯
- éæ¿¾é‡è¤‡å…§å®¹
```

### æ™‚é–“åŸºç¤å›æ†¶
```markdown
ç•¶ä½¿ç”¨ MEMORY.RECALL æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- è§£ææ™‚é–“ç¯„åœï¼ˆä»Šå¤©ã€æ˜¨å¤©ã€æœ¬é€±ã€ä¸Šå€‹æœˆï¼‰
- æŒ‰æ™‚é–“é †åºæ’åˆ—è¨˜æ†¶
- æä¾›æ™‚é–“ä¸Šä¸‹æ–‡
- ç”Ÿæˆæ™‚é–“ç·šæ‘˜è¦
```

## ğŸ“Š è¨˜æ†¶æ“ä½œç¯„ä¾‹

### å„²å­˜å°ˆæ¡ˆæ±ºç­–
```markdown
MEMORY.SAVE "é¸æ“‡ä½¿ç”¨ React 18 çš„ Concurrent Features ä¾†å„ªåŒ–ç”¨æˆ¶é«”é©—" "react,decision,optimization"

ç³»çµ±è‡ªå‹•è™•ç†ï¼š
- å„²å­˜æ±ºç­–å…§å®¹
- æ·»åŠ æŠ€è¡“æ¨™ç±¤
- è¨˜éŒ„æ±ºç­–æ™‚é–“
- å»ºç«‹å°ˆæ¡ˆé—œè¯
```

### æª¢ç´¢ç›¸é—œè¨˜æ†¶
```markdown
MEMORY.FIND "React å„ªåŒ–"

ç³»çµ±è‡ªå‹•è¿”å›ï¼š
- ç›¸é—œçš„æŠ€è¡“æ±ºç­–
- å„ªåŒ–ç­–ç•¥è¨˜éŒ„
- æ€§èƒ½æ”¹é€²æ–¹æ¡ˆ
- ç›¸é—œå°ˆæ¡ˆç¶“é©—
```

### å›æ†¶è¿‘æœŸå·¥ä½œ
```markdown
MEMORY.RECALL "æœ¬é€±"

ç³»çµ±è‡ªå‹•è¿”å›ï¼š
- æœ¬é€±å®Œæˆçš„å·¥ä½œ
- é‡è¦æ±ºç­–è¨˜éŒ„
- é‡åˆ°çš„å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ
- å­¸ç¿’åˆ°çš„ç¶“é©—
```

## ğŸ” è¨˜æ†¶ç³»çµ±æª¢æŸ¥é»

### è¨˜æ†¶å¥åº·æª¢æŸ¥
```markdown
MEMORY.HEALTH

ç³»çµ±æª¢æŸ¥ï¼š
- è¨˜æ†¶å„²å­˜ç‹€æ…‹
- ç´¢å¼•å®Œæ•´æ€§
- æœç´¢æ€§èƒ½
- å„²å­˜ç©ºé–“ä½¿ç”¨
```

### è¨˜æ†¶æ‘˜è¦ç”Ÿæˆ
```markdown
MEMORY.SUMMARY

ç³»çµ±ç”Ÿæˆï¼š
- è¨˜æ†¶ç¸½æ•¸çµ±è¨ˆ
- ç†±é–€æ¨™ç±¤åˆ†æ
- æ™‚é–“åˆ†å¸ƒæ¦‚è¦½
- é‡è¦è¨˜æ†¶æ‘˜è¦
```

## ğŸš¨ éŒ¯èª¤è™•ç†èˆ‡æ¢å¾©

### è‡ªå‹•éŒ¯èª¤æ¢å¾©
```markdown
ç•¶è¨˜æ†¶æ“ä½œå¤±æ•—æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š
- è¨˜éŒ„éŒ¯èª¤è©³æƒ…
- å˜—è©¦æ›¿ä»£æ–¹æ¡ˆ
- æä¾›é™ç´šæœå‹™
- é€šçŸ¥ç®¡ç†å“¡
```

### å„ªé›…é™ç´š
```markdown
ç•¶ MCP Memory Server ä¸å¯ç”¨æ™‚ï¼š
- ä½¿ç”¨æœ¬åœ°ç·©å­˜
- æä¾›åŸºæœ¬åŠŸèƒ½
- è¨˜éŒ„å¾…åŒæ­¥æ“ä½œ
- è‡ªå‹•é‡é€£æ©Ÿåˆ¶
```

## ğŸ”„ èˆ‡ Graph Bank æ•´åˆ

### è‡ªå‹•åŒæ­¥æ©Ÿåˆ¶
```markdown
è¨˜æ†¶æ“ä½œæœƒè‡ªå‹•åŒæ­¥åˆ° Graph Bankï¼š
- é‡è¦æ±ºç­– â†’ tasks.md
- å°ˆæ¡ˆé€²åº¦ â†’ progress.md
- ç•¶å‰ç„¦é» â†’ activeContext.md
- çŸ¥è­˜æ­¸æª” â†’ archive/
```

### ä¸Šä¸‹æ–‡å¢å¼·
```markdown
è¨˜æ†¶ç³»çµ±æœƒå¢å¼· Graph Bank ä¸Šä¸‹æ–‡ï¼š
- æä¾›æ­·å²æ±ºç­–åƒè€ƒ
- è£œå……éºæ¼çš„å°ˆæ¡ˆä¿¡æ¯
- å»ºç«‹è·¨å°ˆæ¡ˆé—œè¯
- å„ªåŒ–ä»»å‹™è¦åŠƒ
```

## ğŸ“‹ ä½¿ç”¨æª¢æŸ¥æ¸…å–®

### Agent å•Ÿå‹•æª¢æŸ¥
```markdown
âœ“ MEMORY SERVER CHECKLIST
- MCP Memory Server ç‹€æ…‹æ­£å¸¸? [YES/NO]
- è¨˜æ†¶ç´¢å¼•å®Œæ•´? [YES/NO]
- æœç´¢åŠŸèƒ½å¯ç”¨? [YES/NO]
- Graph Bank åŒæ­¥æ­£å¸¸? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: è¨˜æ†¶ç³»çµ±å°±ç·’
â†’ å¦‚æœæœ‰ NO: åŸ·è¡Œç›¸æ‡‰ä¿®å¾©æ­¥é©Ÿ
```

### è¨˜æ†¶æ“ä½œæª¢æŸ¥
```markdown
âœ“ MEMORY OPERATION CHECKLIST
- è¨˜æ†¶å…§å®¹æ¸…æ™°æ˜ç¢º? [YES/NO]
- æ¨™ç±¤ç›¸é—œä¸”æœ‰ç”¨? [YES/NO]
- æœç´¢æŸ¥è©¢å…·é«”? [YES/NO]
- çµæœç›¸é—œä¸”å®Œæ•´? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: è¨˜æ†¶æ“ä½œæˆåŠŸ
â†’ å¦‚æœæœ‰ NO: å„ªåŒ–è¨˜æ†¶å…§å®¹æˆ–æŸ¥è©¢
```

## ğŸ¯ æœ€ä½³å¯¦è¸

### è¨˜æ†¶å„²å­˜æœ€ä½³å¯¦è¸
```markdown
1. å…§å®¹è¦å…·é«”æ˜ç¢º
2. æ¨™ç±¤è¦ç›¸é—œä¸”æœ‰æ„ç¾©
3. å®šæœŸæ¸…ç†éæ™‚è¨˜æ†¶
4. å»ºç«‹è¨˜æ†¶åˆ†é¡é«”ç³»
```

### è¨˜æ†¶æª¢ç´¢æœ€ä½³å¯¦è¸
```markdown
1. ä½¿ç”¨å…·é«”çš„æŸ¥è©¢è©
2. çµåˆæ™‚é–“å’Œæ¨™ç±¤éæ¿¾
3. åˆ©ç”¨èªç¾©æœç´¢èƒ½åŠ›
4. å»ºç«‹è¨˜æ†¶é—œè¯ç¶²çµ¡
```

## ğŸ”„ æŒçºŒæ”¹é€²

### è¨˜æ†¶ç³»çµ±å„ªåŒ–
- ç›£æ§è¨˜æ†¶ä½¿ç”¨æ¨¡å¼
- å„ªåŒ–æœç´¢ç®—æ³•
- æ”¹é€²æ¨™ç±¤ç³»çµ±
- å¢å¼·èªç¾©ç†è§£

### æ•´åˆå„ªåŒ–
- å„ªåŒ–èˆ‡ Graph Bank åŒæ­¥
- æ”¹é€²éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- å¢å¼·è‡ªå‹•åŒ–åŠŸèƒ½
- æå‡ç”¨æˆ¶é«”é©—

é€™å€‹é›¶èªçŸ¥æ•´åˆç¢ºä¿ AI agent èƒ½å¤ ç„¡ç¸«ä½¿ç”¨ MCP Memory Server çš„å¼·å¤§åŠŸèƒ½ï¼Œè€Œç„¡éœ€äº†è§£è¤‡é›œçš„æŠ€è¡“å¯¦ç¾ç´°ç¯€ã€‚
`````

## File: .cursor/rules/isolation_rules/Core/modern-angular-guidelines.mdc
`````
---
description: Modern Angular development guidelines and best practices
globs: modern-angular-guidelines.mdc
alwaysApply: false
---

# MODERN ANGULAR DEVELOPMENT GUIDELINES

> **TL;DR:** This document outlines modern Angular development practices, focusing on Angular 20+ features including standalone components, signals, control flow, and Material Design 3.

## ğŸš€ MODERN ANGULAR ARCHITECTURE

### Standalone Components
```typescript
// âœ… Modern: Standalone component
@Component({
  selector: 'app-modern-component',
  standalone: true,
  imports: [CommonModule, MaterialModule],
  template: `...`
})
export class ModernComponent {}

// âŒ Legacy: NgModule-based component
@Component({
  selector: 'app-legacy-component',
  template: `...`
})
export class LegacyComponent {}
```

### Signals for Reactive State
```typescript
// âœ… Modern: Using signals
@Component({
  selector: 'app-reactive',
  standalone: true,
  template: `
    <div>{{ count() }}</div>
    <button (click)="increment()">Increment</button>
  `
})
export class ReactiveComponent {
  count = signal(0);
  
  increment() {
    this.count.update(c => c + 1);
  }
}
```

### Modern Control Flow
```typescript
// âœ… Modern: Control flow syntax
@Component({
  template: `
    @if (isLoading()) {
      <div>Loading...</div>
    } @else if (hasError()) {
      <div>Error occurred</div>
    } @else {
      @for (item of items(); track item.id) {
        <div>{{ item.name }}</div>
      }
    }
  `
})
export class ModernTemplateComponent {}
```

## ğŸ¨ MATERIAL DESIGN 3 INTEGRATION

### Modern Material Setup
```bash
# Install Material Design 3
ng add @angular/material

# Choose Material 3 theme
ng add @angular/material --theme=material3
```

### Dynamic Theming
```typescript
// âœ… Modern: Dynamic theming with Material 3
@Component({
  selector: 'app-theme-toggle',
  standalone: true,
  template: `
    <mat-slide-toggle 
      [checked]="isDarkMode()" 
      (change)="toggleTheme()">
      Dark Mode
    </mat-slide-toggle>
  `
})
export class ThemeToggleComponent {
  isDarkMode = signal(false);
  
  toggleTheme() {
    this.isDarkMode.update(mode => !mode);
  }
}
```

## ğŸ“± PROGRESSIVE WEB APP FEATURES

### PWA Configuration
```bash
# Add PWA capabilities
ng add @angular/pwa
```

### Service Worker Integration
```typescript
// âœ… Modern: Service worker with signals
@Component({
  selector: 'app-pwa-status',
  standalone: true,
  template: `
    <div>
      @if (isOnline()) {
        <span class="online">Online</span>
      } @else {
        <span class="offline">Offline</span>
      }
    </div>
  `
})
export class PWAStatusComponent {
  isOnline = signal(navigator.onLine);
  
  constructor() {
    window.addEventListener('online', () => this.isOnline.set(true));
    window.addEventListener('offline', () => this.isOnline.set(false));
  }
}
```

## ğŸ”§ MODERN DEVELOPMENT WORKFLOW

### Project Structure
```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/          # Standalone components
â”‚   â”œâ”€â”€ services/           # Injectable services
â”‚   â”œâ”€â”€ models/             # TypeScript interfaces
â”‚   â”œâ”€â”€ utils/              # Utility functions
â”‚   â””â”€â”€ app.config.ts       # App configuration
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ themes/             # Material Design themes
â”‚   â””â”€â”€ icons/              # Custom icons
â””â”€â”€ styles/
    â”œâ”€â”€ material-theme.scss # Material 3 theme
    â””â”€â”€ global.scss         # Global styles
```

### Modern Build Configuration
```typescript
// angular.json
{
  "projects": {
    "my-app": {
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:application",
          "options": {
            "outputPath": "dist/my-app",
            "index": "src/index.html",
            "browser": "src/main.ts",
            "polyfills": ["zone.js"],
            "tsConfig": "tsconfig.app.json",
            "inlineStyleLanguage": "scss",
            "assets": ["src/favicon.ico", "src/assets"],
            "styles": ["src/styles.scss"],
            "scripts": []
          }
        }
      }
    }
  }
}
```

## ğŸ§ª MODERN TESTING APPROACHES

### Standalone Component Testing
```typescript
// âœ… Modern: Testing standalone components
describe('ModernComponent', () => {
  it('should create', () => {
    TestBed.configureTestingModule({
      imports: [ModernComponent]
    });
    
    const fixture = TestBed.createComponent(ModernComponent);
    expect(fixture.componentInstance).toBeTruthy();
  });
});
```

### Signal Testing
```typescript
// âœ… Modern: Testing signals
it('should update count signal', () => {
  const component = new ReactiveComponent();
  expect(component.count()).toBe(0);
  
  component.increment();
  expect(component.count()).toBe(1);
});
```

## ğŸ“Š PERFORMANCE OPTIMIZATION

### Lazy Loading with Standalone Components
```typescript
// âœ… Modern: Lazy loading standalone components
const routes: Routes = [
  {
    path: 'feature',
    loadComponent: () => import('./feature/feature.component').then(m => m.FeatureComponent)
  }
];
```

### OnPush Change Detection
```typescript
// âœ… Modern: OnPush with signals
@Component({
  selector: 'app-optimized',
  standalone: true,
  changeDetection: ChangeDetectionStrategy.OnPush,
  template: `...`
})
export class OptimizedComponent {
  data = signal([]);
}
```

## ğŸ” MODERN ANGULAR CHECKLIST

### Development Checklist
- [ ] Using standalone components instead of NgModules
- [ ] Implementing signals for reactive state management
- [ ] Using modern control flow syntax (@if, @for, @switch)
- [ ] Material Design 3 theming implemented
- [ ] PWA features configured (if applicable)
- [ ] Lazy loading implemented for routes
- [ ] OnPush change detection strategy used
- [ ] Modern testing approaches applied
- [ ] TypeScript strict mode enabled
- [ ] ESLint and Prettier configured

### Performance Checklist
- [ ] Tree-shaking optimized with standalone components
- [ ] Bundle size analyzed and optimized
- [ ] Lazy loading implemented for feature modules
- [ ] Service worker configured for caching
- [ ] Images optimized and lazy-loaded
- [ ] Critical CSS inlined
- [ ] Unused code eliminated

## ğŸš¨ MODERN ANGULAR WARNINGS

### Avoid These Legacy Patterns
- âŒ Using NgModules for simple components
- âŒ Using RxJS for simple state management (use signals)
- âŒ Using *ngIf/*ngFor instead of @if/@for
- âŒ Manual change detection triggering
- âŒ Not using OnPush change detection
- âŒ Not implementing lazy loading
- âŒ Using Material Design 2 instead of 3

### Migration Strategies
1. **NgModules â†’ Standalone**: Gradually migrate components to standalone
2. **RxJS â†’ Signals**: Replace simple observables with signals
3. **Template Syntax**: Update to modern control flow syntax
4. **Material 2 â†’ 3**: Migrate to Material Design 3 theming
5. **Testing**: Update tests to work with standalone components

## ğŸ“š MODERN ANGULAR RESOURCES

- [Angular Standalone Components](https://angular.io/guide/standalone-components)
- [Angular Signals](https://angular.io/guide/signals)
- [Angular Control Flow](https://angular.io/guide/control-flow)
- [Material Design 3](https://m3.material.io/)
- [Angular PWA](https://angular.io/guide/service-worker-intro)
- [Angular Universal](https://angular.io/guide/universal)
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-checks/build-test.mdc
`````
---
description: Process map for VAN QA minimal build test
globs: van-qa-checks/build-test.mdc
alwaysApply: false
---
# VAN QA: MINIMAL BUILD TEST

> **TL;DR:** This component performs a minimal build test to ensure core build functionality works properly.

## 4ï¸âƒ£ MINIMAL BUILD TEST PROCESS

```mermaid
graph TD
    Start["Minimal Build Test"] --> CreateTest["Create Minimal<br>Test Project"]
    CreateTest --> BuildTest["Attempt<br>Build"]
    BuildTest --> BuildStatus{"Build<br>Successful?"}
    
    BuildStatus -->|"Yes"| RunTest["Run Basic<br>Functionality Test"]
    BuildStatus -->|"No"| FixBuild["Fix Build<br>Issues"]
    FixBuild --> RetryBuild["Retry Build"]
    RetryBuild --> BuildStatus
    
    RunTest --> TestStatus{"Test<br>Passed?"}
    TestStatus -->|"Yes"| TestSuccess["Minimal Build Test<br>âœ… PASS"]
    TestStatus -->|"No"| FixTest["Fix Test<br>Issues"]
    FixTest --> RetryTest["Retry Test"]
    RetryTest --> TestStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style TestSuccess fill:#10b981,stroke:#059669,color:white
    style BuildStatus fill:#f6546a,stroke:#c30052,color:white
    style TestStatus fill:#f6546a,stroke:#c30052,color:white
```

### Minimal Build Test Implementation:
```powershell
# Example: Perform minimal build test for an Angular project
function Perform-MinimalBuildTest {
    $buildSuccess = $false
    $testSuccess = $false
    
    # Create minimal test project
    $testDir = ".__build_test"
    if (Test-Path $testDir) {
        Remove-Item -Path $testDir -Recurse -Force
    }
    
    try {
        # Create minimal test directory
        New-Item -Path $testDir -ItemType Directory | Out-Null
        Push-Location $testDir
        
        # Initialize minimal package.json
        @"
{
  "name": "build-test",
  "version": "1.0.0",
  "description": "Minimal build test",
  "main": "index.js",
  "scripts": {
    "build": "echo Build test successful"
  }
}
"@ | Set-Content -Path "package.json"
        
        # Attempt build
        npm run build | Out-Null
        $buildSuccess = $true
        
        # Create minimal test file
        @"
console.log('Test successful');
"@ | Set-Content -Path "index.js"
        
        # Run basic test
        node index.js | Out-Null
        $testSuccess = $true
        
    } catch {
        Write-Output "âŒ Build test failed: $($_.Exception.Message)"
    } finally {
        Pop-Location
        if (Test-Path $testDir) {
            Remove-Item -Path $testDir -Recurse -Force
        }
    }
    
    # Display results
    if ($buildSuccess -and $testSuccess) {
        Write-Output "âœ… Minimal build test passed successfully"
        return $true
    } else {
        if (-not $buildSuccess) {
            Write-Output "âŒ Build process failed"
        }
        if (-not $testSuccess) {
            Write-Output "âŒ Basic functionality test failed"
        }
        return $false
    }
}
```

## ğŸ“‹ MINIMAL BUILD TEST CHECKPOINT

```
âœ“ CHECKPOINT: MINIMAL BUILD TEST
- Test project creation successful? [YES/NO]
- Build process completed successfully? [YES/NO]
- Basic functionality test passed? [YES/NO]

â†’ If all YES: QA Validation complete, proceed to generate success report.
â†’ If any NO: Fix build issues before continuing.
```

**Next Step (on PASS):** Load `van-qa-utils/reports.mdc` to generate success report.
**Next Step (on FAIL):** Check `van-qa-utils/common-fixes.mdc` for build test fixes.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-checks/config-check.mdc
`````
---
description: Process map for VAN QA configuration validation
globs: van-qa-checks/config-check.mdc
alwaysApply: false
---
# VAN QA: CONFIGURATION VALIDATION

> **TL;DR:** This component validates configuration files for proper syntax and compatibility with the project and platform.

## 2ï¸âƒ£ CONFIGURATION VALIDATION PROCESS

```mermaid
graph TD
    Start["Configuration Validation"] --> IdentifyConfigs["Identify Configuration<br>Files"]
    IdentifyConfigs --> ReadConfigs["Read Configuration<br>Files"]
    ReadConfigs --> ValidateSyntax["Validate Syntax<br>and Format"]
    ValidateSyntax --> SyntaxStatus{"Syntax<br>Valid?"}
    
    SyntaxStatus -->|"Yes"| CheckCompatibility["Check Compatibility<br>with Platform"]
    SyntaxStatus -->|"No"| FixSyntax["Fix Syntax<br>Errors"]
    FixSyntax --> RetryValidate["Retry Validation"]
    RetryValidate --> SyntaxStatus
    
    CheckCompatibility --> CompatStatus{"Compatible with<br>Platform?"}
    CompatStatus -->|"Yes"| ConfigSuccess["Configurations Validated<br>âœ… PASS"]
    CompatStatus -->|"No"| AdaptConfigs["Adapt Configurations<br>for Platform"]
    AdaptConfigs --> RetryCompat["Retry Compatibility<br>Check"]
    RetryCompat --> CompatStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ConfigSuccess fill:#10b981,stroke:#059669,color:white
    style SyntaxStatus fill:#f6546a,stroke:#c30052,color:white
    style CompatStatus fill:#f6546a,stroke:#c30052,color:white
```

### Configuration Validation Implementation:
```powershell
# Example: Validate configuration files for a web project
function Validate-Configurations {
    $configFiles = @(
        "package.json",
        "tsconfig.json",
        "vite.config.js"
    )
    
    $invalidConfigs = @()
    $incompatibleConfigs = @()
    
    foreach ($configFile in $configFiles) {
        if (Test-Path $configFile) {
            # Check JSON syntax for JSON files
            if ($configFile -match "\.json$") {
                try {
                    Get-Content $configFile -Raw | ConvertFrom-Json | Out-Null
                } catch {
                    $invalidConfigs += "$configFile (JSON syntax error: $($_.Exception.Message))"
                    continue
                }
            }
            
            # Specific configuration compatibility checks
            if ($configFile -eq "vite.config.js") {
                $content = Get-Content $configFile -Raw
                # Check for Angular CLI configuration
                if ($content -notmatch "angular") {
                    $incompatibleConfigs += "$configFile (Missing Angular configuration)"
                }
            }
        } else {
            $invalidConfigs += "$configFile (file not found)"
        }
    }
    
    # Display results
    if ($invalidConfigs.Count -eq 0 -and $incompatibleConfigs.Count -eq 0) {
        Write-Output "âœ… All configurations validated and compatible"
        return $true
    } else {
        if ($invalidConfigs.Count -gt 0) {
            Write-Output "âŒ Invalid configurations: $($invalidConfigs -join ', ')"
        }
        if ($incompatibleConfigs.Count -gt 0) {
            Write-Output "âŒ Incompatible configurations: $($incompatibleConfigs -join ', ')"
        }
        return $false
    }
}
```

## ğŸ“‹ CONFIGURATION VALIDATION CHECKPOINT

```
âœ“ CHECKPOINT: CONFIGURATION VALIDATION
- All configuration files found? [YES/NO]
- All configuration syntax valid? [YES/NO]
- All configurations compatible with platform? [YES/NO]

â†’ If all YES: Continue to Environment Validation.
â†’ If any NO: Fix configuration issues before continuing.
```

**Next Step (on PASS):** Load `van-qa-checks/environment-check.mdc`.
**Next Step (on FAIL):** Check `van-qa-utils/common-fixes.mdc` for configuration fixes.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-checks/dependency-check.mdc
`````
---
description: Process map for VAN QA dependency verification
globs: van-qa-checks/dependency-check.mdc
alwaysApply: false
---
# VAN QA: DEPENDENCY VERIFICATION

> **TL;DR:** This component verifies that all required dependencies are installed and compatible with the project requirements.

## 1ï¸âƒ£ DEPENDENCY VERIFICATION PROCESS

```mermaid
graph TD
    Start["Dependency Verification"] --> ReadDeps["Read Required Dependencies<br>from Creative Phase"]
    ReadDeps --> CheckInstalled["Check if Dependencies<br>are Installed"]
    CheckInstalled --> DepStatus{"All Dependencies<br>Installed?"}
    
    DepStatus -->|"Yes"| VerifyVersions["Verify Versions<br>and Compatibility"]
    DepStatus -->|"No"| InstallMissing["Install Missing<br>Dependencies"]
    InstallMissing --> VerifyVersions
    
    VerifyVersions --> VersionStatus{"Versions<br>Compatible?"}
    VersionStatus -->|"Yes"| DepSuccess["Dependencies Verified<br>âœ… PASS"]
    VersionStatus -->|"No"| UpgradeVersions["Upgrade/Downgrade<br>as Needed"]
    UpgradeVersions --> RetryVerify["Retry Verification"]
    RetryVerify --> VersionStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style DepSuccess fill:#10b981,stroke:#059669,color:white
    style DepStatus fill:#f6546a,stroke:#c30052,color:white
    style VersionStatus fill:#f6546a,stroke:#c30052,color:white
```

### Windows (PowerShell) Implementation:
```powershell
# Example: Verify Node.js dependencies for an Angular project
function Verify-Dependencies {
    $requiredDeps = @{ "node" = ">=14.0.0"; "npm" = ">=6.0.0" }
    $missingDeps = @(); $incompatibleDeps = @()
    
    # Check Node.js version
    try { 
        $nodeVersion = node -v
        if ($nodeVersion -match "v(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 14) {
                $incompatibleDeps += "node (found $nodeVersion, required >=14.0.0)"
            }
        }
    } catch {
        $missingDeps += "node"
    }
    
    # Check npm version
    try { 
        $npmVersion = npm -v
        if ($npmVersion -match "(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 6) {
                $incompatibleDeps += "npm (found $npmVersion, required >=6.0.0)"
            }
        }
    } catch {
        $missingDeps += "npm"
    }
    
    # Display results
    if ($missingDeps.Count -eq 0 -and $incompatibleDeps.Count -eq 0) {
        Write-Output "âœ… All dependencies verified and compatible"
        return $true
    } else {
        if ($missingDeps.Count -gt 0) {
            Write-Output "âŒ Missing dependencies: $($missingDeps -join ', ')"
        }
        if ($incompatibleDeps.Count -gt 0) {
            Write-Output "âŒ Incompatible versions: $($incompatibleDeps -join ', ')"
        }
        return $false
    }
}
```

### Mac/Linux (Bash) Implementation:
```bash
#!/bin/bash

# Example: Verify Node.js dependencies for an Angular project
verify_dependencies() {
    local missing_deps=()
    local incompatible_deps=()
    
    # Check Node.js version
    if command -v node &> /dev/null; then
        local node_version=$(node -v)
        if [[ $node_version =~ v([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 14 )); then
                incompatible_deps+=("node (found $node_version, required >=14.0.0)")
            fi
        fi
    else
        missing_deps+=("node")
    fi
    
    # Check npm version
    if command -v npm &> /dev/null; then
        local npm_version=$(npm -v)
        if [[ $npm_version =~ ([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 6 )); then
                incompatible_deps+=("npm (found $npm_version, required >=6.0.0)")
            fi
        fi
    else
        missing_deps+=("npm")
    fi
    
    # Display results
    if [ ${#missing_deps[@]} -eq 0 ] && [ ${#incompatible_deps[@]} -eq 0 ]; then
        echo "âœ… All dependencies verified and compatible"
        return 0
    else
        if [ ${#missing_deps[@]} -gt 0 ]; then
            echo "âŒ Missing dependencies: ${missing_deps[*]}"
        fi
        if [ ${#incompatible_deps[@]} -gt 0 ]; then
            echo "âŒ Incompatible versions: ${incompatible_deps[*]}"
        fi
        return 1
    fi
}
```

## ğŸ“‹ DEPENDENCY VERIFICATION CHECKPOINT

```
âœ“ CHECKPOINT: DEPENDENCY VERIFICATION
- Required dependencies identified? [YES/NO]
- All dependencies installed? [YES/NO]
- All versions compatible? [YES/NO]

â†’ If all YES: Continue to Configuration Validation.
â†’ If any NO: Fix dependency issues before continuing.
```

**Next Step (on PASS):** Load `van-qa-checks/config-check.mdc`.
**Next Step (on FAIL):** Check `van-qa-utils/common-fixes.mdc` for dependency fixes.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-utils/common-fixes.mdc
`````
---
description: Utility for VAN QA common validation fixes
globs: van-qa-utils/common-fixes.mdc
alwaysApply: false
---
# VAN QA: COMMON VALIDATION FIXES

> **TL;DR:** This component provides common fixes for issues that may arise during the QA validation process.

## ğŸ§ª COMMON QA VALIDATION FIXES BY CATEGORY

### Dependency Issues

| Issue | Fix |
|-------|-----|
| **Missing Node.js** | Download and install Node.js from https://nodejs.org/ |
| **Outdated npm** | Run `npm install -g npm@latest` to update |
| **Missing packages** | Run `npm install` or `npm install [package-name]` |
| **Package version conflicts** | Adjust versions in package.json and run `npm install` |
| **Dependency resolution issues** | Run `npm cache clean -f` and try installing again |

### Configuration Issues

| Issue | Fix |
|-------|-----|
| **Invalid JSON** | Use a JSON validator (e.g., jsonlint) to check syntax |
| **Missing Angular CLI** | Install Angular CLI globally: `npm install -g @angular/cli` |
| **Missing Angular Material** | Add Material Design 3: `ng add @angular/material` |
| **Legacy NgModule** | Migrate to standalone components: `ng generate component --standalone` |
| **Incompatible TypeScript config** | Update `tsconfig.json` with correct Angular settings |
| **Mismatched version references** | Ensure consistent versions across configuration files |
| **Missing entries in config files** | Add required fields to configuration files |

### Environment Issues

| Issue | Fix |
|-------|-----|
| **Permission denied** | Run terminal as administrator (Windows) or use sudo (Mac/Linux) |
| **Port already in use** | Kill process using the port: `netstat -ano \| findstr :PORT` then `taskkill /F /PID PID` (Windows) or `lsof -i :PORT` then `kill -9 PID` (Mac/Linux) |
| **Missing build tools** | Install required command-line tools (git, node, etc.) |
| **Environment variable issues** | Set required environment variables: `$env:VAR_NAME = "value"` (PowerShell) or `export VAR_NAME="value"` (Bash) |
| **Disk space issues** | Free up disk space, clean npm/package cache files |

### Build Test Issues

| Issue | Fix |
|-------|-----|
| **Build fails** | Check console for specific error messages |
| **Test fails** | Verify minimal configuration is correct |
| **Path issues** | Ensure paths use correct separators for the platform (`\` for Windows, `/` for Mac/Linux) |
| **Missing dependencies** | Make sure all required dependencies are installed |
| **Script permissions** | Ensure script files have execution permissions (chmod +x on Unix) |

## ğŸ“ ISSUE DIAGNOSIS PROCEDURES

### 1. Dependency Diagnosis
```powershell
# Find conflicting dependencies
npm ls [package-name]

# Check for outdated packages
npm outdated

# Check for vulnerabilities
npm audit
```

### 2. Configuration Diagnosis
```powershell
# List all configuration files
Get-ChildItem -Recurse -Include "*.json","*.config.js" | Select-Object FullName

# Find missing references in tsconfig.json
if (Test-Path "tsconfig.json") { 
    $tsconfig = Get-Content "tsconfig.json" -Raw | ConvertFrom-Json
    if (-not $tsconfig.compilerOptions.jsx) {
        Write-Output "Missing jsx setting in tsconfig.json"
    }
}
```

### 3. Environment Diagnosis
```powershell
# Check process using a port (Windows)
netstat -ano | findstr ":3000"

# List environment variables
Get-ChildItem Env:

# Check disk space
Get-PSDrive C | Select-Object Used,Free
```

**Next Step:** Return to the validation process or follow the specific fix recommendations provided above.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-utils/mode-transitions.mdc
`````
---
description: Utility for VAN QA mode transitions
globs: van-qa-utils/mode-transitions.mdc
alwaysApply: false
---
# VAN QA: MODE TRANSITIONS

> **TL;DR:** This component handles transitions between modes, particularly the QA validation to BUILD mode transition, and prevents BUILD mode access without successful QA validation.

## ğŸ”’ BUILD MODE PREVENTION MECHANISM

The system prevents moving to BUILD mode without passing QA validation:

```mermaid
graph TD
    Start["User Types: BUILD"] --> CheckQA{"QA Validation<br>Completed?"}
    CheckQA -->|"Yes and Passed"| AllowBuild["Allow BUILD Mode"]
    CheckQA -->|"No or Failed"| BlockBuild["BLOCK BUILD MODE"]
    BlockBuild --> Message["Display:<br>âš ï¸ QA VALIDATION REQUIRED"]
    Message --> ReturnToVANQA["Prompt: Type VAN QA"]
    
    style CheckQA fill:#f6546a,stroke:#c30052,color:white
    style BlockBuild fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style Message fill:#ff5555,stroke:#dd3333,color:white
    style ReturnToVANQA fill:#4da6ff,stroke:#0066cc,color:white
```

### Implementation Example (PowerShell):
```powershell
# Check QA status before allowing BUILD mode
function Check-QAValidationStatus {
    $qaStatusFile = "graph-bank\.qa_validation_status" # Assumes status is written by reports.mdc
    
    if (Test-Path $qaStatusFile) {
        $status = Get-Content $qaStatusFile -Raw
        if ($status -match "PASS") {
            return $true
        }
    }
    
    # Display block message
    Write-Output "`n`n"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    Write-Output "â›”ï¸ BUILD MODE BLOCKED: QA VALIDATION REQUIRED"
    Write-Output "â›”ï¸ You must complete QA validation before proceeding to BUILD mode"
    Write-Output "`n"
    Write-Output "Type 'VAN QA' to perform technical validation"
    Write-Output "`n"
    Write-Output "ğŸš« NO IMPLEMENTATION CAN PROCEED WITHOUT VALIDATION ğŸš«"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    
    return $false
}
```

## ğŸš¨ MODE TRANSITION TRIGGERS

### CREATIVE to VAN QA Transition:
After completing the CREATIVE phase, trigger this message to prompt QA validation:

```
â­ï¸ NEXT MODE: VAN QA
To validate technical requirements before implementation, please type 'VAN QA'
```

### VAN QA to BUILD Transition (On Success):
After successful QA validation, trigger this message to allow BUILD mode:

```
âœ… TECHNICAL VALIDATION COMPLETE
All prerequisites verified successfully
You may now proceed to BUILD mode
Type 'BUILD' to begin implementation
```

### Manual BUILD Mode Access (When QA Already Passed):
When the user manually types 'BUILD', check the QA status before allowing access:

```powershell
# Handle BUILD mode request
function Handle-BuildModeRequest {
    if (Check-QAValidationStatus) {
        # Allow transition to BUILD mode
        Write-Output "`n"
        Write-Output "âœ… QA VALIDATION CHECK: PASSED"
        Write-Output "Loading BUILD mode..."
        Write-Output "`n"
        
        # Here you would load the BUILD mode map
        # [Code to load BUILD mode map]
        
        return $true
    }
    
    # QA validation failed or not completed, BUILD mode blocked
    return $false
}
```

**Next Step (on QA SUCCESS):** Continue to BUILD mode.
**Next Step (on QA FAILURE):** Return to QA validation process.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-utils/reports.mdc
`````
---
description: Utility for VAN QA validation reports
globs: van-qa-utils/reports.mdc
alwaysApply: false
---
# VAN QA: VALIDATION REPORTS

> **TL;DR:** This component contains the formats for comprehensive success and failure reports generated upon completion of the QA validation process.

## ğŸ“‹ COMPREHENSIVE SUCCESS REPORT FORMAT

After all four validation points pass, generate this success report:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚ PROJECT: [Project Name] | TIMESTAMP: [Current Date/Time]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1ï¸âƒ£ DEPENDENCIES: âœ“ Compatible                                       â”‚
â”‚ 2ï¸âƒ£ CONFIGURATION: âœ“ Valid & Compatible                             â”‚
â”‚ 3ï¸âƒ£ ENVIRONMENT: âœ“ Ready                                             â”‚
â”‚ 4ï¸âƒ£ MINIMAL BUILD: âœ“ Successful & Passed                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¨ FINAL VERDICT: PASS                                              â”‚
â”‚ â¡ï¸ Clear to proceed to BUILD mode                                   â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Success Report Generation Example:
```powershell
function Generate-SuccessReport {
    param (
        [string]$ProjectName = "Current Project"
    )
    
    $timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
    
    $report = @"
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚ PROJECT: $ProjectName | TIMESTAMP: $timestamp            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1ï¸âƒ£ DEPENDENCIES: âœ“ Compatible                                       â”‚
â”‚ 2ï¸âƒ£ CONFIGURATION: âœ“ Valid & Compatible                             â”‚
â”‚ 3ï¸âƒ£ ENVIRONMENT: âœ“ Ready                                             â”‚
â”‚ 4ï¸âƒ£ MINIMAL BUILD: âœ“ Successful & Passed                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¨ FINAL VERDICT: PASS                                              â”‚
â”‚ â¡ï¸ Clear to proceed to BUILD mode                                   â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"@
    
    # Save validation status (used by BUILD mode prevention mechanism)
    "PASS" | Set-Content -Path "graph-bank\.qa_validation_status"
    
    return $report
}
```

## âŒ FAILURE REPORT FORMAT

If any validation step fails, generate this detailed failure report:

```
âš ï¸âš ï¸âš ï¸ QA VALIDATION FAILED âš ï¸âš ï¸âš ï¸

The following issues must be resolved before proceeding to BUILD mode:

1ï¸âƒ£ DEPENDENCY ISSUES:
- [Detailed description of dependency issues]
- [Recommended fix]

2ï¸âƒ£ CONFIGURATION ISSUES:
- [Detailed description of configuration issues]
- [Recommended fix]

3ï¸âƒ£ ENVIRONMENT ISSUES:
- [Detailed description of environment issues]
- [Recommended fix]

4ï¸âƒ£ BUILD TEST ISSUES:
- [Detailed description of build test issues]
- [Recommended fix]

âš ï¸ BUILD MODE IS BLOCKED until these issues are resolved.
Type 'VAN QA' after fixing the issues to re-validate.
```

### Failure Report Generation Example:
```powershell
function Generate-FailureReport {
    param (
        [string[]]$DependencyIssues = @(),
        [string[]]$ConfigIssues = @(),
        [string[]]$EnvironmentIssues = @(),
        [string[]]$BuildIssues = @()
    )
    
    $report = @"
âš ï¸âš ï¸âš ï¸ QA VALIDATION FAILED âš ï¸âš ï¸âš ï¸

The following issues must be resolved before proceeding to BUILD mode:

"@
    
    if ($DependencyIssues.Count -gt 0) {
        $report += @"
1ï¸âƒ£ DEPENDENCY ISSUES:
$(($DependencyIssues | ForEach-Object { "- $_" }) -join "`n")

"@
    }
    
    if ($ConfigIssues.Count -gt 0) {
        $report += @"
2ï¸âƒ£ CONFIGURATION ISSUES:
$(($ConfigIssues | ForEach-Object { "- $_" }) -join "`n")

"@
    }
    
    if ($EnvironmentIssues.Count -gt 0) {
        $report += @"
3ï¸âƒ£ ENVIRONMENT ISSUES:
$(($EnvironmentIssues | ForEach-Object { "- $_" }) -join "`n")

"@
    }
    
    if ($BuildIssues.Count -gt 0) {
        $report += @"
4ï¸âƒ£ BUILD TEST ISSUES:
$(($BuildIssues | ForEach-Object { "- $_" }) -join "`n")

"@
    }
    
    $report += @"
âš ï¸ BUILD MODE IS BLOCKED until these issues are resolved.
Type 'VAN QA' after fixing the issues to re-validate.
"@
    
    # Save validation status (used by BUILD mode prevention mechanism)
    "FAIL" | Set-Content -Path "graph-bank\.qa_validation_status"
    
    return $report
}
```

**Next Step (on SUCCESS):** Load `van-qa-utils/mode-transitions.mdc` to handle BUILD mode transition.
**Next Step (on FAILURE):** Load `van-qa-utils/common-fixes.mdc` for issue remediation guidance.
`````

## File: angular/src/app/core/services/permission.service.ts
`````typescript
// src/app/core/services/permission.service.ts
â‹®----
import { Injectable, inject, signal, computed } from '@angular/core';
import { Firestore, doc, docData } from '@angular/fire/firestore';
import { AuthService } from './auth.service';
import { OrganizationService } from './organization.service';
import { OrgRole, TeamRole, ACLAbility } from '../models/auth.model';
import { map } from 'rxjs/operators';
â‹®----
export class PermissionService
â‹®----
// ç•¶å‰çµ„ç¹” ID Signal
â‹®----
// çµ„ç¹”æˆå“¡è³‡æ ¼ Signal
â‹®----
// Computed Signals for permissions
â‹®----
// è¨­ç½®ç•¶å‰çµ„ç¹”
async setCurrentOrganization(orgId: string)
â‹®----
// è¼‰å…¥çµ„ç¹”æˆå“¡è³‡æ ¼
private async loadOrganizationMembership(orgId: string)
â‹®----
// æ¬Šé™æª¢æŸ¥æ–¹æ³•
can(action: string, resource: string): boolean
â‹®----
// åŸºæœ¬æ¬Šé™æª¢æŸ¥
â‹®----
// çµ„ç¹”ç‰¹å®šæ¬Šé™æª¢æŸ¥
â‹®----
return true; // æ‰€æœ‰æˆå“¡éƒ½å¯ä»¥è®€å–
â‹®----
// åœ˜éšŠæ¬Šé™æª¢æŸ¥
async canManageTeam(teamId: string): Promise<boolean>
â‹®----
// çµ„ç¹”ç®¡ç†å“¡å’Œæ“æœ‰è€…å¯ä»¥ç®¡ç†æ‰€æœ‰åœ˜éšŠ
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºåœ˜éšŠç¶­è­·è€…
â‹®----
// Repository æ¬Šé™æª¢æŸ¥
async canAccessRepository(repositoryId: string): Promise<boolean>
â‹®----
// å¦‚æœæ˜¯å…¬é–‹ Repositoryï¼Œä»»ä½•äººéƒ½å¯ä»¥è®€å–
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºæ“æœ‰è€…
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºå”ä½œè€…
â‹®----
// æª¢æŸ¥ Repository å¯«å…¥æ¬Šé™
async canWriteRepository(repositoryId: string): Promise<boolean>
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºæ“æœ‰è€…
â‹®----
// æª¢æŸ¥å”ä½œè€…æ¬Šé™
â‹®----
// æª¢æŸ¥æ¬Šé™ç­‰ç´š
â‹®----
// æª¢æŸ¥ Repository ç®¡ç†æ¬Šé™
async canManageRepository(repositoryId: string): Promise<boolean>
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºæ“æœ‰è€…
â‹®----
// æª¢æŸ¥å”ä½œè€…æ¬Šé™
â‹®----
// æª¢æŸ¥æ¬Šé™ç­‰ç´š
â‹®----
// æ¸…é™¤çµ„ç¹”ä¸Šä¸‹æ–‡
clearOrganizationContext()
â‹®----
// æª¢æŸ¥ç”¨æˆ¶è§’è‰²
hasRole(role: string): boolean
â‹®----
// æª¢æŸ¥çµ„ç¹”è§’è‰²
hasOrgRole(role: OrgRole): boolean
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºçµ„ç¹”æ“æœ‰è€…
isOrganizationOwner(): boolean
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºçµ„ç¹”ç®¡ç†å“¡
isOrganizationAdmin(): boolean
`````

## File: angular/src/app/core/services/repository.service.ts
`````typescript
// src/app/core/services/repository.service.ts
â‹®----
import { Injectable, inject, signal, computed } from '@angular/core';
import {
  Firestore,
  doc,
  docData,
  collection,
  collectionData,
  query,
  where,
  addDoc,
  setDoc,
  updateDoc,
  deleteDoc,
  getDoc,
  DocumentData
} from '@angular/fire/firestore';
import { Observable, map, switchMap, combineLatest, of } from 'rxjs';
import { 
  Repository, 
  RepositoryCollaborator, 
  RepositoryTeamAccess,
  Account
} from '../models/auth.model';
import { AuthService } from './auth.service';
import { PermissionService } from './permission.service';
import { ValidationUtils } from '../utils/validation.utils';
â‹®----
export class RepositoryService {
â‹®----
// Signals for state management
â‹®----
// Readonly signals
â‹®----
// Computed signals
â‹®----
async createRepository(
    name: string,
    description?: string,
    isPrivate: boolean = true,
    ownerId?: string
): Promise<string>
â‹®----
// é©—è­‰ Repository åç¨±
â‹®----
// å¦‚æœæ“æœ‰è€…ä¸æ˜¯ç•¶å‰ç”¨æˆ¶ï¼Œæ·»åŠ å”ä½œè€…
â‹®----
getRepository(repoId: string): Observable<Repository | undefined>
â‹®----
async loadRepository(repoId: string): Promise<void>
â‹®----
getUserRepositories(userId: string): Observable<Repository[]>
â‹®----
getOrganizationRepositories(orgId: string): Observable<Repository[]>
â‹®----
async updateRepository(
    repoId: string,
    updates: Partial<Repository>
): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
async deleteRepository(repoId: string): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
// æ¸…é™¤æœ¬åœ°ç‹€æ…‹
â‹®----
getRepositoryCollaborators(repoId: string): Observable<RepositoryCollaborator[]>
â‹®----
async addCollaborator(
    repoId: string,
    userId: string,
    permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin',
    invitedBy?: string
): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
async updateCollaboratorPermission(
    repoId: string,
    userId: string,
    newPermission: 'read' | 'triage' | 'write' | 'maintain' | 'admin'
): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
async removeCollaborator(repoId: string, userId: string): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
getRepositoryTeamAccess(repoId: string): Observable<RepositoryTeamAccess[]>
â‹®----
async addTeamAccess(
    repoId: string,
    teamId: string,
    permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin',
    grantedBy?: string
): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
async updateTeamAccessPermission(
    repoId: string,
    teamId: string,
    newPermission: 'read' | 'triage' | 'write' | 'maintain' | 'admin'
): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
async removeTeamAccess(repoId: string, teamId: string): Promise<void>
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
private getRoleName(permission: string): string
â‹®----
// æ¸…é™¤éŒ¯èª¤
clearError()
â‹®----
// æ¸…é™¤ Repository ä¸Šä¸‹æ–‡
clearRepositoryContext()
`````

## File: angular/src/app/core/utils/avatar.utils.ts
`````typescript
/**
 * é ­åƒ URL è™•ç†å·¥å…·
 * çµ±ä¸€è™•ç†é è¨­é ­åƒå’Œç”¨æˆ¶è‡ªå®šç¾©é ­åƒçš„ URL ç”Ÿæˆ
 */
â‹®----
export class AvatarUtils {
â‹®----
/**
   * ç²å–é ­åƒ URL
   * @param avatar é ­åƒè·¯å¾‘æˆ– URL
   * @returns å®Œæ•´çš„é ­åƒ URL
   */
static getAvatarUrl(avatar: string | undefined | null): string
â‹®----
// ä½¿ç”¨é è¨­é ­åƒ
â‹®----
// å®Œæ•´çš„ URLï¼Œç›´æ¥è¿”å›
â‹®----
// ç›¸å°è·¯å¾‘ï¼Œå¾ Storage ç²å–
â‹®----
/**
   * æª¢æŸ¥æ˜¯å¦ç‚ºé è¨­é ­åƒ
   * @param avatar é ­åƒè·¯å¾‘æˆ– URL
   * @returns æ˜¯å¦ç‚ºé è¨­é ­åƒ
   */
static isDefaultAvatar(avatar: string | undefined | null): boolean
â‹®----
/**
   * ç²å–é è¨­é ­åƒ URL
   * @returns é è¨­é ­åƒçš„å®Œæ•´ URL
   */
static getDefaultAvatarUrl(): string
`````

## File: angular/src/app/dashboard/admin.component.ts
`````typescript
import {
  Component,
  inject,
  OnInit,
  Injector,
  runInInjectionContext
} from '@angular/core';
import { CommonModule } from '@angular/common';
import {
  Firestore,
  collection,
  collectionData,
  doc,
  updateDoc
} from '@angular/fire/firestore';
import { MatTableModule } from '@angular/material/table';
import { MatCardModule } from '@angular/material/card';
import { MatSelectModule } from '@angular/material/select';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';
import { MatIconModule } from '@angular/material/icon';
import { MatDividerModule } from '@angular/material/divider';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatButtonModule } from '@angular/material/button';
import { Router } from '@angular/router';
â‹®----
interface UserData {
  uid: string;
  email: string;
  role: string;
}
â‹®----
export class AdminComponent implements OnInit
â‹®----
ngOnInit()
â‹®----
loadUsers()
â‹®----
updateRole(uid: string, newRole: string)
â‹®----
refresh()
â‹®----
logout()
`````

## File: angular/src/app/dashboard/dashboard.component.ts
`````typescript
import { Component, inject, signal, computed } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Router } from '@angular/router';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatDividerModule } from '@angular/material/divider';
import { MatSnackBarModule } from '@angular/material/snack-bar';
import { AuthService } from '../core/services/auth.service';
â‹®----
export class DashboardComponent {
â‹®----
// ä½¿ç”¨ Signals ç²å–ç•¶å‰ç”¨æˆ¶ä¿¡æ¯
â‹®----
navigateToAccount()
â‹®----
navigateToOrganizations()
â‹®----
navigateToRepositories()
â‹®----
logout()
`````

## File: angular/src/app/dashboard/editor.component.ts
`````typescript
import {
  Component,
  inject,
  OnInit
} from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import {
  Firestore,
  collection,
  addDoc,
  collectionData,
  updateDoc,
  deleteDoc,
  doc
} from '@angular/fire/firestore';
import { MatCardModule } from '@angular/material/card';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatButtonModule } from '@angular/material/button';
import { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';
import { MatIconModule } from '@angular/material/icon';
import { Router } from '@angular/router';
â‹®----
interface Article {
  id?: string;
  title: string;
  content: string;
  createdAt: Date;
}
â‹®----
export class EditorComponent implements OnInit
â‹®----
ngOnInit()
â‹®----
async saveArticle()
â‹®----
editArticle(article: Article)
â‹®----
async deleteArticle(id?: string)
â‹®----
logout()
`````

## File: angular/src/app/dashboard/viewer.component.ts
`````typescript
import { Component, inject, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Firestore, collection, collectionData } from '@angular/fire/firestore';
import { MatCardModule } from '@angular/material/card';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatIconModule } from '@angular/material/icon';
import { MatButtonModule } from '@angular/material/button';
import { Router } from '@angular/router';
â‹®----
interface Article {
  id?: string;
  title: string;
  content: string;
  createdAt: Date;
}
â‹®----
export class ViewerComponent implements OnInit
â‹®----
ngOnInit()
â‹®----
getDate(date: any)
â‹®----
logout()
`````

## File: angular/src/app/features/organization/components/organization-card.component.ts
`````typescript
import { Component, Input, Output, EventEmitter, signal, computed } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatChipsModule } from '@angular/material/chips';
import { MatMenuModule } from '@angular/material/menu';
import { MatDividerModule } from '@angular/material/divider';
import { GitHubAlignedOrganization } from '../models/github-aligned-organization.model';
â‹®----
/**
 * çµ„ç¹”å¡ç‰‡çµ„ä»¶
 * ä½¿ç”¨ Material Design 3 è¨­è¨ˆï¼Œå°é½Š GitHub çš„çµ„ç¹”å¡ç‰‡é¢¨æ ¼
 */
â‹®----
export class OrganizationCardComponent {
â‹®----
// è¨ˆç®—å±¬æ€§
â‹®----
/**
   * ç²å–çµ„ç¹”é¡å‹æ¨™ç±¤
   */
getTypeLabel(type?: string): string
â‹®----
/**
   * æª¢è¦–çµ„ç¹”
   */
onView(): void
â‹®----
/**
   * ç·¨è¼¯çµ„ç¹”
   */
onEdit(): void
â‹®----
/**
   * çµ„ç¹”è¨­å®š
   */
onSettings(): void
â‹®----
/**
   * æˆå“¡ç®¡ç†
   */
onMembers(): void
â‹®----
/**
   * åœ˜éšŠç®¡ç†
   */
onTeams(): void
â‹®----
/**
   * åˆªé™¤çµ„ç¹”
   */
onDelete(): void
`````

## File: angular/src/app/features/organization/components/organization-roles.component.ts
`````typescript
import { Component, OnInit, signal, computed, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatTableModule } from '@angular/material/table';
import { MatChipsModule } from '@angular/material/chips';
import { MatDialogModule, MatDialog } from '@angular/material/dialog';
import { MatSnackBarModule, MatSnackBar } from '@angular/material/snack-bar';
import { MatTooltipModule } from '@angular/material/tooltip';
import { MatMenuModule } from '@angular/material/menu';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatBadgeModule } from '@angular/material/badge';
â‹®----
import { OrganizationRole, Permission } from '../models/github-aligned-organization.model';
import { PermissionCalculationService } from '../services/permission-calculation.service';
â‹®----
/**
 * çµ„ç¹”è§’è‰²ç³»çµ±çµ„ä»¶
 * ç®¡ç†çµ„ç¹”çš„è§’è‰²å’Œæ¬Šé™è¨­å®š
 */
â‹®----
export class OrganizationRolesComponent implements OnInit {
â‹®----
// éŸ¿æ‡‰å¼ç‹€æ…‹
â‹®----
// å…¬é–‹çš„åªè®€ signals
â‹®----
// è¨ˆç®—å±¬æ€§
â‹®----
// è¡¨æ ¼é…ç½®
â‹®----
ngOnInit(): void
â‹®----
/**
   * è¼‰å…¥çµ„ç¹”è§’è‰²è³‡æ–™
   */
private async loadOrganizationRoles(): Promise<void>
â‹®----
// å¾æ¬Šé™æœå‹™ç²å–çµ„ç¹”è§’è‰²è³‡æ–™
â‹®----
/**
   * ç²å–è§’è‰²åœ–æ¨™
   */
getRoleIcon(level: number): string
â‹®----
/**
   * ç²å–ç­‰ç´šé¡è‰²
   */
getLevelColor(level: number): 'primary' | 'accent' | 'warn'
â‹®----
/**
   * ç²å–å”¯ä¸€æ¬Šé™ç¯„åœ
   */
getUniqueScopes(permissions: Permission[]): string[]
â‹®----
/**
   * ç²å–ç¯„åœé¡è‰²
   */
getScopeColor(scope: string): 'primary' | 'accent' | 'warn'
â‹®----
/**
   * ç²å–ç¯„åœæ¨™ç±¤
   */
getScopeLabel(scope: string): string
â‹®----
/**
   * æ ¼å¼åŒ–æ—¥æœŸ
   */
formatDate(date: Date): string
â‹®----
/**
   * é–‹å•Ÿæ–°å¢è§’è‰²å°è©±æ¡†
   */
openCreateRoleDialog(): void
â‹®----
// TODO: å¯¦ä½œæ–°å¢è§’è‰²å°è©±æ¡†
â‹®----
/**
   * æŸ¥çœ‹è§’è‰²è©³æƒ…
   */
viewRoleDetails(role: OrganizationRole): void
â‹®----
// TODO: å¯¦ä½œæŸ¥çœ‹è§’è‰²è©³æƒ…å°è©±æ¡†
â‹®----
/**
   * ç·¨è¼¯è§’è‰²
   */
editRole(role: OrganizationRole): void
â‹®----
// TODO: å¯¦ä½œç·¨è¼¯è§’è‰²å°è©±æ¡†
â‹®----
/**
   * è¤‡è£½è§’è‰²
   */
duplicateRole(role: OrganizationRole): void
â‹®----
// TODO: å¯¦ä½œè¤‡è£½è§’è‰²åŠŸèƒ½
â‹®----
/**
   * åˆªé™¤è§’è‰²
   */
deleteRole(role: OrganizationRole): void
â‹®----
// TODO: å¯¦ä½œåˆªé™¤è§’è‰²ç¢ºèªå°è©±æ¡†
`````

## File: angular/src/app/features/organization/components/security-manager.component.ts
`````typescript
import { Component, OnInit, signal, computed, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatTableModule } from '@angular/material/table';
import { MatChipsModule } from '@angular/material/chips';
import { MatDialogModule, MatDialog } from '@angular/material/dialog';
import { MatSnackBarModule, MatSnackBar } from '@angular/material/snack-bar';
import { MatTooltipModule } from '@angular/material/tooltip';
import { MatMenuModule } from '@angular/material/menu';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
â‹®----
import { SecurityManager, SecurityPermission } from '../models/github-aligned-organization.model';
import { PermissionCalculationService } from '../services/permission-calculation.service';
â‹®----
/**
 * å®‰å…¨ç®¡ç†å™¨çµ„ä»¶
 * ç®¡ç†çµ„ç¹”çš„å®‰å…¨æ¬Šé™å’Œå®‰å…¨ç®¡ç†å“¡
 */
â‹®----
export class SecurityManagerComponent implements OnInit {
â‹®----
// éŸ¿æ‡‰å¼ç‹€æ…‹
â‹®----
// å…¬é–‹çš„åªè®€ signals
â‹®----
// è¨ˆç®—å±¬æ€§
â‹®----
// è¡¨æ ¼é…ç½®
â‹®----
ngOnInit(): void
â‹®----
/**
   * è¼‰å…¥å®‰å…¨ç®¡ç†å“¡è³‡æ–™
   */
private async loadSecurityManagers(): Promise<void>
â‹®----
// å¾æ¬Šé™æœå‹™ç²å–å®‰å…¨ç®¡ç†å“¡è³‡æ–™
â‹®----
/**
   * ç²å–é¡å‹é¡è‰²
   */
getTypeColor(type: 'user' | 'team'): 'primary' | 'accent' | 'warn'
â‹®----
/**
   * ç²å–é¡å‹åœ–æ¨™
   */
getTypeIcon(type: 'user' | 'team'): string
â‹®----
/**
   * ç²å–é¡å‹æ¨™ç±¤
   */
getTypeLabel(type: 'user' | 'team'): string
â‹®----
/**
   * ç²å–å¯¦é«”åç¨±
   */
getEntityName(manager: SecurityManager): string
â‹®----
// é€™è£¡æ‡‰è©²æ ¹æ“š entityId æŸ¥æ‰¾å¯¦éš›çš„ç”¨æˆ¶åæˆ–åœ˜éšŠå
// ç°¡åŒ–å¯¦ä½œï¼Œç›´æ¥è¿”å› ID
â‹®----
/**
   * æ ¼å¼åŒ–æ—¥æœŸ
   */
formatDate(date: Date): string
â‹®----
/**
   * é–‹å•Ÿæ–°å¢å®‰å…¨ç®¡ç†å“¡å°è©±æ¡†
   */
openAddSecurityManagerDialog(): void
â‹®----
// TODO: å¯¦ä½œæ–°å¢å®‰å…¨ç®¡ç†å“¡å°è©±æ¡†
â‹®----
/**
   * æŸ¥çœ‹æ¬Šé™
   */
viewPermissions(manager: SecurityManager): void
â‹®----
// TODO: å¯¦ä½œæŸ¥çœ‹æ¬Šé™å°è©±æ¡†
â‹®----
/**
   * ç·¨è¼¯å®‰å…¨ç®¡ç†å“¡
   */
editSecurityManager(manager: SecurityManager): void
â‹®----
// TODO: å¯¦ä½œç·¨è¼¯å®‰å…¨ç®¡ç†å“¡å°è©±æ¡†
â‹®----
/**
   * ç§»é™¤å®‰å…¨ç®¡ç†å“¡
   */
removeSecurityManager(manager: SecurityManager): void
â‹®----
// TODO: å¯¦ä½œç§»é™¤å®‰å…¨ç®¡ç†å“¡ç¢ºèªå°è©±æ¡†
`````

## File: angular/src/app/features/organization/components/team-management.component.ts
`````typescript
import { Component, Input, Output, EventEmitter, signal, computed } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatTreeModule } from '@angular/material/tree';
import { MatIconModule } from '@angular/material/icon';
import { MatButtonModule } from '@angular/material/button';
import { MatChipsModule } from '@angular/material/chips';
import { MatMenuModule } from '@angular/material/menu';
import { MatDialogModule } from '@angular/material/dialog';
import { MatDividerModule } from '@angular/material/divider';
import { Team } from '../models/github-aligned-organization.model';
â‹®----
/**
 * åœ˜éšŠç¯€é»ä»‹é¢
 */
interface TeamNode extends Team {
  children: TeamNode[];
  level: number;
  expandable: boolean;
}
â‹®----
/**
 * åœ˜éšŠå±¤ç´šç®¡ç†çµ„ä»¶
 * ä½¿ç”¨ Material Design 3 çš„ Tree çµ„ä»¶å¯¦ä½œ GitHub é¢¨æ ¼çš„åœ˜éšŠå±¤ç´šçµæ§‹
 */
â‹®----
export class TeamHierarchyComponent {
â‹®----
// æ¨¹ç‹€çµæ§‹è½‰æ›å™¨
â‹®----
// Tree æ§åˆ¶
â‹®----
// è¨ˆç®—å±¬æ€§
â‹®----
constructor()
â‹®----
// ç›£è½ teams è®ŠåŒ–ä¸¦æ›´æ–° dataSource
â‹®----
/**
   * å»ºç«‹åœ˜éšŠå±¤ç´šçµæ§‹
   */
private buildTeamHierarchy(teams: Team[]): TeamNode[]
â‹®----
// åˆå§‹åŒ–æ‰€æœ‰åœ˜éšŠ
â‹®----
// å»ºç«‹å±¤ç´šé—œä¿‚
â‹®----
/**
   * ç²å–ç¯€é»ç¸®æ’
   */
getNodePadding(node: TeamNode): number
â‹®----
/**
   * æª¢æŸ¥æ˜¯å¦æœ‰å­ç¯€é»
   */
â‹®----
/**
   * ç²å–åœ˜éšŠåœ–ç¤º
   */
getTeamIcon(privacy: 'open' | 'closed'): string
â‹®----
/**
   * ç²å–éš±ç§æ¨™ç±¤
   */
getPrivacyLabel(privacy: 'open' | 'closed'): string
â‹®----
/**
   * ç²å–æ¬Šé™æ¨™ç±¤
   */
getPermissionLabel(permission: 'read' | 'write' | 'admin'): string
â‹®----
/**
   * æ–°å¢åœ˜éšŠ
   */
onCreateTeam(): void
â‹®----
/**
   * æ–°å¢å­åœ˜éšŠ
   */
onCreateSubTeam(parentTeam: Team): void
â‹®----
/**
   * æª¢è¦–åœ˜éšŠ
   */
onViewTeam(team: Team): void
â‹®----
/**
   * ç·¨è¼¯åœ˜éšŠ
   */
onEditTeam(team: Team): void
â‹®----
/**
   * ç®¡ç†æˆå“¡
   */
onManageMembers(team: Team): void
â‹®----
/**
   * åˆªé™¤åœ˜éšŠ
   */
onDeleteTeam(team: Team): void
â‹®----
// Tree ç›¸é—œé¡åˆ¥
import { FlatTreeControl } from '@angular/cdk/tree';
import { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';
import { effect } from '@angular/core';
`````

## File: angular/src/app/features/organization/models/github-aligned-organization.model.ts
`````typescript
/**
 * GitHub å°é½Šçš„çµ„ç¹”æ¨¡å‹
 * å°é½Š GitHub REST API æ¨¡å¼çš„çµ„ç¹”ç®¡ç†
 */
export interface GitHubAlignedOrganization {
  id: string;
  slug: string; // GitHub é¢¨æ ¼çš„ URL-friendly åç¨±
  name: string;
  description?: string;
  type: 'construction' | 'consulting' | 'supplier';
  profile: OrganizationProfile;
  members: OrganizationMember[];
  teams: Team[];
  securityManagers: SecurityManager[];
  organizationRoles: OrganizationRole[];
  createdAt: Date;
  updatedAt: Date;
}
â‹®----
slug: string; // GitHub é¢¨æ ¼çš„ URL-friendly åç¨±
â‹®----
export interface OrganizationProfile {
  website?: string;
  location?: string;
  email?: string;
  phone?: string;
  avatar?: string;
  banner?: string;
}
â‹®----
export interface OrganizationMember {
  id: string;
  userId: string;
  username: string;
  email: string;
  role: OrganizationRole;
  status: 'active' | 'pending' | 'suspended';
  joinedAt: Date;
  lastActiveAt: Date;
}
â‹®----
export interface Team {
  id: string;
  slug: string; // GitHub é¢¨æ ¼çš„ slug
  name: string;
  description: string;
  parentTeamId?: string; // æ”¯æ´å±¤ç´šçµæ§‹
  privacy: 'open' | 'closed';
  permission: 'read' | 'write' | 'admin';
  members: TeamMember[];
  createdAt: Date;
  updatedAt: Date;
}
â‹®----
slug: string; // GitHub é¢¨æ ¼çš„ slug
â‹®----
parentTeamId?: string; // æ”¯æ´å±¤ç´šçµæ§‹
â‹®----
export interface TeamMember {
  id: string;
  userId: string;
  username: string;
  role: 'member' | 'maintainer' | 'admin';
  joinedAt: Date;
}
â‹®----
export interface SecurityManager {
  id: string;
  type: 'user' | 'team';
  entityId: string; // userId æˆ– teamId
  permissions: SecurityPermission[];
  assignedAt: Date;
  assignedBy: string;
}
â‹®----
entityId: string; // userId æˆ– teamId
â‹®----
export interface SecurityPermission {
  id: string;
  name: string;
  description: string;
  resource: string; // è³‡æºé¡å‹
  action: string; // æ“ä½œé¡å‹
  conditions?: Record<string, any>; // é¡å¤–æ¢ä»¶
}
â‹®----
resource: string; // è³‡æºé¡å‹
action: string; // æ“ä½œé¡å‹
conditions?: Record<string, any>; // é¡å¤–æ¢ä»¶
â‹®----
export interface OrganizationRole {
  id: string;
  name: string;
  description: string;
  permissions: Permission[];
  level: number; // è§’è‰²ç­‰ç´š
  isSystemRole: boolean; // æ˜¯å¦ç‚ºç³»çµ±é è¨­è§’è‰²
  createdAt: Date;
}
â‹®----
level: number; // è§’è‰²ç­‰ç´š
isSystemRole: boolean; // æ˜¯å¦ç‚ºç³»çµ±é è¨­è§’è‰²
â‹®----
export interface Permission {
  id: string;
  name: string;
  description: string;
  resource: string;
  action: string;
  scope: 'organization' | 'team' | 'project' | 'user';
}
â‹®----
// API è«‹æ±‚/éŸ¿æ‡‰æ¨¡å‹
export interface CreateOrganizationRequest {
  name: string;
  slug: string;
  description?: string;
  type: 'construction' | 'consulting' | 'supplier';
  profile?: Partial<OrganizationProfile>;
}
â‹®----
export interface UpdateOrganizationRequest {
  name?: string;
  description?: string;
  profile?: Partial<OrganizationProfile>;
}
â‹®----
export interface CreateTeamRequest {
  name: string;
  slug: string;
  description: string;
  parentTeamId?: string;
  privacy: 'open' | 'closed';
  permission: 'read' | 'write' | 'admin';
}
â‹®----
export interface UpdateTeamRequest {
  name?: string;
  description?: string;
  privacy?: 'open' | 'closed';
  permission?: 'read' | 'write' | 'admin';
}
â‹®----
export interface InviteMemberRequest {
  email: string;
  role: string;
  message?: string;
}
â‹®----
export interface UpdateMemberRoleRequest {
  userId: string;
  role: string;
}
â‹®----
// æ¬Šé™æª¢æŸ¥çµæœ
export interface PermissionResult {
  granted: boolean;
  reason?: string;
  level?: 'read' | 'write' | 'admin' | 'none';
  expiresAt?: Date;
}
`````

## File: angular/src/app/features/organization/routes/organization.routes.ts
`````typescript
import { Routes } from '@angular/router';
â‹®----
/**
 * çµ„ç¹”æ¨¡çµ„çš„è·¯ç”±é…ç½®
 * å°é½Š TREE.md çš„çµ„ç¹”ç®¡ç†è·¯ç”±çµæ§‹
 */
`````

## File: angular/src/app/features/organization/services/github-aligned-api.service.ts
`````typescript
import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { 
  GitHubAlignedOrganization, 
  CreateOrganizationRequest, 
  UpdateOrganizationRequest,
  Team,
  TeamMember,
  CreateTeamRequest,
  UpdateTeamRequest,
  OrganizationMember,
  InviteMemberRequest,
  UpdateMemberRoleRequest,
  SecurityManager,
  OrganizationRole
} from '../models/github-aligned-organization.model';
â‹®----
/**
 * GitHub å°é½Šçš„ API æœå‹™
 * å¯¦ä½œå°é½Š GitHub REST API æ¨¡å¼çš„çµ„ç¹”ç®¡ç† API
 */
â‹®----
export class GitHubAlignedApiService {
â‹®----
// ==================== çµ„ç¹”ç®¡ç† API ====================
â‹®----
/**
   * ç²å–çµ„ç¹”è³‡è¨Š (å°é½Š GitHub: GET /orgs/{org})
   */
getOrganization(orgSlug: string): Observable<GitHubAlignedOrganization>
â‹®----
/**
   * å‰µå»ºçµ„ç¹” (å°é½Š GitHub: POST /orgs)
   */
createOrganization(org: CreateOrganizationRequest): Observable<GitHubAlignedOrganization>
â‹®----
/**
   * æ›´æ–°çµ„ç¹” (å°é½Š GitHub: PUT /orgs/{org})
   */
updateOrganization(orgSlug: string, updates: UpdateOrganizationRequest): Observable<GitHubAlignedOrganization>
â‹®----
/**
   * åˆªé™¤çµ„ç¹” (å°é½Š GitHub: DELETE /orgs/{org})
   */
deleteOrganization(orgSlug: string): Observable<void>
â‹®----
// ==================== çµ„ç¹”æˆå“¡ç®¡ç† API ====================
â‹®----
/**
   * ç²å–çµ„ç¹”æˆå“¡åˆ—è¡¨ (å°é½Š GitHub: GET /orgs/{org}/members)
   */
getOrganizationMembers(orgSlug: string): Observable<OrganizationMember[]>
â‹®----
/**
   * é‚€è«‹æˆå“¡åŠ å…¥çµ„ç¹” (å°é½Š GitHub: POST /orgs/{org}/members)
   */
inviteMember(orgSlug: string, invite: InviteMemberRequest): Observable<OrganizationMember>
â‹®----
/**
   * æ›´æ–°æˆå“¡è§’è‰² (å°é½Š GitHub: PUT /orgs/{org}/members/{username})
   */
updateMemberRole(orgSlug: string, userId: string, update: UpdateMemberRoleRequest): Observable<OrganizationMember>
â‹®----
/**
   * ç§»é™¤çµ„ç¹”æˆå“¡ (å°é½Š GitHub: DELETE /orgs/{org}/members/{username})
   */
removeMember(orgSlug: string, userId: string): Observable<void>
â‹®----
// ==================== åœ˜éšŠç®¡ç† API ====================
â‹®----
/**
   * ç²å–çµ„ç¹”åœ˜éšŠåˆ—è¡¨ (å°é½Š GitHub: GET /orgs/{org}/teams)
   */
getTeams(orgSlug: string): Observable<Team[]>
â‹®----
/**
   * å‰µå»ºåœ˜éšŠ (å°é½Š GitHub: POST /orgs/{org}/teams)
   */
createTeam(orgSlug: string, team: CreateTeamRequest): Observable<Team>
â‹®----
/**
   * ç²å–åœ˜éšŠè©³æƒ… (å°é½Š GitHub: GET /orgs/{org}/teams/{team_slug})
   */
getTeam(orgSlug: string, teamSlug: string): Observable<Team>
â‹®----
/**
   * æ›´æ–°åœ˜éšŠ (å°é½Š GitHub: PUT /orgs/{org}/teams/{team_slug})
   */
updateTeam(orgSlug: string, teamSlug: string, updates: UpdateTeamRequest): Observable<Team>
â‹®----
/**
   * åˆªé™¤åœ˜éšŠ (å°é½Š GitHub: DELETE /orgs/{org}/teams/{team_slug})
   */
deleteTeam(orgSlug: string, teamSlug: string): Observable<void>
â‹®----
// ==================== åœ˜éšŠæˆå“¡ç®¡ç† API ====================
â‹®----
/**
   * ç²å–åœ˜éšŠæˆå“¡åˆ—è¡¨ (å°é½Š GitHub: GET /orgs/{org}/teams/{team_slug}/members)
   */
getTeamMembers(orgSlug: string, teamSlug: string): Observable<TeamMember[]>
â‹®----
/**
   * æ·»åŠ åœ˜éšŠæˆå“¡ (å°é½Š GitHub: PUT /orgs/{org}/teams/{team_slug}/members/{username})
   */
addTeamMember(orgSlug: string, teamSlug: string, userId: string): Observable<TeamMember>
â‹®----
/**
   * ç§»é™¤åœ˜éšŠæˆå“¡ (å°é½Š GitHub: DELETE /orgs/{org}/teams/{team_slug}/members/{username})
   */
removeTeamMember(orgSlug: string, teamSlug: string, userId: string): Observable<void>
â‹®----
// ==================== å®‰å…¨ç®¡ç†å™¨ API ====================
â‹®----
/**
   * ç²å–å®‰å…¨ç®¡ç†å™¨åˆ—è¡¨
   */
getSecurityManagers(orgSlug: string): Observable<SecurityManager[]>
â‹®----
/**
   * å‰µå»ºå®‰å…¨ç®¡ç†å™¨
   */
createSecurityManager(orgSlug: string, manager: Partial<SecurityManager>): Observable<SecurityManager>
â‹®----
/**
   * æ›´æ–°å®‰å…¨ç®¡ç†å™¨
   */
updateSecurityManager(orgSlug: string, managerId: string, updates: Partial<SecurityManager>): Observable<SecurityManager>
â‹®----
/**
   * åˆªé™¤å®‰å…¨ç®¡ç†å™¨
   */
deleteSecurityManager(orgSlug: string, managerId: string): Observable<void>
â‹®----
// ==================== çµ„ç¹”è§’è‰² API ====================
â‹®----
/**
   * ç²å–çµ„ç¹”è§’è‰²åˆ—è¡¨
   */
getOrganizationRoles(orgSlug: string): Observable<OrganizationRole[]>
â‹®----
/**
   * å‰µå»ºçµ„ç¹”è§’è‰²
   */
createOrganizationRole(orgSlug: string, role: Partial<OrganizationRole>): Observable<OrganizationRole>
â‹®----
/**
   * æ›´æ–°çµ„ç¹”è§’è‰²
   */
updateOrganizationRole(orgSlug: string, roleId: string, updates: Partial<OrganizationRole>): Observable<OrganizationRole>
â‹®----
/**
   * åˆªé™¤çµ„ç¹”è§’è‰²
   */
deleteOrganizationRole(orgSlug: string, roleId: string): Observable<void>
`````

## File: angular/src/app/features/organization/services/permission-calculation.service.ts
`````typescript
import { Injectable, signal, computed } from '@angular/core';
import { 
  GitHubAlignedOrganization, 
  Team, 
  SecurityManager, 
  OrganizationRole, 
  PermissionResult 
} from '../models/github-aligned-organization.model';
â‹®----
/**
 * æ¬Šé™è¨ˆç®—æœå‹™
 * å¯¦ä½œæ··åˆæ¬Šé™ç³»çµ±ï¼šçµåˆéè¿´è¨ˆç®—å’Œé¸æ“‡æ€§å¿«å–
 */
â‹®----
export class PermissionCalculationService {
â‹®----
private readonly CACHE_TTL = 5 * 60 * 1000; // 5åˆ†é˜å¿«å–
â‹®----
// ä½¿ç”¨ signals é€²è¡ŒéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
â‹®----
// å…¬é–‹çš„åªè®€ signals
â‹®----
// è¨ˆç®—å±¬æ€§
â‹®----
/**
   * ä¸»è¦æ¬Šé™æª¢æŸ¥æ–¹æ³•
   */
async checkPermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<boolean>
â‹®----
// æª¢æŸ¥å¿«å–
â‹®----
// è¨ˆç®—æ¬Šé™
â‹®----
// æ›´æ–°å¿«å–
â‹®----
/**
   * éè¿´æ¬Šé™è¨ˆç®—
   */
private async calculatePermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
// 1. æª¢æŸ¥ç›´æ¥æ¬Šé™
â‹®----
// 2. æª¢æŸ¥åœ˜éšŠç¹¼æ‰¿æ¬Šé™
â‹®----
// 3. æª¢æŸ¥çµ„ç¹”è§’è‰²æ¬Šé™
â‹®----
// 4. æª¢æŸ¥å®‰å…¨ç®¡ç†å™¨æ¬Šé™
â‹®----
/**
   * æª¢æŸ¥ç›´æ¥æ¬Šé™
   */
private async checkDirectPermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºçµ„ç¹”æ“æœ‰è€…
â‹®----
// æª¢æŸ¥ç›´æ¥æˆå“¡æ¬Šé™
â‹®----
/**
   * æª¢æŸ¥åœ˜éšŠç¹¼æ‰¿æ¬Šé™
   */
private async checkTeamInheritedPermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
/**
   * è¨ˆç®—åœ˜éšŠæ¬Šé™
   */
private async calculateTeamPermissions(
    userId: string, 
    teamId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
// æª¢æŸ¥ç›´æ¥åœ˜éšŠæˆå“¡æ¬Šé™
â‹®----
// æª¢æŸ¥çˆ¶åœ˜éšŠç¹¼æ‰¿æ¬Šé™
â‹®----
// çˆ¶åœ˜éšŠæ¬Šé™æœƒé™ç´šä¸€ç´š
â‹®----
/**
   * æª¢æŸ¥çµ„ç¹”è§’è‰²æ¬Šé™
   */
private async checkOrganizationRolePermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
/**
   * æª¢æŸ¥å®‰å…¨ç®¡ç†å™¨æ¬Šé™
   */
private async checkSecurityManagerPermission(
    userId: string, 
    resourceId: string, 
    action: string
): Promise<PermissionResult>
â‹®----
// æª¢æŸ¥å®‰å…¨ç®¡ç†å™¨æ¬Šé™ç¯„åœ
â‹®----
// æª¢æŸ¥ç‰¹å®šå®‰å…¨ç®¡ç†æ¬Šé™
â‹®----
/**
   * æª¢æŸ¥å®‰å…¨ç®¡ç†å™¨æ¬Šé™ç¯„åœ
   */
private async checkSecurityScope(
    securityRole: SecurityManager, 
    resourceId: string
): Promise<boolean>
â‹®----
/**
   * æª¢æŸ¥ç”¨æˆ¶å®‰å…¨ç®¡ç†ç¯„åœ
   */
private async checkUserSecurityScope(userId: string, resourceId: string): Promise<boolean>
â‹®----
// å¯¦ä½œç”¨æˆ¶å®‰å…¨ç®¡ç†ç¯„åœæª¢æŸ¥é‚è¼¯
return true; // ç°¡åŒ–å¯¦ä½œ
â‹®----
/**
   * æª¢æŸ¥åœ˜éšŠå®‰å…¨ç®¡ç†ç¯„åœ
   */
private async checkTeamSecurityScope(teamId: string, resourceId: string): Promise<boolean>
â‹®----
// å¯¦ä½œåœ˜éšŠå®‰å…¨ç®¡ç†ç¯„åœæª¢æŸ¥é‚è¼¯
return true; // ç°¡åŒ–å¯¦ä½œ
â‹®----
/**
   * æª¢æŸ¥ç‰¹å®šå®‰å…¨ç®¡ç†æ¬Šé™
   */
private async checkSpecificSecurityPermission(
    securityRole: SecurityManager, 
    action: string
): Promise<PermissionResult>
â‹®----
/**
   * æ¬Šé™ç­‰ç´šé™ç´šé‚è¼¯
   */
private downgradePermissionLevel(permission: PermissionResult): PermissionResult
â‹®----
/**
   * æ‡‰ç”¨åœ˜éšŠæ¬Šé™ç­‰ç´š
   */
private applyTeamPermissionLevel(
    permission: PermissionResult, 
    teamPermission: 'read' | 'write' | 'admin'
): PermissionResult
â‹®----
/**
   * æ˜ å°„è§’è‰²ç­‰ç´šåˆ°æ¬Šé™ç­‰ç´š
   */
private mapRoleLevelToPermission(level: number): 'read' | 'write' | 'admin'
â‹®----
/**
   * æ˜ å°„åœ˜éšŠè§’è‰²åˆ°æ¬Šé™ç­‰ç´š
   */
private mapTeamRoleToPermission(role: 'member' | 'maintainer' | 'admin'): 'read' | 'write' | 'admin'
â‹®----
/**
   * å»ºç«‹åœ˜éšŠå±¤ç´šçµæ§‹
   */
private buildTeamHierarchy(teams: Team[]): Team[]
â‹®----
// åˆå§‹åŒ–æ‰€æœ‰åœ˜éšŠ
â‹®----
// å»ºç«‹å±¤ç´šé—œä¿‚
â‹®----
/**
   * æª¢æŸ¥å¿«å–æ˜¯å¦æœ‰æ•ˆ
   */
private isCacheValid(cacheKey: string): boolean
â‹®----
/**
   * æ›´æ–°å¿«å–
   */
private updateCache(cacheKey: string, result: PermissionResult): void
â‹®----
/**
   * æ¸…é™¤å¿«å–
   */
clearCache(): void
â‹®----
// ==================== ç‹€æ…‹ç®¡ç†æ–¹æ³• ====================
â‹®----
/**
   * è¨­å®šçµ„ç¹”åˆ—è¡¨
   */
setOrganizations(orgs: GitHubAlignedOrganization[]): void
â‹®----
/**
   * è¨­å®šç•¶å‰çµ„ç¹”
   */
setCurrentOrganization(org: GitHubAlignedOrganization | null): void
â‹®----
/**
   * æ–°å¢åœ˜éšŠ
   */
addTeam(team: Team): void
â‹®----
/**
   * æ›´æ–°åœ˜éšŠ
   */
updateTeam(teamId: string, updates: Partial<Team>): void
â‹®----
/**
   * ç§»é™¤åœ˜éšŠ
   */
removeTeam(teamId: string): void
`````

## File: angular/src/app/features/organization/index.ts
`````typescript
// çµ„ç¹”æ¨¡çµ„åŒ¯å‡ºæª”æ¡ˆ
`````

## File: angular/src/app/features/repository/components/collaborator-management.component.ts
`````typescript
// src/app/features/repository/components/collaborator-management.component.ts
â‹®----
import { Component, inject, signal, computed, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ActivatedRoute, Router } from '@angular/router';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatChipsModule } from '@angular/material/chips';
import { MatDividerModule } from '@angular/material/divider';
import { MatTableModule } from '@angular/material/table';
import { MatMenuModule } from '@angular/material/menu';
import { MatDialogModule, MatDialog } from '@angular/material/dialog';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatSelectModule } from '@angular/material/select';
import { FormsModule } from '@angular/forms';
â‹®----
import { RepositoryService } from '../../../core/services/repository.service';
import { AuthService } from '../../../core/services/auth.service';
import { RepositoryCollaborator } from '../../../core/models/auth.model';
â‹®----
export class CollaboratorManagementComponent implements OnInit {
â‹®----
// Signals
â‹®----
// Dialog state
â‹®----
// Table columns
â‹®----
ngOnInit()
â‹®----
async loadCollaborators(repoId: string)
â‹®----
goBack()
â‹®----
addCollaborator()
â‹®----
closeAddDialog()
â‹®----
async submitAddCollaborator()
â‹®----
editPermission(collaborator: RepositoryCollaborator)
â‹®----
// TODO: å¯¦ç¾ç·¨è¼¯æ¬Šé™åŠŸèƒ½
â‹®----
async removeCollaborator(collaborator: RepositoryCollaborator)
â‹®----
getPermissionLabel(permission: string): string
â‹®----
getPermissionClass(permission: string): string
â‹®----
formatDate(date: Date): string
`````

## File: angular/src/app/features/repository/components/repository-detail.component.ts
`````typescript
// src/app/features/repository/components/repository-detail.component.ts
â‹®----
import { Component, inject, signal, computed, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ActivatedRoute, Router } from '@angular/router';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatChipsModule } from '@angular/material/chips';
import { MatTabsModule } from '@angular/material/tabs';
import { MatTooltipModule } from '@angular/material/tooltip';
import { MatDividerModule } from '@angular/material/divider';
â‹®----
import { RepositoryService } from '../../../core/services/repository.service';
import { AuthService } from '../../../core/services/auth.service';
import { Repository } from '../../../core/models/auth.model';
â‹®----
export class RepositoryDetailComponent implements OnInit {
â‹®----
// Signals
â‹®----
// Computed signals
â‹®----
ngOnInit()
â‹®----
async loadRepository(repoId: string)
â‹®----
goBack()
â‹®----
editRepository()
â‹®----
manageCollaborators()
â‹®----
manageSettings()
â‹®----
async deleteRepository()
â‹®----
formatDate(date: Date | undefined): string
`````

## File: angular/src/app/features/repository/components/repository-list.component.ts
`````typescript
// src/app/features/repository/components/repository-list.component.ts
â‹®----
import { Component, inject, signal, computed, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatChipsModule } from '@angular/material/chips';
import { MatDividerModule } from '@angular/material/divider';
import { MatTooltipModule } from '@angular/material/tooltip';
import { Router } from '@angular/router';
â‹®----
import { RepositoryService } from '../../../core/services/repository.service';
import { AuthService } from '../../../core/services/auth.service';
import { Repository } from '../../../core/models/auth.model';
â‹®----
export class RepositoryListComponent implements OnInit {
â‹®----
// Signals
â‹®----
// Computed signals
â‹®----
ngOnInit()
â‹®----
async loadRepositories()
â‹®----
// è¼‰å…¥ç”¨æˆ¶çš„ Repository
â‹®----
createRepository()
â‹®----
viewRepository(repoId: string)
â‹®----
editRepository(repoId: string)
â‹®----
manageCollaborators(repoId: string)
â‹®----
manageSettings(repoId: string)
â‹®----
async deleteRepository(repoId: string)
â‹®----
formatDate(date: Date): string
`````

## File: angular/src/app/features/repository/models/repository.model.ts
`````typescript
// src/app/features/repository/models/repository.model.ts
â‹®----
import { Repository, RepositoryCollaborator, RepositoryTeamAccess } from '../../../core/models/auth.model';
â‹®----
// Repository ç›¸é—œçš„æ“´å±•æ¨¡å‹
export interface RepositorySettings {
  defaultBranch: string;
  allowSquashMerge: boolean;
  allowMergeCommit: boolean;
  allowRebaseMerge: boolean;
  deleteBranchOnMerge: boolean;
  hasIssues: boolean;
  hasProjects: boolean;
  hasWiki: boolean;
  hasDownloads: boolean;
}
â‹®----
export interface RepositoryStats {
  stars: number;
  watchers: number;
  forks: number;
  openIssues: number;
  openPullRequests: number;
}
â‹®----
export interface RepositoryBranch {
  name: string;
  protected: boolean;
  lastCommit: {
    sha: string;
    message: string;
    author: string;
    date: Date;
  };
}
â‹®----
export interface RepositoryCommit {
  sha: string;
  message: string;
  author: {
    name: string;
    email: string;
    avatar?: string;
  };
  date: Date;
  url?: string;
}
â‹®----
export interface RepositoryIssue {
  id: string;
  number: number;
  title: string;
  body?: string;
  state: 'open' | 'closed';
  labels: string[];
  assignees: string[];
  author: string;
  createdAt: Date;
  updatedAt: Date;
  closedAt?: Date;
}
â‹®----
export interface RepositoryPullRequest {
  id: string;
  number: number;
  title: string;
  body?: string;
  state: 'open' | 'closed' | 'merged';
  headBranch: string;
  baseBranch: string;
  author: string;
  assignees: string[];
  reviewers: string[];
  labels: string[];
  createdAt: Date;
  updatedAt: Date;
  mergedAt?: Date;
  closedAt?: Date;
}
â‹®----
// Repository å‰µå»ºè«‹æ±‚
export interface CreateRepositoryRequest {
  name: string;
  description?: string;
  private: boolean;
  ownerId?: string;
  initializeWithReadme?: boolean;
  addLicense?: boolean;
  addGitignore?: boolean;
}
â‹®----
// Repository æ›´æ–°è«‹æ±‚
export interface UpdateRepositoryRequest {
  name?: string;
  description?: string;
  private?: boolean;
  defaultBranch?: string;
  topics?: string[];
}
â‹®----
// å”ä½œè€…é‚€è«‹è«‹æ±‚
export interface InviteCollaboratorRequest {
  userId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
  message?: string;
}
â‹®----
// åœ˜éšŠè¨ªå•æ¬Šé™è«‹æ±‚
export interface GrantTeamAccessRequest {
  teamId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
}
â‹®----
// Repository æœç´¢çµæœ
export interface RepositorySearchResult {
  repositories: Repository[];
  totalCount: number;
  hasMore: boolean;
}
â‹®----
// Repository æœç´¢åƒæ•¸
export interface RepositorySearchParams {
  query?: string;
  ownerId?: string;
  isPrivate?: boolean;
  topics?: string[];
  sortBy?: 'name' | 'created' | 'updated' | 'stars';
  sortOrder?: 'asc' | 'desc';
  page?: number;
  limit?: number;
}
â‹®----
// Repository æ¬Šé™æª¢æŸ¥çµæœ
export interface RepositoryPermissionResult {
  canRead: boolean;
  canWrite: boolean;
  canAdmin: boolean;
  canDelete: boolean;
  permission: string;
  reason?: string;
}
â‹®----
// Repository çµ±è¨ˆæ•¸æ“š
export interface RepositoryAnalytics {
  commits: {
    total: number;
    last30Days: number;
    contributors: number;
  };
  issues: {
    open: number;
    closed: number;
    total: number;
  };
  pullRequests: {
    open: number;
    merged: number;
    closed: number;
    total: number;
  };
  releases: {
    total: number;
    latest?: {
      version: string;
      date: Date;
    };
  };
}
â‹®----
// Repository æ¨¡æ¿
export interface RepositoryTemplate {
  id: string;
  name: string;
  description: string;
  owner: string;
  topics: string[];
  isPublic: boolean;
  createdAt: Date;
}
â‹®----
// Repository æ¯”è¼ƒçµæœ
export interface RepositoryComparison {
  ahead: number;
  behind: number;
  commits: RepositoryCommit[];
  files: {
    added: string[];
    modified: string[];
    removed: string[];
  };
}
â‹®----
// Repository æ¨™ç±¤
export interface RepositoryLabel {
  id: string;
  name: string;
  color: string;
  description?: string;
}
â‹®----
// Repository é‡Œç¨‹ç¢‘
export interface RepositoryMilestone {
  id: string;
  title: string;
  description?: string;
  state: 'open' | 'closed';
  dueDate?: Date;
  openIssues: number;
  closedIssues: number;
  createdAt: Date;
  updatedAt: Date;
}
â‹®----
// Repository Webhook
export interface RepositoryWebhook {
  id: string;
  url: string;
  events: string[];
  active: boolean;
  createdAt: Date;
  lastDelivery?: {
    status: number;
    date: Date;
  };
}
â‹®----
// Repository éƒ¨ç½²
export interface RepositoryDeployment {
  id: string;
  environment: string;
  ref: string;
  sha: string;
  status: 'pending' | 'success' | 'failure' | 'error';
  createdAt: Date;
  updatedAt: Date;
  url?: string;
}
â‹®----
// Repository ç’°å¢ƒ
export interface RepositoryEnvironment {
  name: string;
  protectionRules: {
    requiredReviewers: string[];
    waitTimer: number;
  };
  deploymentBranchPolicy: {
    protectedBranches: boolean;
    customBranchPolicy: boolean;
  };
}
â‹®----
// Repository å®‰å…¨è­¦å ±
export interface RepositorySecurityAlert {
  id: string;
  type: 'vulnerability' | 'secret' | 'dependency';
  severity: 'low' | 'moderate' | 'high' | 'critical';
  package?: string;
  description: string;
  state: 'open' | 'dismissed' | 'fixed';
  createdAt: Date;
  updatedAt: Date;
  url?: string;
}
â‹®----
// Repository ä»£ç¢¼æƒæçµæœ
export interface RepositoryCodeScanningResult {
  id: string;
  rule: string;
  severity: 'error' | 'warning' | 'note';
  message: string;
  path: string;
  line: number;
  column: number;
  createdAt: Date;
  state: 'open' | 'dismissed' | 'fixed';
}
`````

## File: angular/src/app/features/repository/routes/repository.routes.ts
`````typescript
// src/app/features/repository/routes/repository.routes.ts
â‹®----
import { Routes } from '@angular/router';
import { authGuard } from '../../user/auth/auth.guard';
import { repositoryReadGuard, repositoryManageGuard } from '../../../core/guards/permission.guard';
`````

## File: angular/src/app/features/user/auth/auth.guard.ts
`````typescript
import { inject } from '@angular/core';
import { CanActivateFn, Router } from '@angular/router';
import { Auth } from '@angular/fire/auth';
import { authState } from 'rxfire/auth';
import { from, map } from 'rxjs';
â‹®----
export const authGuard: CanActivateFn = () =>
`````

## File: angular/src/app/features/user/auth/index.ts
`````typescript
/**
 * èªè­‰æ¨¡çµ„åŒ¯å‡ºæª”æ¡ˆ
 * å°é½Š TREE.md çµæ§‹è¦æ±‚
 */
â‹®----
// çµ„ä»¶åŒ¯å‡º
â‹®----
// æœå‹™åŒ¯å‡º
â‹®----
// å®ˆè¡›åŒ¯å‡º
`````

## File: angular/src/app/features/user/auth/unauthorized.component.ts
`````typescript
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatCardModule } from '@angular/material/card';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { Router } from '@angular/router';
â‹®----
export class UnauthorizedComponent
â‹®----
constructor(private router: Router)
â‹®----
logout()
`````

## File: angular/src/app/features/user/index.ts
`````typescript
/**
 * ç”¨æˆ¶æ¨¡çµ„åŒ¯å‡ºæª”æ¡ˆ
 * å°é½Š TREE.md çµæ§‹è¦æ±‚
 */
â‹®----
// æ¨¡å‹åŒ¯å‡º
â‹®----
// æœå‹™åŒ¯å‡º
â‹®----
// çµ„ä»¶åŒ¯å‡º
â‹®----
// è·¯ç”±åŒ¯å‡º
`````

## File: angular/src/app/features/user/user.model.ts
`````typescript
/**
 * ç”¨æˆ¶æ¨¡å‹ - å°é½Š GitHub Account è¨­è¨ˆ
 * å¯¦ä½œå®Œæ•´çš„ç”¨æˆ¶è³‡æ–™çµæ§‹å’Œç®¡ç†åŠŸèƒ½
 */
â‹®----
export interface User {
  id: string;
  uid: string; // Firebase UID
  username: string;
  email: string;
  displayName: string;
  avatar?: string;
  bio?: string;
  location?: string;
  website?: string;
  company?: string;
  blog?: string;
  twitter?: string;
  github?: string;
  linkedin?: string;
  status: 'active' | 'inactive' | 'suspended' | 'pending';
  emailVerified: boolean;
  twoFactorEnabled: boolean;
  createdAt: Date;
  updatedAt: Date;
  lastLoginAt?: Date;
  lastActiveAt?: Date;
  
  // GitHub å°é½Šçš„ç¤¾äº¤å¸³æˆ¶
  socialAccounts: SocialAccount[];
  
  // å°ˆæ¥­è­‰ç…§
  certificates: Certificate[];
  
  // çµ„ç¹”æˆå“¡è³‡æ ¼
  organizationMemberships: OrganizationMembership[];
  
  // é€šçŸ¥åå¥½
  notificationPreferences: NotificationPreferences;
  
  // éš±ç§è¨­å®š
  privacySettings: PrivacySettings;
}
â‹®----
uid: string; // Firebase UID
â‹®----
// GitHub å°é½Šçš„ç¤¾äº¤å¸³æˆ¶
â‹®----
// å°ˆæ¥­è­‰ç…§
â‹®----
// çµ„ç¹”æˆå“¡è³‡æ ¼
â‹®----
// é€šçŸ¥åå¥½
â‹®----
// éš±ç§è¨­å®š
â‹®----
export interface SocialAccount {
  id: string;
  provider: 'twitter' | 'facebook' | 'linkedin' | 'youtube' | 'instagram' | 'github';
  url: string;
  username?: string;
  verified: boolean;
  addedAt: Date;
}
â‹®----
export interface Certificate {
  id: string;
  name: string;
  issuer: string;
  issueDate: Date;
  expiryDate?: Date;
  credentialId?: string;
  credentialUrl?: string;
  status: 'valid' | 'expired' | 'pending' | 'revoked';
  category: 'professional' | 'safety' | 'technical' | 'management';
  uploadedAt: Date;
  verifiedAt?: Date;
}
â‹®----
export interface OrganizationMembership {
  id: string;
  organizationId: string;
  organizationName: string;
  role: string;
  status: 'active' | 'pending' | 'suspended';
  joinedAt: Date;
  permissions: string[];
}
â‹®----
export interface NotificationPreferences {
  email: {
    enabled: boolean;
    frequency: 'immediate' | 'daily' | 'weekly' | 'never';
    types: string[];
  };
  push: {
    enabled: boolean;
    types: string[];
  };
  inApp: {
    enabled: boolean;
    types: string[];
  };
}
â‹®----
export interface PrivacySettings {
  profileVisibility: 'public' | 'private' | 'organization';
  emailVisibility: 'public' | 'private' | 'organization';
  socialAccountsVisibility: 'public' | 'private' | 'organization';
  certificatesVisibility: 'public' | 'private' | 'organization';
  activityVisibility: 'public' | 'private' | 'organization';
}
â‹®----
// API è«‹æ±‚/éŸ¿æ‡‰æ¨¡å‹
export interface CreateUserRequest {
  username: string;
  email: string;
  displayName: string;
  password: string;
}
â‹®----
export interface UpdateUserRequest {
  displayName?: string;
  bio?: string;
  location?: string;
  website?: string;
  company?: string;
  blog?: string;
  twitter?: string;
  github?: string;
  linkedin?: string;
}
â‹®----
export interface AddSocialAccountRequest {
  provider: string;
  url: string;
  username?: string;
}
â‹®----
export interface UpdateNotificationPreferencesRequest {
  email?: Partial<NotificationPreferences['email']>;
  push?: Partial<NotificationPreferences['push']>;
  inApp?: Partial<NotificationPreferences['inApp']>;
}
â‹®----
export interface UpdatePrivacySettingsRequest {
  profileVisibility?: 'public' | 'private' | 'organization';
  emailVisibility?: 'public' | 'private' | 'organization';
  socialAccountsVisibility?: 'public' | 'private' | 'organization';
  certificatesVisibility?: 'public' | 'private' | 'organization';
  activityVisibility?: 'public' | 'private' | 'organization';
}
â‹®----
// GitHub å°é½Šçš„ API éŸ¿æ‡‰
export interface UserApiResponse {
  id: string;
  username: string;
  email: string;
  displayName: string;
  avatar?: string;
  bio?: string;
  location?: string;
  website?: string;
  company?: string;
  blog?: string;
  twitter?: string;
  github?: string;
  linkedin?: string;
  status: string;
  emailVerified: boolean;
  twoFactorEnabled: boolean;
  createdAt: string;
  updatedAt: string;
  lastLoginAt?: string;
  lastActiveAt?: string;
}
â‹®----
export interface SocialAccountApiResponse {
  provider: string;
  url: string;
  username?: string;
  verified: boolean;
  addedAt: string;
}
â‹®----
// åˆ†é éŸ¿æ‡‰
export interface PaginatedResponse<T> {
  data: T[];
  pagination: {
    page: number;
    perPage: number;
    total: number;
    totalPages: number;
    hasNext: boolean;
    hasPrev: boolean;
  };
}
`````

## File: angular/src/app/features/user/user.routes.ts
`````typescript
import { Routes } from '@angular/router';
â‹®----
/**
 * ç”¨æˆ¶æ¨¡çµ„è·¯ç”±é…ç½®
 * å°é½Š TREE.md çµæ§‹å’Œ GitHub Account è¨­è¨ˆ
 */
`````

## File: angular/src/app/landing/landing.component.ts
`````typescript
import { Component, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Router } from '@angular/router';
import { MatCardModule } from '@angular/material/card';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatDividerModule } from '@angular/material/divider';
â‹®----
export class LandingComponent {
â‹®----
navigateToLogin()
â‹®----
navigateToSignup()
`````

## File: angular/src/app/app.html
`````html
<div class="app-container">
  <router-outlet></router-outlet>
</div>
`````

## File: angular/src/index.html
`````html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AngularFireRolekit</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="mat-typography">
  <app-root></app-root>
</body>
</html>
`````

## File: angular/src/main.ts
`````typescript
import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { App } from './app/app';
`````

## File: angular/.editorconfig
`````
# Editor configuration, see https://editorconfig.org
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true

[*.ts]
quote_type = single
ij_typescript_use_double_quotes = false

[*.md]
max_line_length = off
trim_trailing_whitespace = false
`````

## File: angular/firebase.json
`````json
{}
`````

## File: angular/README.md
`````markdown
# ğŸ” AngularFireRolekit

A complete role-based user management starter built with **Angular 20**, **Firebase v11**, and **Angular Material**.

Includes:
- Firebase Auth with email/password
- Admin/Editor/Viewer role-based access
- Article management
- Responsive UI using Angular Material
- Route guards & loader spinners

---

## ğŸš€ Features

- âœ… Firebase Authentication (Email/Password)
- ğŸ” Role-based routing: Admin, Editor, Viewer
- ğŸ‘‘ Admin dashboard: manage users & roles
- âœï¸ Editor panel: create/edit/delete articles
- ğŸ‘€ Viewer mode: read-only article viewer
- âš¡ Angular Material design
- ğŸ”„ Realtime Firestore sync
- ğŸ” Route guards for security
- ğŸ¡ Loading spinners on all data fetches

---

## ğŸ“ Project Setup

### 1. Clone the repository

```bash
git clone https://github.com/YOUR_USERNAME/angular-fire-rolekit.git
cd angular-fire-rolekit
```

### 2. Firebase Setup

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Create a new project
3. Register a Web App under the project settings
4. Copy your Firebase config and paste it into:

```ts
// Replace this in src/environments/environment.ts

export const environment = {
  production: false,
  firebase: {
    apiKey: '...',
    authDomain: '...',
    projectId: '...',
    storageBucket: '...',
    messagingSenderId: '...',
    appId: '...',
    measurementId: '...'
  }
};
```

> ğŸ’¡ You can copy `src/environments/environment.sample.ts` as a starting point.

---

## ğŸ” Admin Creation

Users signedup will have 'viewer' role, go to firebase storage and change role to 'admin' to use admin page to update user roles.

---

## ğŸ§ª Run Locally

### Development Server

```bash
npm install
ng serve
```

Open your browser: [http://localhost:4200](http://localhost:4200)

---

## ğŸ—ƒ Firebase Collections

- `users`: { uid, email, role }
- `articles`: { title, content, createdAt }

---

## ğŸ”§ Angular CLI Commands

### Generate Component

```bash
ng generate component component-name
```

### Build the Project

```bash
ng build
```

Build artifacts will be stored in the `dist/` directory.

---

## ğŸ§ª Testing

### Unit Tests

```bash
ng test
```

### End-to-End Tests

```bash
ng e2e
```

You can integrate your preferred e2e testing framework.

---

## ğŸ“¦ Deployment

To build for production:

```bash
ng build --configuration production
```

Deploy using Firebase Hosting, Vercel, Netlify, etc.

## License

This project is licensed under the [MIT License](./LICENSE).
`````

## File: angular/tsconfig.app.json
`````json
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/app",
    "types": []
  },
  "include": [
    "src/**/*.ts"
  ],
  "exclude": [
    "src/**/*.spec.ts"
  ]
}
`````

## File: angular/tsconfig.json
`````json
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "compileOnSave": false,
  "compilerOptions": {
    "strict": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "skipLibCheck": true,
    "isolatedModules": true,
    "experimentalDecorators": true,
    "importHelpers": true,
    "target": "ES2022",
    "module": "preserve"
  },
  "angularCompilerOptions": {
    "enableI18nLegacyMessageIdFormat": false,
    "strictInjectionParameters": true,
    "strictInputAccessModifiers": true,
    "typeCheckHostBindings": true,
    "strictTemplates": true
  },
  "files": [],
  "references": [
    {
      "path": "./tsconfig.app.json"
    },
    {
      "path": "./tsconfig.spec.json"
    }
  ]
}
`````

## File: angular/tsconfig.spec.json
`````json
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/spec",
    "types": [
      "jasmine"
    ]
  },
  "include": [
    "src/**/*.ts"
  ]
}
`````

## File: docs/DEVELOPMENT_GUIDE.md
`````markdown
# ç‡Ÿå»ºç®¡ç†ç³»çµ± - é–‹ç™¼æŒ‡å—èˆ‡æ¨™æº–

## 1. é–‹ç™¼ç’°å¢ƒè¨­å®š

### 1.1 å¿…è¦å·¥å…·å®‰è£

#### 1.1.1 Node.js ç’°å¢ƒ
```bash
# å®‰è£ Node.js (å»ºè­°ç‰ˆæœ¬ 18+)
# ä¸‹è¼‰ä¸¦å®‰è£: https://nodejs.org/

# é©—è­‰å®‰è£
node --version
npm --version
```

#### 1.1.2 Angular CLI
```bash
# å…¨åŸŸå®‰è£ Angular CLI
npm install -g @angular/cli

# é©—è­‰å®‰è£
ng version
```

#### 1.1.3 Yarn åŒ…ç®¡ç†å™¨
```bash
# å®‰è£ Yarn
npm install -g yarn

# é©—è­‰å®‰è£
yarn --version
```

#### 1.1.4 Git ç‰ˆæœ¬æ§åˆ¶
```bash
# å®‰è£ Git
# ä¸‹è¼‰ä¸¦å®‰è£: https://git-scm.com/

# è¨­å®šç”¨æˆ¶è³‡è¨Š
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

### 1.2 å°ˆæ¡ˆåˆå§‹åŒ–

#### 1.2.1 å»ºç«‹æ–°å°ˆæ¡ˆ
```bash
# å»ºç«‹æ–°çš„ Angular å°ˆæ¡ˆ
ng new construction-management-system --routing --style=scss --package-manager=yarn

# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd construction-management-system
```

#### 1.2.2 å®‰è£å¿…è¦ä¾è³´
```bash
# å®‰è£ Angular Material
ng add @angular/material

# å®‰è£ NgRx
ng add @ngrx/store
ng add @ngrx/effects
ng add @ngrx/store-devtools

# å®‰è£å…¶ä»–å¿…è¦å¥—ä»¶
yarn add @angular/cdk @angular/flex-layout
yarn add chart.js ng2-charts
yarn add socket.io-client
```

### 1.3 é–‹ç™¼å·¥å…·é…ç½®

#### 1.3.1 VS Code æ“´å±•
æ¨è–¦å®‰è£ä»¥ä¸‹ VS Code æ“´å±•ï¼š
- Angular Language Service
- TypeScript Importer
- Prettier - Code formatter
- ESLint
- GitLens
- Thunder Client (API æ¸¬è©¦)

#### 1.3.2 ESLint é…ç½®
```json
// .eslintrc.json
{
  "extends": [
    "@angular-eslint/recommended",
    "@angular-eslint/template/process-inline-templates"
  ],
  "rules": {
    "@angular-eslint/directive-selector": [
      "error",
      {
        "type": "attribute",
        "prefix": "app",
        "style": "camelCase"
      }
    ],
    "@angular-eslint/component-selector": [
      "error",
      {
        "type": "element",
        "prefix": "app",
        "style": "kebab-case"
      }
    ]
  }
}
```

#### 1.3.3 Prettier é…ç½®
```json
// .prettierrc
{
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "semi": true,
  "printWidth": 100
}
```

## 2. ä»£ç¢¼è¦ç¯„

### 2.1 æª”æ¡ˆå‘½åè¦ç¯„

#### 2.1.1 å…ƒä»¶æª”æ¡ˆ
```typescript
// å…ƒä»¶æª”æ¡ˆå‘½å: kebab-case.component.ts
// ç¯„ä¾‹: user-profile.component.ts

// å°æ‡‰çš„æª”æ¡ˆçµæ§‹:
user-profile.component.ts
user-profile.component.html
user-profile.component.scss
user-profile.component.spec.ts
```

#### 2.1.2 æœå‹™æª”æ¡ˆ
```typescript
// æœå‹™æª”æ¡ˆå‘½å: kebab-case.service.ts
// ç¯„ä¾‹: user.service.ts, auth.service.ts
```

#### 2.1.3 æ¨¡å‹æª”æ¡ˆ
```typescript
// æ¨¡å‹æª”æ¡ˆå‘½å: kebab-case.model.ts
// ç¯„ä¾‹: user.model.ts, project.model.ts
```

#### 2.1.4 é é¢æª”æ¡ˆ
```typescript
// é é¢æª”æ¡ˆå‘½å: kebab-case.page.ts
// ç¯„ä¾‹: user-dashboard.page.ts, project-list.page.ts
```

### 2.2 ç›®éŒ„çµæ§‹è¦ç¯„

#### 2.2.1 åŠŸèƒ½æ¨¡çµ„çµæ§‹
```
feature-name/
â”œâ”€â”€ components/                    # å…ƒä»¶ç›®éŒ„
â”‚   â”œâ”€â”€ component-name/
â”‚   â”‚   â”œâ”€â”€ component-name.component.ts
â”‚   â”‚   â”œâ”€â”€ component-name.component.html
â”‚   â”‚   â”œâ”€â”€ component-name.component.scss
â”‚   â”‚   â”œâ”€â”€ component-name.component.spec.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ pages/                         # é é¢ç›®éŒ„
â”œâ”€â”€ services/                      # æœå‹™ç›®éŒ„
â”œâ”€â”€ models/                        # æ¨¡å‹ç›®éŒ„
â”œâ”€â”€ state/                         # ç‹€æ…‹ç®¡ç†ç›®éŒ„
â”œâ”€â”€ routes/                        # è·¯ç”±ç›®éŒ„
â””â”€â”€ index.ts                       # æ¨¡çµ„åŒ¯å‡º
```

#### 2.2.2 å…±äº«æ¨¡çµ„çµæ§‹
```
shared/
â”œâ”€â”€ components/                    # å…±äº«å…ƒä»¶
â”œâ”€â”€ services/                      # å…±äº«æœå‹™
â”œâ”€â”€ models/                        # å…±äº«æ¨¡å‹
â”œâ”€â”€ pipes/                         # å…±äº«ç®¡é“
â”œâ”€â”€ directives/                    # å…±äº«æŒ‡ä»¤
â””â”€â”€ utils/                         # å·¥å…·å‡½æ•¸
```

### 2.3 TypeScript è¦ç¯„

#### 2.3.1 ä»‹é¢å®šç¾©
```typescript
// ä½¿ç”¨ PascalCase å‘½åä»‹é¢
export interface UserProfile {
  id: string;
  firstName: string;
  lastName: string;
  email: string;
  avatar?: string;
}

// ä½¿ç”¨ I å‰ç¶´å‘½åä»‹é¢ (å¯é¸)
export interface IUserService {
  getUser(id: string): Observable<UserProfile>;
  updateUser(user: UserProfile): Observable<void>;
}
```

#### 2.3.2 é¡åˆ¥å®šç¾©
```typescript
// ä½¿ç”¨ PascalCase å‘½åé¡åˆ¥
export class UserService {
  constructor(private http: HttpClient) {}

  getUser(id: string): Observable<UserProfile> {
    return this.http.get<UserProfile>(`/api/users/${id}`);
  }
}
```

#### 2.3.3 è®Šæ•¸å‘½å
```typescript
// ä½¿ç”¨ camelCase å‘½åè®Šæ•¸
const userName = 'john_doe';
const userProfile: UserProfile = { ... };

// ä½¿ç”¨ UPPER_SNAKE_CASE å‘½åå¸¸æ•¸
const API_BASE_URL = 'https://api.example.com';
const MAX_RETRY_ATTEMPTS = 3;
```

### 2.4 Angular è¦ç¯„

#### 2.4.1 å…ƒä»¶å®šç¾©
```typescript
@Component({
  selector: 'app-user-profile',
  templateUrl: './user-profile.component.html',
  styleUrls: ['./user-profile.component.scss'],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class UserProfileComponent implements OnInit, OnDestroy {
  @Input() user: UserProfile;
  @Output() userUpdated = new EventEmitter<UserProfile>();

  private destroy$ = new Subject<void>();

  constructor(
    private userService: UserService,
    private cdr: ChangeDetectorRef
  ) {}

  ngOnInit(): void {
    // åˆå§‹åŒ–é‚è¼¯
  }

  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }
}
```

#### 2.4.2 æœå‹™å®šç¾©
```typescript
@Injectable({
  providedIn: 'root'
})
export class UserService {
  private readonly apiUrl = environment.apiUrl;

  constructor(private http: HttpClient) {}

  getUser(id: string): Observable<UserProfile> {
    return this.http.get<UserProfile>(`${this.apiUrl}/users/${id}`);
  }

  updateUser(user: UserProfile): Observable<UserProfile> {
    return this.http.put<UserProfile>(`${this.apiUrl}/users/${user.id}`, user);
  }
}
```

#### 2.4.3 æ¨¡çµ„å®šç¾©
```typescript
@NgModule({
  declarations: [
    UserProfileComponent,
    UserListComponent
  ],
  imports: [
    CommonModule,
    ReactiveFormsModule,
    MaterialModule
  ],
  exports: [
    UserProfileComponent,
    UserListComponent
  ]
})
export class UserModule { }
```

## 3. Git å·¥ä½œæµç¨‹

### 3.1 åˆ†æ”¯ç­–ç•¥

#### 3.1.1 ä¸»è¦åˆ†æ”¯
- **main**: ç”Ÿç”¢ç’°å¢ƒåˆ†æ”¯
- **develop**: é–‹ç™¼ç’°å¢ƒåˆ†æ”¯
- **feature/**: åŠŸèƒ½é–‹ç™¼åˆ†æ”¯
- **hotfix/**: ç·Šæ€¥ä¿®å¾©åˆ†æ”¯
- **release/**: ç™¼å¸ƒæº–å‚™åˆ†æ”¯

#### 3.1.2 åˆ†æ”¯å‘½åè¦ç¯„
```bash
# åŠŸèƒ½åˆ†æ”¯
feature/user-authentication
feature/project-management
feature/social-features

# ä¿®å¾©åˆ†æ”¯
hotfix/fix-login-bug
hotfix/fix-data-validation

# ç™¼å¸ƒåˆ†æ”¯
release/v1.0.0
release/v1.1.0
```

### 3.2 æäº¤è¨Šæ¯è¦ç¯„

#### 3.2.1 æäº¤è¨Šæ¯æ ¼å¼
```
<type>(<scope>): <subject>

<body>

<footer>
```

#### 3.2.2 é¡å‹èªªæ˜
- **feat**: æ–°åŠŸèƒ½
- **fix**: ä¿®å¾©å•é¡Œ
- **docs**: æ–‡æª”æ›´æ–°
- **style**: ä»£ç¢¼æ ¼å¼èª¿æ•´
- **refactor**: ä»£ç¢¼é‡æ§‹
- **test**: æ¸¬è©¦ç›¸é—œ
- **chore**: å»ºç½®éç¨‹æˆ–è¼”åŠ©å·¥å…·çš„è®Šå‹•

#### 3.2.3 æäº¤è¨Šæ¯ç¯„ä¾‹
```bash
feat(user): add user profile management

- Add user profile component
- Implement profile update functionality
- Add form validation
- Add unit tests

Closes #123
```

### 3.3 ä»£ç¢¼å¯©æŸ¥æµç¨‹

#### 3.3.1 Pull Request è¦ç¯„
- æ¨™é¡Œä½¿ç”¨ç°¡æ½”çš„æè¿°
- è©³ç´°æè¿°è®Šæ›´å…§å®¹
- åˆ—å‡ºç›¸é—œçš„ Issue
- åŒ…å«æ¸¬è©¦èªªæ˜
- é™„ä¸Šæˆªåœ– (UI è®Šæ›´)

#### 3.3.2 å¯©æŸ¥æª¢æŸ¥æ¸…å–®
- [ ] ä»£ç¢¼ç¬¦åˆå°ˆæ¡ˆè¦ç¯„
- [ ] é€šéæ‰€æœ‰æ¸¬è©¦
- [ ] æ²’æœ‰ ESLint éŒ¯èª¤
- [ ] æ–‡æª”å·²æ›´æ–°
- [ ] æ•ˆèƒ½å½±éŸ¿å·²è©•ä¼°
- [ ] å®‰å…¨æ€§å·²è€ƒæ…®

## 4. æ¸¬è©¦ç­–ç•¥

### 4.1 æ¸¬è©¦é‡‘å­—å¡”

#### 4.1.1 å–®å…ƒæ¸¬è©¦ (70%)
```typescript
// user.service.spec.ts
describe('UserService', () => {
  let service: UserService;
  let httpMock: HttpTestingController;

  beforeEach(() => {
    TestBed.configureTestingModule({
      imports: [HttpClientTestingModule],
      providers: [UserService]
    });
    service = TestBed.inject(UserService);
    httpMock = TestBed.inject(HttpTestingController);
  });

  it('should get user by id', () => {
    const mockUser: UserProfile = {
      id: '1',
      firstName: 'John',
      lastName: 'Doe',
      email: 'john@example.com'
    };

    service.getUser('1').subscribe(user => {
      expect(user).toEqual(mockUser);
    });

    const req = httpMock.expectOne('/api/users/1');
    expect(req.request.method).toBe('GET');
    req.flush(mockUser);
  });
});
```

#### 4.1.2 æ•´åˆæ¸¬è©¦ (20%)
```typescript
// user-profile.component.spec.ts
describe('UserProfileComponent', () => {
  let component: UserProfileComponent;
  let fixture: ComponentFixture<UserProfileComponent>;
  let userService: jasmine.SpyObj<UserService>;

  beforeEach(() => {
    const spy = jasmine.createSpyObj('UserService', ['getUser', 'updateUser']);

    TestBed.configureTestingModule({
      declarations: [UserProfileComponent],
      providers: [
        { provide: UserService, useValue: spy }
      ]
    });

    fixture = TestBed.createComponent(UserProfileComponent);
    component = fixture.componentInstance;
    userService = TestBed.inject(UserService) as jasmine.SpyObj<UserService>;
  });

  it('should load user profile on init', () => {
    const mockUser: UserProfile = { ... };
    userService.getUser.and.returnValue(of(mockUser));

    component.ngOnInit();

    expect(userService.getUser).toHaveBeenCalled();
    expect(component.user).toEqual(mockUser);
  });
});
```

#### 4.1.3 ç«¯å°ç«¯æ¸¬è©¦ (10%)
```typescript
// user-profile.e2e-spec.ts
describe('User Profile E2E', () => {
  it('should display user profile', () => {
    cy.visit('/user/profile');
    cy.get('[data-cy=user-name]').should('contain', 'John Doe');
    cy.get('[data-cy=user-email]').should('contain', 'john@example.com');
  });

  it('should update user profile', () => {
    cy.visit('/user/profile');
    cy.get('[data-cy=edit-button]').click();
    cy.get('[data-cy=first-name]').clear().type('Jane');
    cy.get('[data-cy=save-button]').click();
    cy.get('[data-cy=success-message]').should('be.visible');
  });
});
```

### 4.2 æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™

#### 4.2.1 è¦†è“‹ç‡è¦æ±‚
- **æ•´é«”è¦†è“‹ç‡**: â‰¥ 80%
- **å…ƒä»¶è¦†è“‹ç‡**: â‰¥ 85%
- **æœå‹™è¦†è“‹ç‡**: â‰¥ 90%
- **å·¥å…·å‡½æ•¸è¦†è“‹ç‡**: â‰¥ 95%

#### 4.2.2 è¦†è“‹ç‡æª¢æŸ¥
```bash
# åŸ·è¡Œæ¸¬è©¦ä¸¦ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
ng test --code-coverage

# æŸ¥çœ‹è¦†è“‹ç‡å ±å‘Š
open coverage/index.html
```

## 5. æ•ˆèƒ½å„ªåŒ–

### 5.1 Angular æ•ˆèƒ½æœ€ä½³å¯¦è¸

#### 5.1.1 OnPush è®Šæ›´æª¢æ¸¬ç­–ç•¥
```typescript
@Component({
  selector: 'app-user-list',
  templateUrl: './user-list.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class UserListComponent {
  @Input() users: UserProfile[] = [];

  constructor(private cdr: ChangeDetectorRef) {}

  updateUsers(newUsers: UserProfile[]): void {
    this.users = [...newUsers];
    this.cdr.markForCheck();
  }
}
```

#### 5.1.2 TrackBy å‡½æ•¸
```typescript
@Component({
  selector: 'app-user-list',
  template: `
    <div *ngFor="let user of users; trackBy: trackByUserId">
      {{ user.name }}
    </div>
  `
})
export class UserListComponent {
  users: UserProfile[] = [];

  trackByUserId(index: number, user: UserProfile): string {
    return user.id;
  }
}
```

#### 5.1.3 æ‡¶åŠ è¼‰æ¨¡çµ„
```typescript
// app.routes.ts
const routes: Routes = [
  {
    path: 'user',
    loadChildren: () => import('./features/user/user.module').then(m => m.UserModule)
  },
  {
    path: 'project',
    loadChildren: () => import('./features/project/project.module').then(m => m.ProjectModule)
  }
];
```

### 5.2 è¨˜æ†¶é«”ç®¡ç†

#### 5.2.1 è¨‚é–±ç®¡ç†
```typescript
export class UserComponent implements OnInit, OnDestroy {
  private destroy$ = new Subject<void>();

  ngOnInit(): void {
    this.userService.getUsers()
      .pipe(takeUntil(this.destroy$))
      .subscribe(users => {
        this.users = users;
      });
  }

  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }
}
```

#### 5.2.2 åœ–ç‰‡æ‡¶åŠ è¼‰
```typescript
@Component({
  template: `
    <img [src]="imageSrc" 
         loading="lazy"
         [alt]="imageAlt">
  `
})
export class ImageComponent {
  @Input() imageSrc: string;
  @Input() imageAlt: string;
}
```

## 6. å®‰å…¨æ€§è¦ç¯„

### 6.1 è¼¸å…¥é©—è­‰

#### 6.1.1 è¡¨å–®é©—è­‰
```typescript
@Component({
  template: `
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <input matInput 
               formControlName="email"
               placeholder="Email">
        <mat-error *ngIf="userForm.get('email')?.hasError('required')">
          Email is required
        </mat-error>
        <mat-error *ngIf="userForm.get('email')?.hasError('email')">
          Please enter a valid email
        </mat-error>
      </mat-form-field>
    </form>
  `
})
export class UserFormComponent {
  userForm = this.fb.group({
    email: ['', [Validators.required, Validators.email]],
    password: ['', [Validators.required, Validators.minLength(8)]]
  });

  constructor(private fb: FormBuilder) {}
}
```

#### 6.1.2 ä¼ºæœå™¨ç«¯é©—è­‰
```typescript
@Injectable()
export class ValidationService {
  validateEmail(email: string): boolean {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  sanitizeInput(input: string): string {
    return input.trim().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
  }
}
```

### 6.2 èªè­‰èˆ‡æˆæ¬Š

#### 6.2.1 JWT Token ç®¡ç†
```typescript
@Injectable()
export class AuthService {
  private tokenKey = 'auth_token';

  login(credentials: LoginCredentials): Observable<AuthResponse> {
    return this.http.post<AuthResponse>('/api/auth/login', credentials)
      .pipe(
        tap(response => this.setToken(response.token)),
        catchError(this.handleError)
      );
  }

  private setToken(token: string): void {
    localStorage.setItem(this.tokenKey, token);
  }

  getToken(): string | null {
    return localStorage.getItem(this.tokenKey);
  }

  logout(): void {
    localStorage.removeItem(this.tokenKey);
  }
}
```

#### 6.2.2 è·¯ç”±å®ˆè¡›
```typescript
@Injectable()
export class AuthGuard implements CanActivate {
  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  canActivate(): boolean {
    if (this.authService.isAuthenticated()) {
      return true;
    } else {
      this.router.navigate(['/login']);
      return false;
    }
  }
}
```

## 7. éƒ¨ç½²èˆ‡å»ºç½®

### 7.1 å»ºç½®é…ç½®

#### 7.1.1 ç’°å¢ƒé…ç½®
```typescript
// environment.ts
export const environment = {
  production: false,
  apiUrl: 'http://localhost:3000/api',
  firebase: {
    apiKey: 'your-api-key',
    authDomain: 'your-domain.firebaseapp.com',
    projectId: 'your-project-id'
  }
};

// environment.prod.ts
export const environment = {
  production: true,
  apiUrl: 'https://api.yourdomain.com',
  firebase: {
    apiKey: 'your-prod-api-key',
    authDomain: 'your-domain.firebaseapp.com',
    projectId: 'your-prod-project-id'
  }
};
```

#### 7.1.2 å»ºç½®è…³æœ¬
```json
// package.json
{
  "scripts": {
    "build": "ng build",
    "build:prod": "ng build --configuration=production",
    "build:staging": "ng build --configuration=staging",
    "test": "ng test",
    "test:ci": "ng test --watch=false --browsers=ChromeHeadless",
    "e2e": "ng e2e",
    "lint": "ng lint",
    "lint:fix": "ng lint --fix"
  }
}
```

### 7.2 Docker é…ç½®

#### 7.2.1 Dockerfile
```dockerfile
# Dockerfile
FROM node:18-alpine as build

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build:prod

FROM nginx:alpine
COPY --from=build /app/dist/construction-management-system /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### 7.2.2 Docker Compose
```yaml
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build: .
    ports:
      - "80:80"
    environment:
      - NODE_ENV=production
    depends_on:
      - backend

  backend:
    image: construction-management-backend:latest
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://user:pass@db:5432/construction_db
    depends_on:
      - db

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=construction_db
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

## 8. ç›£æ§èˆ‡æ—¥èªŒ

### 8.1 éŒ¯èª¤è™•ç†

#### 8.1.1 å…¨åŸŸéŒ¯èª¤è™•ç†
```typescript
@Injectable()
export class GlobalErrorHandler implements ErrorHandler {
  constructor(private logger: LoggerService) {}

  handleError(error: any): void {
    this.logger.error('Global error:', error);
    
    // ç™¼é€éŒ¯èª¤åˆ°ç›£æ§æœå‹™
    this.sendErrorToMonitoring(error);
  }

  private sendErrorToMonitoring(error: any): void {
    // å¯¦ä½œéŒ¯èª¤ç›£æ§é‚è¼¯
  }
}
```

#### 8.1.2 HTTP éŒ¯èª¤æ””æˆªå™¨
```typescript
@Injectable()
export class ErrorInterceptor implements HttpInterceptor {
  constructor(private router: Router) {}

  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {
    return next.handle(req).pipe(
      catchError((error: HttpErrorResponse) => {
        if (error.status === 401) {
          this.router.navigate(['/login']);
        }
        
        return throwError(error);
      })
    );
  }
}
```

### 8.2 æ•ˆèƒ½ç›£æ§

#### 8.2.1 æ•ˆèƒ½æŒ‡æ¨™æ”¶é›†
```typescript
@Injectable()
export class PerformanceService {
  measurePageLoad(pageName: string): void {
    const startTime = performance.now();
    
    window.addEventListener('load', () => {
      const endTime = performance.now();
      const loadTime = endTime - startTime;
      
      this.sendMetric('page_load_time', loadTime, { page: pageName });
    });
  }

  measureApiCall(apiName: string, duration: number): void {
    this.sendMetric('api_call_duration', duration, { api: apiName });
  }

  private sendMetric(name: string, value: number, tags: any): void {
    // ç™¼é€æŒ‡æ¨™åˆ°ç›£æ§æœå‹™
  }
}
```

## 9. æ–‡æª”æ¨™æº–

### 9.1 ä»£ç¢¼æ–‡æª”

#### 9.1.1 JSDoc è¨»è§£
```typescript
/**
 * ç”¨æˆ¶æœå‹™é¡åˆ¥ï¼Œè² è²¬è™•ç†ç”¨æˆ¶ç›¸é—œçš„æ¥­å‹™é‚è¼¯
 * @class UserService
 */
@Injectable({
  providedIn: 'root'
})
export class UserService {
  /**
   * æ ¹æ“šç”¨æˆ¶ ID ç²å–ç”¨æˆ¶è³‡æ–™
   * @param {string} id - ç”¨æˆ¶ ID
   * @returns {Observable<UserProfile>} ç”¨æˆ¶è³‡æ–™çš„ Observable
   * @example
   * ```typescript
   * this.userService.getUser('123').subscribe(user => {
   *   console.log(user.name);
   * });
   * ```
   */
  getUser(id: string): Observable<UserProfile> {
    return this.http.get<UserProfile>(`/api/users/${id}`);
  }
}
```

#### 9.1.2 README æ–‡æª”
```markdown
# ç”¨æˆ¶æ¨¡çµ„

## æ¦‚è¿°
ç”¨æˆ¶æ¨¡çµ„è² è²¬è™•ç†ç”¨æˆ¶ç›¸é—œçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨æˆ¶èªè­‰ã€å€‹äººè³‡æ–™ç®¡ç†ã€è­‰ç…§ç®¡ç†ç­‰ã€‚

## åŠŸèƒ½
- ç”¨æˆ¶è¨»å†Šèˆ‡ç™»å…¥
- å€‹äººè³‡æ–™ç®¡ç†
- è­‰ç…§ç®¡ç†
- ç¤¾äº¤åŠŸèƒ½

## ä½¿ç”¨æ–¹å¼
```typescript
import { UserModule } from './user.module';

@NgModule({
  imports: [UserModule]
})
export class AppModule {}
```

## API åƒè€ƒ
- [UserService](./services/user.service.ts)
- [UserProfileComponent](./components/user-profile.component.ts)
```

### 9.2 æ¶æ§‹æ–‡æª”

#### 9.2.1 æ¨¡çµ„é—œä¿‚åœ–
```mermaid
graph TD
    UserModule --> AuthModule
    UserModule --> ProfileModule
    UserModule --> CertificateModule
    UserModule --> SocialModule
    
    OrganizationModule --> UserModule
    ProjectModule --> UserModule
    ProjectModule --> OrganizationModule
```

#### 9.2.2 è³‡æ–™æµç¨‹åœ–
```mermaid
sequenceDiagram
    participant U as User
    participant C as Component
    participant S as Service
    participant A as API
    
    U->>C: ç”¨æˆ¶æ“ä½œ
    C->>S: å‘¼å«æœå‹™
    S->>A: HTTP è«‹æ±‚
    A-->>S: å›æ‡‰è³‡æ–™
    S-->>C: è™•ç†çµæœ
    C-->>U: æ›´æ–° UI
```

---

**æ–‡ä»¶ç‰ˆæœ¬**: v1.0  
**æœ€å¾Œæ›´æ–°**: 2024-01-01  
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ  
**å¯©æ ¸è€…**: æŠ€è¡“æ¶æ§‹å¸«
`````

## File: graph-bank/plan-github-account-architecture.md
`````markdown
# PLAN Agent - GitHub å¼ Account æ¶æ§‹å¯¦æ–½è¨ˆç•«

## ğŸ“‹ è¨ˆç•«æ¦‚è¿°

åŸºæ–¼ sequential-thinking çš„æ·±åº¦åˆ†æå’Œ Context7 æŸ¥è©¢çš„ç›¸é—œæ–‡æª”ï¼Œåˆ¶å®šå®Œæ•´çš„ GitHub å¼ Account æ¶æ§‹å¯¦æ–½è¨ˆç•«ã€‚

### ğŸ¯ ç›®æ¨™
å¯¦ç¾å®Œæ•´çš„ Angular v20 + Signals + Firebase GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±ï¼ŒåŒ…å«ï¼š
- **çµ±ä¸€ Account æ¨¡å‹**ï¼šä½¿ç”¨ type å€åˆ†å€‹äººå’Œçµ„ç¹”
- **å€‹äºº (User)**ï¼šæœ‰å”ä½œè€…é—œä¿‚
- **çµ„ç¹” (Organization)**ï¼šæœ‰çµ„ç¹”æˆå“¡å’Œåœ˜éšŠ
- **åœ˜éšŠ (Team)**ï¼šæœ‰åœ˜éšŠæˆå“¡
- **å°ˆæ¡ˆ (Repository)**ï¼šæœ‰æ“æœ‰è€…ï¼ˆå¯ä»¥æ˜¯å€‹äººæˆ–çµ„ç¹”ï¼‰
- **æ¬Šé™ç³»çµ±**ï¼šGitHub å¼çš„æ¬Šé™å’Œè§’è‰²ç®¡ç†

### ğŸ“Š è¤‡é›œåº¦è©•ä¼°
- **ç­‰ç´š**: Level 4 - Complex System
- **ç¯„åœ**: èªè­‰ç³»çµ±ã€çµ„ç¹”ç®¡ç†ã€åœ˜éšŠç®¡ç†ã€Repository ç®¡ç†ã€æ¬Šé™æ§åˆ¶ã€UI å…ƒä»¶ã€è·¯ç”±é‡æ§‹ã€æ¸¬è©¦ç­–ç•¥
- **å½±éŸ¿æª”æ¡ˆ**: 30+ å€‹æª”æ¡ˆéœ€è¦æ–°å¢/ä¿®æ”¹/åˆªé™¤
- **ç¸½ä»»å‹™æ•¸**: 39å€‹ä»»å‹™
- **Phase æ•¸**: 6å€‹ Phase

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### æ ¸å¿ƒæ¶æ§‹ç‰¹é»

1. **çµ±ä¸€ Account æ¨¡å‹**ï¼š
   - ä½¿ç”¨ `type: 'user' | 'organization'` å€åˆ†å€‹äººå’Œçµ„ç¹”
   - æ‰€æœ‰ Account å­˜å„²åœ¨ `accounts/{uid}` è·¯å¾‘
   - ä½¿ç”¨ `login` ä½œç‚ºå”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆGitHub é¢¨æ ¼ï¼‰

2. **å€‹äºº (User) ç‰¹æ€§**ï¼š
   - ç¹¼æ‰¿ Account åŸºç¤å±¬æ€§
   - æœ‰å”ä½œè€…é—œä¿‚ï¼ˆRepository Collaboratorï¼‰
   - å¯ä»¥æ“æœ‰ Repository
   - å¯ä»¥åŠ å…¥çµ„ç¹”å’Œåœ˜éšŠ

3. **çµ„ç¹” (Organization) ç‰¹æ€§**ï¼š
   - ç¹¼æ‰¿ Account åŸºç¤å±¬æ€§
   - æœ‰çµ„ç¹”æˆå“¡ï¼ˆOrganization Memberï¼‰
   - æœ‰åœ˜éšŠï¼ˆTeamï¼‰
   - å¯ä»¥æ“æœ‰ Repository

4. **æ¬Šé™ç³»çµ±**ï¼š
   - çµ„ç¹”è§’è‰²ï¼šOwner, Admin, Member, Billing, Outside Collaborator
   - åœ˜éšŠè§’è‰²ï¼šMaintainer, Member
   - Repository æ¬Šé™ï¼šread, triage, write, maintain, admin

### Firestore é›†åˆçµæ§‹

```
/accounts/{accountId}
  - çµ±ä¸€å­˜å„²æ‰€æœ‰ Account é¡å‹
  - User ç‰¹å®šæ¬„ä½ï¼šuid, displayName, photoURL, certificates, socialRelations
  - Organization ç‰¹å®šæ¬„ä½ï¼šdescription, ownerId, businessLicense
  
  /members/{userId} - çµ„ç¹”æˆå“¡å­é›†åˆ
  /teams/{teamId} - åœ˜éšŠå­é›†åˆ
    /members/{userId} - åœ˜éšŠæˆå“¡å­é›†åˆ

/repositories/{repositoryId}
  - Repository åŸºæœ¬è³‡è¨Š
  /collaborators/{userId} - å€‹äººå”ä½œè€…
  /teamAccess/{teamId} - åœ˜éšŠè¨ªå•æ¬Šé™
```

## ğŸš€ åˆ†éšæ®µå¯¦æ–½è¨ˆç•«

### Phase 1: åŸºç¤æ¶æ§‹é‡æ§‹ (8å€‹ä»»å‹™)
**ç›®æ¨™**: æ¸…ç†é‡è¤‡æª”æ¡ˆï¼Œå»ºç«‹ç¾ä»£åŒ–åŸºç¤æ¶æ§‹
**é¢¨éšª**: ä½
**å½±éŸ¿**: å°

#### ä»»å‹™æ¸…å–®
- [ ] **task-1-1**: åˆªé™¤ `app/auth/` æ•´å€‹ç›®éŒ„
- [ ] **task-1-2**: å»ºç«‹ `core/models/account-state.ts` (AccountState é¡åˆ¥)
- [ ] **task-1-3**: å»ºç«‹ `core/utils/validation.utils.ts` (ValidationUtils)
- [ ] **task-1-4**: æ›´æ–° `core/models/auth.model.ts` (å¢åŠ  Value Objects)
- [ ] **task-1-5**: æ›´æ–° `core/services/auth.service.ts` (ä½¿ç”¨ AccountState å’Œ Signals)
- [ ] **task-1-6**: ä¿®æ”¹ LoginComponent ä½¿ç”¨æ–°çš„ auth.service
- [ ] **task-1-7**: ä¿®æ”¹ SignupComponent ä½¿ç”¨æ–°çš„ auth.service
- [ ] **task-1-8**: ä¿®å¾© loading ç‹€æ…‹é‡ç½®å•é¡Œ

#### é©—æ”¶æ¨™æº–
- AccountState é¡åˆ¥æ­£ç¢ºä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
- ValidationUtils æä¾›å®Œæ•´çš„é©—è­‰åŠŸèƒ½
- auth.service ä½¿ç”¨ AccountState å’Œ Signals
- Login/Signup çµ„ä»¶æ­£å¸¸å·¥ä½œ
- Loading ç‹€æ…‹æ­£ç¢ºé‡ç½®

### Phase 2: æœå‹™å±¤ç¾ä»£åŒ– (6å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹ç¾ä»£åŒ–æ¬Šé™ç®¡ç†ç³»çµ±
**é¢¨éšª**: ä¸­
**å½±éŸ¿**: ä¸­

#### ä»»å‹™æ¸…å–®
- [ ] **task-2-1**: æ›´æ–° `core/services/organization.service.ts` (ä½¿ç”¨ Value Objectsï¼Œä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥)
- [ ] **task-2-2**: å¯¦ä½œ `core/services/permission.service.ts` (ä½¿ç”¨ Signalsï¼Œæä¾›é€²éšæ¬Šé™ç®¡ç†)
- [ ] **task-2-3**: å¯¦ä½œ `core/guards/permission.guard.ts` (æ›¿ä»£ aclGuard)
- [ ] **task-2-4**: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
- [ ] **task-2-5**: æ•´åˆ PermissionService åˆ° OrganizationService (æ›¿æ› AuthService æ¬Šé™æª¢æŸ¥)
- [ ] **task-2-6**: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±

#### é©—æ”¶æ¨™æº–
- OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥
- PermissionService æ­£ç¢ºè¨ˆç®—æ¬Šé™
- permissionGuard æ­£ç¢ºä¿è­·è·¯ç”±
- PermissionService æˆåŠŸæ•´åˆåˆ° OrganizationService
- æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

### Phase 3: Repository ç®¡ç†ç³»çµ± (7å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„ Repository ç®¡ç†åŠŸèƒ½
**é¢¨éšª**: ä¸­
**å½±éŸ¿**: å¤§

#### ä»»å‹™æ¸…å–®
- [ ] **task-3-1**: æ›´æ–° `core/models/auth.model.ts` (å¢åŠ  Repository ç›¸é—œä»‹é¢)
- [ ] **task-3-2**: å¯¦ä½œ `core/services/repository.service.ts`
- [ ] **task-3-3**: å¯¦ä½œ `routes/repository-detail/repository-detail.component.ts`
- [ ] **task-3-4**: å¯¦ä½œ `routes/repository-settings/repository-settings.component.ts`
- [ ] **task-3-5**: å¯¦ä½œ `routes/collaborators-list/collaborators-list.component.ts`
- [ ] **task-3-6**: å¯¦ä½œ `routes/team-access-list/team-access-list.component.ts`
- [ ] **task-3-7**: æ›´æ–°è·¯ç”±æ”¯æ´ Repository ç®¡ç†

#### é©—æ”¶æ¨™æº–
- Repository æœå‹™ CRUD æ“ä½œæ­£å¸¸
- Repository UI å…ƒä»¶åŠŸèƒ½å®Œæ•´
- å”ä½œè€…å’Œåœ˜éšŠè¨ªå•ç®¡ç†æ­£å¸¸

### Phase 4: UI å±¤ç¾ä»£åŒ– (6å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹ç¾ä»£åŒ– UI å…ƒä»¶
**é¢¨éšª**: ä¸­
**å½±éŸ¿**: å¤§

#### ä»»å‹™æ¸…å–®
- [ ] **task-4-1**: å¯¦ä½œ `organization-detail.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-2**: å¯¦ä½œ `members-list.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-3**: å¯¦ä½œ `teams-list.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-4**: å¯¦ä½œ `team-create.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-5**: å¯¦ä½œ `organization-settings.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-6**: å¯¦ä½œ `organization-dashboard.component.ts` (ä½¿ç”¨ Control Flow + Signals)

#### é©—æ”¶æ¨™æº–
- æ‰€æœ‰ UI å…ƒä»¶ä½¿ç”¨ Control Flow (@if, @for)
- æ¬Šé™æª¢æŸ¥èˆ‡ Signals æ•´åˆ
- çµ„ç¹”/åœ˜éšŠç®¡ç†åŠŸèƒ½å®Œæ•´

### Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆ (5å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„è·¯ç”±ç³»çµ±
**é¢¨éšª**: é«˜
**å½±éŸ¿**: å¤§

#### ä»»å‹™æ¸…å–®
- [ ] **task-5-1**: æ›´æ–° `app.routes.ts` æ”¯æ´çµ„ç¹”/åœ˜éšŠ/Repository çµæ§‹
- [ ] **task-5-2**: æ›´æ–° `organization.routes.ts` æ•´åˆ Permission å®ˆè¡›
- [ ] **task-5-3**: å»ºç«‹å®Œæ•´çš„è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯
- [ ] **task-5-4**: æ•´åˆæ¬Šé™æ§åˆ¶åˆ°æ‰€æœ‰è·¯ç”±
- [ ] **task-5-5**: æ›´æ–°è·¯ç”±å®ˆè¡›ä½¿ç”¨ PermissionService

#### é©—æ”¶æ¨™æº–
- è·¯ç”±çµæ§‹ç¬¦åˆ GitHub å¼è¨­è¨ˆ
- æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ¬Šé™ä¿è­·
- å°èˆªé‚è¼¯æ­£ç¢º

### Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ (7å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®‰å…¨çš„å¾Œç«¯è¦å‰‡å’Œå®Œæ•´æ¸¬è©¦
**é¢¨éšª**: é«˜
**å½±éŸ¿**: å¤§

#### ä»»å‹™æ¸…å–®
- [ ] **task-6-1**: å¯¦ä½œ `firebase.rules` (accounts é›†åˆè¦å‰‡)
- [ ] **task-6-2**: å¯¦ä½œ Repository å®‰å…¨è¦å‰‡
- [ ] **task-6-3**: å¯¦ä½œçµ„ç¹”/åœ˜éšŠ/æˆå“¡æ¬Šé™è¦å‰‡
- [ ] **task-6-4**: å¯¦ä½œå–®å…ƒæ¸¬è©¦ (auth.service, permission.service, organization.service)
- [ ] **task-6-5**: å¯¦ä½œæ•´åˆæ¸¬è©¦ (è·¯ç”±å®ˆè¡›, æ¬Šé™æª¢æŸ¥)
- [ ] **task-6-6**: å¯¦ä½œ E2E æ¸¬è©¦ (å®Œæ•´ç”¨æˆ¶æµç¨‹)
- [ ] **task-6-7**: é€²è¡Œå®Œæ•´åŠŸèƒ½æ¸¬è©¦å’Œé©—è­‰

#### é©—æ”¶æ¨™æº–
- Firestore å®‰å…¨è¦å‰‡æ­£ç¢ºä¿è­·è³‡æ–™
- æ¸¬è©¦è¦†è“‹ç‡é”æ¨™
- å®Œæ•´åŠŸèƒ½æ¸¬è©¦é€šé

## âš ï¸ é¢¨éšªè©•ä¼°èˆ‡ä¾è³´é—œä¿‚

### é«˜é¢¨éšªé …ç›®
1. **Signals ç‹€æ…‹ç®¡ç†è¤‡é›œåŒ–**: AccountState å’Œ PermissionService ä½¿ç”¨ Signals
   - **é¢¨éšª**: ç‹€æ…‹ç®¡ç†é‚è¼¯è¤‡é›œï¼Œå¯èƒ½å°è‡´æ€§èƒ½å•é¡Œ
   - **ç·©è§£**: è©³ç´°æ¸¬è©¦å’Œæ€§èƒ½ç›£æ§

2. **Repository ç³»çµ±æ–°å¢åŠŸèƒ½**: å®Œæ•´çš„ Repository ç®¡ç†ç³»çµ±
   - **é¢¨éšª**: åŠŸèƒ½è¤‡é›œåº¦é«˜ï¼Œå¯èƒ½å½±éŸ¿ç¾æœ‰ç³»çµ±
   - **ç·©è§£**: åˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

3. **æ¬Šé™ç³»çµ±é‡æ§‹**: ACLService â†’ PermissionService
   - **é¢¨éšª**: æ¬Šé™é‚è¼¯è®Šæ›´å¯èƒ½å°è‡´å®‰å…¨å•é¡Œ
   - **ç·©è§£**: è©³ç´°æ¸¬è©¦èˆ‡å®‰å…¨è¦å‰‡é©—è­‰

4. **è·¯ç”±çµæ§‹é‡æ§‹**: å¤§é‡è·¯ç”±è®Šæ›´
   - **é¢¨éšª**: å¯èƒ½ç ´å£ç¾æœ‰å°èˆª
   - **ç·©è§£**: åˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

### ä¾è³´é—œä¿‚
- **Phase 1** â†’ **Phase 2**: AuthService æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥
- **Phase 2-1** â†’ **Phase 2-2**: OrganizationService æä¾›æˆå“¡æŸ¥è©¢åŠŸèƒ½
- **Phase 2-2** â†’ **Phase 2-5**: PermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†
- **Phase 2** â†’ **Phase 3**: Repository æœå‹™ä¾è³´å®Œæ•´çš„æ¬Šé™ç³»çµ±
- **Phase 2** â†’ **Phase 4**: UI å…ƒä»¶ä¾è³´å®Œæ•´çš„æ¬Šé™ç³»çµ±
- **Phase 3** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ Repository åŠŸèƒ½
- **Phase 4** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ UI å…ƒä»¶
- **Phase 5** â†’ **Phase 6**: æ¸¬è©¦ä¾è³´å®Œæ•´åŠŸèƒ½

### å»ºè­°å¯¦æ–½é †åº
1. **Phase 1** (åŸºç¤æ¸…ç†) - é¢¨éšªä½ï¼Œå½±éŸ¿å°
2. **Phase 2** (æ ¸å¿ƒæœå‹™) - é¢¨éšªä¸­ï¼Œå½±éŸ¿ä¸­
3. **Phase 3** (Repository ç³»çµ±) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
4. **Phase 4** (UI å…ƒä»¶) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
5. **Phase 5** (è·¯ç”±æ•´åˆ) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§
6. **Phase 6** (å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§

## ğŸ¯ é©—æ”¶æ¨™æº–

### åŠŸèƒ½é©—æ”¶
- ç™»å…¥/è¨»å†ŠæˆåŠŸå¾Œï¼Œ`accounts/{uid}` ç”¨æˆ¶æ–‡ä»¶æ­£ç¢ºåŒæ­¥
- çµ„ç¹”/æˆå“¡/åœ˜éšŠ/Repository æŸ¥è©¢æ­£å¸¸ï¼Œè§’è‰²æª¢æŸ¥èˆ‡å®ˆè¡›å¯ç”¨
- Login/Signup loading ç‹€æ…‹åœ¨æˆåŠŸèˆ‡å¤±æ•—æ™‚æ­£ç¢ºé‡ç½®
- ç§»é™¤é‡è¤‡çš„ `app/auth/` ä»£ç¢¼ï¼Œä¸å½±éŸ¿ç¾æœ‰ UI èˆ‡è·¯ç”±
- OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥
- PermissionService æ¬Šé™æ§åˆ¶æ­£ç¢ºé‹ä½œ
- çµ„ç¹”å»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- å€‹äººå»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- Firestore å®‰å…¨è¦å‰‡ä¿è­·è³‡æ–™å®‰å…¨
- å®Œæ•´çš„ GitHub å¼çµ„ç¹”ç®¡ç†å’Œ Repository ç®¡ç†åŠŸèƒ½

### æŠ€è¡“é©—æ”¶
- ä½¿ç”¨ Angular v20 ç¾ä»£åŒ–ç‰¹æ€§ (Signals, Control Flow)
- æ¸¬è©¦è¦†è“‹ç‡é”æ¨™ï¼ŒåŠŸèƒ½æ¸¬è©¦é€šé
- ä»£ç¢¼å“è³ªç¬¦åˆæ¨™æº–
- æ€§èƒ½æŒ‡æ¨™é”æ¨™

## ğŸ“š åƒè€ƒæ–‡æª”

### Context7 æŸ¥è©¢çµæœ
- **Angular Signals Examples**: 345å€‹ä»£ç¢¼ç¯„ä¾‹ï¼ŒTrust Score 8.9
- **Firebase Firestore**: 70161å€‹ä»£ç¢¼ç¯„ä¾‹ï¼ŒTrust Score 8.0

### é—œéµæŠ€è¡“æ¨¡å¼
1. **Signals ç‹€æ…‹ç®¡ç†**: ä½¿ç”¨ signal() å’Œ computed() é€²è¡ŒéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
2. **è¡¨å–®ç‹€æ…‹ç®¡ç†**: ä½¿ç”¨ signals ç®¡ç†è¤‡é›œçš„è¡¨å–®ç‹€æ…‹
3. **Undo/Redo åŠŸèƒ½**: ä½¿ç”¨ signals å¯¦ç¾æ­·å²ç‹€æ…‹ç®¡ç†
4. **Loading ç‹€æ…‹**: ä½¿ç”¨ signals ç®¡ç†åŠ è¼‰ç‹€æ…‹
5. **Effects**: ä½¿ç”¨ effect() è™•ç†å‰¯ä½œç”¨
6. **å­é›†åˆ (Subcollections)**: åœ¨æ–‡æª”å…§å‰µå»ºé›†åˆï¼Œç”¨æ–¼çµ„ç¹”ç›¸é—œæ•¸æ“š
7. **å®‰å…¨è¦å‰‡**: ç‚ºå­é›†åˆå®šç¾©ç¨ç«‹çš„å®‰å…¨è¦å‰‡
8. **éæ­¸é€šé…ç¬¦**: ä½¿ç”¨ `{document=**}` åŒ¹é…é›†åˆå’Œæ‰€æœ‰å­é›†åˆ

## ğŸ“‹ ä¿®æ­£å¾Œçš„ä¾è³´é—œä¿‚åœ–

```mermaid
graph TD
    A[Phase 1: AuthService + AccountState] --> B[Phase 2-1: OrganizationService]
    B --> C[Phase 2-2: PermissionService]
    C --> D[Phase 2-3: PermissionGuard]
    C --> E[Phase 2-4: RoleGuard]
    C --> F[Phase 2-5: æ•´åˆåˆ° OrganizationService]
    C --> G[Phase 2-6: æ•´åˆåˆ°è·¯ç”±]
    
    F --> H[Phase 3: Repository ç®¡ç†]
    G --> H
    F --> I[Phase 4: UI å…ƒä»¶]
    G --> I
    
    H --> J[Phase 5: è·¯ç”±æ•´åˆ]
    I --> J
    J --> K[Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦]
    
    style A fill:#4da6ff,stroke:#0066cc,color:white
    style B fill:#ffa64d,stroke:#cc7a30,color:white
    style C fill:#4dbb5f,stroke:#36873f,color:white
    style F fill:#d94dbb,stroke:#a3378a,color:white
    style G fill:#d94dbb,stroke:#a3378a,color:white
```

### ä¿®æ­£èªªæ˜
1. **Phase 1** â†’ **Phase 2-1**: AuthService æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥çµ¦ OrganizationService
2. **Phase 2-1** â†’ **Phase 2-2**: OrganizationService æä¾›æˆå“¡æŸ¥è©¢åŠŸèƒ½çµ¦ PermissionService
3. **Phase 2-2** â†’ **Phase 2-5**: PermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†ï¼Œæ•´åˆåˆ° OrganizationService
4. **Phase 2** â†’ **Phase 3/4**: å®Œæ•´çš„æ¬Šé™ç³»çµ±æ”¯æ´ Repository ç®¡ç†å’Œ UI å…ƒä»¶
5. **Phase 3/4** â†’ **Phase 5**: åŠŸèƒ½å®Œæˆå¾Œé€²è¡Œè·¯ç”±æ•´åˆ
6. **Phase 5** â†’ **Phase 6**: è·¯ç”±æ•´åˆå®Œæˆå¾Œé€²è¡Œå®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦

## ğŸš€ ä¸‹ä¸€æ­¥è¡Œå‹•

1. **é€²å…¥ IMPLEMENT æ¨¡å¼** - é–‹å§‹ Phase 1 çš„å¯¦æ–½
2. **å„ªå…ˆè™•ç†åŸºç¤æ¸…ç†** - åˆªé™¤é‡è¤‡çµ„ä»¶ï¼Œå»ºç«‹ç¾ä»£åŒ–åŸºç¤
3. **é€æ­¥å¯¦ç¾æœå‹™å±¤** - æŒ‰ç…§ä¿®æ­£å¾Œçš„ Phase é †åºé€æ­¥å¯¦ç¾
4. **ä¿æŒå‘å¾Œç›¸å®¹** - ç¢ºä¿ç¾æœ‰åŠŸèƒ½ä¸å—å½±éŸ¿

---

**PLAN Agent å®Œæˆï¼** æº–å‚™é€²å…¥ IMPLEMENT æ¨¡å¼é–‹å§‹å¯¦æ–½ã€‚
`````

## File: graph-bank/plan-qa-final-report.md
`````markdown
# PLAN QA æœ€çµ‚å ±å‘Š - ä¿®æ­£å¾Œçš„å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥

## ğŸ” QA æª¢æŸ¥å®Œæˆ - ä¿®æ­£å¾Œçš„å¯¦æ–½è¨ˆç•«å“è³ªé©—è­‰

### âœ… æª¢æŸ¥é€šéé …ç›®

#### 1. ä¿®æ­£å¾Œçš„ä»»å‹™é †åºé‚è¼¯ âœ…

**ä¿®æ­£å¾Œçš„ Phase 2 ä»»å‹™é †åº**ï¼š
1. **task-2-1**: æ›´æ–° `core/services/organization.service.ts` (ä½¿ç”¨ Value Objectsï¼Œä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥)
2. **task-2-2**: å¯¦ä½œ `core/services/permission.service.ts` (ä½¿ç”¨ Signalsï¼Œæä¾›é€²éšæ¬Šé™ç®¡ç†)
3. **task-2-3**: å¯¦ä½œ `core/guards/permission.guard.ts` (æ›¿ä»£ aclGuard)
4. **task-2-4**: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
5. **task-2-5**: æ•´åˆ PermissionService åˆ° OrganizationService (æ›¿æ› AuthService æ¬Šé™æª¢æŸ¥)
6. **task-2-6**: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±

**é‚è¼¯é©—è­‰çµæœ**ï¼š
- âœ… **task-2-1**: OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥ - åˆç†ä¸”å¯è¡Œ
- âœ… **task-2-2**: PermissionService ä½¿ç”¨ OrganizationService æŸ¥è©¢æˆå“¡ - é¿å…å¾ªç’°ä¾è³´
- âœ… **task-2-5**: æ•´åˆ PermissionService åˆ° OrganizationService - æ›¿æ›æ¬Šé™æª¢æŸ¥
- âœ… **å¾ªç’°ä¾è³´å•é¡Œ**: å·²å®Œå…¨è§£æ±º
- âœ… **çµ„ç¹”å»ºç«‹é˜»ç¤™**: å·²å®Œå…¨è§£æ±º
- âœ… **å€‹äººå»ºç«‹é˜»ç¤™**: å·²å®Œå…¨è§£æ±º

#### 2. ä¾è³´é—œä¿‚æ­£ç¢ºæ€§ âœ…

**ä¿®æ­£å¾Œçš„ä¾è³´é—œä¿‚**ï¼š
- **Phase 1** â†’ **Phase 2-1**: AuthService æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥
- **Phase 2-1** â†’ **Phase 2-2**: OrganizationService æä¾›æˆå“¡æŸ¥è©¢åŠŸèƒ½
- **Phase 2-2** â†’ **Phase 2-5**: PermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†
- **Phase 2** â†’ **Phase 3**: Repository æœå‹™ä¾è³´å®Œæ•´çš„æ¬Šé™ç³»çµ±
- **Phase 2** â†’ **Phase 4**: UI å…ƒä»¶ä¾è³´å®Œæ•´çš„æ¬Šé™ç³»çµ±
- **Phase 3** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ Repository åŠŸèƒ½
- **Phase 4** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ UI å…ƒä»¶
- **Phase 5** â†’ **Phase 6**: æ¸¬è©¦ä¾è³´å®Œæ•´åŠŸèƒ½

**ä¾è³´é—œä¿‚å“è³ªè©•ä¼°**ï¼š
- âœ… **æ¸…æ™°æ€§**: ä¾è³´é—œä¿‚æ¸…æ¥šä¸”æ˜ç¢º
- âœ… **åˆç†æ€§**: æ‰€æœ‰ä¾è³´é—œä¿‚éƒ½åˆç†ä¸”å¿…è¦
- âœ… **å¯åŸ·è¡Œæ€§**: æ‰€æœ‰ä¾è³´é—œä¿‚éƒ½å¯ä»¥åŸ·è¡Œ
- âœ… **é¿å…å¾ªç’°**: æ²’æœ‰å¾ªç’°ä¾è³´å•é¡Œ

#### 3. é©—æ”¶æ¨™æº–å®Œæ•´æ€§ âœ…

**ä¿®æ­£å¾Œçš„é©—æ”¶æ¨™æº–**ï¼š

**Phase 2 é©—æ”¶æ¨™æº–**ï¼š
- âœ… OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥
- âœ… PermissionService æ­£ç¢ºè¨ˆç®—æ¬Šé™
- âœ… permissionGuard æ­£ç¢ºä¿è­·è·¯ç”±
- âœ… PermissionService æˆåŠŸæ•´åˆåˆ° OrganizationService
- âœ… æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

**åŠŸèƒ½é©—æ”¶æ¨™æº–**ï¼š
- âœ… ç™»å…¥/è¨»å†ŠæˆåŠŸå¾Œï¼Œ`accounts/{uid}` ç”¨æˆ¶æ–‡ä»¶æ­£ç¢ºåŒæ­¥
- âœ… çµ„ç¹”/æˆå“¡/åœ˜éšŠ/Repository æŸ¥è©¢æ­£å¸¸ï¼Œè§’è‰²æª¢æŸ¥èˆ‡å®ˆè¡›å¯ç”¨
- âœ… Login/Signup loading ç‹€æ…‹åœ¨æˆåŠŸèˆ‡å¤±æ•—æ™‚æ­£ç¢ºé‡ç½®
- âœ… ç§»é™¤é‡è¤‡çš„ `app/auth/` ä»£ç¢¼ï¼Œä¸å½±éŸ¿ç¾æœ‰ UI èˆ‡è·¯ç”±
- âœ… OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥
- âœ… PermissionService æ¬Šé™æ§åˆ¶æ­£ç¢ºé‹ä½œ
- âœ… çµ„ç¹”å»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- âœ… å€‹äººå»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- âœ… Firestore å®‰å…¨è¦å‰‡ä¿è­·è³‡æ–™å®‰å…¨
- âœ… å®Œæ•´çš„ GitHub å¼çµ„ç¹”ç®¡ç†å’Œ Repository ç®¡ç†åŠŸèƒ½

**é©—æ”¶æ¨™æº–å“è³ªè©•ä¼°**ï¼š
- âœ… **æ˜ç¢ºæ€§**: æ¯å€‹é©—æ”¶æ¨™æº–éƒ½æ˜ç¢ºæŒ‡å‡ºè¦é”æˆçš„ç›®æ¨™
- âœ… **å¯æ¸¬é‡æ€§**: æ‰€æœ‰é©—æ”¶æ¨™æº–éƒ½å¯ä»¥é€šéæ¸¬è©¦é©—è­‰
- âœ… **å®Œæ•´æ€§**: æ¶µè“‹äº†æ‰€æœ‰ Phase çš„é—œéµåŠŸèƒ½
- âœ… **åˆç†æ€§**: æ‰€æœ‰é©—æ”¶æ¨™æº–éƒ½æ˜¯å¯é”æˆçš„

#### 4. é¢¨éšªç·©è§£æªæ–½ âœ…

**é¢¨éšªè©•ä¼°å’Œç·©è§£æªæ–½**ï¼š

1. **è³‡æ–™åº«çµæ§‹è®Šæ›´** - é¢¨éšªï¼šé«˜
   - âœ… **ç·©è§£æªæ–½**: ä½¿ç”¨ Firestore é·ç§»è…³æœ¬ï¼Œåˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹
   - âœ… **è©•ä¼°**: ç·©è§£æªæ–½å®Œæ•´ä¸”å¯è¡Œ

2. **èªè­‰ç³»çµ±é‡æ§‹** - é¢¨éšªï¼šé«˜
   - âœ… **ç·©è§£æªæ–½**: ä¿æŒç¾æœ‰èªè­‰æµç¨‹ä¸è®Šï¼Œåˆ†éšæ®µå¯¦æ–½ï¼Œç¢ºä¿å‘å¾Œç›¸å®¹
   - âœ… **è©•ä¼°**: ç·©è§£æªæ–½å®Œæ•´ä¸”å¯è¡Œ

3. **æ¬Šé™ç³»çµ±è¤‡é›œæ€§** - é¢¨éšªï¼šä¸­
   - âœ… **ç·©è§£æªæ–½**: ä½¿ç”¨æˆç†Ÿçš„ RBAC æ¨¡å¼ï¼Œå¤šå±¤å®‰å…¨é©—è­‰ï¼Œå®Œæ•´çš„æ¬Šé™æ¸¬è©¦
   - âœ… **è©•ä¼°**: ç·©è§£æªæ–½å®Œæ•´ä¸”å¯è¡Œ

4. **è·¯ç”±çµæ§‹é‡æ§‹** - é¢¨éšªï¼šä¸­
   - âœ… **ç·©è§£æªæ–½**: åˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹ï¼Œå®Œæ•´çš„è·¯ç”±æ¸¬è©¦
   - âœ… **è©•ä¼°**: ç·©è§£æªæ–½å®Œæ•´ä¸”å¯è¡Œ

**é¢¨éšªç·©è§£æªæ–½å“è³ªè©•ä¼°**ï¼š
- âœ… **å®Œæ•´æ€§**: æ¶µè“‹äº†æ‰€æœ‰ä¸»è¦é¢¨éšª
- âœ… **å¯è¡Œæ€§**: æ‰€æœ‰ç·©è§£æªæ–½éƒ½æ˜¯å¯åŸ·è¡Œçš„
- âœ… **æœ‰æ•ˆæ€§**: ç·©è§£æªæ–½èƒ½å¤ æœ‰æ•ˆé™ä½é¢¨éšª

#### 5. æ•´é«”è¨ˆç•«å“è³ª âœ…

**è¨ˆç•«å®Œæ•´æ€§æª¢æŸ¥**ï¼š
- âœ… **Phase è¦†è“‹ç¯„åœ**: 6å€‹ Phaseï¼Œ39å€‹ä»»å‹™ï¼Œæ¶µè“‹æ‰€æœ‰å¿…è¦åŠŸèƒ½
- âœ… **ä»»å‹™åˆ†è§£åˆç†æ€§**: æ¯å€‹ä»»å‹™éƒ½æœ‰æ˜ç¢ºçš„ç›®æ¨™å’Œç¯„åœ
- âœ… **æŠ€è¡“æ£§ä¸€è‡´æ€§**: ä½¿ç”¨ Angular v20ã€Firebase 11.10.0ã€Angular Material 20.1.0
- âœ… **æ¶æ§‹è¨­è¨ˆä¸€è‡´æ€§**: éµå¾ª GitHub å¼ Account æ¶æ§‹

**è¨ˆç•«ä¸€è‡´æ€§æª¢æŸ¥**ï¼š
- âœ… **ç›®æ¨™ä¸€è‡´æ€§**: æ‰€æœ‰ Phase éƒ½æœå‘ GitHub å¼ Account æ¶æ§‹
- âœ… **æŠ€è¡“ä¸€è‡´æ€§**: æ‰€æœ‰ä»»å‹™éƒ½ä½¿ç”¨ç›¸åŒçš„æŠ€è¡“æ£§
- âœ… **å¯¦æ–½é †åºä¸€è‡´æ€§**: Phase é †åºç¬¦åˆä¾è³´é—œä¿‚

**è¨ˆç•«å“è³ªè©•ä¼°**ï¼š
- âœ… **å®Œæ•´æ€§**: æ¶µè“‹æ‰€æœ‰å¿…è¦åŠŸèƒ½
- âœ… **ä¸€è‡´æ€§**: ç›®æ¨™ã€æŠ€è¡“ã€å¯¦æ–½é †åºä¸€è‡´
- âœ… **å¯è¡Œæ€§**: æ‰€æœ‰ä»»å‹™éƒ½å¯åŸ·è¡Œ
- âœ… **å¯æ¸¬é‡æ€§**: æœ‰æ˜ç¢ºçš„é©—æ”¶æ¨™æº–
- âœ… **é¢¨éšªç®¡ç†**: æœ‰å®Œæ•´çš„é¢¨éšªè©•ä¼°å’Œç·©è§£æªæ–½

### ğŸ¯ é—œéµä¿®æ­£æˆæœ

#### è§£æ±ºçš„å•é¡Œ
1. **å¾ªç’°ä¾è³´å•é¡Œ** âœ… å·²å®Œå…¨è§£æ±º
2. **çµ„ç¹”å»ºç«‹é˜»ç¤™** âœ… å·²å®Œå…¨è§£æ±º
3. **å€‹äººå»ºç«‹é˜»ç¤™** âœ… å·²å®Œå…¨è§£æ±º
4. **æ¬Šé™æª¢æŸ¥ç¼ºå¤±** âœ… å·²å®Œå…¨è§£æ±º

#### ä¿®æ­£å¾Œçš„å„ªå‹¢
1. **é‚è¼¯é †åºæ­£ç¢º** âœ…
2. **ä¾è³´é—œä¿‚æ¸…æ™°** âœ…
3. **å¯¦æ–½éç¨‹é †æš¢** âœ…
4. **é¿å…é˜»ç¤™å•é¡Œ** âœ…

### ğŸ“Š å“è³ªè©•åˆ†

| æª¢æŸ¥é …ç›® | è©•åˆ† | ç‹€æ…‹ |
|---------|------|------|
| ä¿®æ­£å¾Œçš„ä»»å‹™é †åºé‚è¼¯ | 95/100 | âœ… å„ªç§€ |
| ä¾è³´é—œä¿‚æ­£ç¢ºæ€§ | 95/100 | âœ… å„ªç§€ |
| é©—æ”¶æ¨™æº–å®Œæ•´æ€§ | 90/100 | âœ… å„ªç§€ |
| é¢¨éšªç·©è§£æªæ–½ | 90/100 | âœ… å„ªç§€ |
| æ•´é«”è¨ˆç•«å“è³ª | 92/100 | âœ… å„ªç§€ |

**ç¸½é«”è©•åˆ†**: 92/100 - **å„ªç§€**

### ğŸš€ å»ºè­°

#### ç«‹å³è¡Œå‹•å»ºè­°
1. **ç«‹å³é–‹å§‹å¯¦æ–½** - ä¿®æ­£å¾Œçš„è¨ˆç•«å·²æº–å‚™å°±ç·’
2. **æŒ‰ç…§ä¿®æ­£å¾Œçš„é †åºå¯¦æ–½** - ç¢ºä¿ Phase 2 æŒ‰ç…§ä¿®æ­£å¾Œçš„é †åºåŸ·è¡Œ
3. **ä¿æŒé¢¨éšªç›£æ§** - åœ¨å¯¦æ–½éç¨‹ä¸­æŒçºŒç›£æ§é¢¨éšª
4. **å®šæœŸé©—æ”¶æª¢æŸ¥** - æ¯å€‹ Phase å®Œæˆå¾Œé€²è¡Œé©—æ”¶æª¢æŸ¥

#### å¯¦æ–½æ³¨æ„äº‹é …
1. **åš´æ ¼æŒ‰ç…§ä¿®æ­£å¾Œçš„ Phase 2 é †åºåŸ·è¡Œ**
2. **ç¢ºä¿æ¯å€‹ä»»å‹™å®Œæˆå¾Œé€²è¡Œé©—æ”¶æª¢æŸ¥**
3. **ä¿æŒå‘å¾Œç›¸å®¹æ€§**
4. **å»ºç«‹å®Œæ•´çš„æ¸¬è©¦è¦†è“‹**

### ğŸ“ ç›¸é—œæ–‡ä»¶

- `graph-bank/plan-github-account-architecture.md` - ä¿®æ­£å¾Œçš„å®Œæ•´å¯¦æ–½è¨ˆç•«
- `graph-bank/qa-task-logic-validation-report.md` - ä»»å‹™é‚è¼¯é©—è­‰å ±å‘Š
- `graph-bank/plan-qa-quality-check-report.md` - åŸå§‹ PLAN QA å ±å‘Š
- `graph-bank/activeContext.md` - ç•¶å‰å°ˆæ¡ˆç‹€æ…‹

---

## âœ… PLAN QA æª¢æŸ¥å®Œæˆï¼

**ä¿®æ­£å¾Œçš„å¯¦æ–½è¨ˆç•«å“è³ªå„ªç§€ï¼Œå¯ä»¥é–‹å§‹å¯¦æ–½ GitHub å¼ Account æ¶æ§‹ã€‚**

**é—œéµæˆæœ**ï¼š
- âœ… è§£æ±ºäº† Phase 2 çš„å¾ªç’°ä¾è³´å•é¡Œ
- âœ… ç¢ºä¿çµ„ç¹”å’Œå€‹äººå»ºç«‹éç¨‹é †æš¢
- âœ… å»ºç«‹äº†æ¸…æ™°çš„ä¾è³´é—œä¿‚
- âœ… æä¾›äº†å®Œæ•´çš„é©—æ”¶æ¨™æº–

**ä¸‹ä¸€æ­¥**ï¼šé€²å…¥ IMPLEMENT æ¨¡å¼ï¼Œé–‹å§‹ Phase 1 çš„å¯¦æ–½ã€‚
`````

## File: graph-bank/plan-qa-quality-check-report.md
`````markdown
# PLAN QA Agent - å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥å ±å‘Š

## ğŸ” QA æª¢æŸ¥æ¦‚è¿°

åŸºæ–¼ sequential-thinking çš„æ·±åº¦åˆ†æï¼Œå° PLAN Agent çš„è¼¸å‡ºé€²è¡Œå…¨é¢çš„å“è³ªæª¢æŸ¥ã€‚

### ğŸ¯ æª¢æŸ¥ç›®æ¨™
- é©—è­‰ PLAN Agent è¼¸å‡ºå“è³ª
- æª¢æŸ¥å¯¦æ–½è¨ˆç•«çš„å®Œæ•´æ€§
- é©—è­‰ä»»å‹™åˆ†è§£çš„åˆç†æ€§
- æª¢æŸ¥é¢¨éšªè©•ä¼°çš„æº–ç¢ºæ€§
- é©—è­‰ä¾è³´é—œä¿‚çš„æ­£ç¢ºæ€§
- æª¢æŸ¥é©—æ”¶æ¨™æº–çš„æ˜ç¢ºæ€§

## âœ… æª¢æŸ¥çµæœæ‘˜è¦

### ğŸ“Š ç¸½é«”è©•ä¼°
- **å“è³ªç­‰ç´š**: B+ (è‰¯å¥½ï¼Œä½†éœ€è¦ä¿®æ­£)
- **å¯ç”¨æ€§**: é«˜ (ä¿®æ­£å¾Œå¯ç›´æ¥ä½¿ç”¨)
- **å®Œæ•´æ€§**: é«˜ (æ¶µè“‹æ‰€æœ‰å¿…è¦å…ƒç´ )
- **æº–ç¢ºæ€§**: é«˜ (æŠ€è¡“å’Œæ¶æ§‹è¨­è¨ˆæº–ç¢º)

## ğŸ“‹ è©³ç´°æª¢æŸ¥çµæœ

### 1. å®Œæ•´æ€§æª¢æŸ¥ âœ…

**è¨ˆç•«æ¦‚è¿°**ï¼š
- âœ… ç›®æ¨™æ˜ç¢ºï¼šå¯¦ç¾ Angular v20 + Signals + Firebase GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±
- âœ… è¤‡é›œåº¦è©•ä¼°ï¼šLevel 4 - Complex System
- âœ… ç¯„åœæ¸…æ¥šï¼šèªè­‰ç³»çµ±ã€çµ„ç¹”ç®¡ç†ã€åœ˜éšŠç®¡ç†ã€Repository ç®¡ç†ã€æ¬Šé™æ§åˆ¶ã€UI å…ƒä»¶ã€è·¯ç”±é‡æ§‹ã€æ¸¬è©¦ç­–ç•¥
- âœ… å½±éŸ¿æª”æ¡ˆï¼š30+ å€‹æª”æ¡ˆéœ€è¦æ–°å¢/ä¿®æ”¹/åˆªé™¤
- âœ… ç¸½ä»»å‹™æ•¸ï¼š39å€‹ä»»å‹™
- âœ… Phase æ•¸ï¼š6å€‹ Phase

**ä»»å‹™åˆ†è§£**ï¼š
- âœ… Phase 1: 8å€‹ä»»å‹™
- âœ… Phase 2: 6å€‹ä»»å‹™
- âœ… Phase 3: 7å€‹ä»»å‹™
- âœ… Phase 4: 6å€‹ä»»å‹™
- âœ… Phase 5: 5å€‹ä»»å‹™
- âœ… Phase 6: 7å€‹ä»»å‹™
- âœ… ç¸½è¨ˆï¼š39å€‹ä»»å‹™

**é©—æ”¶æ¨™æº–**ï¼š
- âœ… æ¯å€‹ Phase éƒ½æœ‰é©—æ”¶æ¨™æº–
- âœ… é©—æ”¶æ¨™æº–å…·é«”ä¸”å¯æ¸¬é‡
- âœ… åŠŸèƒ½é©—æ”¶å’ŒæŠ€è¡“é©—æ”¶éƒ½æœ‰æ¶µè“‹

### 2. åˆç†æ€§æª¢æŸ¥ âœ…

**ä»»å‹™åˆ†è§£åˆç†æ€§**ï¼š
- âœ… Phase 1: åŸºç¤æ¸…ç†å’Œç¾ä»£åŒ–ï¼Œåˆç†
- âœ… Phase 2: æœå‹™å±¤ç¾ä»£åŒ–ï¼Œåˆç†
- âœ… Phase 3: Repository ç®¡ç†ç³»çµ±ï¼Œåˆç†
- âœ… Phase 4: UI å±¤ç¾ä»£åŒ–ï¼Œåˆç†
- âœ… Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆï¼Œåˆç†
- âœ… Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ï¼Œåˆç†

**ä»»å‹™é †åºåˆç†æ€§**ï¼š
- âœ… Phase 1 â†’ Phase 2ï¼šåŸºç¤æ¸…ç† â†’ æœå‹™å±¤ç¾ä»£åŒ–ï¼Œåˆç†
- âœ… Phase 2 â†’ Phase 3/4ï¼šæœå‹™å±¤ â†’ Repository/UIï¼Œåˆç†
- âœ… Phase 3/4 â†’ Phase 5ï¼šåŠŸèƒ½å®Œæˆ â†’ è·¯ç”±æ•´åˆï¼Œåˆç†
- âœ… Phase 5 â†’ Phase 6ï¼šè·¯ç”±æ•´åˆ â†’ å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ï¼Œåˆç†

### 3. æº–ç¢ºæ€§æª¢æŸ¥ âœ…

**æŠ€è¡“æº–ç¢ºæ€§**ï¼š
- âœ… Angular v20 + Signals + Firebaseï¼šæº–ç¢º
- âœ… GitHub å¼æ¬Šé™ç³»çµ±ï¼šæº–ç¢º
- âœ… Firestore é›†åˆçµæ§‹ï¼šæº–ç¢º
- âœ… æ¬Šé™è§’è‰²è¨­è¨ˆï¼šæº–ç¢º

**æ¶æ§‹æº–ç¢ºæ€§**ï¼š
- âœ… çµ±ä¸€ Account æ¨¡å‹ï¼šæº–ç¢º
- âœ… å€‹äºº/çµ„ç¹”ç‰¹æ€§ï¼šæº–ç¢º
- âœ… æ¬Šé™ç³»çµ±è¨­è¨ˆï¼šæº–ç¢º
- âœ… è³‡æ–™åº«çµæ§‹ï¼šæº–ç¢º

**å¯¦æ–½æº–ç¢ºæ€§**ï¼š
- âœ… ä»»å‹™åˆ†è§£ï¼šæº–ç¢º
- âœ… é¢¨éšªè©•ä¼°ï¼šæº–ç¢º
- âœ… ä¾è³´é—œä¿‚ï¼šæº–ç¢º
- âœ… é©—æ”¶æ¨™æº–ï¼šæº–ç¢º

### 4. æ˜ç¢ºæ€§æª¢æŸ¥ âœ…

**ç›®æ¨™æ˜ç¢ºæ€§**ï¼š
- âœ… ä¸»è¦ç›®æ¨™ï¼šå¯¦ç¾ Angular v20 + Signals + Firebase GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±
- âœ… å…·é«”ç›®æ¨™ï¼šçµ±ä¸€ Account æ¨¡å‹ã€å€‹äºº/çµ„ç¹”ç‰¹æ€§ã€æ¬Šé™ç³»çµ±
- âœ… æŠ€è¡“ç›®æ¨™ï¼šä½¿ç”¨ Angular v20 ç¾ä»£åŒ–ç‰¹æ€§

**ä»»å‹™æ˜ç¢ºæ€§**ï¼š
- âœ… æ¯å€‹ä»»å‹™éƒ½æœ‰æ˜ç¢ºçš„ ID
- âœ… æ¯å€‹ä»»å‹™éƒ½æœ‰å…·é«”çš„å¯¦æ–½å…§å®¹
- âœ… æ¯å€‹ä»»å‹™éƒ½æœ‰æ¸…æ¥šçš„æª”æ¡ˆè·¯å¾‘
- âœ… æ¯å€‹ä»»å‹™éƒ½æœ‰æ˜ç¢ºçš„æŠ€è¡“è¦æ±‚

**é©—æ”¶æ¨™æº–æ˜ç¢ºæ€§**ï¼š
- âœ… åŠŸèƒ½é©—æ”¶æ¨™æº–ï¼šå…·é«”ä¸”å¯æ¸¬é‡
- âœ… æŠ€è¡“é©—æ”¶æ¨™æº–ï¼šæ¸…æ¥šä¸”å¯é©—è­‰
- âœ… æ¯å€‹ Phase éƒ½æœ‰é©—æ”¶æ¨™æº–

## âš ï¸ ç™¼ç¾çš„å•é¡Œ

### ğŸš¨ é—œéµå•é¡Œï¼šPhase 2 ä»»å‹™é †åºéŒ¯èª¤

**å•é¡Œæè¿°**ï¼š
ç•¶å‰çš„ Phase 2 ä»»å‹™é †åºæœƒå°è‡´çµ„ç¹”å’Œå€‹äººå»ºç«‹éç¨‹é‡åˆ°é˜»ç¤™ã€‚

**ç•¶å‰ Phase 2 ä»»å‹™é †åº**ï¼š
1. task-2-1: å¯¦ä½œ `permission.service.ts` (ä½¿ç”¨ Signals)
2. task-2-2: å¯¦ä½œ `permission.guard.ts` (æ›¿ä»£ aclGuard)
3. task-2-3: æ›´æ–° `organization.service.ts` (ä½¿ç”¨ Value Objects)
4. task-2-4: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
5. task-2-5: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±
6. task-2-6: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

**å•é¡Œåˆ†æ**ï¼š
- `organization.service.ts` éœ€è¦æ¬Šé™æª¢æŸ¥åŠŸèƒ½
- ä½†æ˜¯ `permission.service.ts` åœ¨ `organization.service.ts` ä¹‹å¾Œæ‰å»ºç«‹
- é€™æœƒå°è‡´çµ„ç¹”å»ºç«‹éç¨‹ç¼ºå°‘æ¬Šé™é©—è­‰
- å½¢æˆå¾ªç’°ä¾è³´ï¼šPermissionService éœ€è¦ OrganizationService æŸ¥è©¢æˆå“¡ï¼ŒOrganizationService éœ€è¦ PermissionService é€²è¡Œæ¬Šé™æª¢æŸ¥

## ğŸ”§ ä¿®æ­£å»ºè­°

### ä¿®æ­£å¾Œçš„ Phase 2 ä»»å‹™é †åº

**Phase 2: æœå‹™å±¤ç¾ä»£åŒ– (6å€‹ä»»å‹™)**
1. **task-2-1**: æ›´æ–° `core/services/organization.service.ts` (ä½¿ç”¨ Value Objectsï¼Œä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥)
2. **task-2-2**: å¯¦ä½œ `core/services/permission.service.ts` (ä½¿ç”¨ Signalsï¼Œæä¾›é€²éšæ¬Šé™ç®¡ç†)
3. **task-2-3**: å¯¦ä½œ `core/guards/permission.guard.ts` (æ›¿ä»£ aclGuard)
4. **task-2-4**: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
5. **task-2-5**: æ•´åˆ PermissionService åˆ° OrganizationService (æ›¿æ› AuthService æ¬Šé™æª¢æŸ¥)
6. **task-2-6**: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±

### ä¿®æ­£ç†ç”±

1. **å…ˆå»ºç«‹ OrganizationService**: 
   - ä½¿ç”¨ AuthService çš„åŸºæœ¬æ¬Šé™æª¢æŸ¥
   - ç¢ºä¿çµ„ç¹”ç®¡ç†åŠŸèƒ½ç«‹å³å¯ç”¨
   - é¿å…å¾ªç’°ä¾è³´å•é¡Œ

2. **å†å»ºç«‹ PermissionService**: 
   - æä¾›é€²éšæ¬Šé™ç®¡ç†åŠŸèƒ½
   - ä½¿ç”¨ OrganizationService æŸ¥è©¢æˆå“¡è³‡æ ¼
   - æä¾› Computed Signals é€²è¡Œæ¬Šé™æª¢æŸ¥

3. **æœ€å¾Œæ•´åˆ**: 
   - å°‡ PermissionService æ•´åˆåˆ° OrganizationService
   - æ›¿æ› AuthService çš„åŸºæœ¬æ¬Šé™æª¢æŸ¥
   - æ•´åˆåˆ°è·¯ç”±ç³»çµ±ä¸­

## ğŸ“Š é¢¨éšªè©•ä¼°æª¢æŸ¥

### é«˜é¢¨éšªé …ç›®è­˜åˆ¥ âœ…
1. **Signals ç‹€æ…‹ç®¡ç†è¤‡é›œåŒ–**: âœ… åˆç†ï¼Œç¢ºå¯¦æ˜¯è¤‡é›œçš„
2. **Repository ç³»çµ±æ–°å¢åŠŸèƒ½**: âœ… åˆç†ï¼ŒåŠŸèƒ½è¤‡é›œåº¦é«˜
3. **æ¬Šé™ç³»çµ±é‡æ§‹**: âœ… åˆç†ï¼Œå¯èƒ½å°è‡´å®‰å…¨å•é¡Œ
4. **è·¯ç”±çµæ§‹é‡æ§‹**: âœ… åˆç†ï¼Œå¯èƒ½ç ´å£ç¾æœ‰å°èˆª

### é¢¨éšªç·©è§£æªæ–½ âœ…
- âœ… æ¯å€‹é¢¨éšªéƒ½æœ‰ç·©è§£æªæ–½
- âœ… ç·©è§£æªæ–½å…·é«”ä¸”å¯åŸ·è¡Œ
- âœ… é¢¨éšªç­‰ç´šè©•ä¼°åˆç†

## ğŸ”— ä¾è³´é—œä¿‚æª¢æŸ¥

### Phase é–“ä¾è³´é—œä¿‚ âœ…
- âœ… Phase 1 â†’ Phase 2ï¼šæ ¸å¿ƒæœå‹™ä¾è³´åŸºç¤æ¸…ç†ï¼Œåˆç†
- âœ… Phase 2 â†’ Phase 3ï¼šRepository æœå‹™ä¾è³´ Permission æœå‹™ï¼Œåˆç†
- âœ… Phase 2 â†’ Phase 4ï¼šUI å…ƒä»¶ä¾è³´ Permission æœå‹™ï¼Œåˆç†
- âœ… Phase 3 â†’ Phase 5ï¼šè·¯ç”±æ•´åˆä¾è³´ Repository åŠŸèƒ½ï¼Œåˆç†
- âœ… Phase 4 â†’ Phase 5ï¼šè·¯ç”±æ•´åˆä¾è³´ UI å…ƒä»¶ï¼Œåˆç†
- âœ… Phase 5 â†’ Phase 6ï¼šæ¸¬è©¦ä¾è³´å®Œæ•´åŠŸèƒ½ï¼Œåˆç†

### ä¿®æ­£å¾Œçš„ä¾è³´é—œä¿‚ âœ…
- âœ… Phase 1 â†’ Phase 2-1ï¼šAuthService æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥
- âœ… Phase 2-1 â†’ Phase 2-2ï¼šOrganizationService æä¾›æˆå“¡æŸ¥è©¢åŠŸèƒ½
- âœ… Phase 2-2 â†’ Phase 2-5ï¼šPermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†
- âœ… Phase 2 â†’ Phase 3/4ï¼šå®Œæ•´çš„æ¬Šé™ç³»çµ±æ”¯æ´ Repository å’Œ UI

## ğŸ¯ é©—æ”¶æ¨™æº–æª¢æŸ¥

### åŠŸèƒ½é©—æ”¶æ¨™æº– âœ…
- âœ… ç™»å…¥/è¨»å†ŠæˆåŠŸå¾Œï¼Œ`accounts/{uid}` ç”¨æˆ¶æ–‡ä»¶æ­£ç¢ºåŒæ­¥
- âœ… çµ„ç¹”/æˆå“¡/åœ˜éšŠ/Repository æŸ¥è©¢æ­£å¸¸ï¼Œè§’è‰²æª¢æŸ¥èˆ‡å®ˆè¡›å¯ç”¨
- âœ… Login/Signup loading ç‹€æ…‹åœ¨æˆåŠŸèˆ‡å¤±æ•—æ™‚æ­£ç¢ºé‡ç½®
- âœ… ç§»é™¤é‡è¤‡çš„ `app/auth/` ä»£ç¢¼ï¼Œä¸å½±éŸ¿ç¾æœ‰ UI èˆ‡è·¯ç”±
- âœ… PermissionService æ¬Šé™æ§åˆ¶æ­£ç¢ºé‹ä½œ
- âœ… Firestore å®‰å…¨è¦å‰‡ä¿è­·è³‡æ–™å®‰å…¨
- âœ… å®Œæ•´çš„ GitHub å¼çµ„ç¹”ç®¡ç†å’Œ Repository ç®¡ç†åŠŸèƒ½

### æŠ€è¡“é©—æ”¶æ¨™æº– âœ…
- âœ… ä½¿ç”¨ Angular v20 ç¾ä»£åŒ–ç‰¹æ€§ (Signals, Control Flow)
- âœ… æ¸¬è©¦è¦†è“‹ç‡é”æ¨™ï¼ŒåŠŸèƒ½æ¸¬è©¦é€šé
- âœ… ä»£ç¢¼å“è³ªç¬¦åˆæ¨™æº–
- âœ… æ€§èƒ½æŒ‡æ¨™é”æ¨™

## ğŸ“š åƒè€ƒæ–‡æª”æª¢æŸ¥

### Context7 æŸ¥è©¢çµæœ âœ…
- âœ… Angular Signals Examples: 345å€‹ä»£ç¢¼ç¯„ä¾‹ï¼ŒTrust Score 8.9
- âœ… Firebase Firestore: 70161å€‹ä»£ç¢¼ç¯„ä¾‹ï¼ŒTrust Score 8.0

### é—œéµæŠ€è¡“æ¨¡å¼ âœ…
- âœ… Signals ç‹€æ…‹ç®¡ç†ï¼šä½¿ç”¨ signal() å’Œ computed() é€²è¡ŒéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
- âœ… è¡¨å–®ç‹€æ…‹ç®¡ç†ï¼šä½¿ç”¨ signals ç®¡ç†è¤‡é›œçš„è¡¨å–®ç‹€æ…‹
- âœ… Undo/Redo åŠŸèƒ½ï¼šä½¿ç”¨ signals å¯¦ç¾æ­·å²ç‹€æ…‹ç®¡ç†
- âœ… Loading ç‹€æ…‹ï¼šä½¿ç”¨ signals ç®¡ç†åŠ è¼‰ç‹€æ…‹
- âœ… Effectsï¼šä½¿ç”¨ effect() è™•ç†å‰¯ä½œç”¨
- âœ… å­é›†åˆ (Subcollections)ï¼šåœ¨æ–‡æª”å…§å‰µå»ºé›†åˆï¼Œç”¨æ–¼çµ„ç¹”ç›¸é—œæ•¸æ“š
- âœ… å®‰å…¨è¦å‰‡ï¼šç‚ºå­é›†åˆå®šç¾©ç¨ç«‹çš„å®‰å…¨è¦å‰‡
- âœ… éæ­¸é€šé…ç¬¦ï¼šä½¿ç”¨ `{document=**}` åŒ¹é…é›†åˆå’Œæ‰€æœ‰å­é›†åˆ

## ğŸš€ å»ºè­°è¡Œå‹•

### ç«‹å³è¡Œå‹•
1. **ä¿®æ­£ Phase 2 ä»»å‹™é †åº** - æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶
2. **æ›´æ–°ä¾è³´é—œä¿‚** - ç¢ºä¿ä»»å‹™é †åºæ­£ç¢º
3. **é–‹å§‹ Phase 1 å¯¦æ–½** - æŒ‰ç…§ä¿®æ­£å¾Œçš„é †åºé–‹å§‹

### å¾ŒçºŒè¡Œå‹•
1. **ç›£æ§å¯¦æ–½é€²åº¦** - ç¢ºä¿æŒ‰ç…§è¨ˆç•«åŸ·è¡Œ
2. **é©—è­‰ä¿®æ­£æ•ˆæœ** - ç¢ºä¿çµ„ç¹”/å€‹äººå»ºç«‹éç¨‹é †æš¢
3. **æŒçºŒ QA æª¢æŸ¥** - åœ¨æ¯å€‹ Phase å®Œæˆå¾Œé€²è¡Œ QA

## ğŸ“Š PLAN QA çµè«–

### ç¸½é«”è©•ä¼°
**å“è³ªç­‰ç´š**: B+ (è‰¯å¥½ï¼Œä½†éœ€è¦ä¿®æ­£)
- **å®Œæ•´æ€§**: é«˜ âœ…
- **åˆç†æ€§**: é«˜ âœ…
- **æº–ç¢ºæ€§**: é«˜ âœ…
- **æ˜ç¢ºæ€§**: é«˜ âœ…
- **å¯ç”¨æ€§**: é«˜ âœ… (ä¿®æ­£å¾Œ)

### é—œéµç™¼ç¾
- âœ… **å„ªé»**: è¨ˆç•«å®Œæ•´ã€åˆç†ã€æº–ç¢ºã€æ˜ç¢º
- âš ï¸ **å•é¡Œ**: Phase 2 ä»»å‹™é †åºéŒ¯èª¤
- ğŸ”§ **ä¿®æ­£**: å·²æä¾›è©³ç´°ä¿®æ­£å»ºè­°

### å»ºè­°å„ªå…ˆç´š
- ğŸ”´ **é«˜å„ªå…ˆç´š**: ä¿®æ­£ Phase 2 ä»»å‹™é †åº
- ğŸŸ¡ **ä¸­å„ªå…ˆç´š**: æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶
- ğŸŸ¢ **ä½å„ªå…ˆç´š**: é–‹å§‹ Phase 1 å¯¦æ–½

---

**PLAN QA Agent å®Œæˆï¼** å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥å®Œæˆï¼Œå·²æä¾›ä¿®æ­£å»ºè­°ã€‚
`````

## File: graph-bank/projectbrief.md
`````markdown
# Memory Bank: Project Brief

## Project Overview
ç‡Ÿå»ºç®¡ç†ç³»çµ±æ–‡ä»¶çµæ§‹åŒ–å°ˆæ¡ˆ - å°‡ç¾æœ‰çš„ Production æ–‡ä»¶é‡æ–°çµ„ç¹”ç‚ºå°ˆæ¥­çš„é–‹ç™¼æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç³»çµ±æ¶æ§‹æ–‡ä»¶å’Œå°ˆæ¡ˆçµæ§‹æ–‡ä»¶ã€‚

## Objectives
- å°‡ SYSTEM_ARCHITECTURE.md é‡æ§‹ç‚ºå®Œæ•´çš„ç³»çµ±æ¶æ§‹æ–‡ä»¶
- å°‡ TREE.md é‡æ§‹ç‚ºè©³ç´°çš„å°ˆæ¡ˆçµæ§‹æ–‡ä»¶
- å»ºç«‹æ¨™æº–åŒ–çš„é–‹ç™¼æ–‡ä»¶æ ¼å¼
- æä¾›æ¸…æ™°çš„æŠ€è¡“æ¶æ§‹å’Œå¯¦ä½œæŒ‡å—

## Scope
- **ç³»çµ±æ¶æ§‹æ–‡ä»¶**: åŒ…å«å®Œæ•´çš„ç³»çµ±è¨­è¨ˆã€æŠ€è¡“æ¶æ§‹ã€è³‡æ–™åº«è¨­è¨ˆã€å®‰å…¨æ¶æ§‹ç­‰
- **å°ˆæ¡ˆçµæ§‹æ–‡ä»¶**: è©³ç´°çš„å‰ç«¯å°ˆæ¡ˆçµæ§‹ã€æ¨¡çµ„çµ„ç¹”ã€é–‹ç™¼æŒ‡å—ç­‰
- **Memory Bank æ•´åˆ**: æ›´æ–°ç›¸é—œçš„ Memory Bank æ–‡ä»¶

## Timeline
- **Phase 1**: æ–‡ä»¶çµæ§‹åŒ– (å·²å®Œæˆ)
- **Phase 2**: Memory Bank æ›´æ–° (é€²è¡Œä¸­)
- **Phase 3**: é–‹ç™¼æŒ‡å—å»ºç«‹ (å¾…é–‹å§‹)
`````

## File: graph-bank/qa-task-logic-validation-report.md
`````markdown
# QA Agent - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å ±å‘Š

## ğŸ” QA æª¢æŸ¥æ¦‚è¿°

åŸºæ–¼ sequential-thinking çš„æ·±åº¦åˆ†æï¼Œå° GitHub å¼ Account æ¶æ§‹å¯¦æ–½è¨ˆç•«é€²è¡Œå…¨é¢çš„é‚è¼¯å’Œé †åºé©—è­‰ã€‚

### ğŸ¯ æª¢æŸ¥ç›®æ¨™
- é©—è­‰ä»»å‹™æ–‡ä»¶çš„é‚è¼¯æ­£ç¢ºæ€§
- æª¢æŸ¥ä»»å‹™å¯¦æ–½é †åºçš„åˆç†æ€§
- ç¢ºä¿æ¬Šé™/è§’è‰²ç³»çµ±ä¸æœƒé˜»ç¤™çµ„ç¹”/å€‹äººå»ºç«‹æµç¨‹
- é©—è­‰ Phase é–“çš„ä¾è³´é—œä¿‚

## âš ï¸ ç™¼ç¾çš„å•é¡Œ

### ğŸš¨ é—œéµå•é¡Œï¼šPhase 2 ä»»å‹™é †åºéŒ¯èª¤

**å•é¡Œæè¿°**ï¼š
ç•¶å‰çš„ Phase 2 ä»»å‹™é †åºæœƒå°è‡´çµ„ç¹”å’Œå€‹äººå»ºç«‹éç¨‹é‡åˆ°é˜»ç¤™ã€‚

**ç•¶å‰ Phase 2 ä»»å‹™é †åº**ï¼š
1. task-2-1: å¯¦ä½œ `permission.service.ts` (ä½¿ç”¨ Signals)
2. task-2-2: å¯¦ä½œ `permission.guard.ts` (æ›¿ä»£ aclGuard)
3. task-2-3: æ›´æ–° `organization.service.ts` (ä½¿ç”¨ Value Objects)
4. task-2-4: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
5. task-2-5: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±
6. task-2-6: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

**å•é¡Œåˆ†æ**ï¼š
- `organization.service.ts` éœ€è¦æ¬Šé™æª¢æŸ¥åŠŸèƒ½
- ä½†æ˜¯ `permission.service.ts` åœ¨ `organization.service.ts` ä¹‹å¾Œæ‰å»ºç«‹
- é€™æœƒå°è‡´çµ„ç¹”å»ºç«‹éç¨‹ç¼ºå°‘æ¬Šé™é©—è­‰
- å½¢æˆå¾ªç’°ä¾è³´ï¼šPermissionService éœ€è¦ OrganizationService æŸ¥è©¢æˆå“¡ï¼ŒOrganizationService éœ€è¦ PermissionService é€²è¡Œæ¬Šé™æª¢æŸ¥

## ğŸ”§ ä¿®æ­£å»ºè­°

### ä¿®æ­£å¾Œçš„ Phase 2 ä»»å‹™é †åº

**Phase 2: æœå‹™å±¤ç¾ä»£åŒ– (6å€‹ä»»å‹™)**
1. **task-2-1**: æ›´æ–° `core/services/organization.service.ts` (ä½¿ç”¨ Value Objectsï¼Œä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥)
2. **task-2-2**: å¯¦ä½œ `core/services/permission.service.ts` (ä½¿ç”¨ Signalsï¼Œæä¾›é€²éšæ¬Šé™ç®¡ç†)
3. **task-2-3**: å¯¦ä½œ `core/guards/permission.guard.ts` (æ›¿ä»£ aclGuard)
4. **task-2-4**: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
5. **task-2-5**: æ•´åˆ PermissionService åˆ° OrganizationService (æ›¿æ› AuthService æ¬Šé™æª¢æŸ¥)
6. **task-2-6**: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±

### ä¿®æ­£ç†ç”±

1. **å…ˆå»ºç«‹ OrganizationService**: 
   - ä½¿ç”¨ AuthService çš„åŸºæœ¬æ¬Šé™æª¢æŸ¥
   - ç¢ºä¿çµ„ç¹”ç®¡ç†åŠŸèƒ½ç«‹å³å¯ç”¨
   - é¿å…å¾ªç’°ä¾è³´å•é¡Œ

2. **å†å»ºç«‹ PermissionService**: 
   - æä¾›é€²éšæ¬Šé™ç®¡ç†åŠŸèƒ½
   - ä½¿ç”¨ OrganizationService æŸ¥è©¢æˆå“¡è³‡æ ¼
   - æä¾› Computed Signals é€²è¡Œæ¬Šé™æª¢æŸ¥

3. **æœ€å¾Œæ•´åˆ**: 
   - å°‡ PermissionService æ•´åˆåˆ° OrganizationService
   - æ›¿æ› AuthService çš„åŸºæœ¬æ¬Šé™æª¢æŸ¥
   - æ•´åˆåˆ°è·¯ç”±ç³»çµ±ä¸­

## âœ… é©—è­‰çµæœ

### é‚è¼¯æ­£ç¢ºæ€§æª¢æŸ¥
- âœ… **Phase 1**: åŸºç¤æ¶æ§‹é‡æ§‹é †åºæ­£ç¢º
- âš ï¸ **Phase 2**: ä»»å‹™é †åºéœ€è¦ä¿®æ­£
- âœ… **Phase 3**: Repository ç®¡ç†ç³»çµ±é †åºæ­£ç¢º
- âœ… **Phase 4**: UI å±¤ç¾ä»£åŒ–é †åºæ­£ç¢º
- âœ… **Phase 5**: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆé †åºæ­£ç¢º
- âœ… **Phase 6**: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦é †åºæ­£ç¢º

### ä¾è³´é—œä¿‚æª¢æŸ¥
- âœ… **Phase 1 â†’ Phase 2**: AuthService æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥
- âœ… **Phase 2-1 â†’ Phase 2-2**: OrganizationService æä¾›æˆå“¡æŸ¥è©¢åŠŸèƒ½
- âœ… **Phase 2-2 â†’ Phase 2-5**: PermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†
- âœ… **Phase 2 â†’ Phase 3/4**: å®Œæ•´çš„æ¬Šé™ç³»çµ±æ”¯æ´ Repository å’Œ UI

### æ¬Šé™ç³»çµ±æª¢æŸ¥
- âœ… **AuthService**: æä¾›åŸºæœ¬æ¬Šé™æª¢æŸ¥åŠŸèƒ½
- âœ… **PermissionService**: æä¾›é€²éšæ¬Šé™ç®¡ç†åŠŸèƒ½
- âœ… **OrganizationService**: å¯ä»¥ä½¿ç”¨ AuthService çš„æ¬Šé™æª¢æŸ¥
- âœ… **å¾ªç’°ä¾è³´**: é€šéåˆ†éšæ®µå¯¦æ–½è§£æ±º

## ğŸ“‹ ä¿®æ­£å¾Œçš„ä¾è³´é—œä¿‚åœ–

```mermaid
graph TD
    A[Phase 1: AuthService + AccountState] --> B[Phase 2-1: OrganizationService]
    B --> C[Phase 2-2: PermissionService]
    C --> D[Phase 2-3: PermissionGuard]
    C --> E[Phase 2-4: RoleGuard]
    C --> F[Phase 2-5: æ•´åˆåˆ° OrganizationService]
    C --> G[Phase 2-6: æ•´åˆåˆ°è·¯ç”±]
    
    F --> H[Phase 3: Repository ç®¡ç†]
    G --> H
    F --> I[Phase 4: UI å…ƒä»¶]
    G --> I
    
    H --> J[Phase 5: è·¯ç”±æ•´åˆ]
    I --> J
    J --> K[Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦]
    
    style A fill:#4da6ff,stroke:#0066cc,color:white
    style B fill:#ffa64d,stroke:#cc7a30,color:white
    style C fill:#4dbb5f,stroke:#36873f,color:white
    style F fill:#d94dbb,stroke:#a3378a,color:white
    style G fill:#d94dbb,stroke:#a3378a,color:white
```

## ğŸ¯ é©—æ”¶æ¨™æº–æ›´æ–°

### ä¿®æ­£å¾Œçš„é©—æ”¶æ¨™æº–
- âœ… OrganizationService ä½¿ç”¨ AuthService åŸºæœ¬æ¬Šé™æª¢æŸ¥
- âœ… PermissionService æä¾›é€²éšæ¬Šé™ç®¡ç†
- âœ… çµ„ç¹”å»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- âœ… å€‹äººå»ºç«‹éç¨‹ä¸æœƒé‡åˆ°æ¬Šé™é˜»ç¤™
- âœ… æ¬Šé™ç³»çµ±åˆ†éšæ®µå¯¦æ–½ï¼Œé¿å…å¾ªç’°ä¾è³´

## ğŸš€ å»ºè­°è¡Œå‹•

1. **ç«‹å³ä¿®æ­£**: æ›´æ–° Phase 2 çš„ä»»å‹™é †åº
2. **é‡æ–°è©•ä¼°**: æª¢æŸ¥å…¶ä»– Phase æ˜¯å¦æœ‰é¡ä¼¼å•é¡Œ
3. **æ›´æ–°æ–‡æª”**: æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶
4. **é–‹å§‹å¯¦æ–½**: æŒ‰ç…§ä¿®æ­£å¾Œçš„é †åºé–‹å§‹ Phase 1

## ğŸ“Š QA çµè«–

**ç¸½é«”ç‹€æ…‹**: âš ï¸ **éœ€è¦ä¿®æ­£**
- ç™¼ç¾ Phase 2 ä»»å‹™é †åºå•é¡Œ
- å·²æä¾›è©³ç´°çš„ä¿®æ­£å»ºè­°
- å…¶ä»– Phase çš„é‚è¼¯å’Œé †åºæ­£ç¢º
- ä¿®æ­£å¾Œå¯ä»¥é¿å…çµ„ç¹”/å€‹äººå»ºç«‹éç¨‹çš„é˜»ç¤™

**å„ªå…ˆç´š**: ğŸ”´ **é«˜å„ªå…ˆç´š**
- å¿…é ˆåœ¨é–‹å§‹å¯¦æ–½å‰ä¿®æ­£
- å½±éŸ¿æ•´å€‹æ¬Šé™ç³»çµ±çš„å¯¦æ–½
- é¿å…å¾ŒçºŒçš„å¾ªç’°ä¾è³´å•é¡Œ

---

**QA Agent å®Œæˆï¼** ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å®Œæˆï¼Œå·²æä¾›ä¿®æ­£å»ºè­°ã€‚
`````

## File: graph-bank/systemPatterns.md
`````markdown
# Memory Bank: System Patterns

## Architecture Patterns
- **åˆ†å±¤æ¶æ§‹**: å‰ç«¯å±¤ã€API å±¤ã€æ¥­å‹™é‚è¼¯å±¤ã€è³‡æ–™å±¤
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æŒ‰åŠŸèƒ½é ˜åŸŸåŠƒåˆ†æ¨¡çµ„ (ç”¨æˆ¶ã€çµ„ç¹”ã€å°ˆæ¡ˆã€ç¤¾äº¤ã€æˆå°±ã€é€šçŸ¥)
- **CQRS æ¨¡å¼**: å‘½ä»¤æŸ¥è©¢è²¬ä»»åˆ†é›¢ï¼Œä½¿ç”¨ Commandsã€Queriesã€Events
- **Repository æ¨¡å¼**: è³‡æ–™å­˜å–æŠ½è±¡åŒ–
- **Domain Service æ¨¡å¼**: æ¥­å‹™é‚è¼¯å°è£

## Design Patterns
- **Angular æ¨¡çµ„åŒ–**: åŠŸèƒ½æ¨¡çµ„ã€å…±äº«æ¨¡çµ„ã€æ ¸å¿ƒæ¨¡çµ„
- **å…ƒä»¶åŒ–è¨­è¨ˆ**: å¯é‡ç”¨çš„ UI å…ƒä»¶
- **æœå‹™æ³¨å…¥**: ä¾è³´æ³¨å…¥æ¨¡å¼
- **ç‹€æ…‹ç®¡ç†**: NgRx ç‹€æ…‹ç®¡ç†æ¨¡å¼
- **è·¯ç”±å®ˆè¡›**: èªè­‰èˆ‡æˆæ¬Šä¿è­·

## Technology Stack
- **å‰ç«¯**: Angular 17+, NgRx, Angular Material
- **å¾Œç«¯**: Node.js + Express/NestJS
- **è³‡æ–™åº«**: PostgreSQL + Redis
- **èªè­‰**: Firebase Auth/Auth0
- **éƒ¨ç½²**: Docker + Kubernetes
- **ç›£æ§**: Prometheus + Grafana

## Coding Standards
- **æª”æ¡ˆå‘½å**: kebab-case å‘½åè¦ç¯„
- **ç›®éŒ„çµæ§‹**: æŒ‰åŠŸèƒ½æ¨¡çµ„çµ„ç¹”
- **ä»£ç¢¼çµ„ç¹”**: å–®ä¸€è·è²¬åŸå‰‡
- **æ¸¬è©¦ç­–ç•¥**: å–®å…ƒæ¸¬è©¦ + æ•´åˆæ¸¬è©¦
- **æ–‡æª”æ¨™æº–**: Markdown æ ¼å¼ï¼ŒåŒ…å«æ¶æ§‹åœ–
`````

## File: graph-bank/techContext.md
`````markdown
# Memory Bank: Technical Context

## Technology Stack
- **å‰ç«¯æ¡†æ¶**: Angular 20.1.0 (æœ€æ–°ç‰ˆæœ¬)
- **UI å…ƒä»¶åº«**: Angular Material 20.1.0
- **å¾Œç«¯æœå‹™**: Firebase 11.10.0 (å®Œæ•´æœå‹™å¥—ä»¶)
- **ç‹€æ…‹ç®¡ç†**: Angular å…§å»ºç‹€æ…‹ç®¡ç† + RxJS
- **èªè­‰æœå‹™**: Firebase Auth
- **è³‡æ–™åº«**: Firestore (NoSQL)
- **æª”æ¡ˆå„²å­˜**: Firebase Storage
- **åˆ†ææœå‹™**: Firebase Analytics
- **å®‰å…¨æœå‹™**: Firebase App Check
- **æ¨é€é€šçŸ¥**: Firebase Messaging
- **æ•ˆèƒ½ç›£æ§**: Firebase Performance
- **é ç«¯é…ç½®**: Firebase Remote Config
- **AI æœå‹™**: Firebase Vertex AI

## Development Environment
- **OS**: Windows 11
- **Package Manager**: yarn
- **Editor**: Cursor
- **ç‰ˆæœ¬æ§åˆ¶**: Git
- **Node.js**: v22.20.0+
- **npm**: v10.9.3+

## Dependencies
- **æ ¸å¿ƒä¾è³´**: 
  - @angular/core: ^20.1.0
  - @angular/common: ^20.1.0
  - @angular/router: ^20.1.0
  - @angular/forms: ^20.1.0
- **Firebase ä¾è³´**:
  - @angular/fire: ^20.0.1
  - firebase: ^11.10.0
- **UI ä¾è³´**: 
  - @angular/material: 20.1.0
  - @angular/cdk: 20.1.0
- **é–‹ç™¼ä¾è³´**:
  - @angular/cli: ^20.1.0
  - @angular/build: ^20.1.0
  - typescript: ~5.8.2

## Configuration
- **TypeScript**: åš´æ ¼æ¨¡å¼å•Ÿç”¨
- **Angular**: æœ€æ–°ç‰ˆæœ¬é…ç½®
- **Firebase**: å¤šæœå‹™æ•´åˆé…ç½®
- **Material Design**: Azure Blue ä¸»é¡Œ
- **è·¯ç”±**: æ‡¶åŠ è¼‰æ¨¡çµ„é…ç½®
- **èªè­‰**: è·¯ç”±å®ˆè¡›ä¿è­·
`````

## File: repomix-dev-workflow.md
`````markdown
# Repomix é–‹ç™¼å·¥ä½œæµç¨‹

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å°ˆæ¡ˆåˆ†æ
```bash
# ç”Ÿæˆå®Œæ•´å°ˆæ¡ˆæ¦‚è¦½
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --style markdown \
  --top-files-len 20 \
  --output project-overview.md
```

### 2. åŠŸèƒ½é–‹ç™¼
```bash
# åªåŒ…å«æºç¢¼æ–‡ä»¶
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --include "src/**/*.ts,src/**/*.html,src/**/*.scss" \
  --style markdown \
  --output source-code.md
```

### 3. ä»£ç¢¼å¯©æŸ¥
```bash
# å£“ç¸®æ¨¡å¼å¿«é€Ÿå¯©æŸ¥
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --compress \
  --style markdown \
  --output code-review.md
```

### 4. æ¥µè‡´ç¯€çœæ¨¡å¼
```bash
# ç¯€çœ 88% ä»¤ç‰Œçš„æ¥µè‡´æ¨¡å¼
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --compress \
  --remove-comments \
  --remove-empty-lines \
  --no-file-summary \
  --no-directory-structure \
  --include "src/**/*.ts,src/**/*.html,*.md" \
  --style markdown \
  --output minimal-output.md
```

### 5. å…¶ä»–å¯¦ç”¨æ¨¡å¼

#### JSON æ ¼å¼è¼¸å‡º
```bash
# ç”Ÿæˆ JSON æ ¼å¼ï¼Œé©åˆç¨‹å¼åŒ–è™•ç†
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --style json \
  --output project-data.json
```

#### XML æ ¼å¼è¼¸å‡º
```bash
# ç”Ÿæˆ XML æ ¼å¼ï¼Œé©åˆçµæ§‹åŒ–åˆ†æ
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --style xml \
  --output project-structure.xml
```

#### åŒ…å« Git æ­·å²
```bash
# åŒ…å« Git æäº¤æ­·å²å’Œè®Šæ›´
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --include-logs \
  --include-diffs \
  --style markdown \
  --output project-with-history.md
```

#### åªåŒ…å«ç‰¹å®šæ–‡ä»¶é¡å‹
```bash
# åªåŒ…å« TypeScript æ–‡ä»¶
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --include "**/*.ts" \
  --style markdown \
  --output typescript-only.md
```

## ğŸ“Š è¼¸å‡ºæ¨¡å¼å°æ¯”

| æ¨¡å¼ | Token æ•¸é‡ | ç¯€çœæ¯”ä¾‹ | æ–‡ä»¶æ•¸é‡ | é©ç”¨å ´æ™¯ |
|------|------------|----------|----------|----------|
| **å®Œæ•´æ¨¡å¼** | 351,116 | - | 147 | æ·±åº¦åˆ†æã€å®Œæ•´ç†è§£ |
| **å£“ç¸®æ¨¡å¼** | 307,073 | 12.5% | 147 | å¿«é€Ÿå¯©æŸ¥ã€ä»£ç¢¼åˆ†æ |
| **æºç¢¼æ¨¡å¼** | 44,080 | 87.4% | 5 | åŠŸèƒ½é–‹ç™¼ã€ä»£ç¢¼ç”Ÿæˆ |
| **æ¥µè‡´ç¯€çœ** | 41,433 | 88.2% | 4 | æˆæœ¬æ•æ„Ÿã€å¿«é€Ÿæ¦‚è¦½ |

## ğŸ¯ ä½¿ç”¨å ´æ™¯

### AI ä»£ç¢¼åˆ†æ
- å°‡ repomix è¼¸å‡ºæä¾›çµ¦ AI é€²è¡Œä»£ç¢¼åˆ†æ
- ç²å–æ¶æ§‹å»ºè­°å’Œæ”¹é€²æ–¹æ¡ˆ
- è­˜åˆ¥æ½›åœ¨å•é¡Œå’Œå„ªåŒ–æ©Ÿæœƒ

### æ–°åŠŸèƒ½é–‹ç™¼
- åŸºæ–¼ç¾æœ‰æ¶æ§‹è¨­è¨ˆæ–°æ¨¡çµ„
- åƒè€ƒç¾æœ‰ä»£ç¢¼é¢¨æ ¼å’Œæ¨¡å¼
- ç¢ºä¿æ–°åŠŸèƒ½èˆ‡ç¾æœ‰ç³»çµ±æ•´åˆ

### ä»£ç¢¼é‡æ§‹
- åˆ†æä»£ç¢¼çµæ§‹å’Œä¾è³´é—œä¿‚
- è­˜åˆ¥é‡æ§‹æ©Ÿæœƒ
- æä¾›é‡æ§‹å»ºè­°

### å•é¡Œè¨ºæ–·
- å¿«é€Ÿç†è§£å°ˆæ¡ˆçµæ§‹
- å®šä½å•é¡Œæ ¹æº
- æä¾›è§£æ±ºæ–¹æ¡ˆ

## ğŸ’¡ æœ€ä½³å¯¦è¸

1. **å®šæœŸæ›´æ–°**ï¼šæ¯æ¬¡é‡å¤§è®Šæ›´å¾Œé‡æ–°ç”Ÿæˆ repomix è¼¸å‡º
2. **åˆ†æ®µåˆ†æ**ï¼šæ ¹æ“šéœ€è¦åªåˆ†æç‰¹å®šæ¨¡çµ„
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå°‡ repomix è¼¸å‡ºåŠ å…¥ç‰ˆæœ¬æ§åˆ¶
4. **åœ˜éšŠå”ä½œ**ï¼šèˆ‡åœ˜éšŠæˆå“¡åˆ†äº« repomix è¼¸å‡º

## ğŸ”§ é€²éšæŠ€å·§

### è‡ªå®šç¾©é…ç½®
å‰µå»º `repomix.config.json` æ–‡ä»¶ï¼š
```json
{
  "include": ["src/**/*.ts", "src/**/*.html"],
  "ignore": ["*.spec.ts", "*.test.ts"],
  "style": "markdown",
  "compress": true
}
```

### è‡ªå‹•åŒ–è…³æœ¬
```bash
#!/bin/bash
# è‡ªå‹•ç”Ÿæˆ repomix è¼¸å‡º
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix \
  --config repomix.config.json \
  --output repomix-output.md
```

## ğŸ¤– AI Agent æ¨è–¦

### ä¸»è¦æ¨è–¦ï¼šClaude 3.5 Sonnet
- **é€šç”¨æ€§æœ€ä½³**ï¼šå¯ä»¥è™•ç†ä»£ç¢¼ã€æ–‡æª”ã€æ¶æ§‹åˆ†æ
- **ä»£ç¢¼èƒ½åŠ›å¼·**ï¼šå„ªç§€çš„ Angular/TypeScript æ”¯æŒ
- **æ•´åˆåº¦é«˜**ï¼šèˆ‡ Cursor å®Œç¾æ•´åˆ
- **æˆæœ¬æ§åˆ¶**ï¼šé€šé repomix ç¯€çœä»¤ç‰Œ

### åˆ†å±¤ä½¿ç”¨ç­–ç•¥
1. **Claude 3.5 Sonnet**ï¼šæ¶æ§‹åˆ†æã€ä»£ç¢¼å¯©æŸ¥ã€åŠŸèƒ½è¨­è¨ˆ
2. **GitHub Copilot**ï¼šä»£ç¢¼ç”Ÿæˆã€è‡ªå‹•å®Œæˆ
3. **æœ¬åœ°æ¨¡å‹**ï¼šæ•æ„Ÿæ•¸æ“šè™•ç†ã€é›¢ç·šé–‹ç™¼

### æˆæœ¬å„ªåŒ–
- ä½¿ç”¨ repomix æ¥µè‡´ç¯€çœæ¨¡å¼ï¼ˆ88% ä»¤ç‰Œç¯€çœï¼‰
- åˆ†å±¤ä½¿ç”¨ä¸åŒ AI Agent
- ç›£æ§ä»¤ç‰Œä½¿ç”¨é‡
`````

## File: TREE.md
`````markdown
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”œâ”€â”€ app.routes.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                               # åŠŸèƒ½æ¨¡çµ„ (ç¬¬3å±¤)
â”‚   â”‚   â”œâ”€â”€ user/                              # ç”¨æˆ¶æ¨¡çµ„ (ç¬¬4å±¤) âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                          # èªè­‰ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ registration.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email-verification.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.interceptor.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login-user.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register-user.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verify-email.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-created.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firebase-auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/                       # å€‹äººè³‡æ–™ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-edit.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ basic-info.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-profile.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update-profile.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-profile.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-updated.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore-profile.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ certificates/                   # è­‰ç…§ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-verification.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add-certificate.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verify-certificate.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-certificates.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-added.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore-certificate.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ social/                         # ç¤¾äº¤ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ followers-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-button.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-following.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications/                  # é€šçŸ¥ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification.model.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-profile.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-settings.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user-dashboard.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-state.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profile-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ user.model.ts                   # ç”¨æˆ¶æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.repository.ts              # ç”¨æˆ¶è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ user.routes.ts                  # ç”¨æˆ¶è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ organization/                       # çµ„ç¹”æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # çµ„ç¹”å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ team-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ member-management.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-assignment.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # çµ„ç¹”é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-list.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-detail.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-settings.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # çµ„ç¹”ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.model.ts            # çµ„ç¹”æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.service.ts          # çµ„ç¹”æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.repository.ts      # çµ„ç¹”è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.routes.ts           # çµ„ç¹”è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ project/                            # å°ˆæ¡ˆæ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # å°ˆæ¡ˆå…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-detail.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ task-detail.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ documents/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document-viewer.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-budget.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-actual.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-forecast.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-variance.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cost-breakdown.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ daily-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inspection-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analytics-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ gantt-chart.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ materials/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ materials-management.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ equipment-management.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ safety-records.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # å°ˆæ¡ˆé é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-list.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-detail.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-reports.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # å°ˆæ¡ˆç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-state.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cost-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ project.model.ts                # å°ˆæ¡ˆæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ project.service.ts               # å°ˆæ¡ˆæœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ project.repository.ts           # å°ˆæ¡ˆè³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ project.routes.ts                # å°ˆæ¡ˆè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ social/                             # ç¤¾äº¤æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # ç¤¾äº¤å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ followers-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ follow-button.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ follow-status.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ discovery/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-discovery.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-recommendation.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-search.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user-profile-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stats/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-stats.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-chart.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ social-leaderboard.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ network/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ interaction.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ mutual-connection.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ network.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # ç¤¾äº¤é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-discovery.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ social-network.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # ç¤¾äº¤ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ relationship-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ social.model.ts                  # ç¤¾äº¤æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ social.service.ts                # ç¤¾äº¤æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ social.repository.ts             # ç¤¾äº¤è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ social.routes.ts                 # ç¤¾äº¤è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ achievement/                        # æˆå°±æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # æˆå°±å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ achievement-progress.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ranking-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ top-stats.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ management/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rule-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ category-management.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ stats-chart.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ progress-chart.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ achievement-timeline.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # æˆå°±é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ achievement-management.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # æˆå°±ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ progress-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.model.ts             # æˆå°±æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.service.ts           # æˆå°±æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.repository.ts        # æˆå°±è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.routes.ts           # æˆå°±è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ notification/                       # é€šçŸ¥æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # é€šçŸ¥å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-item.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-preferences.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-templates.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ push/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ push.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ email-notification.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ sms-notification.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ in-app-notification.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # é€šçŸ¥é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-history.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # é€šçŸ¥ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ preference-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.model.ts           # é€šçŸ¥æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.service.ts         # é€šçŸ¥æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.repository.ts      # é€šçŸ¥è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.routes.ts          # é€šçŸ¥è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts                            # åŠŸèƒ½æ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                                   # æ ¸å¿ƒåŠŸèƒ½ (ç¬¬3å±¤)
â”‚   â”‚   â”œâ”€â”€ auth/                               # èªè­‰æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ firebase-auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ delon-auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-integration.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ token.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ acl/                                # æ¬Šé™æ§åˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ event-bus/                          # äº‹ä»¶åŒ¯æµæ’
â”‚   â”‚   â”‚   â”œâ”€â”€ event-bus.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ event-store.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ event-processor.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ domain-event.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ integration-event.interface.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ infrastructure/                     # åŸºç¤è¨­æ–½
â”‚   â”‚   â”‚   â”œâ”€â”€ firestore/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-repository.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ firestore-config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ storage-config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ logging/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logger.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ audit.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ shared/                             # å…±äº«å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ index.ts                            # æ ¸å¿ƒæ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                                 # å…±äº«æ¨¡çµ„ (ç¬¬3å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/                          # å…±äº«å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                             # UI å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-spinner.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-skeleton.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ loading-overlay.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ confirmation-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ info-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dynamic-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-picker.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rich-text-editor.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page-header.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content-wrapper.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ breadcrumb.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-table.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ progress-bar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar-group.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tag-list.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feedback/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ toast.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ alert.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ empty-state.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ error-boundary.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ business/                       # æ¥­å‹™å…ƒä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ user-avatar.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ organization-logo.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ project-status.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ activity-timeline.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ permission-guard.component.ts
â”‚   â”‚   â”œâ”€â”€ services/                            # å…±äº«æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-api.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ http-client.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api-error-handler.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ session-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ indexeddb.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utility/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validation.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ format.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ breadcrumb.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ theme/
â”‚   â”‚   â”‚       â”œâ”€â”€ theme.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ dark-mode.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ responsive.service.ts
â”‚   â”‚   â”œâ”€â”€ models/                              # å…±äº«æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ paginated-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validation.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ roles.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.enum.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-types.enum.ts
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚       â”œâ”€â”€ base.dto.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ pagination.dto.ts
â”‚   â”‚   â”‚       â””â”€â”€ filter.dto.ts
â”‚   â”‚   â”œâ”€â”€ pipes/                               # å…±äº«ç®¡é“
â”‚   â”‚   â”‚   â”œâ”€â”€ date-format.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file-size.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ truncate.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ safe-html.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ currency-format.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ highlight.pipe.ts
â”‚   â”‚   â”œâ”€â”€ directives/                          # å…±äº«æŒ‡ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ auto-focus.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ click-outside.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lazy-load.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ drag-drop.directive.ts
â”‚   â”‚   â”‚   â””â”€â”€ infinite-scroll.directive.ts
â”‚   â”‚   â”œâ”€â”€ validators/                          # å…±äº«é©—è­‰å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ email.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ password.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ phone.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ url.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.validator.ts
â”‚   â”‚   â”œâ”€â”€ guards/                              # å…±äº«å®ˆè¡›
â”‚   â”‚   â”‚   â”œâ”€â”€ route-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ role-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ unsaved-changes-guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ organization-context-guard.ts
â”‚   â”‚   â”œâ”€â”€ interceptors/                        # å…±äº«æ””æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ retry.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ request-id.interceptor.ts
â”‚   â”‚   â”œâ”€â”€ utils/                               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ array.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ object.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ string.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ date.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.utils.ts
â”‚   â”‚   â”‚   â””â”€â”€ format.utils.ts
â”‚   â”‚   â”œâ”€â”€ constants/                           # å¸¸æ•¸å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ api.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ app.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.constants.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.constants.ts
â”‚   â”‚   â””â”€â”€ index.ts                             # å…±äº«æ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                                 # ç‰ˆé¢é…ç½® (ç¬¬3å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-bell.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-switcher.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ navigation-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ menu-item.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ footer/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ footer.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ main-layout.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ auth-layout.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ fullscreen-layout.component.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.service.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”œâ”€â”€ app.routes.ts
â”‚   â””â”€â”€ main.ts                                  # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚
â”œâ”€â”€ assets/                                     # éœæ…‹è³‡æº (ç¬¬1å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/                          # å…±äº«å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-spinner.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-skeleton.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ loading-overlay.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ confirmation-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ info-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dynamic-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-picker.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rich-text-editor.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page-header.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content-wrapper.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ breadcrumb.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-table.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ progress-bar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar-group.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tag-list.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feedback/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ toast.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ alert.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ empty-state.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ error-boundary.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ business/
â”‚   â”‚   â”‚       â”œâ”€â”€ user-avatar.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ organization-logo.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ project-status.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ activity-timeline.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ permission-guard.component.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                            # å…±äº«æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-api.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ http-client.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api-error-handler.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ session-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ indexeddb.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utility/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validation.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ format.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ breadcrumb.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ theme/
â”‚   â”‚   â”‚       â”œâ”€â”€ theme.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ dark-mode.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ responsive.service.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                              # å…±äº«æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ paginated-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validation.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ roles.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.enum.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-types.enum.ts
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚       â”œâ”€â”€ base.dto.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ pagination.dto.ts
â”‚   â”‚   â”‚       â””â”€â”€ filter.dto.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pipes/                               # å…±äº«ç®¡é“
â”‚   â”‚   â”‚   â”œâ”€â”€ date-format.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file-size.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ truncate.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ safe-html.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ currency-format.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ highlight.pipe.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ directives/                          # å…±äº«æŒ‡ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ auto-focus.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ click-outside.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lazy-load.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ drag-drop.directive.ts
â”‚   â”‚   â”‚   â””â”€â”€ infinite-scroll.directive.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators/                          # å…±äº«é©—è­‰å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ email.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ password.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ phone.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ url.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.validator.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ guards/                              # å…±äº«å®ˆè¡›
â”‚   â”‚   â”‚   â”œâ”€â”€ route-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ role-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ unsaved-changes-guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ organization-context-guard.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ interceptors/                        # å…±äº«æ””æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ retry.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ request-id.interceptor.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ array.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ object.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ string.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ date.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.utils.ts
â”‚   â”‚   â”‚   â””â”€â”€ format.utils.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ constants/                           # å¸¸æ•¸å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ api.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ app.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.constants.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.constants.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                                 # ç‰ˆé¢é…ç½® âœ¨
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-bell.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-switcher.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ navigation-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ menu-item.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ footer/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ footer.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ main-layout.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ auth-layout.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ fullscreen-layout.component.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.service.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ main.ts                                 # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚
â”œâ”€â”€ assets/                                     # éœæ…‹è³‡æº âœ¨
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ logos/
â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ avatars/
â”‚   â”‚   â””â”€â”€ backgrounds/
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ themes/
â”‚   â”‚   â”‚   â”œâ”€â”€ default.less
â”‚   â”‚   â”‚   â”œâ”€â”€ dark.less
â”‚   â”‚   â”‚   â””â”€â”€ compact.less
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ utilities/
â”‚   â”‚   â”‚   â”œâ”€â”€ mixins.less
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.less
â”‚   â”‚   â”‚   â””â”€â”€ functions.less
â”‚   â”‚   â””â”€â”€ global.less
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”œâ”€â”€ zh-TW.json
â”‚   â”‚   â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ fonts/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ mock/
â”‚   â”‚   â””â”€â”€ seeds/
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ environment.ts
â”‚       â”œâ”€â”€ firebase.config.ts
â”‚       â””â”€â”€ app.config.ts
â”‚
â”œâ”€â”€ environments/                               # ç’°å¢ƒé…ç½® âœ¨
â”‚   â”œâ”€â”€ environment.ts
â”‚   â”œâ”€â”€ environment.prod.ts
â”‚   â”œâ”€â”€ environment.dev.ts
â”‚   â””â”€â”€ environment.staging.ts
â”‚
â”œâ”€â”€ types/                                      # å…¨åŸŸå‹åˆ¥å®šç¾© âœ¨
â”‚   â”œâ”€â”€ global.d.ts
â”‚   â”œâ”€â”€ firebase.d.ts
â”‚   â”œâ”€â”€ api.d.ts
â”‚   â””â”€â”€ index.d.ts
â”‚
â”œâ”€â”€ styles/                                     # å…¨åŸŸæ¨£å¼  âœ¨
â”‚   â”œâ”€â”€ styles.less
â”‚   â”œâ”€â”€ theme.less
â”‚   â””â”€â”€ variables.less
â”‚
â”œâ”€â”€ index.html                                  # HTML å…¥å£
â”œâ”€â”€ main.ts                                     # TypeScript å…¥å£
â””â”€â”€ style-icons.ts                              # åœ–ç¤ºå®šç¾©

# æ ¹ç›®éŒ„æª”æ¡ˆ
â”œâ”€â”€ angular.json                                # Angular é…ç½®
â”œâ”€â”€ package.json                                # å¥—ä»¶ä¾è³´
â”œâ”€â”€ tsconfig.json                               # TypeScript é…ç½®
â”œâ”€â”€ tsconfig.app.json                          # æ‡‰ç”¨ç¨‹å¼ TS é…ç½®
â”œâ”€â”€ tsconfig.spec.json                         # æ¸¬è©¦ TS é…ç½®
â”œâ”€â”€ eslint.config.mjs                          # ESLint é…ç½®
â”œâ”€â”€ stylelint.config.mjs                       # Stylelint é…ç½®
â”œâ”€â”€ firebase.json                               # Firebase é…ç½®
â”œâ”€â”€ firestore.rules                            # Firestore å®‰å…¨è¦å‰‡
â”œâ”€â”€ firestore.indexes.json                     # Firestore ç´¢å¼•
â”œâ”€â”€ .gitignore                                 # Git å¿½ç•¥æª”æ¡ˆ
â”œâ”€â”€ README.md                                  # å°ˆæ¡ˆèªªæ˜
â””â”€â”€ yarn.lock                                  # å¥—ä»¶é–å®šæª”

## ğŸ¯ æ‰å¹³åŒ–æ¶æ§‹è¨­è¨ˆ (4å±¤çµæ§‹)

### ğŸ“Š çµæ§‹å„ªåŒ–æˆæœ
- **åŸå§‹çµæ§‹**: 7å±¤æ·±åº¦ (`src/app/features/user/presentation/components/auth/`)
- **æ‰å¹³åŒ–å¾Œ**: 4å±¤æ·±åº¦ (`src/app/features/user/auth/`)
- **æ”¹å–„å¹…åº¦**: æ¸›å°‘ 43% çš„ç›®éŒ„æ·±åº¦
- **æª”æ¡ˆè·¯å¾‘**: å¹³å‡ç¸®çŸ­ 60%

### ğŸ”„ æ‰å¹³åŒ–ç­–ç•¥
1. **åˆä½µæ¶æ§‹å±¤ç´š**: å°‡ `presentation/application/domain/infrastructure` åˆä½µåˆ°å–®ä¸€åŠŸèƒ½ç›®éŒ„
2. **æª”æ¡ˆå‘½åç´„å®š**: ä½¿ç”¨ `.component.ts`ã€`.service.ts`ã€`.model.ts`ã€`.repository.ts` ç­‰å¾Œç¶´å€åˆ†è·è²¬
3. **åŠŸèƒ½å°å‘çµ„ç¹”**: æ¯å€‹åŠŸèƒ½æ¨¡çµ„åŒ…å«æ‰€æœ‰ç›¸é—œæª”æ¡ˆï¼Œæé«˜å…§èšæ€§
4. **Index æª”æ¡ˆ**: ä½¿ç”¨ `index.ts` ç°¡åŒ–åŒ¯å…¥è·¯å¾‘

### ğŸ“ æ–°çµæ§‹å±¤ç´šèªªæ˜
- **ç¬¬1å±¤**: æ ¹ç›®éŒ„ (`src/`, `assets/`, `environments/` ç­‰)
- **ç¬¬2å±¤**: ä¸»è¦æ¨¡çµ„ (`app/`, `assets/images/` ç­‰)
- **ç¬¬3å±¤**: æ ¸å¿ƒåˆ†é¡ (`features/`, `core/`, `shared/`, `layout/`)
- **ç¬¬4å±¤**: å…·é«”åŠŸèƒ½æª”æ¡ˆ (`user/auth/login.component.ts` ç­‰)

### ğŸ¨ æª”æ¡ˆå‘½åè¦ç¯„
```typescript
// åŠŸèƒ½æ¨¡çµ„æª”æ¡ˆå‘½å
user/
â”œâ”€â”€ auth/                    # èªè­‰ç›¸é—œ
â”‚   â”œâ”€â”€ login.component.ts   # UI å…ƒä»¶
â”‚   â”œâ”€â”€ auth.service.ts      # æ¥­å‹™é‚è¼¯æœå‹™
â”‚   â”œâ”€â”€ auth.guard.ts        # è·¯ç”±å®ˆè¡›
â”‚   â””â”€â”€ auth.interceptor.ts  # HTTP æ””æˆªå™¨
â”œâ”€â”€ profile/                 # å€‹äººè³‡æ–™ç›¸é—œ
â”‚   â”œâ”€â”€ profile-card.component.ts
â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â””â”€â”€ profile.model.ts
â”œâ”€â”€ user.model.ts            # ç”¨æˆ¶æ¨¡å‹
â”œâ”€â”€ user.repository.ts       # ç”¨æˆ¶è³‡æ–™å­˜å–
â”œâ”€â”€ user.routes.ts           # ç”¨æˆ¶è·¯ç”±
â””â”€â”€ index.ts                 # åŒ¯å‡ºæª”æ¡ˆ
```

## å¿«é€Ÿé–‹å§‹ï¼ˆWindows 11 + yarnï¼‰

1) å®‰è£ä¾è³´

```bash
yarn install
```

2) è¨­å®š Firebase åƒæ•¸ï¼ˆ`environments/environment.ts`ï¼‰

```ts
export const environment = {
  production: false,
  firebase: {
    apiKey: '...',
    authDomain: '...',
    projectId: '...',
    storageBucket: '...',
    messagingSenderId: '...',
    appId: '...'
  }
};
```

3) åˆå§‹åŒ–æ ¸å¿ƒ Providersï¼ˆ`src/app/app.config.ts`ï¼‰

```ts
import { ApplicationConfig, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';
import { provideHttpClient, withInterceptors } from '@angular/common/http';
import { provideFirebaseApp, initializeApp } from '@angular/fire/app';
import { provideAuth, getAuth } from '@angular/fire/auth';
import { provideFirestore, getFirestore } from '@angular/fire/firestore';
import { environment } from '../environments/environment';
import { authInterceptor } from './core/auth/auth.interceptor';
import { tokenInterceptor } from './core/auth/token.interceptor';

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter([]),
    provideZoneChangeDetection({ eventCoalescing: true }),
    provideHttpClient(withInterceptors([tokenInterceptor, authInterceptor])),
    provideFirebaseApp(() => initializeApp(environment.firebase)),
    provideAuth(() => getAuth()),
    provideFirestore(() => getFirestore()),
  ],
};
```

4) å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
yarn start
```

## èªè­‰èˆ‡æˆæ¬Šæ•´åˆï¼ˆFirebase â†’ @angular/fire â†’ @delon/auth â†’ @delon/aclï¼‰

- **ç™»å…¥éˆ**ï¼š
  - UI è¼¸å…¥æ†‘è­‰ â†’ `@angular/fire`ï¼ˆFirebase Authï¼‰ç™»å…¥ â†’ å–å¾— Firebase ID Token
  - `Auth Integration Service` æ­£è¦åŒ– Token â†’ äº¤ç”± `@delon/auth TokenService` å„²å­˜ï¼ˆlocalStorageï¼‰
  - `token.interceptor.ts` è‡ªå‹•é™„åŠ  `Authorization: Bearer <ID Token>` è‡³ API è«‹æ±‚

- **ç‹€æ…‹èˆ‡åˆ·æ–°**ï¼š
  - ç›£è½ `onIdTokenChanged` åŒæ­¥ `TokenService`ï¼Œè™•ç†éæœŸ/åˆ·æ–°
  - `@delon/auth` æš´éœ²ç™»å…¥ç‹€æ…‹ä¾› UI ä½¿ç”¨

- **ACL æ˜ å°„**ï¼š
  - ä¾†æºï¼šä½¿ç”¨è€…æª”æ¡ˆè§’è‰²/æ¬Šé™ + `organizationId`ï¼ˆå¿…è¦æ™‚ `projectId`ï¼‰
  - è½‰æ›ï¼šæ˜ å°„ç‚º `roles` èˆ‡ `abilities`ï¼Œäº¤ç”± `@delon/acl` ç®¡ç†
  - ä½¿ç”¨ï¼š`ACLGuard` ä¿è­·è·¯ç”±ï¼›æ¨¡æ¿å±¤ä»¥ `*appAcl` æ§åˆ¶é¡¯ç¤º

- **è²¬ä»»é‚Šç•Œ**ï¼š
  - `token.interceptor.ts`ï¼šåªè² è²¬æ³¨å…¥ Authorization æ¨™é ­
  - `auth.interceptor.ts`ï¼šé›†ä¸­è™•ç† 401/403 ç­‰å°æµèˆ‡éŒ¯èª¤
  - `ACLGuard`ï¼šä¾æ¬Šé™æ¨¹åˆ¤æ–·å¯é”æ€§

## çµ„ç¹”åˆ‡æ›ï¼ˆACL å³æ™‚æ›´æ–°ï¼‰

- ä½¿ç”¨è€…åˆ‡æ›çµ„ç¹”æ™‚ï¼Œé‡æ–°è¨ˆç®— ACL æ˜ å°„ï¼ˆè§’è‰²/èƒ½åŠ›ä¾ç•¶å‰ `organizationId`ï¼‰ã€‚
- æ›´æ–°å®Œæˆå¾Œï¼Œå—ä¿è­·è·¯ç”±èˆ‡æ¨¡æ¿æ¢ä»¶ï¼ˆ`*appAcl`ï¼‰æ‡‰ç«‹å³åæ˜ ã€‚

## å®‰å…¨å°é½Šï¼ˆFirestore è¦å‰‡ï¼‰

- è‡ªè¨‚ Claimsï¼ˆä¾‹ï¼š`orgRoles`ã€`projectRoles`ï¼‰éœ€èˆ‡ Firestore Security Rules å°é½Šï¼Œé¿å…å‰å¾Œç«¯æ¬Šé™æ¼‚ç§»ã€‚
- è¦å‰‡ç¤ºæ„è«‹åƒè€ƒ `SYSTEM_ARCHITECTURE.md` ä¹‹ MVP ç« ç¯€èˆ‡ `firestore.rules`ã€‚
`````

## File: .cursor/rules/isolation_rules/Core/creative-phase-enforcement.mdc
`````
---
description: creative phase enforcement 
globs: creative-phase-enforcement.md
alwaysApply: false
---

# CREATIVE PHASE ENFORCEMENT

> **TL;DR:** This document implements strict enforcement of creative phase requirements for Level 3-4 tasks, ensuring all design decisions are properly documented and verified before implementation can proceed.

## ğŸ” ENFORCEMENT WORKFLOW

```mermaid
graph TD
    Start["Task Start"] --> Check{"Level 3-4<br>Task?"}
    Check -->|Yes| Analyze["Analyze Design<br>Decision Points"]
    Check -->|No| Optional["Creative Phase<br>Optional"]
    
    Analyze --> Decision{"Design Decisions<br>Required?"}
    Decision -->|Yes| Gate["ğŸš¨ IMPLEMENTATION<br>BLOCKED"]
    Decision -->|No| Allow["Allow<br>Implementation"]
    
    Gate --> Creative["Enter Creative<br>Phase"]
    Creative --> Verify{"All Decisions<br>Documented?"}
    Verify -->|No| Return["Return to<br>Creative Phase"]
    Verify -->|Yes| Proceed["Allow<br>Implementation"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Check fill:#ffa64d,stroke:#cc7a30,color:white
    style Analyze fill:#4dbb5f,stroke:#36873f,color:white
    style Gate fill:#d94dbb,stroke:#a3378a,color:white
    style Creative fill:#4dbbbb,stroke:#368787,color:white
    style Verify fill:#d971ff,stroke:#a33bc2,color:white
```

## ğŸš¨ ENFORCEMENT GATES

```mermaid
graph TD
    subgraph "CREATIVE PHASE GATES"
    G1["Entry Gate<br>Verify Requirements"]
    G2["Process Gate<br>Verify Progress"]
    G3["Exit Gate<br>Verify Completion"]
    end
    
    G1 --> G2 --> G3
    
    style G1 fill:#4dbb5f,stroke:#36873f,color:white
    style G2 fill:#ffa64d,stroke:#cc7a30,color:white
    style G3 fill:#d94dbb,stroke:#a3378a,color:white
```

## ğŸ“‹ ENFORCEMENT CHECKLIST

```markdown
## Entry Gate Verification
- [ ] Task complexity is Level 3-4
- [ ] Design decisions identified
- [ ] Creative phase requirements documented
- [ ] Required participants notified

## Process Gate Verification
- [ ] All options being considered
- [ ] Pros/cons documented
- [ ] Technical constraints identified
- [ ] Implementation impacts assessed

## Exit Gate Verification
- [ ] All decisions documented
- [ ] Rationale provided for choices
- [ ] Implementation plan outlined
- [ ] Verification against requirements
```

## ğŸš¨ IMPLEMENTATION BLOCK NOTICE

When a creative phase is required but not completed:

```
ğŸš¨ IMPLEMENTATION BLOCKED
Creative phases MUST be completed before implementation.

Required Creative Phases:
- [ ] [Creative Phase 1]
- [ ] [Creative Phase 2]
- [ ] [Creative Phase 3]

â›” This is a HARD BLOCK
Implementation CANNOT proceed until all creative phases are completed.
Type "PHASE.REVIEW" to begin creative phase review.
```

## âœ… VERIFICATION PROTOCOL

```mermaid
graph TD
    subgraph "VERIFICATION STEPS"
    V1["1. Requirements<br>Check"]
    V2["2. Documentation<br>Review"]
    V3["3. Decision<br>Validation"]
    V4["4. Implementation<br>Readiness"]
    end
    
    V1 --> V2 --> V3 --> V4
    
    style V1 fill:#4dbb5f,stroke:#36873f,color:white
    style V2 fill:#ffa64d,stroke:#cc7a30,color:white
    style V3 fill:#d94dbb,stroke:#a3378a,color:white
    style V4 fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ”„ CREATIVE PHASE MARKERS

Use these markers to clearly indicate creative phase boundaries:

```markdown
ğŸ¨ğŸ¨ğŸ¨ ENTERING CREATIVE PHASE: [TYPE] ğŸ¨ğŸ¨ğŸ¨
Focus: [Specific component/feature]
Objective: [Clear goal of this creative phase]
Requirements: [List of requirements]

[Creative phase content]

ğŸ¨ CREATIVE CHECKPOINT: [Milestone]
- Progress: [Status]
- Decisions: [List]
- Next steps: [Plan]

ğŸ¨ğŸ¨ğŸ¨ EXITING CREATIVE PHASE ğŸ¨ğŸ¨ğŸ¨
Summary: [Brief description]
Key Decisions: [List]
Next Steps: [Implementation plan]
```

## ğŸ”„ DOCUMENT MANAGEMENT

```mermaid
graph TD
    Current["Current Document"] --> Active["Active:<br>- creative-phase-enforcement.md"]
    Current --> Related["Related:<br>- creative-phase-architecture.md<br>- task-tracking-intermediate.md"]
    
    style Current fill:#4da6ff,stroke:#0066cc,color:white
    style Active fill:#4dbb5f,stroke:#36873f,color:white
    style Related fill:#ffa64d,stroke:#cc7a30,color:white
```
`````

## File: .cursor/rules/isolation_rules/Core/creative-phase-metrics.mdc
`````
---
description: creative phase metrics
globs: creative-phase-metrics.md
alwaysApply: false
---



# CREATIVE PHASE METRICS

> **TL;DR:** This document defines comprehensive quality metrics and measurement criteria for creative phases, ensuring that design decisions meet required standards and are properly documented.

## ğŸ“Š METRICS OVERVIEW

```mermaid
graph TD
    subgraph "CREATIVE PHASE METRICS"
    M1["Documentation<br>Quality"]
    M2["Decision<br>Coverage"]
    M3["Option<br>Analysis"]
    M4["Impact<br>Assessment"]
    M5["Verification<br>Score"]
    end
    
    M1 --> Score["Quality<br>Score"]
    M2 --> Score
    M3 --> Score
    M4 --> Score
    M5 --> Score
    
    style M1 fill:#4dbb5f,stroke:#36873f,color:white
    style M2 fill:#ffa64d,stroke:#cc7a30,color:white
    style M3 fill:#d94dbb,stroke:#a3378a,color:white
    style M4 fill:#4dbbbb,stroke:#368787,color:white
    style M5 fill:#d971ff,stroke:#a33bc2,color:white
    style Score fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ“‹ QUALITY METRICS SCORECARD

```markdown
# Creative Phase Quality Assessment

## 1. Documentation Quality [0-10]
- [ ] Clear problem statement (2 points)
- [ ] Well-defined objectives (2 points)
- [ ] Comprehensive requirements list (2 points)
- [ ] Proper formatting and structure (2 points)
- [ ] Cross-references to related documents (2 points)

## 2. Decision Coverage [0-10]
- [ ] All required decisions identified (2 points)
- [ ] Each decision point documented (2 points)
- [ ] Dependencies mapped (2 points)
- [ ] Impact analysis included (2 points)
- [ ] Future considerations noted (2 points)

## 3. Option Analysis [0-10]
- [ ] Multiple options considered (2 points)
- [ ] Pros/cons documented (2 points)
- [ ] Technical feasibility assessed (2 points)
- [ ] Resource requirements estimated (2 points)
- [ ] Risk factors identified (2 points)

## 4. Impact Assessment [0-10]
- [ ] System impact documented (2 points)
- [ ] Performance implications assessed (2 points)
- [ ] Security considerations addressed (2 points)
- [ ] Maintenance impact evaluated (2 points)
- [ ] Cost implications analyzed (2 points)

## 5. Verification Score [0-10]
- [ ] Requirements traced (2 points)
- [ ] Constraints validated (2 points)
- [ ] Test scenarios defined (2 points)
- [ ] Review feedback incorporated (2 points)
- [ ] Final verification completed (2 points)

Total Score: [Sum of all categories] / 50
Minimum Required Score: 40/50 (80%)
```

## ğŸ“ˆ QUALITY THRESHOLDS

```mermaid
graph TD
    subgraph "QUALITY GATES"
    T1["Minimum<br>40/50 (80%)"]
    T2["Target<br>45/50 (90%)"]
    T3["Excellent<br>48/50 (96%)"]
    end
    
    Score["Quality<br>Score"] --> Check{"Meets<br>Threshold?"}
    Check -->|"< 80%"| Block["â›” BLOCKED<br>Improvements Required"]
    Check -->|"â‰¥ 80%"| Pass["âœ“ PASSED<br>Can Proceed"]
    
    style T1 fill:#4dbb5f,stroke:#36873f,color:white
    style T2 fill:#ffa64d,stroke:#cc7a30,color:white
    style T3 fill:#d94dbb,stroke:#a3378a,color:white
    style Score fill:#4dbbbb,stroke:#368787,color:white
    style Check fill:#d971ff,stroke:#a33bc2,color:white
```

## ğŸ¯ METRIC EVALUATION PROCESS

```mermaid
graph TD
    Start["Start<br>Evaluation"] --> Doc["1. Score<br>Documentation"]
    Doc --> Dec["2. Assess<br>Decisions"]
    Dec --> Opt["3. Review<br>Options"]
    Opt --> Imp["4. Evaluate<br>Impact"]
    Imp --> Ver["5. Verify<br>Completeness"]
    Ver --> Total["Calculate<br>Total Score"]
    Total --> Check{"Meets<br>Threshold?"}
    Check -->|No| Return["Return for<br>Improvements"]
    Check -->|Yes| Proceed["Proceed to<br>Next Phase"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Doc fill:#ffa64d,stroke:#cc7a30,color:white
    style Dec fill:#4dbb5f,stroke:#36873f,color:white
    style Opt fill:#d94dbb,stroke:#a3378a,color:white
    style Imp fill:#4dbbbb,stroke:#368787,color:white
    style Ver fill:#d971ff,stroke:#a33bc2,color:white
```

## ğŸ“Š IMPROVEMENT RECOMMENDATIONS

For scores below threshold:

```markdown
## Documentation Quality Improvements
- Add clear problem statements
- Include specific objectives
- List all requirements
- Improve formatting
- Add cross-references

## Decision Coverage Improvements
- Identify missing decisions
- Document all decision points
- Map dependencies
- Add impact analysis
- Consider future implications

## Option Analysis Improvements
- Consider more alternatives
- Detail pros/cons
- Assess technical feasibility
- Estimate resource needs
- Identify risks

## Impact Assessment Improvements
- Document system impact
- Assess performance
- Address security
- Evaluate maintenance
- Analyze costs

## Verification Improvements
- Trace requirements
- Validate constraints
- Define test scenarios
- Incorporate feedback
- Complete verification
```

## âœ… METRICS VERIFICATION CHECKLIST

```markdown
## Pre-Review Verification
- [ ] All sections scored
- [ ] Calculations verified
- [ ] Supporting evidence attached
- [ ] Improvement areas identified
- [ ] Review feedback incorporated

## Final Metrics Verification
- [ ] Minimum score achieved
- [ ] All categories passed
- [ ] Documentation complete
- [ ] Improvements addressed
- [ ] Final approval obtained
```

## ğŸ”„ DOCUMENT MANAGEMENT

```mermaid
graph TD
    Current["Current Document"] --> Active["Active:<br>- creative-phase-metrics.md"]
    Current --> Related["Related:<br>- creative-phase-enforcement.md<br>- creative-phase-architecture.md"]
    
    style Current fill:#4da6ff,stroke:#0066cc,color:white
    style Active fill:#4dbb5f,stroke:#36873f,color:white
    style Related fill:#ffa64d,stroke:#cc7a30,color:white
```
`````

## File: .cursor/rules/isolation_rules/Core/file-verification.mdc
`````
---
description: Optimized file verification
globs: file-verification.mdc
alwaysApply: false
---
# OPTIMIZED FILE VERIFICATION SYSTEM

> **TL;DR:** This system efficiently verifies and creates required Graph Bank file structures using batch operations and platform-optimized commands.

## ğŸ” OPTIMIZED FILE VERIFICATION WORKFLOW

```mermaid
graph TD
    Start["Start File<br>Verification"] --> VerifyAll["Verify All<br>Required Components"]
    VerifyAll --> MissingCheck{"Missing<br>Components?"}
    MissingCheck -->|"Yes"| BatchCreate["Batch Create<br>All Missing Items"]
    MissingCheck -->|"No"| Complete["Verification<br>Complete"]
    BatchCreate --> Report["Generate<br>Verification Report"]
    Report --> Complete
```

## ğŸ“‹ OPTIMIZED DIRECTORY CREATION

```mermaid
graph TD
    Start["Directory<br>Creation"] --> DetectOS["Detect Operating<br>System"]
    DetectOS -->|"Windows"| WinCmd["Batch Create<br>Windows Command"]
    DetectOS -->|"Mac/Linux"| UnixCmd["Batch Create<br>Unix Command"]
    WinCmd & UnixCmd --> Verify["Verify<br>Creation Success"]
    Verify --> Complete["Directory Setup<br>Complete"]
```

### Platform-Specific Commands

#### Windows (PowerShell)
```powershell
# Create all directories in one command
mkdir graph-bank, docs, docs\archive -ErrorAction SilentlyContinue

# Create all required files
$files = @(".cursorrules", "tasks.md", 
           "graph-bank\projectbrief.md", 
           "graph-bank\productContext.md",
           "graph-bank\systemPatterns.md",
           "graph-bank\techContext.md",
           "graph-bank\activeContext.md",
           "graph-bank\progress.md")

foreach ($file in $files) {
    if (-not (Test-Path $file)) {
        New-Item -Path $file -ItemType File -Force
    }
}
```

#### Mac/Linux (Bash)
```bash
# Create all directories in one command
mkdir -p graph-bank docs/archive

# Create all required files
touch .cursorrules tasks.md \
      graph-bank/projectbrief.md \
      graph-bank/productContext.md \
      graph-bank/systemPatterns.md \
      graph-bank/techContext.md \
      graph-bank/activeContext.md \
      graph-bank/progress.md
```

## ğŸ“ STREAMLINED VERIFICATION PROCESS

Instead of checking each component separately, perform batch verification:

```powershell
# Windows - PowerShell
$requiredDirs = @("graph-bank", "docs", "docs\archive")
$requiredFiles = @(".cursorrules", "tasks.md")
$mbFiles = @("projectbrief.md", "productContext.md", "systemPatterns.md", 
             "techContext.md", "activeContext.md", "progress.md")

$missingDirs = $requiredDirs | Where-Object { -not (Test-Path $_) -or -not (Test-Path $_ -PathType Container) }
$missingFiles = $requiredFiles | Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }
$missingMBFiles = $mbFiles | ForEach-Object { "graph-bank\$_" } | 
                  Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }

if ($missingDirs.Count -eq 0 -and $missingFiles.Count -eq 0 -and $missingMBFiles.Count -eq 0) {
    Write-Output "âœ“ All required components verified"
} else {
    # Create all missing items at once
    if ($missingDirs.Count -gt 0) {
        $missingDirs | ForEach-Object { mkdir $_ -Force }
    }
    if ($missingFiles.Count -gt 0 -or $missingMBFiles.Count -gt 0) {
        $allMissingFiles = $missingFiles + $missingMBFiles
        $allMissingFiles | ForEach-Object { New-Item -Path $_ -ItemType File -Force }
    }
}
```

## ğŸ“ TEMPLATE INITIALIZATION

Optimize template creation with a single script:

```powershell
# Windows - PowerShell
$templates = @{
    "tasks.md" = @"
# Graph Bank: Tasks

## Current Task
[Task not yet defined]

## Status
- [ ] Task definition
- [ ] Implementation plan
- [ ] Execution
- [ ] Documentation

## Requirements
[No requirements defined yet]
"@

    "graph-bank\activeContext.md" = @"
# Graph Bank: Active Context

## Current Focus
[No active focus defined]

## Status
[No status defined]

## Latest Changes
[No changes recorded]
"@

    # Add other templates here
}

foreach ($file in $templates.Keys) {
    if (Test-Path $file) {
        Set-Content -Path $file -Value $templates[$file]
    }
}
```

## ğŸ” PERFORMANCE OPTIMIZATION BEST PRACTICES

1. **Batch Operations**: Always use batch operations instead of individual commands
   ```
   # GOOD: Create all directories at once
   mkdir graph-bank docs docs\archive
   
   # BAD: Create directories one at a time
   mkdir graph-bank
   mkdir docs
   mkdir docs\archive
   ```

2. **Pre-Check Optimization**: Check all requirements first, then create only what's missing
   ```
   # First check what's missing
   $missingItems = ...
   
   # Then create only what's missing
   if ($missingItems) { ... }
   ```

3. **Error Handling**: Include error handling in all commands
   ```
   mkdir graph-bank, docs, docs\archive -ErrorAction SilentlyContinue
   ```

4. **Platform Adaptation**: Auto-detect platform and use appropriate commands
   ```
   if ($IsWindows) {
       # Windows commands
   } else {
       # Unix commands
   }
   ```

5. **One-Pass Verification**: Verify directory structure in a single pass
   ```
   $requiredPaths = @("graph-bank", "docs", "docs\archive", ".cursorrules", "tasks.md")
   $missingPaths = $requiredPaths | Where-Object { -not (Test-Path $_) }
   ```

## ğŸ“ VERIFICATION REPORT FORMAT

```
âœ… VERIFICATION COMPLETE
- Created directories: [list]
- Created files: [list]
- All components verified

Graph Bank system ready for use.
```
`````

## File: .cursor/rules/isolation_rules/Core/graph-bank-paths.mdc
`````
---
description: Defines canonical paths for core Graph Bank files.
globs: graph-bank-paths.mdc
alwaysApply: true
---

# CORE GRAPH BANK FILE LOCATIONS

**CRITICAL:** All core Graph Bank files reside within the `graph-bank/` directory at the project root. Do NOT create or modify these files outside this directory unless explicitly instructed for archiving purposes.

* **Tasks File:** `graph-bank/tasks.md` - This file is used for active, in-progress task tracking, detailing steps, checklists, and component lists. Its content, particularly the detailed checklists, is merged into the main archive document for the task upon completion. After archival, `tasks.md` is cleared to be ready for the next task. It is an ephemeral working document during a task's lifecycle, with its persistent record captured in the task's archive file.
* **Active Context File:** `graph-bank/activeContext.md`
* **Progress File:** `graph-bank/progress.md`
* **Project Brief File:** `graph-bank/projectbrief.md`
* **Product Context File:** `graph-bank/productContext.md`
* **System Patterns File:** `graph-bank/systemPatterns.md`
* **Tech Context File:** `graph-bank/techContext.md`
* **Style Guide File:** `graph-bank/style-guide.md`
* **Creative Phase Docs:** `graph-bank/creative/creative-[feature_name].md`
* **Reflection Docs:** `graph-bank/reflection/reflection-[task_id].md`
* **Archive Directory:** `graph-bank/archive/archive-[task_id].md`

**Verification Mandate:** Before any `create_file` or `edit_file` operation on these core files, verify the path starts with `graph-bank/`. If attempting to create a new core file (e.g., `tasks.md` at the start of a project), ensure it is created at `graph-bank/tasks.md`.
`````

## File: .cursor/rules/isolation_rules/Core/mode-transition-optimization.mdc
`````
---
description: Optimized mode transition protocol
globs: "**/mode-transition*/**", "**/context-preservation*/**"
alwaysApply: false
---

# MODE TRANSITION OPTIMIZATION

> **TL;DR:** This file implements optimized mode transitions to preserve context efficiently between different phases of the Graph Bank system.

## ğŸ”„ UNIFIED CONTEXT TRANSFER PROTOCOL

```mermaid
graph TD
    Start["Mode A"] --> Create["Create Context<br>Summary Document"]
    Create --> Store["Store Critical<br>Context Data"]
    Store --> Transition["Transition<br>to Mode B"]
    Transition --> Verify["Verify Context<br>Availability"]
    Verify --> Load["Load Relevant<br>Context Data"]
    Load --> Continue["Continue in<br>Mode B"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Create fill:#ffa64d,stroke:#cc7a30,color:white
    style Store fill:#4dbb5f,stroke:#36873f,color:white
    style Transition fill:#d94dbb,stroke:#a3378a,color:white
    style Verify fill:#4dbbbb,stroke:#368787,color:white
    style Load fill:#d971ff,stroke:#a33bc2,color:white
    style Continue fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ“Š CONTEXT TRANSITION DOCUMENT

Create a standardized transition document when switching modes:

```markdown
# MODE TRANSITION: [Source Mode] â†’ [Target Mode]

## Context Summary
- Task: [Task name/description]
- Complexity: Level [1-4]
- Current Phase: [Phase name]
- Progress: [Percentage or status]

## Key Decisions
- [Decision 1]: [Brief summary]
- [Decision 2]: [Brief summary]
- [Decision 3]: [Brief summary]

## Critical Context
- [Context item 1]: [Value/status]
- [Context item 2]: [Value/status]
- [Context item 3]: [Value/status]

## Next Steps
1. [Next step 1]
2. [Next step 2]
3. [Next step 3]

## Resource Pointers
- [Resource 1]: [Location]
- [Resource 2]: [Location]
- [Resource 3]: [Location]
```

## ğŸ” MODE-SPECIFIC TRANSITION HANDLERS

### VAN â†’ PLAN Transition

```markdown
### VAN â†’ PLAN
- Context preserved: Complexity level, platform detection, file structure
- Files transferred: tasks.md (initialized), activeContext.md (initialized)
- Rule optimization: Pre-load planning rules based on complexity level
```

### PLAN â†’ CREATIVE Transition

```markdown
### PLAN â†’ CREATIVE
- Context preserved: Task requirements, component list, creative phase flags
- Files transferred: tasks.md (updated with plan), creative phase components list
- Rule optimization: Only load creative templates for identified components
```

### CREATIVE â†’ IMPLEMENT Transition

```markdown
### CREATIVE â†’ IMPLEMENT
- Context preserved: Design decisions, implementation guidelines, requirements
- Files transferred: tasks.md, design documents, implementation checklist
- Rule optimization: Pre-load implementation templates based on design decisions
```

### IMPLEMENT â†’ REFLECT Transition

```markdown
### IMPLEMENT â†’ REFLECT
- Context preserved: Implementation status, challenges encountered, decisions
- Files transferred: tasks.md, progress.md, implementation notes
- Rule optimization: Load reflection templates based on completion status
```

## ğŸ§  HIERARCHICAL RULE CACHING

Implement rule caching to avoid redundant loading:

```javascript
// Pseudocode for rule caching
const ruleCache = {
  core: {}, // Core rules shared across modes
  van: {},
  plan: {},
  creative: {},
  implement: {},
  reflect: {},
  archive: {}
};

// Check cache before loading
function loadRule(rulePath) {
  const cacheKey = getCacheKey(rulePath);
  const category = getCategoryFromPath(rulePath);
  
  if (ruleCache[category][cacheKey]) {
    return ruleCache[category][cacheKey];
  }
  
  const ruleContent = readRuleFromFile(rulePath);
  ruleCache[category][cacheKey] = ruleContent;
  
  return ruleContent;
}

// Only invalidate specific rules when needed
function invalidateRule(rulePath) {
  const cacheKey = getCacheKey(rulePath);
  const category = getCategoryFromPath(rulePath);
  
  if (ruleCache[category][cacheKey]) {
    delete ruleCache[category][cacheKey];
  }
}
```

## âš¡ DIFFERENTIAL GRAPH BANK UPDATES

```mermaid
graph TD
    Start["Graph Bank<br>Update Request"] --> Check{"File<br>Changed?"}
    Check -->|"No"| Skip["Skip Update<br>(No Changes)"]
    Check -->|"Yes"| Changed{"Specific<br>Section Changed?"}
    Changed -->|"No"| Full["Full File<br>Update"]
    Changed -->|"Yes"| Partial["Partial<br>Update Only"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Check fill:#ffa64d,stroke:#cc7a30,color:white
    style Skip fill:#4dbb5f,stroke:#36873f,color:white
    style Changed fill:#d94dbb,stroke:#a3378a,color:white
    style Full fill:#4dbbbb,stroke:#368787,color:white
    style Partial fill:#d971ff,stroke:#a33bc2,color:white
```

Implement a more efficient update mechanism:

```javascript
// Pseudocode for differential updates
function updateGraphBankFile(filePath, newContent) {
  // Read existing content
  const currentContent = readFile(filePath);
  
  // Skip if no changes
  if (currentContent === newContent) {
    return "No changes detected, update skipped";
  }
  
  // Check if we can do a partial update
  const sections = parseIntoSections(currentContent);
  const newSections = parseIntoSections(newContent);
  
  let updatedContent = currentContent;
  let updatedSections = 0;
  
  // Only update changed sections
  for (const [sectionName, sectionContent] of Object.entries(newSections)) {
    if (!sections[sectionName] || sections[sectionName] !== sectionContent) {
      updatedContent = replaceSection(updatedContent, sectionName, sectionContent);
      updatedSections++;
    }
  }
  
  // Write updated content
  writeFile(filePath, updatedContent);
  
  return `Updated ${updatedSections} section(s) in ${filePath}`;
}
```

## ğŸ”— CREATIVE TO IMPLEMENT BRIDGE

Special handling for the critical Creative â†’ Implement transition:

```markdown
## CREATIVE â†’ IMPLEMENT BRIDGE

### Design Decision Summary
Automatically generated summary of all creative phase decisions:

```json
{
  "components": [
    {
      "name": "ComponentA",
      "decision": "Approach X selected",
      "rationale": "Best performance characteristics",
      "implementation_notes": [
        "Use X library",
        "Implement caching",
        "Add error handling"
      ]
    },
    {
      "name": "ComponentB",
      "decision": "Custom solution",
      "rationale": "Unique requirements",
      "implementation_notes": [
        "Build from scratch",
        "Modular architecture",
        "Unit tests required"
      ]
    }
  ]
}
```

### Implementation Verification Checklist
Automatically generated verification checklist:

```markdown
# Implementation Readiness Checklist

- [ ] Design decisions available for all components
- [ ] Implementation notes provided for each decision
- [ ] Dependencies clearly identified
- [ ] Order of implementation determined
- [ ] Required libraries/frameworks documented
- [ ] Potential challenges identified
```

## ğŸš€ ADAPTIVE MODE LOADING

Implement progressive mode loading to optimize context:

```javascript
// Pseudocode for adaptive mode loading
function loadMode(modeName, taskComplexity) {
  // Always load core rules
  loadCoreRules();
  
  // Load complexity-appropriate rules
  loadComplexityRules(taskComplexity);
  
  // Load mode-specific essential rules
  loadModeEssentialRules(modeName);
  
  // Only load specialized rules as needed
  registerLazyLoadHandlers(modeName, taskComplexity);
}

function registerLazyLoadHandlers(modeName, taskComplexity) {
  // Register handlers to load additional rules only when needed
  if (modeName === "CREATIVE") {
    registerHandler("architecture", () => loadRule("creative-phase-architecture.mdc"));
    registerHandler("algorithm", () => loadRule("creative-phase-algorithm.mdc"));
    registerHandler("uiux", () => loadRule("creative-phase-uiux.mdc"));
  }
  
  // Similar patterns for other specialized rule types
}
```

## âœ… MODE TRANSITION EXAMPLES

### Example: PLAN â†’ CREATIVE Transition

When transitioning from PLAN to CREATIVE mode:

```markdown
# MODE TRANSITION: PLAN â†’ CREATIVE

## Context Summary
- Task: Implement user authentication system
- Complexity: Level 3
- Current Phase: Planning completed
- Progress: 35% (Planning: 100%, Creative: 0%, Implement: 0%)

## Key Decisions
- Authentication: Requires exploration of options (JWT vs Sessions)
- User Management: Will use existing database schema
- Authorization: Role-based access control selected

## Critical Context
- Components for creative phase: Authentication mechanism, Session management
- Dependencies: User database, Authorization system
- Constraints: Must support SSO, Performance requirements

## Next Steps
1. Explore authentication options (JWT, Sessions, OAuth)
2. Design session management approach
3. Document implementation guidelines

## Resource Pointers
- Planning document: tasks.md (section 3)
- Requirements: activeContext.md
- Reference architecture: docs/system-architecture.md
```

### Example: CREATIVE â†’ IMPLEMENT Transition

When transitioning from CREATIVE to IMPLEMENT mode:

```markdown
# MODE TRANSITION: CREATIVE â†’ IMPLEMENT

## Context Summary
- Task: Implement user authentication system
- Complexity: Level 3
- Current Phase: Creative completed
- Progress: 70% (Planning: 100%, Creative: 100%, Implement: 0%)

## Key Decisions
- Authentication: JWT-based approach selected
- Token Storage: Secure HttpOnly cookies with CSRF protection
- Refresh Strategy: Silent refresh with sliding expiration

## Critical Context
- Implementation order: Auth API endpoints, Middleware, Client integration
- Testing requirements: Unit tests for JWT validation, Integration tests for auth flow
- Security considerations: XSS protection, CSRF mitigation, Rate limiting

## Next Steps
1. Implement JWT generation and validation
2. Create authentication middleware
3. Build user login/logout endpoints
4. Implement client-side auth integration

## Resource Pointers
- Creative document: creative-auth-decisions.md
- API specifications: api-spec.yaml
- Security requirements: security-policy.md
```

## ğŸ”„ IMPLEMENTATION BENEFITS

This optimization provides:

1. Reduced token usage during mode transitions (~40% reduction)
2. Better context preservation between modes
3. Improved efficiency through rule caching
4. Targeted loading of only necessary rules
5. Optimized graph bank updates
6. Clear transition documents that preserve critical context
`````

## File: .cursor/rules/isolation_rules/Core/optimization-integration.mdc
`````
---
description: Integration hub for Graph Bank optimizations
globs: "**/optimization*/**", "**/integration*/**"
alwaysApply: false
---

# GRAPH BANK OPTIMIZATION INTEGRATION

> **TL;DR:** This file serves as the integration point for all Graph Bank optimizations, coordinating the various optimization components to work seamlessly together.

## ğŸ”„ OPTIMIZATION INTEGRATION FLOW

```mermaid
graph TD
    Start["Graph Bank<br>Initialization"] --> HRL["Hierarchical<br>Rule Loading"]
    HRL --> ACM["Adaptive<br>Complexity Model"]
    ACM --> DCM["Dynamic<br>Context Management"]
    DCM --> TMO["Transition<br>Optimization"]
    
    subgraph "Level-Specific Optimizations"
        L1["Level 1<br>Optimizations"]
        L2["Level 2<br>Optimizations"]
        L3["Level 3<br>Optimizations"]
        L4["Level 4<br>Optimizations"]
    end
    
    ACM --> L1 & L2 & L3 & L4
    
    L1 & L2 & L3 & L4 --> CPO["Creative Phase<br>Optimization"]
    
    CPO --> PDO["Progressive<br>Documentation"]
    TMO --> PDO
    
    PDO --> MBO["Graph Bank<br>Optimization"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style HRL fill:#ffa64d,stroke:#cc7a30,color:white
    style ACM fill:#4dbb5f,stroke:#36873f,color:white
    style DCM fill:#d94dbb,stroke:#a3378a,color:white
    style TMO fill:#4dbbbb,stroke:#368787,color:white
    style CPO fill:#e699d9,stroke:#d94dbb,color:white
    style PDO fill:#d971ff,stroke:#a33bc2,color:white
    style MBO fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ“‹ OPTIMIZATION COMPONENT REGISTRY

```javascript
// Optimization component registry pseudocode
const optimizationRegistry = {
  // Core optimizations
  hierarchicalRuleLoading: {
    file: "Core/hierarchical-rule-loading.mdc",
    dependencies: [],
    priority: 1
  },
  adaptiveComplexityModel: {
    file: "main-optimized.mdc",
    dependencies: ["hierarchicalRuleLoading"],
    priority: 2
  },
  modeTransitionOptimization: {
    file: "Core/mode-transition-optimization.mdc",
    dependencies: ["hierarchicalRuleLoading", "adaptiveComplexityModel"],
    priority: 3
  },
  
  // Level-specific optimizations
  level1Optimization: {
    file: "Level1/optimized-workflow-level1.mdc",
    dependencies: ["adaptiveComplexityModel"],
    priority: 4
  },
  
  // Feature-specific optimizations
  creativePhaseOptimization: {
    file: "Phases/CreativePhase/optimized-creative-template.mdc",
    dependencies: ["hierarchicalRuleLoading", "adaptiveComplexityModel"],
    priority: 5
  }
};
```

## ğŸ”„ OPTIMIZATION INITIALIZATION SEQUENCE

```mermaid
sequenceDiagram
    participant MB as Graph Bank
    participant Reg as Optimization Registry
    participant HRL as Hierarchical Rule Loading
    participant ACM as Adaptive Complexity
    participant TMO as Transition Optimization
    participant CPO as Creative Phase Optimization
    
    MB->>Reg: Request optimization initialization
    Reg->>Reg: Sort optimizations by priority & dependencies
    Reg->>HRL: Initialize (Priority 1)
    HRL-->>Reg: Initialization complete
    Reg->>ACM: Initialize (Priority 2)
    ACM->>HRL: Request rule loading services
    HRL-->>ACM: Provide rule loading
    ACM-->>Reg: Initialization complete
    Reg->>TMO: Initialize (Priority 3)
    TMO->>HRL: Request rule loading services
    TMO->>ACM: Request complexity model
    HRL-->>TMO: Provide rule loading
    ACM-->>TMO: Provide complexity model
    TMO-->>Reg: Initialization complete
    Reg->>CPO: Initialize (Final)
    CPO->>HRL: Request rule loading services
    CPO->>ACM: Request complexity model
    CPO->>TMO: Request transition services
    HRL-->>CPO: Provide rule loading
    ACM-->>CPO: Provide complexity model
    TMO-->>CPO: Provide transition services
    CPO-->>Reg: Initialization complete
    Reg-->>MB: All optimizations initialized
```

## ğŸ” OPTIMIZATION CONFIGURATION

```javascript
// Optimization configuration pseudocode
const optimizationConfig = {
  // Token optimization settings
  tokenOptimization: {
    enableHierarchicalLoading: true,
    enableProgressiveDocumentation: true,
    enableLazyRuleLoading: true,
    enableContextPruning: true
  },
  
  // Context preservation settings
  contextPreservation: {
    preserveDesignDecisions: true,
    preserveImplementationContext: true,
    preserveUserPreferences: true,
    contextCompressionLevel: "high" // none, low, medium, high
  },
  
  // Documentation optimization
  documentationOptimization: {
    level1DocumentationLevel: "minimal", // minimal, standard, comprehensive
    level2DocumentationLevel: "standard",
    level3DocumentationLevel: "comprehensive",
    level4DocumentationLevel: "comprehensive",
    enableProgressiveDisclosure: true,
    enableTemplateCaching: true
  }
};
```

## ğŸ“Š OPTIMIZATION MONITORING

```mermaid
graph TD
    Monitor["Optimization<br>Monitor"] --> TokenUsage["Token Usage<br>Tracking"]
    Monitor --> ContextEfficiency["Context<br>Efficiency"]
    Monitor --> RuleLoadingStats["Rule Loading<br>Statistics"]
    Monitor --> DocumentationSize["Documentation<br>Size"]
    
    TokenUsage --> Dashboard["Optimization<br>Dashboard"]
    ContextEfficiency --> Dashboard
    RuleLoadingStats --> Dashboard
    DocumentationSize --> Dashboard
    
    Dashboard --> Feedback["Optimization<br>Feedback Loop"]
    Feedback --> Config["Optimization<br>Configuration"]
    Config --> Monitor
    
    style Monitor fill:#4da6ff,stroke:#0066cc,color:white
    style Dashboard fill:#ffa64d,stroke:#cc7a30,color:white
    style Feedback fill:#4dbb5f,stroke:#36873f,color:white
    style Config fill:#d94dbb,stroke:#a3378a,color:white
```

## ğŸ“ˆ OPTIMIZATION METRICS

```markdown
# Optimization Metrics

## Token Usage
- Core Rule Loading: [X] tokens
- Mode-Specific Rules: [Y] tokens
- Creative Phase Documentation: [Z] tokens
- Overall Token Reduction: [P]%

## Context Efficiency
- Context Utilization: [Q]%
- Context Waste: [R]%
- Effective Token Capacity: [S] tokens

## Rule Loading
- Rules Loaded: [T] / [U] (Total)
- Lazy-Loaded Rules: [V]
- Cached Rules: [W]

## Documentation
- Level 1 Documentation Size: [X] tokens
- Level 2 Documentation Size: [Y] tokens
- Level 3 Documentation Size: [Z] tokens
- Level 4 Documentation Size: [AA] tokens
```

## ğŸ”„ INTEGRATION USAGE EXAMPLES

### Initializing All Optimizations

```javascript
// Pseudocode for initializing all optimizations
function initializeGraphBankOptimizations() {
  // Load optimization registry
  const registry = loadOptimizationRegistry();
  
  // Sort by priority and dependencies
  const sortedOptimizations = sortOptimizations(registry);
  
  // Initialize each optimization in order
  for (const opt of sortedOptimizations) {
    initializeOptimization(opt);
  }
  
  // Configure optimization parameters
  configureOptimizations(loadOptimizationConfig());
  
  // Start monitoring
  initializeOptimizationMonitoring();
  
  return "Graph Bank optimizations initialized";
}
```

### Using Optimized Creative Phase

```markdown
// Using the optimized creative phase with progressive documentation

// Initialize with minimal documentation
ğŸ“Œ CREATIVE PHASE START: Authentication System
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ PROBLEM
   Description: Design an authentication system for the application
   Requirements: Secure, scalable, supports SSO, easy to maintain
   Constraints: Must work with existing user database, <100ms response time

2ï¸âƒ£ OPTIONS
   Option A: JWT-based stateless auth
   Option B: Session-based auth with Redis
   Option C: OAuth2 implementation

// Progressively add detail as needed
3ï¸âƒ£ ANALYSIS
   | Criterion | JWT | Sessions | OAuth2 |
   |-----------|-----|----------|--------|
   | Security | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
   | Scalability | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
   | Complexity | â­â­ | â­â­â­ | â­â­â­â­ |
   
// Focus on decision and implementation
4ï¸âƒ£ DECISION
   Selected: Option A: JWT-based auth with refresh tokens
   Rationale: Best balance of performance and scalability
   
5ï¸âƒ£ IMPLEMENTATION NOTES
   - Use HS256 algorithm for token signing
   - Implement short-lived access tokens (15min)
   - Store token blacklist in Redis for revocation
```

## ğŸ”„ MODE TRANSITION EXAMPLE

```markdown
// Optimized mode transition from CREATIVE to IMPLEMENT

# MODE TRANSITION: CREATIVE â†’ IMPLEMENT

## Context Summary
- Task: Authentication system implementation
- Complexity: Level 3
- Decision: JWT-based auth with refresh tokens

## Key Context
- Security requirements verified
- Algorithm selection: HS256
- Token lifecycle: 15min access / 7 days refresh

## Next Steps
1. Implement JWT generation module
2. Create token validation middleware
3. Build refresh token handling

// Transition happens with preserved context
// IMPLEMENT mode continues with this context available
```

## ğŸ”„ HIERARCHICAL RULE LOADING EXAMPLE

```javascript
// Pseudocode example of hierarchical rule loading

// Initial load - only core rules
loadCoreRules();

// Determine complexity
const complexity = determineComplexity();

// Load mode-specific essential rules
loadModeEssentialRules("CREATIVE");

// Register lazy loaders for specialized rules
registerLazyLoader("architecture", () => loadRule("creative-phase-architecture.mdc"));
registerLazyLoader("algorithm", () => loadRule("creative-phase-algorithm.mdc"));
registerLazyLoader("uiux", () => loadRule("creative-phase-uiux.mdc"));

// Later, when architecture design is needed:
const architectureRule = loadSpecializedRule("architecture");
// Architecture rule is now loaded only when needed
```

These integrated optimizations work seamlessly together to provide a significantly more efficient Graph Bank system while maintaining all functionality.
`````

## File: .cursor/rules/isolation_rules/Core/platform-awareness.mdc
`````
---
description: Platform detection and command adaptation for isolation-focused Graph Bank
globs: platform-awareness.mdc
alwaysApply: false
---


# PLATFORM AWARENESS SYSTEM

> **TL;DR:** This system detects the operating system, path format, and shell environment, then adapts commands accordingly to ensure cross-platform compatibility.

## ğŸ” PLATFORM DETECTION PROCESS

```mermaid
graph TD
    Start["Start Platform<br>Detection"] --> DetectOS["Detect OS<br>Environment"]
    DetectOS --> Windows["Windows<br>Detection"]
    DetectOS --> Mac["macOS<br>Detection"]
    DetectOS --> Linux["Linux<br>Detection"]
    
    Windows & Mac & Linux --> PathCheck["Path Separator<br>Detection"]
    PathCheck --> CmdAdapt["Command<br>Adaptation"]
    CmdAdapt --> ShellCheck["Shell Type<br>Detection"]
    ShellCheck --> Complete["Platform Detection<br>Complete"]
```

## ğŸ“‹ PLATFORM DETECTION IMPLEMENTATION

For reliable platform detection:

```
## Platform Detection Results
Operating System: [Windows/macOS/Linux]
Path Separator: [\ or /]
Shell Environment: [PowerShell/Bash/Zsh/Cmd]
Command Adaptation: [Required/Not Required]

Adapting commands for [detected platform]...
```

## ğŸ” PATH FORMAT CONVERSION

When converting paths between formats:

```mermaid
sequenceDiagram
    participant Input as Path Input
    participant Detector as Format Detector
    participant Converter as Format Converter
    participant Output as Adapted Path
    
    Input->>Detector: Raw Path
    Detector->>Detector: Detect Current Format
    Detector->>Converter: Path + Current Format
    Converter->>Converter: Apply Target Format
    Converter->>Output: Platform-Specific Path
```

## ğŸ“ PLATFORM VERIFICATION CHECKLIST

```
âœ“ PLATFORM VERIFICATION
- Operating system correctly identified? [YES/NO]
- Path separator format detected? [YES/NO]
- Shell environment identified? [YES/NO]
- Command set adapted appropriately? [YES/NO]
- Path format handling configured? [YES/NO]

â†’ If all YES: Platform adaptation complete
â†’ If any NO: Run additional detection steps
```
`````

## File: .cursor/rules/isolation_rules/Level1/optimized-workflow-level1.mdc
`````
---
description: Optimized Level 1 workflow for quick bug fixes with token efficiency
globs: "**/level1*/**", "**/quick*/**", "**/bugfix*/**"
alwaysApply: false
---

# OPTIMIZED LEVEL 1 WORKFLOW

> **TL;DR:** This streamlined workflow for Level 1 tasks (quick bug fixes) optimizes for speed and token efficiency while maintaining quality.

## ğŸ”§ LEVEL 1 PROCESS FLOW

```mermaid
graph TD
    Start["START LEVEL 1<br>QUICK FIX"] --> Analyze["1ï¸âƒ£ ANALYZE<br>Understand issue"]
    Analyze --> Implement["2ï¸âƒ£ IMPLEMENT<br>Fix the issue"]
    Implement --> Verify["3ï¸âƒ£ VERIFY<br>Test the fix"]
    Verify --> Document["4ï¸âƒ£ DOCUMENT<br>Record solution"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Analyze fill:#ffa64d,stroke:#cc7a30,color:white
    style Implement fill:#4dbb5f,stroke:#36873f,color:white
    style Verify fill:#d94dbb,stroke:#a3378a,color:white
    style Document fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ“ CONSOLIDATED DOCUMENTATION

Level 1 tasks use a single-file approach to minimize context switching:

```markdown
# QUICK FIX: [Issue Name]

## Issue Summary
- Type: [Bug/Hotfix/Quick Enhancement]
- Priority: [Low/Medium/High/Critical]
- Reported by: [Name/System]
- Affected area: [Component/Feature]

## Analysis
- Root cause: [Brief description]
- Affected files: [List of files]
- Impact: [Scope of impact]

## Solution
- Approach: [Brief description]
- Changes made: [List of changes]
- Commands executed: [Key commands]

## Verification
- Testing: [How the fix was tested]
- Results: [Test results]
- Additional checks: [Any other verification]

## Status
- [x] Fix implemented
- [x] Tests passed
- [x] Documentation updated
```

## ğŸ”„ GRAPH BANK UPDATE

Level 1 tasks use a simplified Graph Bank update with minimal overhead:

```markdown
## tasks.md Update (Level 1)

### Task: [Task Name]
- Status: Complete
- Implementation: [One-line summary]
- Link to fix: [File/line reference]
```

## âš¡ TOKEN-OPTIMIZED TEMPLATE

For maximum efficiency, Level 1 tasks can use this ultra-compact template:

```markdown
## ğŸ”§ FIX: [Issue]
ğŸ“Œ Problem: [Brief description]
ğŸ” Cause: [Root cause]
ğŸ› ï¸ Solution: [Implemented fix]
âœ… Tested: [Verification method]
```

## ğŸ”„ AUTO-DOCUMENTATION HELPERS

Use these helpers to automatically generate documentation:

```javascript
function generateLevel1Documentation(issue, rootCause, solution, verification) {
  return `## ğŸ”§ FIX: ${issue}
ğŸ“Œ Problem: ${issue}
ğŸ” Cause: ${rootCause}
ğŸ› ï¸ Solution: ${solution}
âœ… Tested: ${verification}`;
}
```

## ğŸ“Š QUICK TEMPLATES FOR COMMON ISSUES

### Performance Fix
```markdown
## ğŸ”§ FIX: Performance issue in [component]
ğŸ“Œ Problem: Slow response times in [component]
ğŸ” Cause: Inefficient query/algorithm
ğŸ› ï¸ Solution: Optimized [specific optimization]
âœ… Tested: Response time improved from [X]ms to [Y]ms
```

### Bug Fix
```markdown
## ğŸ”§ FIX: Bug in [component]
ğŸ“Œ Problem: [Specific behavior] not working correctly
ğŸ” Cause: [Root cause analysis]
ğŸ› ï¸ Solution: Fixed by [implementation details]
âœ… Tested: Verified with [test approach]
```

### Quick Enhancement
```markdown
## ğŸ”§ ENHANCEMENT: [Feature]
ğŸ“Œ Request: Add [specific capability]
ğŸ› ï¸ Implementation: Added by [implementation details]
âœ… Tested: Verified with [test approach]
```

## âœ… STREAMLINED VERIFICATION

Level 1 tasks use a minimal verification process:

```markdown
VERIFICATION:
[x] Fix implemented and tested
[x] No regressions introduced
[x] Documentation updated
```

## ğŸš€ CONSOLIDATED GRAPH BANK UPDATE

Optimize Graph Bank updates for Level 1 tasks by using a single operation:

```javascript
// Pseudocode for optimized Level 1 Graph Bank update
function updateLevel1GraphBank(taskInfo) {
  // Read current tasks.md
  const tasksContent = readFile("tasks.md");
  
  // Create minimal update
  const updateBlock = `
### Task: ${taskInfo.name}
- Status: Complete
- Implementation: ${taskInfo.solution}
- Link to fix: ${taskInfo.fileReference}
`;
  
  // Add update to tasks.md
  const updatedContent = appendToSection(tasksContent, "Completed Tasks", updateBlock);
  
  // Write in single operation
  writeFile("tasks.md", updatedContent);
  
  return "Graph Bank updated";
}
```

## ğŸ”„ OPTIMIZED LEVEL 1 WORKFLOW EXAMPLE

```markdown
## ğŸ”§ FIX: Login button not working on mobile devices

ğŸ“Œ Problem: 
Users unable to log in on mobile devices, button appears but doesn't trigger authentication

ğŸ” Cause:
Event listener using desktop-specific event (mousedown instead of handling touch events)

ğŸ› ï¸ Solution:
Updated event handling to use event delegation and support both mouse and touch events:
```js
// Before: 
loginButton.addEventListener('mousedown', handleLogin);

// After:
loginButton.addEventListener('mousedown', handleLogin);
loginButton.addEventListener('touchstart', handleLogin);
```

âœ… Tested:
- Verified on iOS Safari and Android Chrome 
- Login now works on all tested mobile devices
- No regression on desktop browsers
```

## âš¡ TOKEN EFFICIENCY BENEFITS

This optimized Level 1 workflow provides:

1. Reduced documentation overhead (70% reduction)
2. Consolidated Graph Bank updates (single operation vs. multiple)
3. Focused verification process (essential checks only)
4. Template-based approach for common scenarios
5. Streamlined workflow with fewer steps

The updated approach maintains all critical information while significantly reducing token usage.
`````

## File: .cursor/rules/isolation_rules/Level1/quick-documentation.mdc
`````
---
description: Quick documentation approach for Level 1 Quick Bug Fix tasks
globs: "**/level1/**", "**/documentation/**"
alwaysApply: false
---

# QUICK DOCUMENTATION FOR LEVEL 1 TASKS

> **TL;DR:** This document outlines a quick documentation approach for Level 1 (Quick Bug Fix) tasks, ensuring that essential information is captured with minimal overhead.

## ğŸ” QUICK DOCUMENTATION OVERVIEW

```mermaid
graph TD
    FixComplete["Bug Fix<br>Complete"] --> Document["Document<br>Solution"]
    Document --> UpdateTasks["Update<br>tasks.md"]
    UpdateTasks --> MinimalUpdates["Make Minimal<br>Graph Bank Updates"]
    MinimalUpdates --> CrossReference["Create Simple<br>Cross-References"]
    CrossReference --> Complete["Documentation<br>Complete"]
```

Level 1 tasks require efficient documentation that captures essential information without unnecessary detail. This approach ensures that critical knowledge is preserved while maintaining speed and efficiency.

## ğŸ“‹ DOCUMENTATION PRINCIPLES

1. **Conciseness**: Keep documentation brief but complete
2. **Focus**: Document only what's necessary to understand the fix
3. **Context**: Provide sufficient context to understand the issue
4. **Solution**: Clearly describe what was changed and why
5. **Findability**: Ensure the fix can be easily found later

## ğŸ“‹ QUICK FIX DOCUMENTATION TEMPLATE

```markdown
# Quick Fix: [Issue Title]

## Issue
[Brief description of the problem - 1-2 sentences]

## Root Cause
[Concise description of what caused the issue - 1-2 sentences]

## Solution
[Brief description of the fix implemented - 2-3 sentences]

## Files Changed
- [File path 1]
- [File path 2]

## Verification
[How the fix was tested/verified - 1-2 sentences]

## Notes
[Any additional information that might be helpful - optional]
```

## ğŸ“‹ TASKS.MD UPDATES

For Level 1 tasks, update tasks.md with this format:

```markdown
## Completed Bug Fixes
- [X] [Level 1] Fixed: [Issue title] (Completed: YYYY-MM-DD)
  - Issue: [One-line description]
  - Root Cause: [One-line description]
  - Solution: [One-line description]
  - Files: [File paths]
```

For in-progress tasks:

```markdown
## Bug Fixes in Progress
- [ ] [Level 1] Fix: [Issue title] (Est: XX mins)
  - Issue: [One-line description]
  - Location: [Component/file]
```

## ğŸ“‹ GRAPH BANK UPDATES

For Level 1 tasks, make these minimal Graph Bank updates:

1. **tasks.md**:
   - Update with fix details as shown above
   - Mark task as complete

2. **activeContext.md** (only if relevant):
   ```markdown
   ## Recent Fixes
   - [YYYY-MM-DD] Fixed [issue] in [component/file]. [One-line description of fix]
   ```

3. **progress.md** (only if significant):
   ```markdown
   ## Bug Fixes
   - [YYYY-MM-DD] Fixed [issue] in [component/file].
   ```

Other Graph Bank files typically do not need updates for Level 1 tasks unless the fix reveals important system information.

## ğŸ“‹ COMMON BUG CATEGORIES

Categorize bugs to improve documentation consistency:

1. **Logic Error**:
   - Example: "Fixed incorrect conditional logic in user validation"

2. **UI/Display Issue**:
   - Example: "Fixed misaligned button in mobile view"

3. **Performance Issue**:
   - Example: "Fixed slow loading of user profile data"

4. **Data Handling Error**:
   - Example: "Fixed incorrect parsing of date format"

5. **Configuration Issue**:
   - Example: "Fixed incorrect environment variable setting"

## ğŸ“‹ QUICK DOCUMENTATION PROCESS

Follow these steps for efficient documentation:

1. **Immediately After Fix**:
   - Document while the fix is fresh in your mind
   - Focus on what, why, and how
   - Be specific about changes made

2. **Update Task Tracking**:
   - Update tasks.md with fix details
   - Use consistent format for easy reference

3. **Minimal Cross-References**:
   - Create only essential cross-references
   - Ensure fix can be found in the future

4. **Check Completeness**:
   - Verify all essential information is captured
   - Ensure another developer could understand the fix

## ğŸ“‹ EXAMPLES: GOOD VS. INSUFFICIENT DOCUMENTATION

### âŒ Insufficient Documentation

```markdown
Fixed the login bug.
```

### âœ… Good Documentation

```markdown
# Quick Fix: User Login Failure with Special Characters

## Issue
Users with special characters in email addresses (e.g., +, %) couldn't log in.

## Root Cause
The email validation regex was incorrectly escaping special characters.

## Solution
Updated the email validation regex in AuthValidator.js to properly handle special characters according to RFC 5322.

## Files Changed
- src/utils/AuthValidator.js

## Verification
Tested login with various special characters in email addresses (test+user@example.com, user%123@example.com).
```

## ğŸ“‹ DOCUMENTATION VERIFICATION CHECKLIST

```
âœ“ DOCUMENTATION VERIFICATION
- Issue clearly described? [YES/NO]
- Root cause identified? [YES/NO]
- Solution explained? [YES/NO]
- Files changed listed? [YES/NO]
- Verification method described? [YES/NO]
- tasks.md updated? [YES/NO]
- Graph Bank minimally updated? [YES/NO]

â†’ If all YES: Documentation complete
â†’ If any NO: Complete missing information
```

## ğŸ“‹ MINIMAL MODE DOCUMENTATION

For minimal mode, use this ultra-compact format:

```
âœ“ FIX: [Issue title]
âœ“ CAUSE: [One-line root cause]
âœ“ SOLUTION: [One-line fix description]
âœ“ FILES: [File paths]
âœ“ VERIFIED: [How verified]
```

## ğŸ”„ DOCUMENTATION INTEGRATION

Quick documentation integrates with other systems:

```mermaid
graph TD
    QuickDoc["Quick Fix<br>Documentation"] --> TasksMD["tasks.md<br>Update"]
    QuickDoc --> FixDetails["Fix Details<br>Documentation"]
    
    TasksMD --> Tracking["Task<br>Tracking"]
    FixDetails --> Knowledge["Knowledge<br>Preservation"]
    
    Tracking & Knowledge --> Future["Future<br>Reference"]
```

## ğŸš¨ DOCUMENTATION EFFICIENCY PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Document ONLY what's needed to understand the fix.  â”‚
â”‚ Focus on ESSENTIAL information that would help      â”‚
â”‚ someone who encounters the same issue in the future.â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that Level 1 tasks are documented efficiently without unnecessary overhead while preserving critical knowledge.
`````

## File: .cursor/rules/isolation_rules/Level1/workflow-level1.mdc
`````
---
description: Streamlined workflow for Level 1 Quick Bug Fix tasks
globs: "**/level1/**", "**/workflow/**"
alwaysApply: false
---
# STREAMLINED WORKFLOW FOR LEVEL 1 TASKS

> **TL;DR:** This document outlines a streamlined workflow for Level 1 (Quick Bug Fix) tasks, focusing on efficient problem resolution with minimal overhead while maintaining adequate documentation.

## ğŸ” LEVEL 1 WORKFLOW OVERVIEW

```mermaid
graph LR
    Init["1. INITIALIZATION"] --> Impl["2. IMPLEMENTATION"]
    Impl --> Doc["3. DOCUMENTATION"]
    
    %% Document connections for each phase
    Init -.-> InitDocs["Quick setup<br>Issue understanding"]
    Impl -.-> ImplDocs["Focused fix<br>Verify resolution"]
    Doc -.-> DocDocs["Document solution<br>Update tracking"]
```

## ğŸ“‹ WORKFLOW PHASES

### Phase 1: INITIALIZATION

```mermaid
graph TD
    Start["Start Level 1 Task"] --> Identify["Identify<br>Issue"]
    Identify --> Understand["Understand<br>Problem"]
    Understand --> Setup["Quick<br>Environment Setup"]
    Setup --> TaskEntry["Create Quick<br>Task Entry"]
    TaskEntry --> InitComplete["Initialization<br>Complete"]
```

**Steps:**
1. Identify the specific issue to fix
2. Understand the problem and its impact
3. Set up environment for quick fix
4. Create minimal task entry in tasks.md

**Milestone Checkpoint:**
```
âœ“ INITIALIZATION CHECKPOINT
- Issue clearly identified? [YES/NO]
- Problem understood? [YES/NO]
- Environment set up? [YES/NO]
- Task entry created? [YES/NO]

â†’ If all YES: Proceed to Implementation
â†’ If any NO: Complete initialization steps
```

### Phase 2: IMPLEMENTATION

```mermaid
graph TD
    Start["Begin<br>Implementation"] --> Locate["Locate<br>Issue Source"]
    Locate --> Develop["Develop<br>Fix"]
    Develop --> Test["Test<br>Solution"]
    Test --> Verify["Verify<br>Resolution"]
    Verify --> ImplComplete["Implementation<br>Complete"]
```

**Steps:**
1. Locate the source of the issue
2. Develop a targeted fix
3. Test the solution thoroughly
4. Verify that the issue is resolved

**Milestone Checkpoint:**
```
âœ“ IMPLEMENTATION CHECKPOINT
- Issue source located? [YES/NO]
- Fix developed? [YES/NO]
- Solution tested? [YES/NO]
- Resolution verified? [YES/NO]

â†’ If all YES: Proceed to Documentation
â†’ If any NO: Complete implementation steps
```

### Phase 3: DOCUMENTATION

```mermaid
graph TD
    Start["Begin<br>Documentation"] --> Update["Update<br>tasks.md"]
    Update --> Solution["Document<br>Solution"]
    Solution --> References["Create Minimal<br>Cross-References"]
    References --> NotifyStakeholders["Notify<br>Stakeholders"]
    NotifyStakeholders --> DocComplete["Documentation<br>Complete"]
```

**Steps:**
1. Update tasks.md with fix details
2. Document the solution concisely
3. Create minimal cross-references
4. Notify stakeholders as needed

**Milestone Checkpoint:**
```
âœ“ DOCUMENTATION CHECKPOINT
- tasks.md updated? [YES/NO]
- Solution documented? [YES/NO]
- Cross-references created? [YES/NO]
- Stakeholders notified? [YES/NO]

â†’ If all YES: Task Complete
â†’ If any NO: Complete documentation steps
```

## ğŸ“‹ TASK STRUCTURE IN TASKS.MD

For Level 1 tasks, use this minimal structure:

```markdown
## Bug Fixes in Progress
- [ ] [Level 1] Fix: [Bug description] (Est: XX mins)

## Completed Bug Fixes
- [X] [Level 1] Fixed: [Bug description] (Completed: YYYY-MM-DD)
  - Issue: [Brief issue description]
  - Solution: [Brief solution description]
  - Files changed: [File paths]
```

## ğŸ“‹ GRAPH BANK UPDATES

For Level 1 tasks, make minimal Graph Bank updates:

1. **tasks.md**: Update with fix details
2. **activeContext.md**: Brief mention of fix if relevant
3. **progress.md**: Add to list of completed fixes

## ğŸ“‹ WORKFLOW VERIFICATION CHECKLIST

```
âœ“ FINAL WORKFLOW VERIFICATION
- Issue identified and understood? [YES/NO]
- Fix implemented and verified? [YES/NO]
- tasks.md updated? [YES/NO]
- Solution documented? [YES/NO]
- Graph Bank minimally updated? [YES/NO]

â†’ If all YES: Level 1 Task Successfully Completed
â†’ If any NO: Address outstanding items
```

## ğŸ“‹ TASK ESCALATION

If during the Level 1 process you discover the task is more complex:

```
âš ï¸ TASK ESCALATION NEEDED
Current Level: Level 1
Recommended Level: Level [2/3/4]
Reason: [Brief explanation]

Would you like me to escalate this task to Level [2/3/4]?
```

Escalation indicators:
1. Fix requires changes to multiple components
2. Solution requires design decisions
3. Testing reveals broader issues
4. Fix impacts core functionality

## ğŸ”„ INTEGRATION WITH GRAPH BANK

```mermaid
graph TD
    Workflow["Level 1<br>Workflow"] --> TM["Update<br>tasks.md"]
    Workflow --> AC["Minimal Update<br>activeContext.md"]
    Workflow --> PM["Brief Update<br>progress.md"]
    
    TM & AC & PM --> MB["Graph Bank<br>Integration"]
    MB --> NextTask["Transition to<br>Next Task"]
```

## ğŸš¨ EFFICIENCY PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 1 workflow prioritizes SPEED and EFFICIENCY.  â”‚
â”‚ Minimize process overhead while ensuring adequate   â”‚
â”‚ documentation of the solution.                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level2/archive-basic.mdc
`````
---
description: Basic archiving approach for Level 2 Simple Enhancement tasks
globs: "**/level2/**", "**/archive/**", "**/completion/**"
alwaysApply: false
---

# BASIC ARCHIVING FOR LEVEL 2 TASKS

> **TL;DR:** This document outlines a basic archiving approach for Level 2 (Simple Enhancement) tasks, ensuring that completed work is properly documented and knowledge is preserved with minimal overhead.

## ğŸ” ARCHIVING OVERVIEW

Even for Level 2 tasks, proper archiving ensures that completed work is documented and knowledge is preserved. This basic archiving approach provides sufficient structure while maintaining efficiency.

## ğŸ“‹ ARCHIVING PRINCIPLES

1. **Completion**: Clearly document what was completed
2. **Context**: Preserve the context of the enhancement
3. **Knowledge**: Capture key insights and lessons
4. **Findability**: Make archived information easy to find
5. **References**: Create cross-references to related work

## ğŸ“‹ BASIC ARCHIVE STRUCTURE

```markdown
# Enhancement Archive: [Feature Name]

## Summary
[Brief summary of the enhancement]

## Date Completed
YYYY-MM-DD

## Key Files Modified
- [File path 1]
- [File path 2]
- [File path 3]

## Requirements Addressed
- [Requirement 1]
- [Requirement 2]
- [Requirement 3]

## Implementation Details
[Brief description of how the enhancement was implemented]

## Testing Performed
- [Test 1]
- [Test 2]
- [Test 3]

## Lessons Learned
- [Lesson 1]
- [Lesson 2]
- [Lesson 3]

## Related Work
- [Link to related task/enhancement 1]
- [Link to related task/enhancement 2]

## Notes
[Any additional information or context]
```

## ğŸ“‹ ARCHIVE LOCATION

Store archives in an organized structure:

```
docs/
â””â”€â”€ archive/
    â””â”€â”€ enhancements/
        â””â”€â”€ YYYY-MM/
            â”œâ”€â”€ feature-name-1.md
            â””â”€â”€ feature-name-2.md
```

## ğŸ“‹ ARCHIVING PROCESS

Follow these steps to archive a Level 2 task:

1. **Prepare Archive Content**:
   - Gather all relevant information
   - Fill in the archive template
   - Include all key implementation details

2. **Cross-Reference Creation**:
   - Update tasks.md with link to archive
   - Add reference in progress.md
   - Update activeContext.md with next focus

3. **File Creation and Storage**:
   - Create appropriate directory if needed
   - Save archive file with descriptive name
   - Ensure file follows naming convention

4. **Final Verification**:
   - Check archive for completeness
   - Verify all cross-references
   - Ensure all links are working

## ğŸ“‹ CROSS-REFERENCE FORMAT

When creating cross-references:

1. **In tasks.md**:
   ```markdown
   ## Completed Enhancements
   - [X] [Feature Name] (YYYY-MM-DD) - [Archive Link](../docs/archive/enhancements/YYYY-MM/feature-name.md)
   ```

2. **In progress.md**:
   ```markdown
   ## Completed Milestones
   - [Feature Name] enhancement completed on YYYY-MM-DD. See [archive entry](../docs/archive/enhancements/YYYY-MM/feature-name.md).
   ```

3. **In activeContext.md**:
   ```markdown
   ## Recently Completed
   - [Feature Name] enhancement is now complete. Archive: [link](../docs/archive/enhancements/YYYY-MM/feature-name.md)
   
   ## Current Focus
   - Moving to [Next Task Name]
   ```

## ğŸ“‹ ARCHIVING VERIFICATION CHECKLIST

```
âœ“ ARCHIVE VERIFICATION
- Archive content complete? [YES/NO]
- Archive properly stored? [YES/NO]
- Cross-references created? [YES/NO]
- tasks.md updated? [YES/NO]
- progress.md updated? [YES/NO]
- activeContext.md updated? [YES/NO]

â†’ If all YES: Archiving complete
â†’ If any NO: Complete archiving process
```

## ğŸ“‹ MINIMAL MODE ARCHIVING

For minimal mode, use this format:

```
âœ“ ARCHIVE: [Feature Name]
âœ“ DATE: YYYY-MM-DD
âœ“ FILES: [Key files changed]
âœ“ SUMMARY: [One-sentence summary]
âœ“ LESSONS: [Key takeaway]
âœ“ REFS: [tasks.md, progress.md, activeContext.md]
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

Archiving integrates with Graph Bank:

```mermaid
graph TD
    Archive["Enhancement<br>Archive"] --> TasksUpdate["Update<br>tasks.md"]
    Archive --> ProgressUpdate["Update<br>progress.md"]
    Archive --> ContextUpdate["Update<br>activeContext.md"]
    
    TasksUpdate & ProgressUpdate & ContextUpdate --> CrossLinks["Create<br>Cross-Links"]
    CrossLinks --> Verify["Verify<br>References"]
```

## ğŸš¨ KNOWLEDGE PRESERVATION PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Archive files are a VALUABLE KNOWLEDGE RESOURCE.    â”‚
â”‚ Take care to preserve insights and lessons that     â”‚
â”‚ will benefit future work.                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that knowledge is preserved and can be referenced in the future.
`````

## File: .cursor/rules/isolation_rules/Level2/reflection-basic.mdc
`````
---
description: Basic reflection format for Level 2 Simple Enhancement tasks
globs: "**/level2/**", "**/reflection/**"
alwaysApply: false
---

# BASIC REFLECTION FOR LEVEL 2 TASKS

> **TL;DR:** This document outlines a basic reflection approach for Level 2 (Simple Enhancement) tasks, ensuring that key insights and lessons are captured without unnecessary overhead.

## ğŸ” REFLECTION OVERVIEW

Reflection is essential for improving future work, even for simpler Level 2 enhancements. This basic reflection approach focuses on key outcomes, challenges, and lessons learned while maintaining efficiency.

## ğŸ“‹ REFLECTION PRINCIPLES

1. **Honesty**: Accurately represent successes and challenges
2. **Specificity**: Include concrete examples and observations
3. **Insight**: Go beyond surface observations to derive useful insights
4. **Improvement**: Focus on actionable takeaways for future work
5. **Efficiency**: Keep reflection concise and focused on key learnings

## ğŸ“‹ BASIC REFLECTION STRUCTURE

```markdown
# Level 2 Enhancement Reflection: [Feature Name]

## Enhancement Summary
[Brief one-paragraph summary of the enhancement]

## What Went Well
- [Specific success point 1]
- [Specific success point 2]
- [Specific success point 3]

## Challenges Encountered
- [Specific challenge 1]
- [Specific challenge 2]
- [Specific challenge 3]

## Solutions Applied
- [Solution to challenge 1]
- [Solution to challenge 2]
- [Solution to challenge 3]

## Key Technical Insights
- [Technical insight 1]
- [Technical insight 2]
- [Technical insight 3]

## Process Insights
- [Process insight 1]
- [Process insight 2]
- [Process insight 3]

## Action Items for Future Work
- [Specific action item 1]
- [Specific action item 2]
- [Specific action item 3]

## Time Estimation Accuracy
- Estimated time: [X hours/days]
- Actual time: [Y hours/days]
- Variance: [Z%]
- Reason for variance: [Brief explanation]
```

## ğŸ“‹ REFLECTION QUALITY

High-quality reflections for Level 2 tasks should:

1. **Provide specific examples** rather than vague statements
2. **Identify concrete takeaways** not general observations
3. **Connect challenges to solutions** with clear reasoning
4. **Analyze estimation accuracy** to improve future planning
5. **Generate actionable improvements** for future work

## ğŸ“‹ REFLECTION PROCESS

Follow these steps for effective Level 2 task reflection:

1. **Schedule Reflection**:
   - Allocate dedicated time for reflection
   - Complete reflection within 24 hours of task completion

2. **Gather Information**:
   - Review the original task requirements
   - Examine implementation details
   - Consider challenges encountered
   - Review time tracking data

3. **Complete Template**:
   - Fill in all sections of the reflection template
   - Include specific, concrete examples
   - Be honest about challenges

4. **Extract Insights**:
   - Identify patterns in challenges
   - Connect challenges to potential future improvements
   - Consider process improvements

5. **Document Action Items**:
   - Create specific, actionable improvements
   - Link these to future tasks where applicable

6. **Store Reflection**:
   - Save reflection with the task archive
   - Add cross-references to relevant documents

## ğŸ“‹ EXAMPLES: VAGUE VS. SPECIFIC ENTRIES

### âŒ Vague Entries (Insufficient)

- "The implementation went well."
- "We had some challenges with the code."
- "The feature works as expected."

### âœ… Specific Entries (Sufficient)

- "The modular approach allowed for easy integration with the existing codebase, specifically the clean separation between the UI layer and data processing logic."
- "Challenge: The state management became complex when handling multiple user interactions. Solution: Implemented a more structured reducer pattern with clear actions and state transitions."
- "Action Item: Create a reusable component for file selection that handles all the edge cases we encountered in this implementation."

## ğŸ“‹ REFLECTION VERIFICATION CHECKLIST

```
âœ“ REFLECTION VERIFICATION
- All template sections completed? [YES/NO]
- Specific examples provided? [YES/NO]
- Challenges honestly addressed? [YES/NO]
- Concrete solutions documented? [YES/NO]
- Actionable insights generated? [YES/NO]
- Time estimation analyzed? [YES/NO]

â†’ If all YES: Reflection complete
â†’ If any NO: Improve reflection quality
```

## ğŸ“‹ MINIMAL MODE REFLECTION

For minimal mode, use this format:

```
âœ“ REFLECTION: [Feature Name]
âœ“ WENT WELL: [Key success]
âœ“ CHALLENGE: [Key challenge]
âœ“ SOLUTION: [Key solution]
âœ“ INSIGHT: [Most important takeaway]
âœ“ ACTION: [Top priority action item]
âœ“ TIME: Est [X] vs. Actual [Y] ([Z%] variance)
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

Reflection integrates with Graph Bank:

```mermaid
graph TD
    Reflection["Enhancement<br>Reflection"] --> Archive["Add to<br>Archive"]
    Reflection --> ProgressUpdate["Update<br>progress.md"]
    Reflection --> ActionItems["Document<br>Action Items"]
    
    ActionItems --> Tasks["Add to<br>tasks.md"]
    Archive & ProgressUpdate & Tasks --> CrossLinks["Create<br>Cross-Links"]
```

## ğŸš¨ CONTINUOUS IMPROVEMENT PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Every reflection should produce at least ONE        â”‚
â”‚ actionable improvement for future work.             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that reflection directly contributes to ongoing improvement of both the product and the process.
`````

## File: .cursor/rules/isolation_rules/Level2/task-tracking-basic.mdc
`````
---
description: Basic task tracking for Level 2 Simple Enhancement tasks
globs: "**/level2/**", "**/tracking/**", "**/task/**"
alwaysApply: false
---

# BASIC TASK TRACKING FOR LEVEL 2

> **TL;DR:** This document outlines a streamlined task tracking approach for Level 2 (Simple Enhancement) tasks. It provides a balanced framework for managing task progress with minimal overhead.

## ğŸ” TASK TRACKING OVERVIEW

Level 2 tasks require a more structured tracking approach than Level 1, but don't need the comprehensive tracking of higher-level tasks. This basic tracking system provides sufficient structure while maintaining efficiency.

## ğŸ“‹ TASK TRACKING PRINCIPLES

1. **Clarity**: Tasks should be clearly defined
2. **Visibility**: Progress should be visible at a glance
3. **Structure**: Break work into logical subtasks
4. **Updates**: Keep progress regularly updated
5. **Completion**: Clearly mark when tasks are done

## ğŸ“‹ TASK STRUCTURE FOR LEVEL 2

```markdown
## [Feature Name] Enhancement

**Status**: [Not Started/In Progress/Complete]
**Priority**: [High/Medium/Low]
**Estimated Effort**: [Small/Medium/Large]

### Description
[Brief description of the enhancement]

### Requirements
- [Requirement 1]
- [Requirement 2]
- [Requirement 3]

### Subtasks
- [ ] [Subtask 1]
- [ ] [Subtask 2]
- [ ] [Subtask 3]

### Dependencies
- [Dependency 1]
- [Dependency 2]

### Notes
[Any additional information or context]
```

## ğŸ“‹ TASKS.MD ORGANIZATION

Organize tasks.md with these sections for Level 2 tasks:

```markdown
# Tasks

## Active Enhancements
- [Enhancement 1] - [Status]
- [Enhancement 2] - [Status]

## Enhancement Details
### [Enhancement 1]
[Task structure as above]

### [Enhancement 2]
[Task structure as above]

## Completed Enhancements
- [X] [Completed Enhancement 1] (YYYY-MM-DD)
- [X] [Completed Enhancement 2] (YYYY-MM-DD)
```

## ğŸ“‹ UPDATING TASK STATUS

Update tasks using this process:

1. **Starting a Task**:
   - Update Status to "In Progress"
   - Add start date to Notes

2. **Progress Updates**:
   - Check off subtasks as completed
   - Add brief notes about progress
   - Update any changed requirements

3. **Completing a Task**:
   - Update Status to "Complete"
   - Check off all subtasks
   - Move to Completed Enhancements
   - Add completion date

## ğŸ“‹ SUBTASK MANAGEMENT

For Level 2 tasks, subtasks should:

1. Be actionable and specific
2. Represent approximately 30-60 minutes of work
3. Follow a logical sequence
4. Be updated as soon as completed
5. Include verification steps

Example of well-structured subtasks:
```markdown
### Subtasks
- [ ] Review existing implementation of related features
- [ ] Create draft UI design for new button
- [ ] Add HTML structure for new component
- [ ] Implement button functionality in JavaScript
- [ ] Add appropriate styling in CSS
- [ ] Add event handling
- [ ] Test on desktop browsers
- [ ] Test on mobile browsers
- [ ] Update user documentation
```

## ğŸ“‹ PROGRESS VISUALIZATION

Use progress indicators to show status:

```markdown
### Progress
[###-------] 30% Complete
```

For subtasks:
```markdown
### Subtasks (3/10 Complete)
- [X] Subtask 1
- [X] Subtask 2
- [X] Subtask 3
- [ ] Subtask 4
- [ ] Subtask 5
```

## ğŸ“‹ TRACKING VERIFICATION CHECKLIST

```
âœ“ TASK TRACKING VERIFICATION
- Task clearly defined? [YES/NO]
- Requirements listed? [YES/NO]
- Subtasks created? [YES/NO]
- Dependencies identified? [YES/NO]
- Status up-to-date? [YES/NO]

â†’ If all YES: Task tracking is adequate
â†’ If any NO: Update task tracking
```

## ğŸ“‹ MINIMAL MODE TRACKING

For minimal mode, use this format:

```
âœ“ TASK: [Enhancement name]
âœ“ STATUS: [In Progress/Complete]
âœ“ SUBTASKS: [X/Y Complete]
âœ“ NEXT: [Next action]
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

Task tracking integrates with Graph Bank:

```mermaid
graph TD
    TasksFile["tasks.md"] --> Active["activeContext.md"]
    TasksFile --> Progress["progress.md"]
    
    Active -->|"Current focus"| TasksFile
    Progress -->|"Completion status"| TasksFile
```

## ğŸš¨ TASKS.MD PRIMACY PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tasks.md is the SINGLE SOURCE OF TRUTH for ALL      â”‚
â”‚ task tracking. ALL task updates MUST be reflected   â”‚
â”‚ in tasks.md IMMEDIATELY.                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures everyone has visibility into current task status at all times.
`````

## File: .cursor/rules/isolation_rules/Level2/workflow-level2.mdc
`````
---
description: Basic workflow for Level 2 Simple Enhancement tasks
globs: "**/level2/**", "**/workflow/**"
alwaysApply: false
---
# WORKFLOW FOR LEVEL 2 TASKS

> **TL;DR:** This document outlines a structured yet efficient workflow for Level 2 (Simple Enhancement) tasks, including 6 key phases with milestone checkpoints and quality verification.

## ğŸ” LEVEL 2 WORKFLOW OVERVIEW

```mermaid
graph LR
    Init["1. INITIALIZATION"] --> Doc["2. DOCUMENTATION<br>SETUP"]
    Doc --> Plan["3. TASK<br>PLANNING"]
    Plan --> Impl["4. IMPLEMENTATION"]
    Impl --> Reflect["5. REFLECTION"]
    Reflect --> Archive["6. ARCHIVING"]
    
    %% Document connections for each phase
    Init -.-> InitDocs["INITIALIZATION"]
    Doc -.-> DocDocs["DOCUMENTATION"]
    Plan -.-> PlanDocs["PLANNING"]
    Impl -.-> ImplDocs["IMPLEMENTATION"]
    Reflect -.-> ReflectDocs["REFLECTION"]
    Archive -.-> ArchiveDocs["ARCHIVING"]
```

Level 2 tasks involve simple enhancements that require a structured approach with moderate planning and documentation. This workflow provides the right balance of process and efficiency.

## ğŸ“‹ WORKFLOW PHASES

### Phase 1: INITIALIZATION

```mermaid
graph TD
    Start["Start Level 2 Task"] --> Platform{"Detect<br>Platform"}
    Platform --> FileCheck["Critical File<br>Verification"]
    FileCheck --> LoadStructure["Load Graph<br>Bank Structure"]
    LoadStructure --> TaskCreation["Create Task<br>in tasks.md"]
    TaskCreation --> SetupComplete["Initialization<br>Complete"]
```

**Steps:**
1. Platform detection
2. Critical file verification
3. Graph Bank structure loading
4. Task creation in tasks.md
5. Initial task scope definition

**Milestone Checkpoint:**
```
âœ“ INITIALIZATION CHECKPOINT
- Platform detected and configured? [YES/NO]
- Critical files verified? [YES/NO]
- Graph Bank loaded? [YES/NO]
- Task created in tasks.md? [YES/NO]
- Initial scope defined? [YES/NO]

â†’ If all YES: Proceed to Documentation Setup
â†’ If any NO: Complete initialization steps
```

### Phase 2: DOCUMENTATION SETUP

```mermaid
graph TD
    Start["Begin Documentation<br>Setup"] --> LoadTemplate["Load Basic<br>Documentation Templates"]
    LoadTemplate --> UpdateProject["Update<br>projectbrief.md"]
    UpdateProject --> UpdateContext["Update<br>activeContext.md"]
    UpdateContext --> SetupComplete["Documentation<br>Setup Complete"]
```

**Steps:**
1. Load basic documentation templates
2. Update projectbrief.md with enhancement details
3. Update activeContext.md with current focus
4. Create minimal documentation structure

**Milestone Checkpoint:**
```
âœ“ DOCUMENTATION CHECKPOINT
- Documentation templates loaded? [YES/NO]
- projectbrief.md updated? [YES/NO]
- activeContext.md updated? [YES/NO]
- Documentation structure created? [YES/NO]

â†’ If all YES: Proceed to Task Planning
â†’ If any NO: Complete documentation setup
```

### Phase 3: TASK PLANNING

```mermaid
graph TD
    Start["Begin Task<br>Planning"] --> Requirements["Define Clear<br>Requirements"]
    Requirements --> SubTasks["Break Down<br>Into Subtasks"]
    SubTasks --> TasksUpdate["Update tasks.md<br>With Subtasks"]
    TasksUpdate --> TimeEstimate["Create Time<br>Estimates"]
    TimeEstimate --> PlanComplete["Planning<br>Complete"]
```

**Steps:**
1. Define clear requirements
2. Break down into subtasks
3. Update tasks.md with subtasks
4. Create time estimates
5. Document dependencies and constraints

**Milestone Checkpoint:**
```
âœ“ PLANNING CHECKPOINT
- Requirements clearly defined? [YES/NO]
- Task broken down into subtasks? [YES/NO]
- tasks.md updated with subtasks? [YES/NO]
- Time estimates created? [YES/NO]
- Dependencies documented? [YES/NO]

â†’ If all YES: Proceed to Implementation
â†’ If any NO: Complete planning steps
```

### Phase 4: IMPLEMENTATION

```mermaid
graph TD
    Start["Begin<br>Implementation"] --> SubTask1["Complete<br>Subtask 1"]
    SubTask1 --> UpdateStatus1["Update Status<br>in tasks.md"]
    UpdateStatus1 --> SubTask2["Complete<br>Subtask 2"]
    SubTask2 --> UpdateStatus2["Update Status<br>in tasks.md"]
    UpdateStatus2 --> FinalSubTask["Complete<br>Final Subtask"]
    FinalSubTask --> Verification["Perform<br>Verification"]
    Verification --> ImplComplete["Implementation<br>Complete"]
```

**Steps:**
1. Implement first subtask
2. Update status in tasks.md
3. Implement remaining subtasks
4. Regular status updates after each subtask
5. Verify complete implementation

**Milestone Checkpoint:**
```
âœ“ IMPLEMENTATION CHECKPOINT
- All subtasks completed? [YES/NO]
- Status updates maintained? [YES/NO]
- Enhancement fully implemented? [YES/NO]
- Basic verification performed? [YES/NO]
- tasks.md fully updated? [YES/NO]

â†’ If all YES: Proceed to Reflection
â†’ If any NO: Complete implementation steps
```

### Phase 5: REFLECTION

```mermaid
graph TD
    Start["Begin<br>Reflection"] --> Template["Load Reflection<br>Template"]
    Template --> Review["Review Completed<br>Enhancement"]
    Review --> Document["Document Successes<br>and Challenges"]
    Document --> Insights["Extract Key<br>Insights"]
    Insights --> Actions["Define Action<br>Items"]
    Actions --> ReflectComplete["Reflection<br>Complete"]
```

**Steps:**
1. Load reflection template
2. Review completed enhancement
3. Document successes and challenges
4. Extract key insights
5. Define action items for future work

**Milestone Checkpoint:**
```
âœ“ REFLECTION CHECKPOINT
- Reflection template loaded? [YES/NO]
- Enhancement reviewed? [YES/NO]
- Successes and challenges documented? [YES/NO]
- Key insights extracted? [YES/NO]
- Action items defined? [YES/NO]

â†’ If all YES: Proceed to Archiving
â†’ If any NO: Complete reflection steps
```

### Phase 6: ARCHIVING

```mermaid
graph TD
    Start["Begin<br>Archiving"] --> Template["Load Archive<br>Template"]
    Template --> Gather["Gather Implementation<br>Details"]
    Gather --> Create["Create Archive<br>Document"]
    Create --> CrossRef["Create Cross-<br>References"]
    CrossRef --> Update["Update Graph<br>Bank Files"]
    Update --> ArchiveComplete["Archiving<br>Complete"]
```

**Steps:**
1. Load archive template
2. Gather implementation details
3. Create archive document
4. Create cross-references
5. Update Graph Bank files

**Milestone Checkpoint:**
```
âœ“ ARCHIVING CHECKPOINT
- Archive template loaded? [YES/NO]
- Implementation details gathered? [YES/NO]
- Archive document created? [YES/NO]
- Cross-references created? [YES/NO]
- Graph Bank files updated? [YES/NO]

â†’ If all YES: Task Complete
â†’ If any NO: Complete archiving steps
```

## ğŸ“‹ WORKFLOW VERIFICATION CHECKLIST

```
âœ“ FINAL WORKFLOW VERIFICATION
- All phases completed? [YES/NO]
- All milestone checkpoints passed? [YES/NO]
- tasks.md fully updated? [YES/NO]
- Reflection document created? [YES/NO]
- Archive document created? [YES/NO]
- Graph Bank fully updated? [YES/NO]

â†’ If all YES: Level 2 Task Successfully Completed
â†’ If any NO: Address outstanding items
```

## ğŸ“‹ MINIMAL MODE WORKFLOW

For minimal mode, use this streamlined workflow:

```
1. INIT: Verify environment, create task entry
2. DOCS: Update projectbrief and activeContext
3. PLAN: Define requirements, subtasks, estimates
4. IMPL: Complete subtasks, update status
5. REFLECT: Document key insights and actions
6. ARCHIVE: Document completion and cross-reference
```

## ğŸ”„ LEVEL TRANSITION HANDLING

```mermaid
graph TD
    L2["Level 2 Task"] --> Assess["Continuous<br>Assessment"]
    
    Assess --> Down["Downgrade to<br>Level 1"]
    Assess --> Up["Upgrade to<br>Level 3/4"]
    
    Down --> L1Trigger["Triggers:<br>- Simpler than expected<br>- Quick fix possible<br>- Single component"]
    
    Up --> L34Trigger["Triggers:<br>- More complex<br>- Multiple components<br>- Design needed"]
    
    L1Trigger --> L1Switch["Switch to<br>Level 1 Workflow"]
    L34Trigger --> L34Switch["Switch to<br>Level 3/4 Workflow"]
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

```mermaid
graph TD
    Workflow["Level 2<br>Workflow"] --> PB["Update<br>projectbrief.md"]
    Workflow --> AC["Update<br>activeContext.md"]
    Workflow --> TM["Maintain<br>tasks.md"]
    Workflow --> PM["Update<br>progress.md"]
    
    PB & AC & TM & PM --> MB["Graph Bank<br>Integration"]
    MB --> NextTask["Transition to<br>Next Task"]
```

## ğŸš¨ EFFICIENCY PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 2 workflow balances PROCESS with EFFICIENCY.  â”‚
â”‚ Follow the structure but avoid unnecessary overhead. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that simple enhancements are implemented with the right level of documentation and process.
`````

## File: .cursor/rules/isolation_rules/Level3/planning-comprehensive.mdc
`````
---
description: planning comprehensive
globs: planning-comprehensive.mdc
alwaysApply: false
---
# LEVEL 3 COMPREHENSIVE PLANNING

> **TL;DR:** This document provides structured planning guidelines for Level 3 (Intermediate Feature) tasks, focusing on comprehensive planning with creative phases and clear implementation strategies.

## ğŸ—ï¸ PLANNING WORKFLOW

```mermaid
graph TD
    Start["Planning Start"] --> Req["ğŸ“‹ Requirements<br>Analysis"]
    Req --> Comp["ğŸ” Component<br>Analysis"]
    Comp --> Design["ğŸ¨ Design<br>Decisions"]
    Design --> Impl["âš™ï¸ Implementation<br>Strategy"]
    Impl --> Test["ğŸ§ª Testing<br>Strategy"]
    Test --> Doc["ğŸ“š Documentation<br>Plan"]
    
    Design --> Creative["Creative Phases:"]
    Creative --> UI["UI/UX Design"]
    Creative --> Arch["Architecture"]
    Creative --> Algo["Algorithm"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Req fill:#ffa64d,stroke:#cc7a30,color:white
    style Comp fill:#4dbb5f,stroke:#36873f,color:white
    style Design fill:#d94dbb,stroke:#a3378a,color:white
    style Impl fill:#4dbbbb,stroke:#368787,color:white
    style Test fill:#d971ff,stroke:#a33bc2,color:white
    style Doc fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ”„ LEVEL TRANSITION HANDLING

```mermaid
graph TD
    L3["Level 3 Task"] --> Assess["Continuous<br>Assessment"]
    
    Assess --> Down["Downgrade to<br>Level 1/2"]
    Assess --> Up["Upgrade to<br>Level 4"]
    
    Down --> L12Trigger["Triggers:<br>- Simpler than expected<br>- Limited scope<br>- Few components"]
    
    Up --> L4Trigger["Triggers:<br>- System-wide impact<br>- Architectural changes<br>- High complexity"]
    
    L12Trigger --> L12Switch["Switch to<br>Level 1/2 Workflow"]
    L4Trigger --> L4Switch["Switch to<br>Level 4 Workflow"]
```

## ğŸ“‹ PLANNING TEMPLATE

```markdown
# Feature Planning Document

## Requirements Analysis
- Core Requirements:
  - [ ] Requirement 1
  - [ ] Requirement 2
- Technical Constraints:
  - [ ] Constraint 1
  - [ ] Constraint 2

## Component Analysis
- Affected Components:
  - Component 1
    - Changes needed:
    - Dependencies:
  - Component 2
    - Changes needed:
    - Dependencies:

## Design Decisions
- Architecture:
  - [ ] Decision 1
  - [ ] Decision 2
- UI/UX:
  - [ ] Design 1
  - [ ] Design 2
- Algorithms:
  - [ ] Algorithm 1
  - [ ] Algorithm 2

## Implementation Strategy
1. Phase 1:
   - [ ] Task 1
   - [ ] Task 2
2. Phase 2:
   - [ ] Task 3
   - [ ] Task 4

## Testing Strategy
- Unit Tests:
  - [ ] Test 1
  - [ ] Test 2
- Integration Tests:
  - [ ] Test 3
  - [ ] Test 4

## Documentation Plan
- [ ] API Documentation
- [ ] User Guide Updates
- [ ] Architecture Documentation
```

## ğŸ¨ CREATIVE PHASE IDENTIFICATION

```mermaid
graph TD
    subgraph "CREATIVE PHASES REQUIRED"
    UI["ğŸ¨ UI/UX Design<br>Required: Yes/No"]
    Arch["ğŸ—ï¸ Architecture Design<br>Required: Yes/No"]
    Algo["âš™ï¸ Algorithm Design<br>Required: Yes/No"]
    end
    
    UI --> UITrig["Triggers:<br>- New UI Component<br>- UX Flow Change"]
    Arch --> ArchTrig["Triggers:<br>- System Structure Change<br>- New Integration"]
    Algo --> AlgoTrig["Triggers:<br>- Performance Critical<br>- Complex Logic"]
    
    style UI fill:#4dbb5f,stroke:#36873f,color:white
    style Arch fill:#ffa64d,stroke:#cc7a30,color:white
    style Algo fill:#d94dbb,stroke:#a3378a,color:white
```

## âœ… VERIFICATION CHECKLIST

```mermaid
graph TD
    subgraph "PLANNING VERIFICATION"
    R["Requirements<br>Complete"]
    C["Components<br>Identified"]
    D["Design Decisions<br>Made"]
    I["Implementation<br>Plan Ready"]
    T["Testing Strategy<br>Defined"]
    Doc["Documentation<br>Plan Ready"]
    end
    
    R --> C --> D --> I --> T --> Doc
    
    style R fill:#4dbb5f,stroke:#36873f,color:white
    style C fill:#ffa64d,stroke:#cc7a30,color:white
    style D fill:#d94dbb,stroke:#a3378a,color:white
    style I fill:#4dbbbb,stroke:#368787,color:white
    style T fill:#d971ff,stroke:#a33bc2,color:white
    style Doc fill:#ff71c2,stroke:#c23b8a,color:white
```

## ğŸ”„ IMPLEMENTATION PHASES

```mermaid
graph LR
    Setup["ğŸ› ï¸ Setup"] --> Core["âš™ï¸ Core<br>Implementation"]
    Core --> UI["ğŸ¨ UI<br>Implementation"]
    UI --> Test["ğŸ§ª Testing"]
    Test --> Doc["ğŸ“š Documentation"]
    
    style Setup fill:#4da6ff,stroke:#0066cc,color:white
    style Core fill:#4dbb5f,stroke:#36873f,color:white
    style UI fill:#ffa64d,stroke:#cc7a30,color:white
    style Test fill:#d94dbb,stroke:#a3378a,color:white
    style Doc fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

```mermaid
graph TD
    L3["Level 3<br>Task"] --> PB["Comprehensive<br>projectbrief.md"]
    L3 --> AC["Detailed<br>activeContext.md"]
    L3 --> TM["Structured<br>tasks.md"]
    L3 --> PM["Detailed<br>progress.md"]
    
    PB & AC & TM & PM --> MB["Graph Bank<br>Integration"]
    MB --> NextPhase["Proceed to<br>Implementation"]
```

## ğŸš¨ PLANNING EFFICIENCY PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 3 planning requires COMPREHENSIVE DESIGN but   â”‚
â”‚ should avoid OVER-ENGINEERING. Focus on delivering  â”‚
â”‚ maintainable, well-documented features.            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level3/task-tracking-intermediate.mdc
`````
---
description: task tracking intermediate
globs: task-tracking-intermediate.mdc
alwaysApply: false
---
# LEVEL 3 INTERMEDIATE TASK TRACKING

> **TL;DR:** This document provides structured task tracking guidelines for Level 3 (Intermediate Feature) tasks, using visual tracking elements and clear checkpoints.

## ğŸ” TASK TRACKING WORKFLOW

```mermaid
graph TD
    Start["Task Start"] --> Init["ğŸ“‹ Initialize<br>Task Entry"]
    Init --> Struct["ğŸ—ï¸ Create Task<br>Structure"]
    Struct --> Track["ğŸ“Š Progress<br>Tracking"]
    Track --> Update["ğŸ”„ Regular<br>Updates"]
    Update --> Complete["âœ… Task<br>Completion"]
    
    Struct --> Components["Components:"]
    Components --> Req["Requirements"]
    Components --> Steps["Implementation<br>Steps"]
    Components --> Creative["Creative Phase<br>Markers"]
    Components --> Check["Checkpoints"]
    
    Track --> Status["Track Status:"]
    Status --> InProg["ğŸ”„ In Progress"]
    Status --> Block["â›” Blocked"]
    Status --> Done["âœ… Complete"]
    Status --> Skip["â­ï¸ Skipped"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style Init fill:#ffa64d,stroke:#cc7a30,color:white
    style Struct fill:#4dbb5f,stroke:#36873f,color:white
    style Track fill:#d94dbb,stroke:#a3378a,color:white
    style Update fill:#4dbbbb,stroke:#368787,color:white
    style Complete fill:#d971ff,stroke:#a33bc2,color:white
```

## ğŸ“‹ TASK ENTRY TEMPLATE

```markdown
# [Task Title]

## Requirements
- [ ] Requirement 1
- [ ] Requirement 2
- [ ] Requirement 3

## Components Affected
- Component 1
- Component 2
- Component 3

## Implementation Steps
1. [ ] Step 1
2. [ ] Step 2
3. [ ] Step 3

## Creative Phases Required
- [ ] ğŸ¨ UI/UX Design
- [ ] ğŸ—ï¸ Architecture Design
- [ ] âš™ï¸ Algorithm Design

## Checkpoints
- [ ] Requirements verified
- [ ] Creative phases completed
- [ ] Implementation tested
- [ ] Documentation updated

## Current Status
- Phase: [Current Phase]
- Status: [In Progress/Blocked/Complete]
- Blockers: [If any]
```

## ğŸ”„ PROGRESS TRACKING VISUALIZATION

```mermaid
graph TD
    subgraph "TASK PROGRESS"
    P1["âœ“ Requirements<br>Defined"]
    P2["âœ“ Components<br>Identified"]
    P3["â†’ Creative Phase<br>In Progress"]
    P4["â–¡ Implementation"]
    P5["â–¡ Testing"]
    P6["â–¡ Documentation"]
    end
    
    style P1 fill:#4dbb5f,stroke:#36873f,color:white
    style P2 fill:#4dbb5f,stroke:#36873f,color:white
    style P3 fill:#ffa64d,stroke:#cc7a30,color:white
    style P4 fill:#d94dbb,stroke:#a3378a,color:white
    style P5 fill:#4dbbbb,stroke:#368787,color:white
    style P6 fill:#d971ff,stroke:#a33bc2,color:white
```

## âœ… UPDATE PROTOCOL

```mermaid
sequenceDiagram
    participant Task as Task Entry
    participant Status as Status Update
    participant Creative as Creative Phase
    participant Implementation as Implementation
    
    Task->>Status: Update Progress
    Status->>Creative: Flag for Creative Phase
    Creative->>Implementation: Complete Design
    Implementation->>Status: Update Status
    Status->>Task: Mark Complete
```

## ğŸ¯ CHECKPOINT VERIFICATION

| Phase | Verification Items | Status |
|-------|-------------------|--------|
| Requirements | All requirements documented | [ ] |
| Components | Affected components listed | [ ] |
| Creative | Design decisions documented | [ ] |
| Implementation | Code changes tracked | [ ] |
| Testing | Test results recorded | [ ] |
| Documentation | Updates completed | [ ] |

## ğŸ”„ DOCUMENT MANAGEMENT

```mermaid
graph TD
    Current["Current Documents"] --> Active["Active:<br>- task-tracking-intermediate.md<br>- planning-comprehensive.md"]
    Current --> Required["Required Next:<br>- creative-phase-enforcement.md<br>- implementation-phase-reference.md"]
    
    style Current fill:#4da6ff,stroke:#0066cc,color:white
    style Active fill:#4dbb5f,stroke:#36873f,color:white
    style Required fill:#ffa64d,stroke:#cc7a30,color:white
```
`````

## File: .cursor/rules/isolation_rules/Level4/architectural-planning.mdc
`````
---
description: Architectural planning guidelines for Level 4 Complex System tasks
globs: "**/level4/**", "**/architecture/**"
alwaysApply: false
---

# ARCHITECTURAL PLANNING FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a comprehensive architectural planning approach for Level 4 (Complex System) tasks, ensuring a robust, scalable, and maintainable architecture that aligns with business objectives and technical requirements.

## ğŸ” ARCHITECTURAL PLANNING OVERVIEW

Level 4 Complex System tasks require thorough architectural planning to ensure the resulting system is robust, scalable, maintainable, and aligned with business objectives. This document outlines a structured approach to architectural planning that systematically addresses key concerns and produces comprehensive documentation.

```mermaid
flowchart TD
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Architectural<br>Planning]) --> Reqs[Analyze<br>Requirements]
    Reqs --> Context[Define Business<br>Context]
    Context --> Vision[Establish Vision<br>and Goals]
    Vision --> Principles[Define Architectural<br>Principles]
    Principles --> Constraints[Identify<br>Constraints]
    Constraints --> Explore[Explore<br>Alternatives]
    Explore --> Evaluate[Evaluate<br>Options]
    Evaluate --> Decision[Document<br>Decisions]
    Decision --> Create[Create Architecture<br>Documentation]
    Create --> Validate[Validate<br>Architecture]
    Validate --> Communicate[Communicate<br>Architecture]
    Communicate --> Verification{Architecture<br>Verification}
    Verification -->|Pass| Complete([Architectural<br>Planning Complete])
    Verification -->|Fail| Revise[Revise<br>Architecture]
    Revise --> Verification
    
    Reqs -.-> ReqDoc((Requirements<br>Document))
    Context -.-> ConDoc((Context<br>Document))
    Vision -.-> VisDoc((Vision<br>Document))
    Principles -.-> PrinDoc((Principles<br>Document))
    Explore -.-> AltDoc((Alternatives<br>Analysis))
    Decision -.-> ADR((Architecture<br>Decision Records))
    Create -.-> ArchDoc((Architecture<br>Documentation))
    
    class Start,Complete milestone
    class Reqs,Context,Vision,Principles,Constraints,Explore,Evaluate,Decision,Create,Validate,Communicate,Revise step
    class Verification verification
    class ReqDoc,ConDoc,VisDoc,PrinDoc,AltDoc,ADR,ArchDoc artifact
```

## ğŸ“‹ ARCHITECTURAL PLANNING PRINCIPLES

1. **Business Alignment**: Architecture must directly support business objectives and user needs.
2. **Future-Proofing**: Architecture must anticipate future requirements and facilitate change.
3. **Simplicity**: Prefer simple solutions over complex ones when possible.
4. **Separation of Concerns**: Systems should be divided into distinct components with minimal overlap.
5. **Defense in Depth**: Multiple layers of security controls should be employed.
6. **Loose Coupling**: Components should interact through well-defined interfaces with minimal dependencies.
7. **High Cohesion**: Related functionality should be grouped together, unrelated functionality separated.
8. **Resilience**: Architecture should anticipate failures and provide mechanisms for recovery.
9. **Scalability**: Architecture should support growth in users, data, and functionality.
10. **Measurability**: Architecture should enable monitoring and measurement of key metrics.

## ğŸ“‹ ARCHITECTURAL REQUIREMENTS ANALYSIS

Begin architectural planning with a comprehensive analysis of requirements:

### Functional Requirements Analysis

```mermaid
flowchart LR
    classDef req fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef arch fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    FR[Functional<br>Requirements] --> USE[Use Cases/<br>User Stories]
    USE --> DOM[Domain<br>Model]
    DOM --> COMP[Component<br>Identification]
    COMP --> INT[Interface<br>Definition]
    INT --> FLOW[Information<br>Flow]
    
    class FR,USE,DOM req
    class COMP,INT,FLOW arch
```

**Template for Functional Requirements Analysis:**

```markdown
## Functional Requirements Analysis

### Key Use Cases
- Use Case 1: [Description]
- Use Case 2: [Description]
- Use Case 3: [Description]

### Domain Model
- Entity 1: [Description and attributes]
- Entity 2: [Description and attributes]
- Entity 3: [Description and attributes]
- Relationships:
  - Entity 1 â†’ Entity 2: [Relationship type and description]
  - Entity 2 â†’ Entity 3: [Relationship type and description]

### Component Identification
- Component 1: [Description and responsibilities]
- Component 2: [Description and responsibilities]
- Component 3: [Description and responsibilities]

### Interface Definitions
- Interface 1: [Description, methods, parameters]
- Interface 2: [Description, methods, parameters]
- Interface 3: [Description, methods, parameters]

### Information Flow
- Flow 1: [Description of information exchange]
- Flow 2: [Description of information exchange]
- Flow 3: [Description of information exchange]
```

### Non-Functional Requirements Analysis

```mermaid
flowchart LR
    classDef req fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef arch fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    NFR[Non-Functional<br>Requirements] --> PERF[Performance<br>Requirements]
    NFR --> SEC[Security<br>Requirements]
    NFR --> SCAL[Scalability<br>Requirements]
    NFR --> AVAIL[Availability<br>Requirements]
    NFR --> MAINT[Maintainability<br>Requirements]
    
    PERF & SEC & SCAL & AVAIL & MAINT --> ARCH[Architectural<br>Decisions]
    
    class NFR,PERF,SEC,SCAL,AVAIL,MAINT req
    class ARCH arch
```

**Template for Non-Functional Requirements Analysis:**

```markdown
## Non-Functional Requirements Analysis

### Performance Requirements
- Response Time: [Requirements]
- Throughput: [Requirements]
- Resource Utilization: [Requirements]
- Architectural Implications: [Implications for architecture]

### Security Requirements
- Authentication: [Requirements]
- Authorization: [Requirements]
- Data Protection: [Requirements]
- Audit/Logging: [Requirements]
- Architectural Implications: [Implications for architecture]

### Scalability Requirements
- User Scalability: [Requirements]
- Data Scalability: [Requirements]
- Transaction Scalability: [Requirements]
- Architectural Implications: [Implications for architecture]

### Availability Requirements
- Uptime Requirements: [Requirements]
- Fault Tolerance: [Requirements]
- Disaster Recovery: [Requirements]
- Architectural Implications: [Implications for architecture]

### Maintainability Requirements
- Modularity: [Requirements]
- Extensibility: [Requirements]
- Testability: [Requirements]
- Architectural Implications: [Implications for architecture]
```

## ğŸ“‹ BUSINESS CONTEXT DOCUMENTATION

Document the business context to ensure architectural alignment:

```markdown
## Business Context Documentation

### Business Objectives
- Objective 1: [Description]
- Objective 2: [Description]
- Objective 3: [Description]

### Key Stakeholders
- Stakeholder Group 1: [Description, needs, and concerns]
- Stakeholder Group 2: [Description, needs, and concerns]
- Stakeholder Group 3: [Description, needs, and concerns]

### Business Processes
- Process 1: [Description and flow]
- Process 2: [Description and flow]
- Process 3: [Description and flow]

### Business Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]

### Business Metrics
- Metric 1: [Description and target]
- Metric 2: [Description and target]
- Metric 3: [Description and target]

### Business Risks
- Risk 1: [Description, probability, impact, and mitigation]
- Risk 2: [Description, probability, impact, and mitigation]
- Risk 3: [Description, probability, impact, and mitigation]
```

## ğŸ“‹ ARCHITECTURAL VISION AND GOALS

Document the architectural vision and goals:

```markdown
## Architectural Vision and Goals

### Vision Statement
[Concise statement of the architectural vision]

### Strategic Goals
- Goal 1: [Description and success criteria]
- Goal 2: [Description and success criteria]
- Goal 3: [Description and success criteria]

### Quality Attributes
- Quality Attribute 1: [Description and importance]
- Quality Attribute 2: [Description and importance]
- Quality Attribute 3: [Description and importance]

### Technical Roadmap
- Short-term (0-6 months): [Key architectural milestones]
- Medium-term (6-18 months): [Key architectural milestones]
- Long-term (18+ months): [Key architectural milestones]

### Key Success Indicators
- Indicator 1: [Description and measurement]
- Indicator 2: [Description and measurement]
- Indicator 3: [Description and measurement]
```

## ğŸ“‹ ARCHITECTURAL PRINCIPLES

Document architectural principles to guide decision-making:

```markdown
## Architectural Principles

### Principle 1: [Name]
- **Statement**: [Concise statement of the principle]
- **Rationale**: [Why this principle is important]
- **Implications**: [What this principle means for the architecture]
- **Examples**: [Examples of applying this principle]

### Principle 2: [Name]
- **Statement**: [Concise statement of the principle]
- **Rationale**: [Why this principle is important]
- **Implications**: [What this principle means for the architecture]
- **Examples**: [Examples of applying this principle]

### Principle 3: [Name]
- **Statement**: [Concise statement of the principle]
- **Rationale**: [Why this principle is important]
- **Implications**: [What this principle means for the architecture]
- **Examples**: [Examples of applying this principle]

...
```

## ğŸ“‹ CONSTRAINTS IDENTIFICATION

Document constraints that impact architectural decisions:

```markdown
## Architectural Constraints

### Technical Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]

### Organizational Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]

### External Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]

### Regulatory/Compliance Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]

### Resource Constraints
- Constraint 1: [Description and impact]
- Constraint 2: [Description and impact]
- Constraint 3: [Description and impact]
```

## ğŸ“‹ ARCHITECTURAL ALTERNATIVES EXPLORATION

Document and evaluate architectural alternatives:

```markdown
## Architectural Alternatives

### Alternative 1: [Name]
- **Description**: [Brief description of the alternative]
- **Key Components**:
  - Component 1: [Description]
  - Component 2: [Description]
  - Component 3: [Description]
- **Advantages**:
  - [Advantage 1]
  - [Advantage 2]
  - [Advantage 3]
- **Disadvantages**:
  - [Disadvantage 1]
  - [Disadvantage 2]
  - [Disadvantage 3]
- **Risks**:
  - [Risk 1]
  - [Risk 2]
  - [Risk 3]
- **Cost Factors**:
  - [Cost Factor 1]
  - [Cost Factor 2]
  - [Cost Factor 3]
- **Alignment with Requirements**:
  - [How well this alternative addresses requirements]

### Alternative 2: [Name]
...

### Alternative 3: [Name]
...

## Evaluation Criteria
- Criterion 1: [Description and weighting]
- Criterion 2: [Description and weighting]
- Criterion 3: [Description and weighting]

## Evaluation Matrix
| Criterion | Alternative 1 | Alternative 2 | Alternative 3 |
|-----------|---------------|---------------|---------------|
| Criterion 1 | Score | Score | Score |
| Criterion 2 | Score | Score | Score |
| Criterion 3 | Score | Score | Score |
| Total | Sum | Sum | Sum |

## Recommended Approach
[Description of the recommended architectural approach with justification]
```

## ğŸ“‹ ARCHITECTURE DECISION RECORDS (ADRs)

Document key architectural decisions:

```markdown
# Architecture Decision Record: [Decision Title]

## Status
[Proposed/Accepted/Deprecated/Superseded]

## Context
[Description of the context and problem statement]

## Decision
[Description of the decision made]

## Consequences
[Description of the consequences of the decision]

## Alternatives Considered
[Description of alternatives considered]

## Related Decisions
[References to related decisions]

## Notes
[Additional notes and considerations]
```

## ğŸ“‹ COMPREHENSIVE ARCHITECTURE DOCUMENTATION

Create comprehensive architecture documentation:

### System Context Diagram

```mermaid
flowchart TD
    classDef system fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef external fill:#a8d5ff,stroke:#88b5e0,color:#000
    classDef user fill:#c5e8b7,stroke:#a5c897,color:#000
    
    U1[User 1] --> S[System]
    U2[User 2] --> S
    S --> E1[External<br>System 1]
    S --> E2[External<br>System 2]
    S --> E3[External<br>System 3]
    
    class S system
    class E1,E2,E3 external
    class U1,U2 user
```

### High-Level Architecture Diagram

```mermaid
flowchart TD
    classDef frontend fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef backend fill:#a8d5ff,stroke:#88b5e0,color:#000
    classDef data fill:#c5e8b7,stroke:#a5c897,color:#000
    classDef integration fill:#f4b8c4,stroke:#d498a4,color:#000
    
    U[Users] --> F[Frontend<br>Layer]
    F --> B[Backend<br>Layer]
    B --> D[Data<br>Layer]
    B --> I[Integration<br>Layer]
    I --> E[External<br>Systems]
    
    class F frontend
    class B backend
    class D data
    class I integration
    class U,E external
```

### Component Architecture Diagram

```mermaid
flowchart TD
    classDef ui fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef service fill:#a8d5ff,stroke:#88b5e0,color:#000
    classDef data fill:#c5e8b7,stroke:#a5c897,color:#000
    
    UI[User Interface] --> API[API Gateway]
    API --> S1[Service 1]
    API --> S2[Service 2]
    API --> S3[Service 3]
    S1 --> DB1[Database 1]
    S2 --> DB1
    S2 --> DB2[Database 2]
    S3 --> DB2
    
    class UI ui
    class API,S1,S2,S3 service
    class DB1,DB2 data
```

### Data Architecture Diagram

```mermaid
flowchart TD
    classDef entity fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef relation fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    E1[Entity 1] -- 1:N --> E2[Entity 2]
    E1 -- 1:1 --> E3[Entity 3]
    E2 -- N:M --> E4[Entity 4]
    E3 -- 1:N --> E4
    
    class E1,E2,E3,E4 entity
```

### Security Architecture Diagram

```mermaid
flowchart TD
    classDef security fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef app fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    U[Users] --> WAF[Web Application<br>Firewall]
    WAF --> LB[Load<br>Balancer]
    LB --> API[API Gateway]
    API --> AuthZ[Authorization<br>Service]
    API --> S1[Service 1]
    API --> S2[Service 2]
    AuthZ --> IAM[Identity &<br>Access Management]
    
    class WAF,AuthZ,IAM security
    class API,S1,S2 app
    class U,LB external
```

### Deployment Architecture Diagram

```mermaid
flowchart TD
    classDef env fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef component fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    subgraph Production
    LB[Load Balancer] --> W1[Web Server 1]
    LB --> W2[Web Server 2]
    W1 & W2 --> A1[App Server 1]
    W1 & W2 --> A2[App Server 2]
    A1 & A2 --> DB[Database<br>Cluster]
    end
    
    class Production env
    class LB,W1,W2,A1,A2,DB component
```

### Architecture Documentation Template

```markdown
# System Architecture Document

## 1. Introduction
- **Purpose**: [Purpose of the architecture]
- **Scope**: [Scope of the architecture]
- **Audience**: [Intended audience for the document]
- **References**: [Related documents and references]

## 2. System Context
- **System Purpose**: [Brief description of system purpose]
- **Context Diagram**: [System context diagram]
- **External Systems**: [Description of external systems and interfaces]
- **User Types**: [Description of user types and interactions]

## 3. Architecture Overview
- **Architecture Style**: [Description of the architectural style/pattern]
- **High-Level Architecture**: [High-level architecture diagram]
- **Key Components**: [Overview of key components]
- **Technology Stack**: [Overview of technology stack]

## 4. Component Architecture
- **Component Diagram**: [Component architecture diagram]
- **Component Descriptions**:
  - Component 1: [Description, responsibilities, interfaces]
  - Component 2: [Description, responsibilities, interfaces]
  - Component 3: [Description, responsibilities, interfaces]
- **Component Interactions**: [Description of component interactions]
- **API Specifications**: [Overview of key APIs]

## 5. Data Architecture
- **Data Model**: [Data architecture diagram]
- **Entity Descriptions**:
  - Entity 1: [Description, attributes, relationships]
  - Entity 2: [Description, attributes, relationships]
  - Entity 3: [Description, attributes, relationships]
- **Data Storage**: [Description of data storage approaches]
- **Data Access**: [Description of data access patterns]
- **Data Migration**: [Overview of data migration approach]

## 6. Security Architecture
- **Security Model**: [Security architecture diagram]
- **Authentication**: [Authentication approach]
- **Authorization**: [Authorization approach]
- **Data Protection**: [Data protection mechanisms]
- **Security Controls**: [Key security controls]
- **Audit and Logging**: [Audit and logging approach]

## 7. Deployment Architecture
- **Deployment Model**: [Deployment architecture diagram]
- **Environment Descriptions**:
  - Environment 1: [Description and configuration]
  - Environment 2: [Description and configuration]
  - Environment 3: [Description and configuration]
- **Infrastructure Requirements**: [Infrastructure requirements]
- **Scaling Approach**: [Scaling approach]

## 8. Quality Attributes
- **Performance**: [Performance characteristics and mechanisms]
- **Scalability**: [Scalability approach]
- **Availability**: [Availability approach]
- **Maintainability**: [Maintainability approach]
- **Reliability**: [Reliability approach]
- **Portability**: [Portability considerations]

## 9. Cross-Cutting Concerns
- **Logging**: [Logging approach]
- **Error Handling**: [Error handling approach]
- **Monitoring**: [Monitoring approach]
- **Configuration Management**: [Configuration management approach]
- **Internationalization**: [Internationalization approach]

## 10. Architecture Decisions
- [References to Architecture Decision Records]

## 11. Risks and Mitigations
- Risk 1: [Description and mitigation]
- Risk 2: [Description and mitigation]
- Risk 3: [Description and mitigation]

## 12. Glossary
- Term 1: [Definition]
- Term 2: [Definition]
- Term 3: [Definition]
```

## ğŸ“‹ ARCHITECTURE VALIDATION

Validate architecture against requirements and principles:

```markdown
## Architecture Validation

### Requirements Coverage
- Requirement 1: [Covered/Partially Covered/Not Covered] - [Explanation]
- Requirement 2: [Covered/Partially Covered/Not Covered] - [Explanation]
- Requirement 3: [Covered/Partially Covered/Not Covered] - [Explanation]

### Principles Alignment
- Principle 1: [Aligned/Partially Aligned/Not Aligned] - [Explanation]
- Principle 2: [Aligned/Partially Aligned/Not Aligned] - [Explanation]
- Principle 3: [Aligned/Partially Aligned/Not Aligned] - [Explanation]

### Quality Attribute Scenarios
- Scenario 1: [Description and validation]
- Scenario 2: [Description and validation]
- Scenario 3: [Description and validation]

### Architecture Review Findings
- Finding 1: [Description and resolution]
- Finding 2: [Description and resolution]
- Finding 3: [Description and resolution]

### Risk Assessment
- Risk 1: [Description, probability, impact, and mitigation]
- Risk 2: [Description, probability, impact, and mitigation]
- Risk 3: [Description, probability, impact, and mitigation]

### Validation Outcome
[Summary of validation outcome and next steps]
```

## ğŸ“‹ ARCHITECTURE COMMUNICATION

Communicate architecture to stakeholders:

```markdown
## Architecture Communication Plan

### Key Stakeholders
- Stakeholder Group 1: [Communication needs]
- Stakeholder Group 2: [Communication needs]
- Stakeholder Group 3: [Communication needs]

### Communication Materials
- **Executive Summary**: [Purpose and audience]
- **Technical Reference**: [Purpose and audience]
- **Developer Guide**: [Purpose and audience]
- **Operations Guide**: [Purpose and audience]

### Communication Schedule
- Event 1: [Date, audience, purpose]
- Event 2: [Date, audience, purpose]
- Event 3: [Date, audience, purpose]

### Feedback Mechanism
[Description of how feedback will be collected and incorporated]
```

## ğŸ“‹ GRAPH BANK INTEGRATION

```mermaid
flowchart TD
    classDef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Architecture[Architectural<br>Planning] --> PB[projectbrief.md]
    Architecture --> PC[productContext.md]
    Architecture --> SP[systemPatterns.md]
    Architecture --> TC[techContext.md]
    
    PB & PC & SP & TC --> MBI[Graph Bank<br>Integration]
    MBI --> Next[Implementation<br>Phase]
    
    class PB,PC,SP,TC memfile
    class Architecture,MBI,Next process
```

### Graph Bank Updates

Update the following Graph Bank files during architectural planning:

1. **projectbrief.md**
   - Update with architectural vision
   - Document high-level architecture approach
   - Link to architecture documentation

2. **productContext.md**
   - Update with business context documentation
   - Document key stakeholder requirements
   - Capture business drivers for architectural decisions

3. **systemPatterns.md**
   - Document architectural patterns and styles chosen
   - Capture key architecture decisions with rationales
   - Document technical patterns to be used

4. **techContext.md**
   - Update with technology stack decisions
   - Document technical constraints and considerations
   - Capture integration approaches

## ğŸ“‹ ARCHITECTURAL PLANNING VERIFICATION CHECKLIST

```
âœ“ ARCHITECTURAL PLANNING VERIFICATION CHECKLIST

Requirements Analysis
- Functional requirements analyzed? [YES/NO]
- Non-functional requirements analyzed? [YES/NO]
- Domain model created? [YES/NO]
- Component identification completed? [YES/NO]

Business Context
- Business objectives documented? [YES/NO]
- Key stakeholders identified? [YES/NO]
- Business processes documented? [YES/NO]
- Business constraints identified? [YES/NO]

Vision and Goals
- Architectural vision stated? [YES/NO]
- Strategic goals defined? [YES/NO]
- Quality attributes identified? [YES/NO]
- Technical roadmap created? [YES/NO]

Architectural Principles
- Core principles defined? [YES/NO]
- Principles have clear rationales? [YES/NO]
- Implications of principles documented? [YES/NO]
- Examples of applying principles provided? [YES/NO]

Constraints Identification
- Technical constraints documented? [YES/NO]
- Organizational constraints documented? [YES/NO]
- External constraints documented? [YES/NO]
- Regulatory constraints documented? [YES/NO]

Alternatives Exploration
- Multiple alternatives identified? [YES/NO]
- Alternatives evaluated against criteria? [YES/NO]
- Advantages and disadvantages documented? [YES/NO]
- Recommended approach justified? [YES/NO]

Architecture Documentation
- System context documented? [YES/NO]
- High-level architecture documented? [YES/NO]
- Component architecture documented? [YES/NO]
- Data architecture documented? [YES/NO]
- Security architecture documented? [YES/NO]
- Deployment architecture documented? [YES/NO]

Architecture Validation
- Requirements coverage validated? [YES/NO]
- Principles alignment checked? [YES/NO]
- Quality attribute scenarios assessed? [YES/NO]
- Architecture review conducted? [YES/NO]

Graph Bank Integration
- projectbrief.md updated? [YES/NO]
- productContext.md updated? [YES/NO]
- systemPatterns.md updated? [YES/NO]
- techContext.md updated? [YES/NO]
```

## ğŸ“‹ MINIMAL MODE ARCHITECTURE PLANNING FORMAT

For situations requiring a more compact architectural planning approach:

```markdown
## Level 4 Architecture Planning: [System Name]

### System Context
- **Purpose**: [Brief description of system purpose]
- **Users**: [Primary users]
- **External Systems**: [Key external systems]

### Key Architectural Decisions
- **Architecture Style**: [Chosen style with brief rationale]
- **Component Structure**: [Key components with brief descriptions]
- **Data Model**: [Brief description of data approach]
- **Technical Stack**: [Key technologies]

### Quality Attributes
- **Performance**: [Brief description of approach]
- **Security**: [Brief description of approach]
- **Scalability**: [Brief description of approach]
- **Maintainability**: [Brief description of approach]

### Architecture Diagram
[Simple architecture diagram]

### Key Risks and Mitigations
- **Risk 1**: [Brief description] - **Mitigation**: [Brief approach]
- **Risk 2**: [Brief description] - **Mitigation**: [Brief approach]

### Graph Bank Updates
- [Brief description of updates needed]
```

## ğŸš¨ ARCHITECTURAL PLANNING ENFORCEMENT PRINCIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ARCHITECTURAL PLANNING IS MANDATORY for Level 4      â”‚
â”‚ tasks. Implementation CANNOT begin until             â”‚
â”‚ architectural planning is complete and approved.     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level4/phased-implementation.mdc
`````
---
description: Phased Implementation for Level 4 Complex System tasks
globs: "**/level4/**", "**/implementation/**"
alwaysApply: false
---

# PHASED IMPLEMENTATION FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a structured phased implementation approach for Level 4 (Complex System) tasks, ensuring controlled, incremental delivery of complex systems with appropriate verification at each phase.

## ğŸ” PHASED IMPLEMENTATION OVERVIEW

Level 4 Complex System tasks require a controlled, incremental approach to implementation to manage complexity, reduce risk, and ensure quality. This document outlines a phased implementation methodology that divides complex system development into discrete, verifiable phases with clear entry and exit criteria.

```mermaid
flowchart TD
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Implementation<br>Process]) --> Framework[Establish Implementation<br>Framework]
    Framework --> Plan[Create Phasing<br>Plan]
    Plan --> Foundation[Implement<br>Foundation Phase]
    Foundation --> VerifyF{Foundation<br>Verification}
    VerifyF -->|Pass| Core[Implement<br>Core Phase]
    VerifyF -->|Fail| ReviseF[Revise<br>Foundation]
    ReviseF --> VerifyF
    
    Core --> VerifyC{Core<br>Verification}
    VerifyC -->|Pass| Extension[Implement<br>Extension Phase]
    VerifyC -->|Fail| ReviseC[Revise<br>Core]
    ReviseC --> VerifyC
    
    Extension --> VerifyE{Extension<br>Verification}
    VerifyE -->|Pass| Integration[Implement<br>Integration Phase]
    VerifyE -->|Fail| ReviseE[Revise<br>Extension]
    ReviseE --> VerifyE
    
    Integration --> VerifyI{Integration<br>Verification}
    VerifyI -->|Pass| Finalization[Implement<br>Finalization Phase]
    VerifyI -->|Fail| ReviseI[Revise<br>Integration]
    ReviseI --> VerifyI
    
    Finalization --> VerifyFin{Finalization<br>Verification}
    VerifyFin -->|Pass| Complete([Implementation<br>Complete])
    VerifyFin -->|Fail| ReviseFin[Revise<br>Finalization]
    ReviseFin --> VerifyFin
    
    Framework -.-> IF((Implementation<br>Framework))
    Plan -.-> PP((Phasing<br>Plan))
    Foundation -.-> FP((Foundation<br>Phase))
    Core -.-> CP((Core<br>Phase))
    Extension -.-> EP((Extension<br>Phase))
    Integration -.-> IP((Integration<br>Phase))
    Finalization -.-> FiP((Finalization<br>Phase))
    
    class Start,Complete milestone
    class Framework,Plan,Foundation,Core,Extension,Integration,Finalization,ReviseF,ReviseC,ReviseE,ReviseI,ReviseFin step
    class VerifyF,VerifyC,VerifyE,VerifyI,VerifyFin verification
    class IF,PP,FP,CP,EP,IP,FiP artifact
```

## ğŸ“‹ IMPLEMENTATION PHASING PRINCIPLES

1. **Incremental Value Delivery**: Each phase delivers tangible, verifiable value.
2. **Progressive Complexity**: Complexity increases gradually across phases.
3. **Risk Mitigation**: Early phases address high-risk elements to fail fast if needed.
4. **Verification Gates**: Each phase has explicit entry and exit criteria.
5. **Business Alignment**: Phases align with business priorities and user needs.
6. **Technical Integrity**: Each phase maintains architectural and technical integrity.
7. **Continuous Integration**: Work is continuously integrated and tested.
8. **Knowledge Building**: Each phase builds upon knowledge gained in previous phases.
9. **Explicit Dependencies**: Dependencies between phases are clearly documented.
10. **Adaptability**: The phasing plan can adapt to new information while maintaining structure.

## ğŸ“‹ STANDARD IMPLEMENTATION PHASES

Level 4 Complex System tasks typically follow a five-phase implementation approach:

```mermaid
flowchart LR
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    
    P1[1. Foundation<br>Phase] --> P2[2. Core<br>Phase]
    P2 --> P3[3. Extension<br>Phase]
    P3 --> P4[4. Integration<br>Phase]
    P4 --> P5[5. Finalization<br>Phase]
    
    class P1,P2,P3,P4,P5 phase
```

### Phase 1: Foundation Phase

The Foundation Phase establishes the basic architecture and infrastructure required for the system.

**Key Activities:**
- Set up development, testing, and deployment environments
- Establish core architectural components and patterns
- Implement database schema and basic data access
- Create skeleton application structure
- Implement authentication and authorization framework
- Establish logging, monitoring, and error handling
- Create basic CI/CD pipeline

**Exit Criteria:**
- Basic architectural framework is functional
- Environment setup is complete and documented
- Core infrastructure components are in place
- Basic CI/CD pipeline is operational
- Architecture review confirms alignment with design

### Phase 2: Core Phase

The Core Phase implements the essential functionality that provides the minimum viable system.

**Key Activities:**
- Implement core business logic
- Develop primary user flows and interfaces
- Create essential system services
- Implement critical API endpoints
- Develop basic reporting capabilities
- Establish primary integration points
- Create automated tests for core functionality

**Exit Criteria:**
- Core business functionality is implemented
- Essential user flows are working
- Primary APIs are functional
- Core automated tests are passing
- Business stakeholders verify core functionality

### Phase 3: Extension Phase

The Extension Phase adds additional features and capabilities to the core system.

**Key Activities:**
- Implement secondary business processes
- Add additional user interfaces and features
- Enhance existing functionality based on feedback
- Implement advanced features
- Extend integration capabilities
- Enhance error handling and edge cases
- Expand test coverage

**Exit Criteria:**
- All planned features are implemented
- Extended functionality is working correctly
- Secondary business processes are functional
- Enhanced features have been validated
- Test coverage meets defined thresholds

### Phase 4: Integration Phase

The Integration Phase ensures all components work together properly and integrates with external systems.

**Key Activities:**
- Perform deep integration testing
- Implement all external system integrations
- Conduct end-to-end testing
- Perform performance and load testing
- Conduct security testing
- Implement any required data migrations
- Verify system behavior under various conditions

**Exit Criteria:**
- All integrations are working correctly
- End-to-end tests are passing
- Performance meets defined requirements
- Security tests show no critical vulnerabilities
- System handles error conditions gracefully

### Phase 5: Finalization Phase

The Finalization Phase prepares the system for production release.

**Key Activities:**
- Optimize performance
- Conduct user acceptance testing
- Finalize documentation
- Conduct final security review
- Create production deployment plan
- Prepare support materials and training
- Conduct final system review

**Exit Criteria:**
- All acceptance criteria are met
- Documentation is complete
- User acceptance testing is successful
- Production deployment plan is approved
- Support and maintenance procedures are established

## ğŸ“‹ PHASE PLANNING TEMPLATE

For each implementation phase, create a detailed plan using this template:

```markdown
## [Phase Name] Implementation Plan

### Phase Overview
- **Purpose**: [Brief description of phase purpose]
- **Timeline**: [Start and end dates]
- **Dependencies**: [Dependencies on other phases or external factors]
- **Key Stakeholders**: [List of key stakeholders for this phase]

### Entry Criteria
- [ ] [Criterion 1]
- [ ] [Criterion 2]
- [ ] [Criterion 3]

### Implementation Components
- **Component 1**: [Description]
  - [ ] Task 1.1: [Description]
  - [ ] Task 1.2: [Description]
  
- **Component 2**: [Description]
  - [ ] Task 2.1: [Description]
  - [ ] Task 2.2: [Description]

### Technical Considerations
- [Key technical considerations for this phase]

### Risk Assessment
- **Risk 1**: [Description]
  - Impact: [High/Medium/Low]
  - Mitigation: [Strategy]
  
- **Risk 2**: [Description]
  - Impact: [High/Medium/Low]
  - Mitigation: [Strategy]

### Quality Assurance
- [QA approach for this phase]
- [Testing requirements]

### Exit Criteria
- [ ] [Criterion 1]
- [ ] [Criterion 2]
- [ ] [Criterion 3]

### Deliverables
- [List of deliverables for this phase]
```

## ğŸ“‹ PHASE VERIFICATION

Each phase requires formal verification before proceeding to the next phase.

```mermaid
flowchart TD
    classDef activity fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef decision fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Phase<br>Verification]) --> CodeReview[Conduct Code<br>Review]
    CodeReview --> TestExecution[Execute Automated<br>Tests]
    TestExecution --> QAVerification[Perform QA<br>Verification]
    QAVerification --> ArchReview[Conduct Architecture<br>Review]
    ArchReview --> StakeholderReview[Conduct Stakeholder<br>Review]
    StakeholderReview --> Checklist[Complete Verification<br>Checklist]
    Checklist --> ExitCriteria{All Exit<br>Criteria Met?}
    ExitCriteria -->|Yes| Approval[Obtain Phase<br>Approval]
    ExitCriteria -->|No| Issues[Document<br>Issues]
    Issues --> Remediation[Implement<br>Remediation]
    Remediation --> Retest[Verify<br>Fixes]
    Retest --> ExitCriteria
    Approval --> Complete([Verification<br>Complete])
    
    CodeReview -.-> CodeReport((Code Review<br>Report))
    TestExecution -.-> TestReport((Test<br>Report))
    QAVerification -.-> QAReport((QA<br>Report))
    ArchReview -.-> ArchReport((Architecture<br>Report))
    StakeholderReview -.-> StakeReport((Stakeholder<br>Report))
    Checklist -.-> CheckDoc((Verification<br>Checklist))
    
    class Start,Complete milestone
    class CodeReview,TestExecution,QAVerification,ArchReview,StakeholderReview,Checklist,Approval,Issues,Remediation,Retest activity
    class ExitCriteria decision
    class CodeReport,TestReport,QAReport,ArchReport,StakeReport,CheckDoc artifact
```

### Phase Verification Checklist Template

```markdown
## Phase Verification Checklist

### Implementation Completeness
- [ ] All planned components implemented
- [ ] All tasks marked as complete
- [ ] No outstanding TODOs in code
- [ ] All documentation updated

### Code Quality
- [ ] Code review completed
- [ ] No critical issues found in static analysis
- [ ] Code meets established standards
- [ ] Technical debt documented

### Testing
- [ ] Unit tests completed and passing
- [ ] Integration tests completed and passing
- [ ] End-to-end tests completed and passing
- [ ] Performance testing completed (if applicable)
- [ ] Security testing completed (if applicable)
- [ ] Test coverage meets requirements

### Architecture
- [ ] Implementation follows architectural design
- [ ] No architectural violations introduced
- [ ] Technical patterns correctly implemented
- [ ] Non-functional requirements met

### Stakeholder Verification
- [ ] Business requirements met
- [ ] Stakeholder demo completed
- [ ] Feedback incorporated
- [ ] Acceptance criteria verified

### Risk Assessment
- [ ] All identified risks addressed
- [ ] No new risks introduced
- [ ] Contingency plans in place for known issues

### Exit Criteria
- [ ] All exit criteria met
- [ ] Any exceptions documented and approved
- [ ] Phase signoff obtained from required parties
```

## ğŸ“‹ HANDLING PHASE DEPENDENCIES

```mermaid
flowchart TD
    classDef solid fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef partial fill:#a8d5ff,stroke:#88b5e0,color:#000
    
    F[Foundation<br>Phase] --> C[Core<br>Phase]
    F --> E[Extension<br>Phase]
    F --> I[Integration<br>Phase]
    F --> FN[Finalization<br>Phase]
    
    C --> E
    C --> I
    C --> FN
    
    E --> I
    E --> FN
    
    I --> FN
    
    class F,C solid
    class E,I,FN partial
```

### Dependency Management Strategies

1. **Vertical Slicing**: Implement complete features across all phases for priority functionality.
2. **Stubbing and Mocking**: Create temporary implementations to allow progress on dependent components.
3. **Interface Contracts**: Define clear interfaces between components to allow parallel development.
4. **Feature Toggles**: Implement features but keep them disabled until dependencies are ready.
5. **Incremental Integration**: Gradually integrate components as they become available.

### Dependency Documentation Format

```markdown
## Implementation Dependencies

### Foundation Phase Dependencies
- **External Dependencies**:
  - Development environment setup
  - Access to source control
  - Access to CI/CD pipeline

### Core Phase Dependencies
- **Foundation Phase Dependencies**:
  - Authentication framework
  - Database schema
  - Logging infrastructure
  - Basic application skeleton
  
- **External Dependencies**:
  - API specifications from external systems
  - Test data

### Extension Phase Dependencies
- **Core Phase Dependencies**:
  - Core business logic
  - Primary user interface
  - Essential services
  
- **External Dependencies**:
  - [List external dependencies]

### Integration Phase Dependencies
- **Core Phase Dependencies**:
  - [List core dependencies]
  
- **Extension Phase Dependencies**:
  - [List extension dependencies]
  
- **External Dependencies**:
  - Access to integration test environments
  - Test credentials for external systems

### Finalization Phase Dependencies
- **All previous phases must be complete**
- **External Dependencies**:
  - User acceptance testing environment
  - Production deployment approval
```

## ğŸ“‹ PHASE TRANSITION PROCESS

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Phase<br>Transition]) --> Verification[Verify Current<br>Phase Complete]
    Verification --> Checkpoint{Phase<br>Verified?}
    Checkpoint -->|No| Remediation[Remediate<br>Issues]
    Remediation --> Verification
    Checkpoint -->|Yes| Documentation[Update<br>Documentation]
    Documentation --> Reflection[Conduct Phase<br>Reflection]
    Reflection --> NextPlan[Finalize Next<br>Phase Plan]
    NextPlan --> Approvals[Obtain<br>Approvals]
    Approvals --> Kickoff[Conduct Next<br>Phase Kickoff]
    Kickoff --> End([Begin Next<br>Phase])
    
    Verification -.-> VerifDoc((Verification<br>Checklist))
    Documentation -.-> Docs((Updated<br>Documentation))
    Reflection -.-> ReflectDoc((Reflection<br>Document))
    NextPlan -.-> PlanDoc((Phase<br>Plan))
    
    class Start,End milestone
    class Verification,Remediation,Documentation,Reflection,NextPlan,Approvals,Kickoff step
    class Checkpoint verification
    class VerifDoc,Docs,ReflectDoc,PlanDoc artifact
```

### Phase Transition Checklist

```markdown
## Phase Transition Checklist

### Current Phase Closure
- [ ] All exit criteria met and documented
- [ ] All verification steps completed
- [ ] All issues resolved or documented
- [ ] Phase retrospective completed

### Documentation Updates
- [ ] Technical documentation updated
- [ ] User documentation updated
- [ ] Architecture documentation updated
- [ ] Test documentation updated

### Knowledge Transfer
- [ ] Lessons learned documented
- [ ] Knowledge shared with team
- [ ] Training conducted if needed

### Next Phase Preparation
- [ ] Next phase plan reviewed and updated
- [ ] Resources aligned
- [ ] Dependencies verified
- [ ] Entry criteria confirmed

### Approvals
- [ ] Technical lead approval
- [ ] Business stakeholder approval
- [ ] Project management approval
```

## ğŸ“‹ IMPLEMENTATION TRACKING IN TASKS.MD

Update `tasks.md` to track phased implementation progress:

```markdown
## [SYSTEM-ID]: System Name

### Implementation Phases
#### 1. Foundation Phase
- **Status**: [Not Started/In Progress/Complete]
- **Progress**: [0-100%]
- **Start Date**: [Date]
- **Target Completion**: [Date]
- **Actual Completion**: [Date]

**Key Components**:
- [ ] Component 1: [Status] - [Progress %]
- [ ] Component 2: [Status] - [Progress %]

**Verification Status**:
- [ ] Code Review: [Status]
- [ ] Testing: [Status]
- [ ] Architecture Review: [Status]
- [ ] Stakeholder Approval: [Status]

**Issues/Blockers**:
- [List of issues if any]

#### 2. Core Phase
...

#### 3. Extension Phase
...

#### 4. Integration Phase
...

#### 5. Finalization Phase
...
```

## ğŸ“‹ GRAPH BANK INTEGRATION

```mermaid
flowchart TD
    classDef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Implementation[Phased<br>Implementation] --> PB[projectbrief.md]
    Implementation --> PC[productContext.md]
    Implementation --> AC[activeContext.md]
    Implementation --> SP[systemPatterns.md]
    Implementation --> TC[techContext.md]
    Implementation --> P[progress.md]
    
    PB & PC & AC & SP & TC & P --> MBI[Graph Bank<br>Integration]
    MBI --> Implementation
    
    class PB,PC,AC,SP,TC,P memfile
    class Implementation,MBI process
```

### Graph Bank Updates

Update the following Graph Bank files during phased implementation:

1. **projectbrief.md**
   - Update implementation approach
   - Document phase-specific objectives
   - Link to phase plans

2. **activeContext.md**
   - Update with current implementation phase
   - Document active implementation tasks
   - Highlight current focus areas

3. **systemPatterns.md**
   - Document implementation patterns used
   - Update with architectural decisions made during implementation
   - Record any pattern adaptations

4. **techContext.md**
   - Update with implementation technologies
   - Document technical constraints encountered
   - Record technical decisions made

5. **progress.md**
   - Update implementation progress by phase
   - Document completed components
   - Track overall implementation status

## ğŸ“‹ IMPLEMENTATION VERIFICATION CHECKLIST

```
âœ“ IMPLEMENTATION VERIFICATION CHECKLIST

Planning
- Implementation framework established? [YES/NO]
- Phasing plan created? [YES/NO]
- Phase dependencies documented? [YES/NO]
- Entry/exit criteria defined for all phases? [YES/NO]
- Risk assessment performed? [YES/NO]

Foundation Phase
- Environment setup complete? [YES/NO]
- Core architecture implemented? [YES/NO]
- Basic infrastructure in place? [YES/NO]
- CI/CD pipeline operational? [YES/NO]
- Foundation verification completed? [YES/NO]

Core Phase
- Core business logic implemented? [YES/NO]
- Primary user flows working? [YES/NO]
- Essential services operational? [YES/NO]
- Core APIs implemented? [YES/NO]
- Core verification completed? [YES/NO]

Extension Phase
- Secondary features implemented? [YES/NO]
- Enhanced functionality working? [YES/NO]
- Additional user interfaces complete? [YES/NO]
- Extended test coverage in place? [YES/NO]
- Extension verification completed? [YES/NO]

Integration Phase
- All components integrated? [YES/NO]
- External integrations working? [YES/NO]
- End-to-end testing completed? [YES/NO]
- Performance testing executed? [YES/NO]
- Integration verification completed? [YES/NO]

Finalization Phase
- All optimizations complete? [YES/NO]
- User acceptance testing passed? [YES/NO]
- Documentation finalized? [YES/NO]
- Production deployment plan ready? [YES/NO]
- Final system review completed? [YES/NO]

Graph Bank Integration
- All Graph Bank files updated? [YES/NO]
- Implementation status reflected? [YES/NO]
- Technical decisions documented? [YES/NO]
- Progress tracking current? [YES/NO]
```

## ğŸ“‹ MINIMAL MODE IMPLEMENTATION FORMAT

For situations requiring a more compact implementation approach:

```markdown
## [SYSTEM-ID]: Phased Implementation

### Phase Status Summary
- **Foundation**: [Status] - [Progress %]
- **Core**: [Status] - [Progress %] 
- **Extension**: [Status] - [Progress %]
- **Integration**: [Status] - [Progress %]
- **Finalization**: [Status] - [Progress %]

### Current Phase: [Phase Name]
- **Key Components**: [List of key components being implemented]
- **Blockers**: [List of blockers if any]
- **Next Steps**: [List of immediate next steps]

### Verification Status
- [List of verification steps and their status]

### Graph Bank Updates
- [List of Graph Bank files that need updating]
```

## ğŸš¨ IMPLEMENTATION VERIFICATION PRINCIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NO PHASE IS CONSIDERED COMPLETE until all            â”‚
â”‚ verification steps have been passed and documented.  â”‚
â”‚ Phases MUST NOT be rushed to meet deadlines at the   â”‚
â”‚ expense of quality or architectural integrity.       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level4/reflection-comprehensive.mdc
`````
---
description: Comprehensive reflection format for Level 4 Complex System tasks
globs: "**/level4/**", "**/reflection/**"
alwaysApply: false
---

# COMPREHENSIVE REFLECTION FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a structured, comprehensive approach to reflection for Level 4 (Complex System) tasks, including system review, success and challenge analysis, strategic insights, and action planning.

## ğŸ” COMPREHENSIVE REFLECTION OVERVIEW

Level 4 Complex System tasks require in-depth reflection to capture key insights, document successes and challenges, extract strategic lessons, and guide future improvements. This systematic reflection process ensures organizational learning and continuous improvement.

```mermaid
flowchart TD
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Reflection<br>Process]) --> Template[Load Comprehensive<br>Reflection Template]
    Template --> SysReview[Conduct System<br>Review]
    SysReview --> ArchReview[Review Architecture<br>Decisions]
    ArchReview --> ImplementReview[Review Implementation<br>Approach]
    ImplementReview --> SuccessAnalysis[Document Successes<br>and Achievements]
    SuccessAnalysis --> ChallengeAnalysis[Document Challenges<br>and Solutions]
    ChallengeAnalysis --> Technical[Extract Technical<br>Insights]
    Technical --> Process[Extract Process<br>Insights]
    Process --> Business[Extract Business<br>Insights]
    Business --> Strategic[Define Strategic<br>Actions]
    Strategic --> Timeline[Analyze Timeline<br>Performance]
    Timeline --> Documentation[Complete Reflection<br>Documentation]
    Documentation --> Integration[Integrate with<br>Graph Bank]
    Integration --> Verification{Reflection<br>Verification}
    Verification -->|Pass| Complete([Reflection<br>Complete])
    Verification -->|Fail| Revise[Revise<br>Reflection]
    Revise --> Verification
    
    Template -.-> RT((Reflection<br>Template))
    SysReview -.-> SR((System<br>Review))
    SuccessAnalysis & ChallengeAnalysis -.-> SCD((Success/Challenge<br>Document))
    Technical & Process & Business -.-> Insights((Insight<br>Document))
    Strategic -.-> Actions((Strategic<br>Actions))
    
    class Start,Complete milestone
    class Template,SysReview,ArchReview,ImplementReview,SuccessAnalysis,ChallengeAnalysis,Technical,Process,Business,Strategic,Timeline,Documentation,Integration step
    class Verification verification
    class RT,SR,SCD,Insights,Actions artifact
```

## ğŸ“‹ REFLECTION TEMPLATE STRUCTURE

### 1. System Overview

```markdown
## System Overview

### System Description
[Comprehensive description of the implemented system, including purpose, scope, and key features]

### System Context
[Description of how the system fits into the broader technical and business ecosystem]

### Key Components
- Component 1: [Description and purpose]
- Component 2: [Description and purpose]
- Component 3: [Description and purpose]

### System Architecture
[Summary of the architectural approach, key patterns, and design decisions]

### System Boundaries
[Description of system boundaries, interfaces, and integration points]

### Implementation Summary
[Overview of the implementation approach, technologies, and methods used]
```

### 2. Project Performance Analysis

```markdown
## Project Performance Analysis

### Timeline Performance
- **Planned Duration**: [X] weeks/months
- **Actual Duration**: [Y] weeks/months
- **Variance**: [+/-Z] weeks/months ([P]%)
- **Explanation**: [Analysis of timeline variances]

### Resource Utilization
- **Planned Resources**: [X] person-months
- **Actual Resources**: [Y] person-months
- **Variance**: [+/-Z] person-months ([P]%)
- **Explanation**: [Analysis of resource variances]

### Quality Metrics
- **Planned Quality Targets**: [List of quality targets]
- **Achieved Quality Results**: [List of achieved quality results]
- **Variance Analysis**: [Analysis of quality variances]

### Risk Management Effectiveness
- **Identified Risks**: [Number of risks identified]
- **Risks Materialized**: [Number and percentage of risks that occurred]
- **Mitigation Effectiveness**: [Effectiveness of risk mitigation strategies]
- **Unforeseen Risks**: [Description of unforeseen risks that emerged]
```

### 3. Achievements and Successes

```markdown
## Achievements and Successes

### Key Achievements
1. **Achievement 1**: [Description]
   - **Evidence**: [Concrete evidence of success]
   - **Impact**: [Business/technical impact]
   - **Contributing Factors**: [What enabled this success]

2. **Achievement 2**: [Description]
   - **Evidence**: [Concrete evidence of success]
   - **Impact**: [Business/technical impact]
   - **Contributing Factors**: [What enabled this success]

### Technical Successes
- **Success 1**: [Description of technical success]
  - **Approach Used**: [Description of approach]
  - **Outcome**: [Results achieved]
  - **Reusability**: [How this can be reused]

- **Success 2**: [Description of technical success]
  - **Approach Used**: [Description of approach]
  - **Outcome**: [Results achieved]
  - **Reusability**: [How this can be reused]

### Process Successes
- **Success 1**: [Description of process success]
  - **Approach Used**: [Description of approach]
  - **Outcome**: [Results achieved]
  - **Reusability**: [How this can be reused]

### Team Successes
- **Success 1**: [Description of team success]
  - **Approach Used**: [Description of approach]
  - **Outcome**: [Results achieved]
  - **Reusability**: [How this can be reused]
```

### 4. Challenges and Solutions

```markdown
## Challenges and Solutions

### Key Challenges
1. **Challenge 1**: [Description]
   - **Impact**: [Business/technical impact]
   - **Resolution Approach**: [How it was addressed]
   - **Outcome**: [Final result]
   - **Preventative Measures**: [How to prevent in future]

2. **Challenge 2**: [Description]
   - **Impact**: [Business/technical impact]
   - **Resolution Approach**: [How it was addressed]
   - **Outcome**: [Final result]
   - **Preventative Measures**: [How to prevent in future]

### Technical Challenges
- **Challenge 1**: [Description of technical challenge]
  - **Root Cause**: [Analysis of root cause]
  - **Solution**: [How it was solved]
  - **Alternative Approaches**: [Other approaches considered]
  - **Lessons Learned**: [Key takeaways]

- **Challenge 2**: [Description of technical challenge]
  - **Root Cause**: [Analysis of root cause]
  - **Solution**: [How it was solved]
  - **Alternative Approaches**: [Other approaches considered]
  - **Lessons Learned**: [Key takeaways]

### Process Challenges
- **Challenge 1**: [Description of process challenge]
  - **Root Cause**: [Analysis of root cause]
  - **Solution**: [How it was solved]
  - **Process Improvements**: [Improvements made or suggested]

### Unresolved Issues
- **Issue 1**: [Description of unresolved issue]
  - **Current Status**: [Status]
  - **Proposed Path Forward**: [Suggested next steps]
  - **Required Resources**: [What's needed to resolve]
```

### 5. Technical Insights

```markdown
## Technical Insights

### Architecture Insights
- **Insight 1**: [Description of architectural insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested changes or actions]

- **Insight 2**: [Description of architectural insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested changes or actions]

### Implementation Insights
- **Insight 1**: [Description of implementation insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested changes or actions]

### Technology Stack Insights
- **Insight 1**: [Description of technology stack insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested changes or actions]

### Performance Insights
- **Insight 1**: [Description of performance insight]
  - **Context**: [When/where this was observed]
  - **Metrics**: [Relevant performance metrics]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested optimizations]

### Security Insights
- **Insight 1**: [Description of security insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested security improvements]
```

### 6. Process Insights

```markdown
## Process Insights

### Planning Insights
- **Insight 1**: [Description of planning process insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested process improvements]

### Development Process Insights
- **Insight 1**: [Description of development process insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested process improvements]

### Testing Insights
- **Insight 1**: [Description of testing process insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested process improvements]

### Collaboration Insights
- **Insight 1**: [Description of collaboration insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested collaboration improvements]

### Documentation Insights
- **Insight 1**: [Description of documentation insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for future work]
  - **Recommendations**: [Suggested documentation improvements]
```

### 7. Business Insights

```markdown
## Business Insights

### Value Delivery Insights
- **Insight 1**: [Description of value delivery insight]
  - **Context**: [When/where this was observed]
  - **Business Impact**: [Impact on business outcomes]
  - **Recommendations**: [Suggested improvements]

### Stakeholder Insights
- **Insight 1**: [Description of stakeholder insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for stakeholder management]
  - **Recommendations**: [Suggested improvements]

### Market/User Insights
- **Insight 1**: [Description of market/user insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for product direction]
  - **Recommendations**: [Suggested improvements]

### Business Process Insights
- **Insight 1**: [Description of business process insight]
  - **Context**: [When/where this was observed]
  - **Implications**: [What this means for business processes]
  - **Recommendations**: [Suggested improvements]
```

### 8. Strategic Actions

```markdown
## Strategic Actions

### Immediate Actions
- **Action 1**: [Description of immediate action]
  - **Owner**: [Person responsible]
  - **Timeline**: [Expected completion date]
  - **Success Criteria**: [How to measure success]
  - **Resources Required**: [What's needed]
  - **Priority**: [High/Medium/Low]

- **Action 2**: [Description of immediate action]
  - **Owner**: [Person responsible]
  - **Timeline**: [Expected completion date]
  - **Success Criteria**: [How to measure success]
  - **Resources Required**: [What's needed]
  - **Priority**: [High/Medium/Low]

### Short-Term Improvements (1-3 months)
- **Improvement 1**: [Description of short-term improvement]
  - **Owner**: [Person responsible]
  - **Timeline**: [Expected completion date]
  - **Success Criteria**: [How to measure success]
  - **Resources Required**: [What's needed]
  - **Priority**: [High/Medium/Low]

### Medium-Term Initiatives (3-6 months)
- **Initiative 1**: [Description of medium-term initiative]
  - **Owner**: [Person responsible]
  - **Timeline**: [Expected completion date]
  - **Success Criteria**: [How to measure success]
  - **Resources Required**: [What's needed]
  - **Priority**: [High/Medium/Low]

### Long-Term Strategic Directions (6+ months)
- **Direction 1**: [Description of long-term strategic direction]
  - **Business Alignment**: [How this aligns with business strategy]
  - **Expected Impact**: [Anticipated outcomes]
  - **Key Milestones**: [Major checkpoints]
  - **Success Criteria**: [How to measure success]
```

### 9. Knowledge Transfer

```markdown
## Knowledge Transfer

### Key Learnings for Organization
- **Learning 1**: [Description of key organizational learning]
  - **Context**: [When/where this was learned]
  - **Applicability**: [Where this can be applied]
  - **Suggested Communication**: [How to share this]

### Technical Knowledge Transfer
- **Technical Knowledge 1**: [Description of technical knowledge]
  - **Audience**: [Who needs this knowledge]
  - **Transfer Method**: [How to transfer]
  - **Documentation**: [Where documented]

### Process Knowledge Transfer
- **Process Knowledge 1**: [Description of process knowledge]
  - **Audience**: [Who needs this knowledge]
  - **Transfer Method**: [How to transfer]
  - **Documentation**: [Where documented]

### Documentation Updates
- **Document 1**: [Name of document to update]
  - **Required Updates**: [What needs to be updated]
  - **Owner**: [Person responsible]
  - **Timeline**: [When it will be updated]
```

### 10. Reflection Summary

```markdown
## Reflection Summary

### Key Takeaways
- **Takeaway 1**: [Description of key takeaway]
- **Takeaway 2**: [Description of key takeaway]
- **Takeaway 3**: [Description of key takeaway]

### Success Patterns to Replicate
1. [Pattern 1 description]
2. [Pattern 2 description]
3. [Pattern 3 description]

### Issues to Avoid in Future
1. [Issue 1 description]
2. [Issue 2 description]
3. [Issue 3 description]

### Overall Assessment
[Comprehensive assessment of the project's success, challenges, and strategic value]

### Next Steps
[Clear description of immediate next steps following this reflection]
```

## ğŸ“‹ REFLECTION PROCESS

### 1. Preparation

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    Start([Begin Reflection<br>Preparation]) --> Template[Load Reflection<br>Template]
    Template --> Data[Gather Project<br>Data]
    Data --> Metrics[Collect Performance<br>Metrics]
    Metrics --> Feedback[Gather Stakeholder<br>Feedback]
    Feedback --> Schedule[Schedule Reflection<br>Session]
    Schedule --> Participants[Identify<br>Participants]
    Participants --> Agenda[Create Session<br>Agenda]
    Agenda --> Complete([Preparation<br>Complete])
    
    Template -.-> TDoc((Reflection<br>Template))
    Data -.-> ProjData((Project<br>Data))
    Metrics -.-> MetricsDoc((Performance<br>Metrics))
    Feedback -.-> FeedbackDoc((Stakeholder<br>Feedback))
    
    class Start,Complete milestone
    class Template,Data,Metrics,Feedback,Schedule,Participants,Agenda step
    class TDoc,ProjData,MetricsDoc,FeedbackDoc artifact
```

**Key Preparation Steps:**
1. Load the comprehensive reflection template
2. Gather project data (tasks.md, documentation, artifacts)
3. Collect performance metrics (timeline, resource utilization, quality)
4. Gather stakeholder feedback (internal and external)
5. Schedule reflection session(s) with key participants
6. Prepare session agenda and pre-work materials

### 2. Conducting the Reflection Session

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    Start([Begin Reflection<br>Session]) --> Intro[Introduction and<br>Context Setting]
    Intro --> Project[Project Overview<br>Presentation]
    Project --> Success[Success<br>Identification]
    Success --> Challenge[Challenge<br>Identification]
    Challenge --> Root[Root Cause<br>Analysis]
    Root --> Insights[Insight<br>Generation]
    Insights --> Actions[Action<br>Planning]
    Actions --> Documentation[Document<br>Outcomes]
    Documentation --> Next[Define Next<br>Steps]
    Next --> Complete([Session<br>Complete])
    
    Success -.-> SuccessDoc((Success<br>Document))
    Challenge -.-> ChallengeDoc((Challenge<br>Document))
    Insights -.-> InsightDoc((Insight<br>Document))
    Actions -.-> ActionDoc((Action<br>Plan))
    
    class Start,Complete milestone
    class Intro,Project,Success,Challenge,Root,Insights,Actions,Documentation,Next step
    class SuccessDoc,ChallengeDoc,InsightDoc,ActionDoc artifact
```

**Session Format:**
- **Duration**: 2-4 hours (may be split across multiple sessions)
- **Participants**: Project team, key stakeholders, technical leads
- **Facilitation**: Neutral facilitator to guide the process
- **Documentation**: Dedicated scribe to capture insights and actions

### 3. Documentation and Integration

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Documentation<br>and Integration]) --> Draft[Draft Reflection<br>Document]
    Draft --> Review[Review with<br>Key Stakeholders]
    Review --> Revise[Incorporate<br>Feedback]
    Revise --> Finalize[Finalize<br>Document]
    Finalize --> UpdateMB[Update Graph<br>Bank]
    UpdateMB --> ActionReg[Create Action<br>Register]
    ActionReg --> Archive[Archive Project<br>Documents]
    Archive --> Verification{Documentation<br>Verification}
    Verification -->|Pass| Complete([Documentation<br>Complete])
    Verification -->|Fail| MoreRevision[Address<br>Documentation Gaps]
    MoreRevision --> Verification
    
    Draft -.-> DraftDoc((Draft<br>Document))
    Finalize -.-> FinalDoc((Final<br>Reflection))
    ActionReg -.-> ActReg((Action<br>Register))
    
    class Start,Complete milestone
    class Draft,Review,Revise,Finalize,UpdateMB,ActionReg,Archive,MoreRevision step
    class Verification verification
    class DraftDoc,FinalDoc,ActReg artifact
```

**Key Documentation Steps:**
1. Draft comprehensive reflection document using the template
2. Review draft with key stakeholders and participants
3. Incorporate feedback and finalize document
4. Update Graph Bank with key insights and learnings
5. Create action register for tracking improvement actions
6. Archive project documents with reflection document
7. Verify documentation completeness and quality

## ğŸ“‹ REFLECTION TECHNIQUES

### Root Cause Analysis

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Start([Identify<br>Challenge]) --> What[What<br>Happened?]
    What --> When[When Did<br>It Happen?]
    When --> Where[Where Did<br>It Happen?]
    Where --> Who[Who Was<br>Involved?]
    Who --> How[How Did<br>It Happen?]
    How --> Why1[Why Did<br>It Happen?]
    Why1 --> Why2[Why?<br>Deeper]
    Why2 --> Why3[Why?<br>Deeper]
    Why3 --> Why4[Why?<br>Deeper]
    Why4 --> Why5[Why?<br>Root Cause]
    Why5 --> Solution[Identify<br>Solution]
    Solution --> Prevent[Prevention<br>Strategy]
    
    class Start milestone
    class What,When,Where,Who,How,Why1,Why2,Why3,Why4,Why5,Solution,Prevent step
```

### Success Analysis

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Start([Identify<br>Success]) --> Define[Define the<br>Success]
    Define --> Impact[Measure the<br>Impact]
    Impact --> Factors[Identify Contributing<br>Factors]
    Factors --> Context[Consider<br>Context]
    Context --> Patterns[Identify<br>Patterns]
    Patterns --> Generalize[Generalize<br>Approach]
    Generalize --> Apply[Define Where<br>to Apply]
    
    class Start milestone
    class Define,Impact,Factors,Context,Patterns,Generalize,Apply step
```

### Insight Generation

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Start([Begin Insight<br>Generation]) --> Observe[Observe<br>Patterns]
    Observe --> Question[Question<br>Assumptions]
    Question --> Connect[Connect<br>Dots]
    Connect --> Contrast[Contrast with<br>Prior Knowledge]
    Contrast --> Hypothesize[Form<br>Hypothesis]
    Hypothesize --> Test[Test<br>Hypothesis]
    Test --> Refine[Refine<br>Insight]
    Refine --> Apply[Apply to<br>Future Work]
    
    class Start milestone
    class Observe,Question,Connect,Contrast,Hypothesize,Test,Refine,Apply step
```

## ğŸ“‹ GRAPH BANK INTEGRATION

```mermaid
flowchart TD
    classDef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Reflection[Comprehensive<br>Reflection] --> PB[projectbrief.md]
    Reflection --> PC[productContext.md]
    Reflection --> AC[activeContext.md]
    Reflection --> SP[systemPatterns.md]
    Reflection --> TC[techContext.md]
    Reflection --> P[progress.md]
    
    PB & PC & AC & SP & TC & P --> MBI[Graph Bank<br>Integration]
    MBI --> Next[Enhanced Future<br>Projects]
    
    class PB,PC,AC,SP,TC,P memfile
    class Reflection,MBI,Next process
```

### Graph Bank Updates

Specific updates to make to Graph Bank files:

1. **projectbrief.md**
   - Update with strategic insights
   - Document key achievements
   - Incorporate lessons learned

2. **productContext.md**
   - Update with business insights
   - Document market/user insights
   - Include value delivery insights

3. **activeContext.md**
   - Update with current status
   - Document action items
   - Include next steps

4. **systemPatterns.md**
   - Update with architectural insights
   - Document successful patterns
   - Include technical knowledge

5. **techContext.md**
   - Update with implementation insights
   - Document technology stack insights
   - Include performance and security insights

6. **progress.md**
   - Update with final status
   - Document achievements
   - Include project metrics

## ğŸ“‹ REFLECTION VERIFICATION CHECKLIST

```
âœ“ REFLECTION VERIFICATION CHECKLIST

System Review
- System overview complete and accurate? [YES/NO]
- Project performance metrics collected and analyzed? [YES/NO]
- System boundaries and interfaces described? [YES/NO]

Success and Challenge Analysis
- Key achievements documented with evidence? [YES/NO]
- Technical successes documented with approach? [YES/NO]
- Key challenges documented with resolutions? [YES/NO]
- Technical challenges documented with solutions? [YES/NO]
- Unresolved issues documented with path forward? [YES/NO]

Insight Generation
- Technical insights extracted and documented? [YES/NO]
- Process insights extracted and documented? [YES/NO]
- Business insights extracted and documented? [YES/NO]

Strategic Planning
- Immediate actions defined with owners? [YES/NO]
- Short-term improvements identified? [YES/NO]
- Medium-term initiatives planned? [YES/NO]
- Long-term strategic directions outlined? [YES/NO]

Knowledge Transfer
- Key learnings for organization documented? [YES/NO]
- Technical knowledge transfer planned? [YES/NO]
- Process knowledge transfer planned? [YES/NO]
- Documentation updates identified? [YES/NO]

Graph Bank Integration
- projectbrief.md updated with insights? [YES/NO]
- productContext.md updated with insights? [YES/NO]
- activeContext.md updated with insights? [YES/NO]
- systemPatterns.md updated with insights? [YES/NO]
- techContext.md updated with insights? [YES/NO]
- progress.md updated with final status? [YES/NO]
```

## ğŸ“‹ MINIMAL MODE REFLECTION FORMAT

For situations requiring a more compact reflection:

```markdown
## Level 4 Task Reflection: [System Name]

### System Summary
- **Purpose**: [Brief description of system purpose]
- **Key Components**: [List of key components]
- **Architecture**: [Brief architecture description]

### Performance Summary
- **Timeline**: [Planned] vs [Actual] ([Variance])
- **Resources**: [Planned] vs [Actual] ([Variance])
- **Quality**: [Summary of quality achievements]

### Key Successes
1. [Success 1 with evidence and impact]
2. [Success 2 with evidence and impact]
3. [Success 3 with evidence and impact]

### Key Challenges
1. [Challenge 1 with resolution and lessons]
2. [Challenge 2 with resolution and lessons]
3. [Challenge 3 with resolution and lessons]

### Critical Insights
- **Technical**: [Key technical insight with recommendation]
- **Process**: [Key process insight with recommendation]
- **Business**: [Key business insight with recommendation]

### Priority Actions
1. [Immediate action with owner and timeline]
2. [Short-term improvement with owner and timeline]
3. [Medium-term initiative with owner and timeline]

### Graph Bank Updates
- [List of specific Graph Bank updates needed]
```

## ğŸš¨ REFLECTION ENFORCEMENT PRINCIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPREHENSIVE REFLECTION IS MANDATORY for Level 4    â”‚
â”‚ tasks. Archiving CANNOT proceed until reflection     â”‚
â”‚ is completed and verified.                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level4/task-tracking-advanced.mdc
`````
---
description: Advanced task tracking for Level 4 Complex System tasks
globs: "**/level4/**", "**/task-tracking/**"
alwaysApply: false
---

# ADVANCED TASK TRACKING FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a comprehensive task tracking approach for Level 4 (Complex System) tasks, ensuring detailed tracking of complex, multi-phase work with clear dependencies, progress tracking, and architectural alignment.

## ğŸ” ADVANCED TASK TRACKING OVERVIEW

Level 4 Complex System tasks require sophisticated task tracking to manage the complexity of system development, coordinate multiple team members, track dependencies, and ensure alignment with architectural principles. This document outlines a comprehensive task tracking approach for such complex endeavors.

```mermaid
flowchart TD
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Task<br>Tracking]) --> Framework[Establish Task<br>Framework]
    Framework --> Hierarchy[Define Task<br>Hierarchy]
    Hierarchy --> Breakdown[Create Work<br>Breakdown Structure]
    Breakdown --> Dependencies[Document<br>Dependencies]
    Dependencies --> Milestones[Define Key<br>Milestones]
    Milestones --> Schedule[Create<br>Schedule]
    Schedule --> Resources[Define Resource<br>Allocation]
    Resources --> Risks[Document<br>Risks]
    Risks --> Quality[Define Quality<br>Metrics]
    Quality --> Progress[Track<br>Progress]
    Progress --> Adaptations[Document<br>Adaptations]
    Adaptations --> Verification{Task Tracking<br>Verification}
    Verification -->|Pass| Complete([Task Tracking<br>Complete])
    Verification -->|Fail| Revise[Revise Task<br>Tracking]
    Revise --> Verification
    
    Framework -.-> TF((Task<br>Framework))
    Hierarchy -.-> TH((Task<br>Hierarchy))
    Breakdown -.-> WBS((Work Breakdown<br>Structure))
    Dependencies -.-> DP((Dependency<br>Matrix))
    Milestones -.-> MS((Milestone<br>Document))
    Schedule -.-> SC((Schedule<br>Document))
    Resources -.-> RA((Resource<br>Allocation))
    Risks -.-> RM((Risk<br>Management))
    Quality -.-> QM((Quality<br>Metrics))
    Progress -.-> PT((Progress<br>Tracking))
    Adaptations -.-> AD((Adaptation<br>Document))
    
    class Start,Complete milestone
    class Framework,Hierarchy,Breakdown,Dependencies,Milestones,Schedule,Resources,Risks,Quality,Progress,Adaptations,Revise step
    class Verification verification
    class TF,TH,WBS,DP,MS,SC,RA,RM,QM,PT,AD artifact
```

## ğŸ“‹ TASK TRACKING PRINCIPLES

1. **Architectural Alignment**: All tasks must align with the established architectural principles and patterns.
2. **Hierarchical Organization**: Tasks are organized in a hierarchical structure with clear parent-child relationships.
3. **Dependency Management**: All task dependencies are explicitly documented and tracked.
4. **Progression Transparency**: Task status and progress are clearly documented and visible to all stakeholders.
5. **Quality Integration**: Quality metrics and verification are integrated into task definitions.
6. **Resource Allocation**: Tasks include clear allocation of resources required for completion.
7. **Risk Awareness**: Each significant task includes risk assessment and mitigation strategies.
8. **Adaptive Planning**: Task tracking accommodates changes and adaptations while maintaining system integrity.
9. **Milestone Tracking**: Clear milestones are defined and used to track overall progress.
10. **Comprehensive Documentation**: All aspects of the task lifecycle are documented thoroughly.

## ğŸ“‹ TASK HIERARCHY STRUCTURE

Level 4 tasks follow a hierarchical structure:

```mermaid
flowchart TD
    classDef system fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef component fill:#a8d5ff,stroke:#88b5e0,color:#000
    classDef feature fill:#c5e8b7,stroke:#a5c897,color:#000
    classDef task fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef subtask fill:#d8c1f7,stroke:#b8a1d7,color:#000
    
    System[System-Level Work] --> Component1[Component 1]
    System --> Component2[Component 2]
    System --> Component3[Component 3]
    
    Component1 --> Feature1[Feature 1.1]
    Component1 --> Feature2[Feature 1.2]
    
    Feature1 --> Task1[Task 1.1.1]
    Feature1 --> Task2[Task 1.1.2]
    
    Task1 --> Subtask1[Subtask 1.1.1.1]
    Task1 --> Subtask2[Subtask 1.1.1.2]
    Task1 --> Subtask3[Subtask 1.1.1.3]
    
    class System system
    class Component1,Component2,Component3 component
    class Feature1,Feature2 feature
    class Task1,Task2 task
    class Subtask1,Subtask2,Subtask3 subtask
```

### Levels of Hierarchy:

1. **System Level**: The overall system being built or modified.
2. **Component Level**: Major components or subsystems of the system.
3. **Feature Level**: Specific features within each component.
4. **Task Level**: Concrete tasks required to implement a feature.
5. **Subtask Level**: Detailed subtasks for complex tasks.

## ğŸ“‹ COMPREHENSIVE TASK STRUCTURE

Each Level 4 task in `tasks.md` follows this comprehensive structure:

```markdown
## [SYSTEM-ID]: System Name

### System Overview
- **Purpose**: [Brief description of system purpose]
- **Architectural Alignment**: [How the system aligns with architectural principles]
- **Status**: [Planning/In Progress/Review/Complete]
- **Milestones**: 
  - Milestone 1: [Date] - [Status]
  - Milestone 2: [Date] - [Status]
  - Milestone 3: [Date] - [Status]

### Components
#### [COMP-ID]: Component Name
- **Purpose**: [Brief description of component purpose]
- **Status**: [Planning/In Progress/Review/Complete]
- **Dependencies**: [List of dependencies]
- **Responsible**: [Team or individual responsible]

##### [FEAT-ID]: Feature Name
- **Description**: [Feature description]
- **Status**: [Planning/In Progress/Review/Complete]
- **Priority**: [Critical/High/Medium/Low]
- **Related Requirements**: [List of requirements IDs this feature addresses]
- **Quality Criteria**: [Measurable criteria for completion]
- **Progress**: [0-100%]

###### [TASK-ID]: Task Name
- **Description**: [Task description]
- **Status**: [TODO/In Progress/Review/Done]
- **Assigned To**: [Assignee]
- **Estimated Effort**: [Effort estimate]
- **Actual Effort**: [Actual effort]
- **Dependencies**: [Tasks this depends on]
- **Blocks**: [Tasks blocked by this]
- **Risk Assessment**: [Risk level and description]
- **Quality Gates**: [Quality gates this must pass]
- **Implementation Notes**: [Key implementation notes]

**Subtasks**:
- [ ] [SUB-ID]: [Subtask description] - [Status]
- [ ] [SUB-ID]: [Subtask description] - [Status]
- [ ] [SUB-ID]: [Subtask description] - [Status]

### System-Wide Tasks
- [ ] [SYS-TASK-ID]: [System-wide task description] - [Status]
- [ ] [SYS-TASK-ID]: [System-wide task description] - [Status]

### Risks and Mitigations
- **Risk 1**: [Description] - **Mitigation**: [Mitigation strategy]
- **Risk 2**: [Description] - **Mitigation**: [Mitigation strategy]

### Progress Summary
- **Overall Progress**: [0-100%]
- **Component 1**: [0-100%]
- **Component 2**: [0-100%]
- **Component 3**: [0-100%]

### Latest Updates
- [Date]: [Update description]
- [Date]: [Update description]
```

## ğŸ“‹ TASK TRACKING ORGANIZATION IN TASKS.MD

For Level 4 Complex System tasks, organize `tasks.md` as follows:

```markdown
# TASK TRACKING

## ACTIVE SYSTEMS
- [SYSTEM-ID]: [System Name] - [Status]
- [SYSTEM-ID]: [System Name] - [Status]

## SYSTEM DETAILS

[Detailed task structure for each system as per the template above]

## COMPLETED SYSTEMS
- [SYSTEM-ID]: [System Name] - Completed [Date]
- [SYSTEM-ID]: [System Name] - Completed [Date]

## SYSTEM DEPENDENCIES
```mermaid
graph TD
    System1 --> System2
    System1 --> System3
    System2 --> System4
```

## RISK REGISTER
| Risk ID | Description | Probability | Impact | Mitigation |
|---------|-------------|-------------|--------|------------|
| RISK-01 | [Description] | High/Med/Low | High/Med/Low | [Strategy] |
| RISK-02 | [Description] | High/Med/Low | High/Med/Low | [Strategy] |

## RESOURCE ALLOCATION
| Resource | System | Allocation % | Time Period |
|----------|--------|--------------|------------|
| [Name/Team] | [System-ID] | [%] | [Start-End] |
| [Name/Team] | [System-ID] | [%] | [Start-End] |
```

## ğŸ“‹ DEPENDENCY MANAGEMENT

```mermaid
flowchart TD
    classDef critical fill:#f8707e,stroke:#d85060,color:#000
    classDef high fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef medium fill:#a8d5ff,stroke:#88b5e0,color:#000
    classDef low fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Task1[Task 1] --> Task2[Task 2]
    Task1 --> Task3[Task 3]
    Task2 --> Task4[Task 4]
    Task3 --> Task4
    Task4 --> Task5[Task 5]
    Task4 --> Task6[Task 6]
    Task5 --> Task7[Task 7]
    Task6 --> Task7
    
    class Task1,Task4,Task7 critical
    class Task2,Task5 high
    class Task3 medium
    class Task6 low
```

For complex systems, document dependencies in a dedicated section:

```markdown
## Dependency Matrix

| Task ID | Depends On | Blocks | Type | Status |
|---------|------------|--------|------|--------|
| TASK-01 | - | TASK-02, TASK-03 | Technical | Completed |
| TASK-02 | TASK-01 | TASK-04 | Technical | In Progress |
| TASK-03 | TASK-01 | TASK-04 | Resource | Not Started |
| TASK-04 | TASK-02, TASK-03 | TASK-05, TASK-06 | Technical | Not Started |
```

### Dependency Types:
- **Technical**: One task technically requires another to be completed first
- **Resource**: Tasks compete for the same resources
- **Information**: One task requires information produced by another
- **Architectural**: Tasks have architectural dependencies
- **Temporal**: Tasks must be completed in a specific time sequence

## ğŸ“‹ MILESTONE TRACKING

For Level 4 tasks, track milestones explicitly:

```markdown
## System Milestones

| Milestone ID | Description | Target Date | Actual Date | Status | Deliverables |
|--------------|-------------|-------------|-------------|--------|--------------|
| MILE-01 | Architecture Approved | [Date] | [Date] | Completed | Architecture Document |
| MILE-02 | Component Design Completed | [Date] | - | In Progress | Design Documents |
| MILE-03 | Component 1 Implementation | [Date] | - | Not Started | Code, Tests |
| MILE-04 | Integration Complete | [Date] | - | Not Started | Integrated System |
| MILE-05 | System Testing Complete | [Date] | - | Not Started | Test Reports |
| MILE-06 | Deployment Ready | [Date] | - | Not Started | Deployment Package |
```

## ğŸ“‹ PROGRESS VISUALIZATION

Include visual representations of progress in `tasks.md`:

```markdown
## Progress Visualization

### Overall System Progress
```mermaid
pie title System Progress
    "Completed" : 30
    "In Progress" : 25
    "Not Started" : 45
```

### Component Progress
```mermaid
graph TD
    subgraph Progress
    C1[Component 1: 75%]
    C2[Component 2: 50%]
    C3[Component 3: 20%]
    C4[Component 4: 5%]
    end
```

### Timeline
```mermaid
gantt
    title System Timeline
    dateFormat  YYYY-MM-DD
    
    section Architecture
    Architecture Design    :done, arch, 2023-01-01, 30d
    Architecture Review    :done, arch-rev, after arch, 10d
    
    section Component 1
    Design                 :active, c1-des, after arch-rev, 20d
    Implementation         :c1-imp, after c1-des, 40d
    Testing                :c1-test, after c1-imp, 15d
    
    section Component 2
    Design                 :active, c2-des, after arch-rev, 25d
    Implementation         :c2-imp, after c2-des, 50d
    Testing                :c2-test, after c2-imp, 20d
```
```

## ğŸ“‹ UPDATING TASK STATUS

For Level 4 tasks, status updates include:

1. **Progress Updates**: Update task status and progress percentage
2. **Effort Tracking**: Record actual effort against estimates
3. **Risk Updates**: Update risk assessments and mitigations
4. **Dependency Status**: Update status of dependencies
5. **Milestone Tracking**: Update milestone status
6. **Issue Documentation**: Document issues encountered
7. **Adaptation Documentation**: Document any adaptations to the original plan
8. **Quality Gate Status**: Update status of quality gates

Status update cycle:
- **Daily**: Update task and subtask status
- **Weekly**: Update component status and progress visualization
- **Bi-weekly**: Update system-level progress and milestone status
- **Monthly**: Complete system review including risks and adaptations

## ğŸ“‹ TASK TRACKING VERIFICATION CHECKLIST

```
âœ“ TASK TRACKING VERIFICATION CHECKLIST

Task Structure
- System level work properly defined? [YES/NO]
- Component level tasks identified? [YES/NO]
- Feature level tasks specified? [YES/NO]
- Task level details provided? [YES/NO]
- Subtasks created for complex tasks? [YES/NO]

Task Information
- All tasks have clear descriptions? [YES/NO]
- Status accurately reflected? [YES/NO]
- Proper assignments made? [YES/NO]
- Effort estimates provided? [YES/NO]
- Dependencies documented? [YES/NO]

Progress Tracking
- Overall progress calculated? [YES/NO]
- Component progress updated? [YES/NO]
- Milestone status updated? [YES/NO]
- Progress visualizations current? [YES/NO]
- Latest updates documented? [YES/NO]

Risk Management
- Risks identified and assessed? [YES/NO]
- Mitigation strategies documented? [YES/NO]
- Risk register updated? [YES/NO]
- Impact on schedule assessed? [YES/NO]
- Contingency plans documented? [YES/NO]

Resource Allocation
- Resources allocated to tasks? [YES/NO]
- Resource conflicts identified? [YES/NO]
- Resource allocation optimized? [YES/NO]
- Future resource needs projected? [YES/NO]
- Resource allocation documented? [YES/NO]

Quality Integration
- Quality criteria defined for tasks? [YES/NO]
- Quality gates specified? [YES/NO]
- Verification procedures documented? [YES/NO]
- Quality metrics being tracked? [YES/NO]
- Quality issues documented? [YES/NO]

Architectural Alignment
- Tasks align with architecture? [YES/NO]
- Architectural dependencies tracked? [YES/NO]
- Architectural constraints documented? [YES/NO]
- Architecture evolution tracked? [YES/NO]
- Architectural decisions documented? [YES/NO]
```

## ğŸ“‹ INTEGRATION WITH GRAPH BANK

Level 4 task tracking is tightly integrated with the Graph Bank:

1. **projectbrief.md**: System-level tasks are derived from and linked to the project brief
2. **productContext.md**: Tasks are aligned with business context and objectives
3. **systemPatterns.md**: Tasks respect and implement defined architectural patterns
4. **techContext.md**: Tasks are aligned with the technology stack and constraints
5. **activeContext.md**: Current focus and status from `tasks.md` informs the active context
6. **progress.md**: System progress from `tasks.md` is reflected in overall progress

```mermaid
flowchart TD
    classDef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    TaskTracking[Advanced Task<br>Tracking] --> PB[projectbrief.md]
    TaskTracking --> PC[productContext.md]
    TaskTracking --> AC[activeContext.md]
    TaskTracking --> SP[systemPatterns.md]
    TaskTracking --> TC[techContext.md]
    TaskTracking --> P[progress.md]
    
    P --> TU[Task<br>Updates]
    TU --> TaskTracking
    
    class PB,PC,AC,SP,TC,P memfile
    class TaskTracking,TU process
```

## ğŸ“‹ MINIMAL MODE TASK TRACKING

For situations requiring a more compact tracking approach:

```markdown
## [SYSTEM-ID]: System Name - [Status]

### Key Components:
- [COMP-ID]: [Component Name] - [Status] - [Progress %]
- [COMP-ID]: [Component Name] - [Status] - [Progress %]

### Active Tasks:
- [ ] [TASK-ID]: [Task Description] - [Assignee] - [Status]
  - Dependencies: [List of task IDs]
  - Risks: [Brief risk description]
- [ ] [TASK-ID]: [Task Description] - [Assignee] - [Status]

### Milestones:
- [MILE-ID]: [Milestone description] - [Target Date] - [Status]
- [MILE-ID]: [Milestone description] - [Target Date] - [Status]

### Critical Paths:
- [TASK-ID] â†’ [TASK-ID] â†’ [TASK-ID] â†’ [TASK-ID]
- [TASK-ID] â†’ [TASK-ID] â†’ [TASK-ID]

### Updates:
- [Date]: [Brief update]
```

## ğŸš¨ TASK TRACKING PRIMACY PRINCIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tasks.md is the SINGLE SOURCE OF TRUTH for all task  â”‚
â”‚ tracking. All task-related decisions and status      â”‚
â”‚ updates MUST be reflected in tasks.md.               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Level4/workflow-level4.mdc
`````
---
description: Comprehensive workflow for Level 4 Complex System tasks
globs: "**/level4/**", "**/workflow/**"
alwaysApply: false
---
# COMPREHENSIVE WORKFLOW FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a comprehensive workflow for Level 4 (Complex System) tasks, including 7 key phases with rigorous planning, mandatory creative phases, architectural design, phased implementation, and extensive documentation.

## ğŸ” LEVEL 4 WORKFLOW OVERVIEW

```mermaid
graph LR
    Init["1. INITIALIZATION"] --> Doc["2. DOCUMENTATION<br>SETUP"]
    Doc --> Plan["3. ARCHITECTURAL<br>PLANNING"]
    Plan --> Create["4. CREATIVE<br>PHASES"]
    Create --> Impl["5. PHASED<br>IMPLEMENTATION"]
    Impl --> Reflect["6. REFLECTION"]
    Reflect --> Archive["7. ARCHIVING"]
    
    %% Document connections for each phase
    Init -.-> InitDocs["INITIALIZATION"]
    Doc -.-> DocDocs["DOCUMENTATION"]
    Plan -.-> PlanDocs["ARCHITECTURAL PLANNING"]
    Create -.-> CreateDocs["CREATIVE PHASES"]
    Impl -.-> ImplDocs["PHASED IMPLEMENTATION"]
    Reflect -.-> ReflectDocs["REFLECTION"]
    Archive -.-> ArchiveDocs["ARCHIVING"]
```

## ğŸ”„ LEVEL TRANSITION HANDLING

```mermaid
graph TD
    L4["Level 4 Task"] --> Assess["Continuous<br>Assessment"]
    
    Assess --> Down["Downgrade to<br>Level 2/3"]
    Assess --> Split["Split into<br>Multiple Tasks"]
    
    Down --> L23Trigger["Triggers:<br>- Less complex<br>- Limited scope<br>- Few components"]
    
    Split --> MultiTrigger["Triggers:<br>- Too large<br>- Independent parts<br>- Parallel possible"]
    
    L23Trigger --> L23Switch["Switch to<br>Level 2/3 Workflow"]
    MultiTrigger --> CreateTasks["Create Multiple<br>Lower Level Tasks"]
```

Level 4 tasks involve complex systems that require comprehensive planning, rigorous design, systematic implementation, and thorough documentation. This workflow ensures all aspects are addressed with the appropriate level of detail, structure, and verification.

## ğŸ“‹ WORKFLOW PHASES

### Phase 1: INITIALIZATION

```mermaid
graph TD
    Start["Start Level 4 Task"] --> Platform{"Detect<br>Platform"}
    Platform --> FileCheck["Critical File<br>Verification"]
    FileCheck --> LoadStructure["Comprehensive Graph<br>Bank Structure Loading"]
    LoadStructure --> TaskCreation["Create Detailed<br>Task Framework"]
    TaskCreation --> Context["Establish Enterprise<br>Context"]
    Context --> Resources["Identify and Allocate<br>All Resources"]
    Resources --> SetupComplete["Initialization<br>Complete"]
```

**Steps:**
1. Platform detection with comprehensive environment configuration
2. Critical file verification with in-depth integrity checks
3. Comprehensive Graph Bank structure loading with full reference mapping
4. Create detailed task framework in tasks.md with full structure
5. Establish complete enterprise context and stakeholder requirements
6. Identify and allocate all necessary resources (technical, human, time)
7. Perform system readiness assessment

**Milestone Checkpoint:**
```
âœ“ INITIALIZATION CHECKPOINT
- Platform detected and fully configured? [YES/NO]
- Critical files verified with integrity checks? [YES/NO]
- Graph Bank comprehensively loaded and mapped? [YES/NO]
- Detailed task framework created? [YES/NO]
- Enterprise context established? [YES/NO]
- Stakeholder requirements documented? [YES/NO]
- All resources identified and allocated? [YES/NO]
- System readiness assessed? [YES/NO]

â†’ If all YES: Proceed to Documentation Setup
â†’ If any NO: Complete initialization steps
```

### Phase 2: DOCUMENTATION SETUP

```mermaid
graph TD
    Start["Begin Documentation<br>Setup"] --> LoadTemplate["Load Comprehensive<br>Documentation Templates"]
    LoadTemplate --> Framework["Establish Documentation<br>Framework"]
    Framework --> UpdateProject["Update<br>projectbrief.md"]
    UpdateProject --> UpdateContext["Update<br>activeContext.md"]
    UpdateContext --> SystemPatterns["Update<br>systemPatterns.md"]
    SystemPatterns --> TechContext["Update<br>techContext.md"]
    TechContext --> Standards["Document System<br>Standards"]
    Standards --> Architecture["Document Existing<br>Architecture"]
    Architecture --> SetupComplete["Documentation<br>Setup Complete"]
```

**Steps:**
1. Load comprehensive documentation templates for all aspects
2. Establish complete documentation framework with structure
3. Update projectbrief.md with detailed system description and requirements
4. Update activeContext.md with current focus, dependencies, and stakeholders
5. Update systemPatterns.md with comprehensive patterns and principles
6. Update techContext.md with complete technical landscape
7. Document system standards, constraints, and conventions
8. Document existing architecture and integration points

**Milestone Checkpoint:**
```
âœ“ DOCUMENTATION CHECKPOINT
- Documentation templates loaded? [YES/NO]
- Documentation framework established? [YES/NO]
- projectbrief.md comprehensively updated? [YES/NO]
- activeContext.md fully updated? [YES/NO]
- systemPatterns.md comprehensively updated? [YES/NO]
- techContext.md fully updated? [YES/NO]
- System standards documented? [YES/NO]
- Existing architecture documented? [YES/NO]

â†’ If all YES: Proceed to Architectural Planning
â†’ If any NO: Complete documentation setup
```

### Phase 3: ARCHITECTURAL PLANNING

```mermaid
graph TD
    Start["Begin Architectural<br>Planning"] --> Requirements["Analyze Comprehensive<br>Requirements"]
    Requirements --> BusinessContext["Document Business<br>Context"]
    BusinessContext --> VisionDefine["Define Vision<br>and Goals"]
    VisionDefine --> ArchitecturalPrinciples["Establish Architectural<br>Principles"]
    ArchitecturalPrinciples --> Alternatives["Explore Architectural<br>Alternatives"]
    Alternatives --> Evaluation["Perform Detailed<br>Evaluation"]
    Evaluation --> Selection["Make Architecture<br>Selection"]
    Selection --> Documentation["Create Architecture<br>Documentation"]
    Documentation --> Review["Conduct Architecture<br>Review"]
    Review --> PlanComplete["Architectural Planning<br>Complete"]
```

**Steps:**
1. Analyze comprehensive requirements with traceability
2. Document complete business context and constraints
3. Define clear vision and goals with measurable objectives
4. Establish architectural principles and non-functional requirements
5. Explore multiple architectural alternatives with thorough analysis
6. Perform detailed evaluation using weighted criteria
7. Make architecture selection with comprehensive justification
8. Create complete architecture documentation with diagrams
9. Conduct formal architecture review with stakeholders

**Milestone Checkpoint:**
```
âœ“ ARCHITECTURAL PLANNING CHECKPOINT
- Requirements comprehensively analyzed? [YES/NO]
- Business context fully documented? [YES/NO]
- Vision and goals clearly defined? [YES/NO]
- Architectural principles established? [YES/NO]
- Alternatives thoroughly explored? [YES/NO]
- Detailed evaluation performed? [YES/NO]
- Architecture selection justified? [YES/NO]
- Architecture documentation complete? [YES/NO]
- Architecture review conducted? [YES/NO]

â†’ If all YES: Proceed to Creative Phases
â†’ If any NO: Complete architectural planning
```

### Phase 4: CREATIVE PHASES

```mermaid
graph TD
    Start["Begin Creative<br>Phases"] --> IdentifyNeeds["Identify Creative<br>Phase Needs"]
    IdentifyNeeds --> Architecture["Architecture<br>Design Phase"]
    Architecture --> Algorithm["Algorithm<br>Design Phase"]
    Algorithm --> UIUX["UI/UX<br>Design Phase"]
    UIUX --> Integration["Integration<br>Design Phase"]
    Integration --> Security["Security<br>Design Phase"]
    Security --> Performance["Performance<br>Design Phase"]
    Performance --> Resilience["Resilience<br>Design Phase"]
    Resilience --> Documentation["Comprehensive<br>Design Documentation"]
    Documentation --> Review["Design<br>Review"]
    Review --> CreativeComplete["Creative Phases<br>Complete"]
```

**Steps:**
1. Identify all required creative phases based on system needs
2. Execute comprehensive Architecture Design with patterns and principles
3. Conduct thorough Algorithm Design for all complex processes
4. Perform detailed UI/UX Design with user research and testing
5. Create Integration Design for all system interfaces
6. Develop Security Design with threat modeling
7. Design for Performance with capacity planning
8. Plan for Resilience with failure modes and recovery
9. Create comprehensive design documentation for all aspects
10. Conduct formal design review with stakeholders

**Milestone Checkpoint:**
```
âœ“ CREATIVE PHASES CHECKPOINT
- All required creative phases identified? [YES/NO]
- Architecture design completed with patterns? [YES/NO]
- Algorithm design conducted for complex processes? [YES/NO]
- UI/UX design performed with user research? [YES/NO]
- Integration design created for interfaces? [YES/NO]
- Security design developed with threat modeling? [YES/NO]
- Performance design completed with capacity planning? [YES/NO]
- Resilience design planned with failure modes? [YES/NO]
- Comprehensive design documentation created? [YES/NO]
- Formal design review conducted? [YES/NO]

â†’ If all YES: Proceed to Phased Implementation
â†’ If any NO: Complete creative phases
```

### Phase 5: PHASED IMPLEMENTATION

```mermaid
graph TD
    Start["Begin Phased<br>Implementation"] --> PrepEnv["Prepare Comprehensive<br>Implementation Environment"]
    PrepEnv --> Framework["Establish Implementation<br>Framework"]
    Framework --> RoadmapDefine["Define Implementation<br>Roadmap"]
    RoadmapDefine --> PhaseImplementation["Implement<br>Sequential Phases"]
    PhaseImplementation --> PhaseVerification["Verify Each<br>Phase"]
    PhaseVerification --> Integration["Perform Integration<br>Testing"]
    Integration --> SystemTest["Conduct System<br>Testing"]
    SystemTest --> UAT["User Acceptance<br>Testing"]
    UAT --> Stabilization["System<br>Stabilization"]
    Stabilization --> ImplComplete["Implementation<br>Complete"]
```

**Steps:**
1. Prepare comprehensive implementation environment with all tools
2. Establish implementation framework with standards and processes
3. Define detailed implementation roadmap with phases and dependencies
4. Implement sequential phases with milestone verification
5. Verify each phase against requirements and design
6. Perform comprehensive integration testing across phases
7. Conduct thorough system testing of the complete solution
8. Execute formal user acceptance testing with stakeholders
9. Perform system stabilization and performance tuning
10. Document all implementation details and deployment procedures

**Milestone Checkpoint:**
```
âœ“ PHASED IMPLEMENTATION CHECKPOINT
- Implementation environment fully prepared? [YES/NO]
- Implementation framework established? [YES/NO]
- Detailed roadmap defined with phases? [YES/NO]
- All phases sequentially implemented? [YES/NO]
- Each phase verified against requirements? [YES/NO]
- Comprehensive integration testing performed? [YES/NO]
- Thorough system testing conducted? [YES/NO]
- User acceptance testing executed? [YES/NO]
- System stabilization completed? [YES/NO]
- Implementation details documented? [YES/NO]

â†’ If all YES: Proceed to Reflection
â†’ If any NO: Complete implementation steps
```

### Phase 6: REFLECTION

```mermaid
graph TD
    Start["Begin<br>Reflection"] --> Template["Load Comprehensive<br>Reflection Template"]
    Template --> SystemReview["Complete System<br>Review"]
    SystemReview --> Process["Analyze Process<br>Effectiveness"]
    Process --> Success["Document Successes<br>with Evidence"]
    Success --> Challenges["Document Challenges<br>with Solutions"]
    Challenges --> TechnicalInsights["Extract Strategic<br>Technical Insights"]
    TechnicalInsights --> ProcessInsights["Extract Process<br>Improvement Insights"]
    ProcessInsights --> BusinessInsights["Document Business<br>Impact"]
    BusinessInsights --> StrategicActions["Define Strategic<br>Action Items"]
    StrategicActions --> ReflectComplete["Reflection<br>Complete"]
```

**Steps:**
1. Load comprehensive reflection template with all sections
2. Conduct complete system review against original goals
3. Analyze process effectiveness with metrics
4. Document successes with concrete evidence and impact
5. Document challenges with implemented solutions and lessons
6. Extract strategic technical insights for enterprise knowledge
7. Extract process improvement insights for future projects
8. Document business impact and value delivered
9. Define strategic action items with prioritization
10. Create comprehensive reflection documentation

**Milestone Checkpoint:**
```
âœ“ REFLECTION CHECKPOINT
- Comprehensive reflection template loaded? [YES/NO]
- Complete system review conducted? [YES/NO]
- Process effectiveness analyzed? [YES/NO]
- Successes documented with evidence? [YES/NO]
- Challenges documented with solutions? [YES/NO]
- Strategic technical insights extracted? [YES/NO]
- Process improvement insights extracted? [YES/NO]
- Business impact documented? [YES/NO]
- Strategic action items defined? [YES/NO]
- Comprehensive reflection documentation created? [YES/NO]

â†’ If all YES: Proceed to Archiving
â†’ If any NO: Complete reflection steps
```

### Phase 7: ARCHIVING

```mermaid
graph TD
    Start["Begin<br>Archiving"] --> Template["Load Comprehensive<br>Archive Template"]
    Template --> SystemDoc["Create System<br>Documentation"]
    SystemDoc --> Architecture["Document Final<br>Architecture"]
    Architecture --> Design["Compile Design<br>Decisions"]
    Design --> Implementation["Document Implementation<br>Details"]
    Implementation --> Testing["Compile Testing<br>Documentation"]
    Testing --> Deployment["Create Deployment<br>Documentation"]
    Deployment --> Maintenance["Prepare Maintenance<br>Guide"]
    Maintenance --> Knowledge["Transfer Knowledge<br>to Stakeholders"]
    Knowledge --> Archive["Create Comprehensive<br>Archive Package"]
    Archive --> ArchiveComplete["Archiving<br>Complete"]
```

**Steps:**
1. Load comprehensive archive template with all sections
2. Create complete system documentation with all aspects
3. Document final architecture with diagrams and rationales
4. Compile all design decisions with justifications
5. Document all implementation details with technical specifics
6. Compile comprehensive testing documentation with results
7. Create detailed deployment documentation with procedures
8. Prepare maintenance guide with operational procedures
9. Transfer knowledge to all stakeholders with training
10. Create comprehensive archive package with all artifacts

**Milestone Checkpoint:**
```
âœ“ ARCHIVING CHECKPOINT
- Comprehensive archive template loaded? [YES/NO]
- Complete system documentation created? [YES/NO]
- Final architecture documented? [YES/NO]
- Design decisions compiled? [YES/NO]
- Implementation details documented? [YES/NO]
- Testing documentation compiled? [YES/NO]
- Deployment documentation created? [YES/NO]
- Maintenance guide prepared? [YES/NO]
- Knowledge transferred to stakeholders? [YES/NO]
- Comprehensive archive package created? [YES/NO]

â†’ If all YES: Task Complete
â†’ If any NO: Complete archiving steps
```

## ğŸ“‹ WORKFLOW VERIFICATION CHECKLIST

```
âœ“ FINAL WORKFLOW VERIFICATION
- All 7 phases completed? [YES/NO]
- All milestone checkpoints passed? [YES/NO]
- Architectural planning properly executed? [YES/NO]
- All required creative phases completed? [YES/NO]
- Implementation performed in proper phases? [YES/NO]
- Comprehensive reflection conducted? [YES/NO]
- Complete system documentation archived? [YES/NO]
- Graph Bank fully updated? [YES/NO]
- Knowledge successfully transferred? [YES/NO]

â†’ If all YES: Level 4 Task Successfully Completed
â†’ If any NO: Address outstanding items
```

## ğŸ“‹ MINIMAL MODE WORKFLOW

For minimal mode, use this streamlined workflow while retaining key elements:

```
1. INIT: Verify environment, create structured task framework, establish context
2. DOCS: Update all Graph Bank documents, document standards and architecture
3. PLAN: Define architecture with principles, alternatives, evaluation, selection
4. CREATE: Execute all required creative phases with documentation
5. IMPL: Implement in phases with verification, integration, testing
6. REFLECT: Document successes, challenges, insights, and strategic actions
7. ARCHIVE: Create comprehensive documentation and knowledge transfer
```

## ğŸ”„ INTEGRATION WITH GRAPH BANK

This workflow integrates comprehensively with Graph Bank:

```mermaid
graph TD
    Workflow["Level 4<br>Workflow"] --> PB["Comprehensive Update<br>projectbrief.md"]
    Workflow --> AC["Detailed Update<br>activeContext.md"]
    Workflow --> SP["Strategic Update<br>systemPatterns.md"]
    Workflow --> TC["Complete Update<br>techContext.md"]
    Workflow --> TM["Structured Maintenance<br>tasks.md"]
    Workflow --> PM["Enterprise Update<br>progress.md"]
    
    PB & AC & SP & TC & TM & PM --> MB["Graph Bank<br>Integration"]
    MB --> KT["Knowledge<br>Transfer"]
    KT --> NextSystem["Enterprise<br>System Evolution"]
```

## ğŸš¨ LEVEL 4 GOVERNANCE PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 4 tasks represent ENTERPRISE-CRITICAL work.   â”‚
â”‚ RIGOROUS governance, comprehensive documentation,   â”‚
â”‚ and thorough verification are MANDATORY at each     â”‚
â”‚ phase. NO EXCEPTIONS.                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that complex systems are designed, implemented, and documented to the highest standards, with enterprise-grade quality and governance.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-complexity-determination.mdc
`````
---
description: Visual process map for VAN mode complexity determination
globs: van-complexity-determination.mdc
alwaysApply: false
---
# VAN MODE: COMPLEXITY DETERMINATION

> **TL;DR:** This component determines the appropriate complexity level (1-4) for the current task and directs the workflow accordingly.

## ğŸ” COMPLEXITY DECISION TREE

```mermaid
graph TD
    Start["New Task"] --> Q1{"Bug fix or<br>error correction?"}
    Q1 -->|Yes| Q1a{"Affects single<br>component?"}
    Q1a -->|Yes| L1["Level 1:<br>Quick Bug Fix"]
    Q1a -->|No| Q1b{"Affects multiple<br>components?"}
    Q1b -->|Yes| L2["Level 2:<br>Simple Enhancement"]
    Q1b -->|No| Q1c{"Affects system<br>architecture?"}
    Q1c -->|Yes| L3["Level 3:<br>Intermediate Feature"]
    Q1c -->|No| L2
    
    Q1 -->|No| Q2{"Adding small<br>feature or<br>enhancement?"}
    Q2 -->|Yes| Q2a{"Self-contained<br>change?"}
    Q2a -->|Yes| L2
    Q2a -->|No| Q2b{"Affects multiple<br>components?"}
    Q2b -->|Yes| L3
    Q2b -->|No| L2
    
    Q2 -->|No| Q3{"Complete feature<br>requiring multiple<br>components?"}
    Q3 -->|Yes| Q3a{"Architectural<br>implications?"}
    Q3a -->|Yes| L4["Level 4:<br>Complex System"]
    Q3a -->|No| L3
    
    Q3 -->|No| Q4{"System-wide or<br>architectural<br>change?"}
    Q4 -->|Yes| L4
    Q4 -->|No| L3

    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style L1 fill:#10b981,stroke:#059669,color:white
    style L2 fill:#f6546a,stroke:#c30052,color:white
    style L3 fill:#f6546a,stroke:#c30052,color:white
    style L4 fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ“‹ LEVEL INDICATORS

### Level 1: Quick Bug Fix
- **Keywords**: fix, bug, error, crash, issue
- **Scope**: Single component
- **Time**: Minutes to hours
- **Risk**: Low, isolated
- **Example**: Button not working, styling issue

### Level 2: Simple Enhancement
- **Keywords**: add, improve, update, enhance
- **Scope**: Single component/subsystem
- **Time**: Hours to 1-2 days
- **Risk**: Moderate, contained
- **Example**: Add form field, improve validation

### Level 3: Intermediate Feature
- **Keywords**: implement, create, develop
- **Scope**: Multiple components
- **Time**: Days to 1-2 weeks
- **Risk**: Significant
- **Example**: User authentication, dashboard

### Level 4: Complex System
- **Keywords**: system, architecture, redesign
- **Scope**: Multiple subsystems
- **Time**: Weeks to months
- **Risk**: High, architectural
- **Example**: Payment system, microservices

## ğŸ“‹ COMPLEXITY CHECKLIST

```
âœ“ COMPLEXITY DETERMINATION
- Task type identified? [YES/NO]
- Scope assessed? [YES/NO]
- Time estimated? [YES/NO]
- Risk evaluated? [YES/NO]
- Dependencies mapped? [YES/NO]

â†’ If all YES: Proceed with level-specific workflow
â†’ If any NO: Complete assessment
```

## ğŸ”„ LEVEL TRANSITION TRIGGERS

```mermaid
graph TD
    Current["Current Level"] --> Higher["Level Up Triggers"]
    Current --> Lower["Level Down Triggers"]
    
    Higher --> H1["Multiple Components"]
    Higher --> H2["Design Decisions"]
    Higher --> H3["System Impact"]
    
    Lower --> L1["Isolated Change"]
    Lower --> L2["Simple Fix"]
    Lower --> L3["No Design Needed"]

    style Current fill:#4da6ff,stroke:#0066cc,color:white
    style Higher fill:#f6546a,stroke:#c30052,color:white
    style Lower fill:#10b981,stroke:#059669,color:white
```

## ğŸ“‹ WORKFLOW LOADING

Based on determined level:
- Level 1: Continue in VAN mode
- Level 2-4: Transition to PLAN mode

**Next Step:** Load appropriate level-specific workflow

## ğŸš¨ MODE TRANSITION TRIGGER (VAN to PLAN)

If complexity is determined to be Level 2, 3, or 4:

```
ğŸš« LEVEL [2-4] TASK DETECTED
Implementation in VAN mode is BLOCKED
This task REQUIRES PLAN mode
You MUST switch to PLAN mode for proper documentation and planning
Type 'PLAN' to switch to planning mode
```

## ğŸ“‹ CHECKPOINT VERIFICATION TEMPLATE (Example)

```
âœ“ SECTION CHECKPOINT: COMPLEXITY DETERMINATION
- Task Analyzed? [YES/NO]
- Complexity Level Determined? [YES/NO]

â†’ If Level 1: Proceed to VAN Mode Completion.
â†’ If Level 2-4: Trigger PLAN Mode transition.
```

**Next Step (Level 1):** Complete VAN Initialization (e.g., initialize Graph Bank if needed).
**Next Step (Level 2-4):** Exit VAN mode and initiate PLAN mode.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-file-verification.mdc
`````
---
description: Visual process map for VAN mode file verification
globs: van-file-verification.mdc
alwaysApply: false
---
# OPTIMIZED FILE VERIFICATION SYSTEM

ğŸš¨ CRITICAL: GRAPH BANK VERIFICATION REQUIRED ğŸš¨
Graph Bank structure MUST exist before any file operations
This check MUST be executed first in all verification processes

> **TL;DR:** This system provides a structured approach to verify file structure integrity before task implementation, with emphasis on efficient checks and clear status reporting.

## ğŸ” FILE VERIFICATION WORKFLOW

```mermaid
graph TD
    %% Critical Graph Bank verification - MUST be first
    Start["Start File Verification"] --> MemBankCheck{"Graph Bank<br>Exists?"}
    MemBankCheck -->|"No"| CreateMemBank["CREATE GRAPH BANK<br>[CRITICAL]"]
    MemBankCheck -->|"Yes"| VerifyMemBankComplete["Verify Graph Bank<br>Structure Complete"]
    CreateMemBank --> VerifyMemBankComplete
    
    VerifyMemBankComplete --> PassCheck{"All Critical<br>Checks Pass?"}
    PassCheck -->|"No"| AbortAll["â›” ABORT ALL OPERATIONS<br>Fix Graph Bank First"]
    PassCheck -->|"Yes"| MainVerification

    %% Regular verification flow continues here
    MainVerification["Start Full<br>File Verification"] --> BatchVerify["Batch Verification<br>Using Patterns"]
    BatchVerify --> BrokenLinks["Check for<br>Broken References"]
    BrokenLinks --> DirectoryStructure["Verify Directory<br>Structure"]
    DirectoryStructure --> Status{"All Verifications<br>Successful?"}
    
    Status -->|"Yes"| Complete["Verification<br>Complete âœ“"]
    Status -->|"No"| Diagnose["Diagnose<br>Issues"]
    Diagnose --> Attempt{"Attempt Auto<br>Resolution?"}
    
    Attempt -->|"Yes"| AutoFix["Auto-Fix<br>Issues"]
    Attempt -->|"No"| ReportIssue["Report Issues to<br>User"]
    
    AutoFix --> Recheck{"Issues<br>Resolved?"}
    Recheck -->|"Yes"| ReportSuccess["Report Success<br>to User"]
    Recheck -->|"No"| ReportIssue
    
    ReportSuccess --> Complete
    ReportIssue --> UserAction["Wait for<br>User Action"]
    UserAction --> ReVerify["Re-Verify<br>After User Action"]
    ReVerify --> Status
    
    style MemBankCheck fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style CreateMemBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style VerifyMemBankComplete fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style PassCheck fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style AbortAll fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style Status fill:#f6546a,stroke:#c30052,color:white
    style Complete fill:#10b981,stroke:#059669,color:white
```

## ğŸ§© GRAPH BANK VERIFICATION - CRITICAL COMPONENT

Graph Bank verification MUST be executed first in any file verification process:

```javascript
function verifyGraphBank() {
  // Check if Graph Bank exists
  const memoryBankExists = checkDirectoryExists("graph-bank");
  if (!memoryBankExists) {
    console.error("â›” CRITICAL ERROR: Graph Bank does not exist");
    createGraphBankStructure();
    return verifyGraphBankCreation();
  }
  
  // Check required subdirectories
  const requiredDirs = [
    "graph-bank/active-context",
    "graph-bank/system-patterns",
    "graph-bank/creative-phase",
    "graph-bank/implementation"
  ];
  
  const missingDirs = requiredDirs.filter(dir => !checkDirectoryExists(dir));
  if (missingDirs.length > 0) {
    console.error(`â›” CRITICAL ERROR: Missing Graph Bank directories: ${missingDirs.join(", ")}`);
    createMissingDirectories(missingDirs);
    return verifyGraphBankCreation();
  }
  
  // Check critical files
  const criticalFiles = [
    "graph-bank/active-context/activeContext.md",
    "graph-bank/system-patterns/systemPatterns.md"
  ];
  
  const missingFiles = criticalFiles.filter(file => !checkFileExists(file));
  if (missingFiles.length > 0) {
    console.error(`â›” CRITICAL ERROR: Missing critical files: ${missingFiles.join(", ")}`);
    createMissingFiles(missingFiles);
    return verifyGraphBankCreation();
  }
  
  return true; // Graph Bank verification successful
}

// MANDATORY: This must be called before any other verification
const memoryBankVerified = verifyGraphBank();
if (!memoryBankVerified) {
  throw new Error("â›” GRAPH BANK VERIFICATION FAILED - CANNOT PROCEED");
}
```

## ğŸ“‹ GRAPH BANK VERIFICATION CHECKLIST

```
âœ“ GRAPH BANK VERIFICATION CHECKLIST
- Graph Bank directory exists? [YES/NO]
- Required subdirectories exist? [YES/NO]
- Critical files exist? [YES/NO]
- File content is valid? [YES/NO]

â†’ If ALL YES: Graph Bank verification passed - Continue file verification
â†’ If ANY NO: STOP ALL PROCESSING and FIX GRAPH BANK
```

## ğŸ” BATCH VERIFICATION WORKFLOW

## ğŸ“‹ OPTIMIZED DIRECTORY CREATION

```mermaid
graph TD
    Start["Directory<br>Creation"] --> DetectOS["Detect Operating<br>System"]
    DetectOS -->|"Windows"| WinCmd["Batch Create<br>Windows Command"]
    DetectOS -->|"Mac/Linux"| UnixCmd["Batch Create<br>Unix Command"]
    WinCmd & UnixCmd --> Verify["Verify<br>Creation Success"]
    Verify --> Complete["Directory Setup<br>Complete"]
```

### Platform-Specific Commands

#### Windows (PowerShell)
```powershell
# Create all directories in one command
mkdir graph-bank, docs, docs\archive -ErrorAction SilentlyContinue

# Create all required files
$files = @(".cursorrules", "tasks.md", 
           "graph-bank\projectbrief.md", 
           "graph-bank\productContext.md",
           "graph-bank\systemPatterns.md",
           "graph-bank\techContext.md",
           "graph-bank\activeContext.md",
           "graph-bank\progress.md")

foreach ($file in $files) {
    if (-not (Test-Path $file)) {
        New-Item -Path $file -ItemType File -Force
    }
}
```

#### Mac/Linux (Bash)
```bash
# Create all directories in one command
mkdir -p graph-bank docs/archive

# Create all required files
touch .cursorrules tasks.md \
      graph-bank/projectbrief.md \
      graph-bank/productContext.md \
      graph-bank/systemPatterns.md \
      graph-bank/techContext.md \
      graph-bank/activeContext.md \
      graph-bank/progress.md
```

## ğŸ“ STREAMLINED VERIFICATION PROCESS

Instead of checking each component separately, perform batch verification:

```powershell
# Windows - PowerShell
$requiredDirs = @("graph-bank", "docs", "docs\archive")
$requiredFiles = @(".cursorrules", "tasks.md")
$mbFiles = @("projectbrief.md", "productContext.md", "systemPatterns.md", 
             "techContext.md", "activeContext.md", "progress.md")

$missingDirs = $requiredDirs | Where-Object { -not (Test-Path $_) -or -not (Test-Path $_ -PathType Container) }
$missingFiles = $requiredFiles | Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }
$missingMBFiles = $mbFiles | ForEach-Object { "graph-bank\$_" } | 
                  Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }

if ($missingDirs.Count -eq 0 -and $missingFiles.Count -eq 0 -and $missingMBFiles.Count -eq 0) {
    Write-Output "âœ“ All required components verified"
} else {
    # Create all missing items at once
    if ($missingDirs.Count -gt 0) {
        $missingDirs | ForEach-Object { mkdir $_ -Force }
    }
    if ($missingFiles.Count -gt 0 -or $missingMBFiles.Count -gt 0) {
        $allMissingFiles = $missingFiles + $missingMBFiles
        $allMissingFiles | ForEach-Object { New-Item -Path $_ -ItemType File -Force }
    }
}
```

## ğŸ“ TEMPLATE INITIALIZATION

Optimize template creation with a single script:

```powershell
# Windows - PowerShell
$templates = @{
    "tasks.md" = @"
# Graph Bank: Tasks

## Current Task
[Task not yet defined]

## Status
- [ ] Task definition
- [ ] Implementation plan
- [ ] Execution
- [ ] Documentation

## Requirements
[No requirements defined yet]
"@

    "graph-bank\activeContext.md" = @"
# Graph Bank: Active Context

## Current Focus
[No active focus defined]

## Status
[No status defined]

## Latest Changes
[No changes recorded]
"@

    # Add other templates here
}

foreach ($file in $templates.Keys) {
    if (Test-Path $file) {
        Set-Content -Path $file -Value $templates[$file]
    }
}
```

## ğŸ” PERFORMANCE OPTIMIZATION BEST PRACTICES

1. **Batch Operations**: Always use batch operations instead of individual commands
   ```
   # GOOD: Create all directories at once
   mkdir graph-bank docs docs\archive
   
   # BAD: Create directories one at a time
   mkdir graph-bank
   mkdir docs
   mkdir docs\archive
   ```

2. **Pre-Check Optimization**: Check all requirements first, then create only what's missing
   ```
   # First check what's missing
   $missingItems = ...
   
   # Then create only what's missing
   if ($missingItems) { ... }
   ```

3. **Error Handling**: Include error handling in all commands
   ```
   mkdir graph-bank, docs, docs\archive -ErrorAction SilentlyContinue
   ```

4. **Platform Adaptation**: Auto-detect platform and use appropriate commands
   ```
   if ($IsWindows) {
       # Windows commands
   } else {
       # Unix commands
   }
   ```

5. **One-Pass Verification**: Verify directory structure in a single pass
   ```
   $requiredPaths = @("graph-bank", "docs", "docs\archive", ".cursorrules", "tasks.md")
   $missingPaths = $requiredPaths | Where-Object { -not (Test-Path $_) }
   ```

## ğŸ“ VERIFICATION REPORT FORMAT

```
âœ… VERIFICATION COMPLETE
- Created directories: [list]
- Created files: [list]
- All components verified

Graph Bank system ready for use.
```
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-qa-validation.md.old
`````
# VAN MODE: QA TECHNICAL VALIDATION (Pre-BUILD)

> **TL;DR:** This map details the technical validation process executed *after* CREATIVE mode and *before* BUILD mode, triggered by the `VAN QA` command. It ensures dependencies, configuration, environment, and basic build functionality are sound.

## ğŸš€ VAN QA MODE ACTIVATION

After completing CREATIVE mode, when the user types "VAN QA", respond:

```
User: VAN QA

Response: OK VAN QA - Beginning Technical Validation
Loading QA Validation map...
```

## ğŸ”„ QA COMMAND PRECEDENCE (QA Override)

QA validation can be called at any point (`QA` command) and takes immediate precedence:

```mermaid
graph TD
    UserQA["User Types: QA"] --> HighPriority["âš ï¸ HIGH PRIORITY COMMAND"]
    HighPriority --> CurrentTask["Pause Current Task/Process"]
    CurrentTask --> LoadQA["Load QA Validation Map (This File)"]
    LoadQA --> RunQA["Execute QA Validation Process"]
    RunQA --> QAResults{"QA Results"}
    
    QAResults -->|"PASS"| ResumeFlow["Resume Prior Process Flow"]
    QAResults -->|"FAIL"| FixIssues["Fix Identified Issues"]
    FixIssues --> ReRunQA["Re-run QA Validation"]
    ReRunQA --> QAResults
    
    style UserQA fill:#f8d486,stroke:#e8b84d,color:black
    style HighPriority fill:#ff0000,stroke:#cc0000,color:white,stroke-width:3px
    style LoadQA fill:#4da6ff,stroke:#0066cc,color:white
    style RunQA fill:#4da6ff,stroke:#0066cc,color:white
    style QAResults fill:#f6546a,stroke:#c30052,color:white
```

### QA Interruption Rules

1. **Immediate Precedence:** `QA` command interrupts everything.
2. **Load & Execute:** Load this map (`van-qa-validation.mdc`) and run the full process.
3. **Remediation Priority:** Fixes take priority over pending mode switches.
4. **Resume:** On PASS, resume the previous flow.

```
âš ï¸ QA OVERRIDE ACTIVATED
All other processes paused
QA validation checks now running...
Any issues found MUST be remediated before continuing with normal process flow
```

## ğŸ” TECHNICAL VALIDATION OVERVIEW

Four-point validation process:

```mermaid
graph TD
    VANQA["VAN QA MODE"] --> FourChecks["FOUR-POINT VALIDATION"]
    
    FourChecks --> DepCheck["1ï¸âƒ£ DEPENDENCY VERIFICATION"]
    DepCheck --> ConfigCheck["2ï¸âƒ£ CONFIGURATION VALIDATION"]
    ConfigCheck --> EnvCheck["3ï¸âƒ£ ENVIRONMENT VALIDATION"]
    EnvCheck --> MinBuildCheck["4ï¸âƒ£ MINIMAL BUILD TEST"]
    
    MinBuildCheck --> ValidationResults{"All Checks<br>Passed?"}
    ValidationResults -->|"Yes"| SuccessReport["GENERATE SUCCESS REPORT"]
    ValidationResults -->|"No"| FailureReport["GENERATE FAILURE REPORT"]
    
    SuccessReport --> BUILD_Transition["Trigger BUILD Mode"]
    FailureReport --> FixIssues["Fix Technical Issues"]
    FixIssues --> ReValidate["Re-validate (Re-run VAN QA)"]
    ReValidate --> FourChecks
    
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white
    style FourChecks fill:#f6546a,stroke:#c30052,color:white
    style ValidationResults fill:#f6546a,stroke:#c30052,color:white
    style BUILD_Transition fill:#10b981,stroke:#059669,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ”„ INTEGRATION WITH DESIGN DECISIONS

Reads Creative Phase outputs (e.g., `graph-bank/systemPatterns.md`) to inform validation:

```mermaid
graph TD
    Start["Read Design Decisions"] --> ReadCreative["Parse Creative Phase<br>Documentation"]
    ReadCreative --> ExtractTech["Extract Technology<br>Choices"]
    ExtractTech --> ExtractDeps["Extract Required<br>Dependencies"]
    ExtractDeps --> BuildValidationPlan["Build Validation<br>Plan"]
    BuildValidationPlan --> StartValidation["Start Four-Point<br>Validation Process"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ExtractTech fill:#f6546a,stroke:#c30052,color:white
    style BuildValidationPlan fill:#10b981,stroke:#059669,color:white
    style StartValidation fill:#f6546a,stroke:#c30052,color:white
```

### Example Technology Extraction (PowerShell):
```powershell
# Example: Extract technology choices from creative phase documentation
function Extract-TechnologyChoices {
    $techChoices = @{}
    # Read from systemPatterns.md
    if (Test-Path "graph-bank\systemPatterns.md") {
        $content = Get-Content "graph-bank\systemPatterns.md" -Raw
        if ($content -match "Framework:\s*(\w+)") { $techChoices["framework"] = $Matches[1] }
        if ($content -match "UI Library:\s*(\w+)") { $techChoices["ui_library"] = $Matches[1] }
        if ($content -match "State Management:\s*([^\n]+)") { $techChoices["state_management"] = $Matches[1].Trim() }
    }
    return $techChoices
}
```

## ğŸ” DETAILED QA VALIDATION STEPS & SCRIPTS

### 1ï¸âƒ£ DEPENDENCY VERIFICATION

```mermaid
# Mermaid graph for Dependency Verification (as in original file)
graph TD
    Start["Dependency Verification"] --> ReadDeps["Read Required Dependencies<br>from Creative Phase"]
    ReadDeps --> CheckInstalled["Check if Dependencies<br>are Installed"]
    CheckInstalled --> DepStatus{"All Dependencies<br>Installed?"}
    DepStatus -->|"Yes"| VerifyVersions["Verify Versions<br>and Compatibility"]
    DepStatus -->|"No"| InstallMissing["Install Missing<br>Dependencies"]
    InstallMissing --> VerifyVersions
    VerifyVersions --> VersionStatus{"Versions<br>Compatible?"}
    VersionStatus -->|"Yes"| DepSuccess["Dependencies Verified<br>âœ… PASS"]
    VersionStatus -->|"No"| UpgradeVersions["Upgrade/Downgrade<br>as Needed"]
    UpgradeVersions --> RetryVerify["Retry Verification"]
    RetryVerify --> VersionStatus
    style Start fill:#4da6ff; style DepSuccess fill:#10b981; style DepStatus fill:#f6546a; style VersionStatus fill:#f6546a;
```

#### Example Implementation (PowerShell):
```powershell
# Verify-Dependencies function (as in original file)
function Verify-Dependencies {
    $requiredDeps = @{ "node" = ">=14.0.0"; "npm" = ">=6.0.0" }
    $missingDeps = @(); $incompatibleDeps = @()
    try { $nodeVersion = node -v; if ($nodeVersion -match "v(\d+).*") { if ([int]$Matches[1] -lt 14) { $incompatibleDeps += "node" } } } catch { $missingDeps += "node" }
    try { $npmVersion = npm -v; if ($npmVersion -match "(\d+).*") { if ([int]$Matches[1] -lt 6) { $incompatibleDeps += "npm" } } } catch { $missingDeps += "npm" }
    if ($missingDeps.Count -eq 0 -and $incompatibleDeps.Count -eq 0) { Write-Output "âœ… Deps OK"; return $true } else { Write-Output "âŒ Deps FAIL"; return $false }
}
```

#### Example Implementation (Bash):
```bash
# verify_dependencies function (as in original file)
verify_dependencies() {
    local missing_deps=(); local incompatible_deps=()
    if command -v node &> /dev/null; then node_version=$(node -v); if [[ $node_version =~ v([0-9]+) ]]; then if (( ${BASH_REMATCH[1]} < 14 )); then incompatible_deps+=("node"); fi; fi; else missing_deps+=("node"); fi
    if command -v npm &> /dev/null; then npm_version=$(npm -v); if [[ $npm_version =~ ([0-9]+) ]]; then if (( ${BASH_REMATCH[1]} < 6 )); then incompatible_deps+=("npm"); fi; fi; else missing_deps+=("npm"); fi
    if [ ${#missing_deps[@]} -eq 0 ] && [ ${#incompatible_deps[@]} -eq 0 ]; then echo "âœ… Deps OK"; return 0; else echo "âŒ Deps FAIL"; return 1; fi
}
```

### 2ï¸âƒ£ CONFIGURATION VALIDATION

```mermaid
# Mermaid graph for Configuration Validation (as in original file)
graph TD
    Start["Configuration Validation"] --> IdentifyConfigs["Identify Files"]
    IdentifyConfigs --> ReadConfigs["Read Files"]
    ReadConfigs --> ValidateSyntax["Validate Syntax"]
    ValidateSyntax --> SyntaxStatus{"Valid?"}
    SyntaxStatus -->|"Yes"| CheckCompatibility["Check Compatibility"]
    SyntaxStatus -->|"No"| FixSyntax["Fix Syntax"]
    FixSyntax --> RetryValidate["Retry"]
    RetryValidate --> SyntaxStatus
    CheckCompatibility --> CompatStatus{"Compatible?"}
    CompatStatus -->|"Yes"| ConfigSuccess["Configs Validated âœ… PASS"]
    CompatStatus -->|"No"| AdaptConfigs["Adapt Configs"]
    AdaptConfigs --> RetryCompat["Retry Check"]
    RetryCompat --> CompatStatus
    style Start fill:#4da6ff; style ConfigSuccess fill:#10b981; style SyntaxStatus fill:#f6546a; style CompatStatus fill:#f6546a;
```

#### Example Implementation (PowerShell):
```powershell
# Validate-Configurations function (as in original file)
function Validate-Configurations {
    $configFiles = @("package.json", "tsconfig.json", "vite.config.js")
    $invalidConfigs = @(); $incompatibleConfigs = @()
    foreach ($configFile in $configFiles) {
        if (Test-Path $configFile) {
            if ($configFile -match "\.json$") { try { Get-Content $configFile -Raw | ConvertFrom-Json | Out-Null } catch { $invalidConfigs += "$configFile (JSON)"; continue } }
            if ($configFile -eq "angular.json") { $content = Get-Content $configFile -Raw; if ($content -notmatch "angular") { $incompatibleConfigs += "$configFile (Angular)" } }
        } else { $invalidConfigs += "$configFile (missing)" }
    }
    if ($invalidConfigs.Count -eq 0 -and $incompatibleConfigs.Count -eq 0) { Write-Output "âœ… Configs OK"; return $true } else { Write-Output "âŒ Configs FAIL"; return $false }
}
```

### 3ï¸âƒ£ ENVIRONMENT VALIDATION

```mermaid
# Mermaid graph for Environment Validation (as in original file)
graph TD
    Start["Environment Validation"] --> CheckEnv["Check Env"]
    CheckEnv --> VerifyBuildTools["Verify Tools"]
    VerifyBuildTools --> ToolsStatus{"Available?"}
    ToolsStatus -->|"Yes"| CheckPerms["Check Permissions"]
    ToolsStatus -->|"No"| InstallTools["Install Tools"]
    InstallTools --> RetryTools["Retry"]
    RetryTools --> ToolsStatus
    CheckPerms --> PermsStatus{"Sufficient?"}
    PermsStatus -->|"Yes"| EnvSuccess["Environment Validated âœ… PASS"]
    PermsStatus -->|"No"| FixPerms["Fix Permissions"]
    FixPerms --> RetryPerms["Retry Check"]
    RetryPerms --> PermsStatus
    style Start fill:#4da6ff; style EnvSuccess fill:#10b981; style ToolsStatus fill:#f6546a; style PermsStatus fill:#f6546a;
```

#### Example Implementation (PowerShell):
```powershell
# Validate-Environment function (as in original file)
function Validate-Environment {
    $requiredTools = @(@{Name='git';Cmd='git --version'},@{Name='node';Cmd='node --version'},@{Name='npm';Cmd='npm --version'})
    $missingTools = @(); $permissionIssues = @()
    foreach ($tool in $requiredTools) { try { Invoke-Expression $tool.Cmd | Out-Null } catch { $missingTools += $tool.Name } }
    try { $testFile = ".__perm_test"; New-Item $testFile -ItemType File -Force | Out-Null; Remove-Item $testFile -Force } catch { $permissionIssues += "CWD Write" }
    try { $L = New-Object Net.Sockets.TcpListener([Net.IPAddress]::Loopback, 3000); $L.Start(); $L.Stop() } catch { $permissionIssues += "Port 3000" }
    if ($missingTools.Count -eq 0 -and $permissionIssues.Count -eq 0) { Write-Output "âœ… Env OK"; return $true } else { Write-Output "âŒ Env FAIL"; return $false }
}
```

### 4ï¸âƒ£ MINIMAL BUILD TEST

```mermaid
# Mermaid graph for Minimal Build Test (as in original file)
graph TD
    Start["Minimal Build Test"] --> CreateTest["Create Test Proj"]
    CreateTest --> BuildTest["Attempt Build"]
    BuildTest --> BuildStatus{"Success?"}
    BuildStatus -->|"Yes"| RunTest["Run Basic Test"]
    BuildStatus -->|"No"| FixBuild["Fix Build Issues"]
    FixBuild --> RetryBuild["Retry Build"]
    RetryBuild --> BuildStatus
    RunTest --> TestStatus{"Passed?"}
    TestStatus -->|"Yes"| TestSuccess["Build Test âœ… PASS"]
    TestStatus -->|"No"| FixTest["Fix Test Issues"]
    FixTest --> RetryTest["Retry Test"]
    RetryTest --> TestStatus
    style Start fill:#4da6ff; style TestSuccess fill:#10b981; style BuildStatus fill:#f6546a; style TestStatus fill:#f6546a;
```

#### Example Implementation (PowerShell):
```powershell
# Perform-MinimalBuildTest function (as in original file)
function Perform-MinimalBuildTest {
    $buildSuccess = $false; $testSuccess = $false; $testDir = ".__build_test"
    if (Test-Path $testDir) { Remove-Item $testDir -Recurse -Force }
    try {
        New-Item $testDir -ItemType Directory | Out-Null; Push-Location $testDir
        '{"name": "build-test","scripts": {"build": "echo Build test successful"}}' | Set-Content package.json
        npm run build | Out-Null; $buildSuccess = $true
        'console.log("Test successful");' | Set-Content index.js
        node index.js | Out-Null; $testSuccess = $true
    } catch { Write-Output "âŒ Build test exception" } finally { Pop-Location; if (Test-Path $testDir) { Remove-Item $testDir -Recurse -Force } }
    if ($buildSuccess -and $testSuccess) { Write-Output "âœ… Build Test OK"; return $true } else { Write-Output "âŒ Build Test FAIL"; return $false }
}
```

## ğŸ“ VALIDATION REPORT FORMATS

### Comprehensive Success Report:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚ PROJECT: [Project Name] | TIMESTAMP: [Current Date/Time]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1ï¸âƒ£ DEPENDENCIES: âœ“ Compatible                                       â”‚
â”‚ 2ï¸âƒ£ CONFIGURATION: âœ“ Valid & Compatible                             â”‚
â”‚ 3ï¸âƒ£ ENVIRONMENT: âœ“ Ready                                             â”‚
â”‚ 4ï¸âƒ£ MINIMAL BUILD: âœ“ Successful & Passed                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¨ FINAL VERDICT: PASS                                              â”‚
â”‚ â¡ï¸ Clear to proceed to BUILD mode                                   â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Detailed Failure Report:
```
âš ï¸âš ï¸âš ï¸ QA VALIDATION FAILED âš ï¸âš ï¸âš ï¸
Issues must be resolved before BUILD mode:

1ï¸âƒ£ DEPENDENCY ISSUES: [Details/Fix]
2ï¸âƒ£ CONFIGURATION ISSUES: [Details/Fix]
3ï¸âƒ£ ENVIRONMENT ISSUES: [Details/Fix]
4ï¸âƒ£ BUILD TEST ISSUES: [Details/Fix]

âš ï¸ BUILD MODE BLOCKED. Type 'VAN QA' after fixing to re-validate.
```

## ğŸ§ª COMMON QA VALIDATION FIXES

- **Dependencies:** Install Node/npm, run `npm install`, check versions.
- **Configuration:** Validate JSON, check required plugins (e.g., Angular CLI), ensure TSConfig compatibility.
- **Environment:** Check permissions (Admin/sudo), ensure ports are free, install missing CLI tools (git, etc.).
- **Build Test:** Check logs for errors, verify minimal config, check path separators.

## ğŸ”’ BUILD MODE PREVENTION MECHANISM

Logic to check QA status before allowing BUILD mode transition.

```mermaid
graph TD
    Start["User Types: BUILD"] --> CheckQA{"QA Validation<br>Passed?"}
    CheckQA -->|"Yes"| AllowBuild["Allow BUILD Mode"]
    CheckQA -->|"No"| BlockBuild["BLOCK BUILD MODE"]
    BlockBuild --> Message["Display:<br>âš ï¸ QA VALIDATION REQUIRED"]
    Message --> ReturnToVANQA["Prompt: Type VAN QA"]
    
    style CheckQA fill:#f6546a; style BlockBuild fill:#ff0000,stroke:#990000; style Message fill:#ff5555; style ReturnToVANQA fill:#4da6ff;
```

### Example Implementation (PowerShell):
```powershell
# Example: Check QA status before allowing BUILD
function Check-QAValidationStatus {
    $qaStatusFile = "graph-bank\.qa_validation_status" # Assumes status is written here
    if (Test-Path $qaStatusFile) {
        if ((Get-Content $qaStatusFile -Raw) -match "PASS") { return $true }
    }
    Write-Output "ğŸš« BUILD MODE BLOCKED: QA VALIDATION REQUIRED. Type 'VAN QA'. ğŸš«"
    return $false
}
```

## ğŸš¨ MODE TRANSITION TRIGGERS (Relevant to QA)

### CREATIVE to VAN QA Transition:
```
â­ï¸ NEXT MODE: VAN QA
To validate technical requirements before implementation, please type 'VAN QA'
```

### VAN QA to BUILD Transition (On Success):
```
âœ… TECHNICAL VALIDATION COMPLETE
All prerequisites verified successfully
You may now proceed to BUILD mode
Type 'BUILD' to begin implementation
```

## ğŸ“‹ FINAL QA VALIDATION CHECKPOINT

```
âœ“ SECTION CHECKPOINT: QA VALIDATION
- Dependency Verification Passed? [YES/NO]
- Configuration Validation Passed? [YES/NO]
- Environment Validation Passed? [YES/NO]
- Minimal Build Test Passed? [YES/NO]

â†’ If all YES: Ready for BUILD mode transition.
â†’ If any NO: Fix identified issues and re-run VAN QA.
```

**Next Step (on PASS):** Trigger BUILD mode.
**Next Step (on FAIL):** Address issues and re-run `VAN QA`.
`````

## File: .cursor/rules/isolation_rules/main-optimized.mdc
`````
---
description: Optimized main rule for improved token efficiency
globs: main-optimized.mdc
alwaysApply: false
---
# ğŸ” OPTIMIZED GRAPH BANK SYSTEM

ğŸš¨ CRITICAL RULE: GRAPH BANK CREATION IS MANDATORY ğŸš¨
Graph Bank MUST be created BEFORE any other operation in ANY mode
NO process can continue without verifying Graph Bank existence

> **TL;DR:** This system uses optimized context management and adaptive rule loading to maximize token efficiency while preserving the structured development approach.

## ğŸ§­ OPTIMIZED MODE ARCHITECTURE

```mermaid
graph TD
    subgraph "Graph Bank Core"
        Context["Context Manager"]
        Rules["Rule Loader"]
        FileIO["File Manager"]
        Transition["Mode Transition"]
    end
    
    subgraph "Custom Modes"
        VAN["VAN<br>Initialization"]
        PLAN["PLAN<br>Planning"]
        CREATIVE["CREATIVE<br>Design"]
        IMPLEMENT["IMPLEMENT<br>Building"]
        REFLECT["REFLECT<br>Review"]
        ARCHIVE["ARCHIVE<br>Documentation"]
    end
    
    Context --> VAN & PLAN & CREATIVE & IMPLEMENT & REFLECT & ARCHIVE
    Rules --> VAN & PLAN & CREATIVE & IMPLEMENT & REFLECT & ARCHIVE
    FileIO --> VAN & PLAN & CREATIVE & IMPLEMENT & REFLECT & ARCHIVE
    Transition --> VAN & PLAN & CREATIVE & IMPLEMENT & REFLECT & ARCHIVE
    
    VAN --> PLAN
    PLAN --> CREATIVE
    CREATIVE --> IMPLEMENT
    IMPLEMENT --> REFLECT
    REFLECT --> ARCHIVE
    
    style Context fill:#4da6ff,stroke:#0066cc,color:white
    style Rules fill:#ffa64d,stroke:#cc7a30,color:white
    style FileIO fill:#4dbb5f,stroke:#36873f,color:white
    style Transition fill:#d94dbb,stroke:#a3378a,color:white
```

## ğŸ“ˆ ADAPTIVE COMPLEXITY MODEL

```mermaid
graph TD
    Task["Task Creation"] --> Complexity{"Complexity<br>Level?"}
    
    Complexity -->|"Level 1<br>Quick Fix"| L1["3-Phase<br>Streamlined Process"]
    Complexity -->|"Level 2<br>Enhancement"| L2["4-Phase<br>Balanced Process"]
    Complexity -->|"Level 3<br>Feature"| L3["5-Phase<br>Comprehensive Process"]
    Complexity -->|"Level 4<br>Enterprise"| L4["6-Phase<br>Governance Process"]
    
    L1 --> L1_Process["VAN â†’ IMPLEMENT â†’ REFLECT"]
    L2 --> L2_Process["VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECT"]
    L3 --> L3_Process["VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT"]
    L4 --> L4_Process["VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE"]
    
    style Complexity fill:#d94dbb,stroke:#a3378a,color:white
    style L1 fill:#4dbb5f,stroke:#36873f,color:white
    style L2 fill:#ffa64d,stroke:#cc7a30,color:white
    style L3 fill:#4da6ff,stroke:#0066cc,color:white
    style L4 fill:#ff5555,stroke:#cc0000,color:white
```

## ğŸ§  HIERARCHICAL RULE LOADING

Rules are loaded hierarchically to optimize context usage:

```mermaid
graph TD
    Root["Graph Bank<br>Common Rules"] --> Core["Core Rules<br>Shared Across Modes"]
    
    Core --> L1["Level 1<br>Rules"]
    Core --> L2["Level 2<br>Rules"]
    Core --> L3["Level 3<br>Rules"]
    Core --> L4["Level 4<br>Rules"]
    
    Core --> VM["Mode<br>Visual Maps"]
    
    Core --> Phase["Phase-Specific<br>Rules"]
    
    Phase --> VAN_Rules["VAN Mode<br>Rules"]
    Phase --> PLAN_Rules["PLAN Mode<br>Rules"]
    Phase --> CREATIVE_Rules["CREATIVE Mode<br>Rules"]
    Phase --> IMPLEMENT_Rules["IMPLEMENT Mode<br>Rules"]
    Phase --> REFLECT_Rules["REFLECT Mode<br>Rules"]
    Phase --> ARCHIVE_Rules["ARCHIVE Mode<br>Rules"]
    
    style Root fill:#4da6ff,stroke:#0066cc,color:white
    style Core fill:#ffa64d,stroke:#cc7a30,color:white
    style Phase fill:#4dbb5f,stroke:#36873f,color:white
```

## ğŸ”„ TOKEN-OPTIMIZED CREATIVE PHASE

Creative phase documentation is progressively generated:

```mermaid
graph TD
    Start["Creative Phase<br>Initiation"] --> P1["1ï¸âƒ£ PROBLEM<br>Define scope"]
    P1 --> P2["2ï¸âƒ£ OPTIONS<br>List alternatives"]
    P2 --> P3["3ï¸âƒ£ ANALYSIS<br>Compare options"]
    P3 --> P4["4ï¸âƒ£ DECISION<br>Select approach"]
    P4 --> P5["5ï¸âƒ£ GUIDELINES<br>Document implementation"]
    
    P3 -.->|"On Demand"| Details["Detailed Option<br>Analysis"]
    
    style Start fill:#d971ff,stroke:#a33bc2,color:white
    style P1 fill:#4da6ff,stroke:#0066cc,color:white
    style P2 fill:#ffa64d,stroke:#cc7a30,color:white
    style P3 fill:#4dbb5f,stroke:#36873f,color:white
    style P4 fill:#d94dbb,stroke:#a3378a,color:white
    style P5 fill:#4dbbbb,stroke:#368787,color:white
    style Details fill:#e699d9,stroke:#d94dbb,color:white,stroke-dasharray: 5 5
```

## ğŸ”€ OPTIMIZED MODE TRANSITIONS

Mode transitions use a unified context transfer protocol:

```mermaid
sequenceDiagram
    participant Current as Current Mode
    participant Context as Context Manager
    participant Next as Next Mode
    
    Current->>Context: Create transition document
    Current->>Context: Store critical context
    Context->>Context: Prepare rule cache
    Current->>Next: Initiate transition
    Next->>Context: Verify context availability
    Context->>Next: Load relevant context
    Context->>Next: Load cached rules
    Next->>Next: Continue with preserved context
```

## ğŸ“Š GRAPH BANK EFFICIENT UPDATES

```mermaid
graph TD
    subgraph "Graph Bank Files"
        tasks["tasks.md<br>Source of Truth"]
        active["activeContext.md<br>Current Focus"]
        creative["creative-*.md<br>Design Decisions"]
        progress["progress.md<br>Implementation Status"]
        transition["transition.md<br>Mode Transitions"]
    end
    
    Update["Update Request"] --> Diff{"Changed?"}
    Diff -->|"No"| Skip["Skip Update"]
    Diff -->|"Yes"| Section{"Section<br>Change?"}
    Section -->|"Yes"| Partial["Update Changed<br>Sections Only"]
    Section -->|"No"| Full["Full File<br>Update"]
    
    Partial --> tasks
    Full --> tasks
    
    style Update fill:#4da6ff,stroke:#0066cc,color:white
    style Diff fill:#ffa64d,stroke:#cc7a30,color:white
    style Section fill:#4dbb5f,stroke:#36873f,color:white
    style Partial fill:#d94dbb,stroke:#a3378a,color:white
    style Full fill:#4dbbbb,stroke:#368787,color:white
```

## ğŸ’» COMPLEXITY-BASED DOCUMENTATION

Documentation requirements scale based on complexity level:

| Documentation | Level 1 | Level 2 | Level 3 | Level 4 |
|---------------|---------|---------|---------|---------|
| Problem Definition | Brief | Standard | Detailed | Comprehensive |
| Options Analysis | Optional | Basic | Multiple Options | Extensive |
| Implementation Plan | Simple | Standard | Detailed | Phased |
| Testing Requirements | Basic | Standard | Comprehensive | Rigorous |
| Documentation | Minimal | Standard | Detailed | Extensive |

## ğŸ“‘ OPTIMIZED TEMPLATES BY LEVEL

### Level 1: Quick Fix Template
```markdown
## QUICK FIX: [Issue Name]
- Problem: [Brief description]
- Solution: [Implemented approach]
- Verification: [How fix was tested]
```

### Level 2: Enhancement Template
```markdown
## ENHANCEMENT: [Feature Name]
- Requirement: [What needs to be done]
- Approach: [How it was implemented]
- Testing: [Verification approach]
- Documentation: [Where documented]
```

### Level 3-4: Comprehensive Template
Uses the optimized creative phase template with appropriate documentation depth

## ğŸ”„ REFERENCE MAPS

Each mode's visual process map is optimized for token efficiency:

- @VAN Mode Map (Optimized)
- @PLAN Mode Map (Optimized)
- @CREATIVE Mode Map (Optimized)
- @IMPLEMENT Mode Map (Optimized)
- @REFLECT Mode Map (Optimized)
- @ARCHIVE Mode Map (Optimized)

## âš¡ TOKEN EFFICIENCY IMPROVEMENTS

Optimizations in this version:

1. Hierarchical rule loading (65% token reduction)
2. Progressive creative phase documentation (60% token reduction)
3. Context preservation during mode transitions (40% token reduction)
4. Differential Graph Bank updates (30% token reduction)
5. Complexity-based template scaling (varies by level)

## ğŸ’¡ USAGE GUIDANCE

To use the optimized system:

1. Start with the VAN command to initialize and determine complexity
2. Follow the complexity-appropriate workflow
3. Use progressive documentation appropriate to task complexity
4. Let the system manage rule loading and context preservation
5. Enjoy the improved token efficiency while maintaining structured development
`````

## File: .cursor/rules/isolation_rules/main.mdc
`````
---
description: main rule
globs: main.mdc
alwaysApply: false
---
# ğŸ” ISOLATION-FOCUSED GRAPH BANK SYSTEM

ğŸš¨ CRITICAL RULE: GRAPH BANK CREATION IS MANDATORY ğŸš¨
Graph Bank MUST be created BEFORE any other operation in ANY mode
NO process can continue without verifying Graph Bank existence

> **TL;DR:** This system is designed to work with Cursor custom modes, where each mode loads only the rules it needs. The system uses visual Mermaid diagrams and selective document loading to optimize context usage.

## ğŸ§­ MODE-SPECIFIC VISUAL MAPS

```mermaid
graph TD
    subgraph Modes["Cursor Custom Modes"]
        VAN["VAN MODE<br>Initialization"] --> PLAN["PLAN MODE<br>Task Planning"]
        PLAN --> Creative["CREATIVE MODE<br>Design Decisions"]
        Creative --> Implement["IMPLEMENT MODE<br>Code Implementation"]
        Implement --> Reflect["REFLECT MODE<br>Task Review"]
        Reflect --> Archive["ARCHIVE MODE<br>Documentation"]
    end
    
    VAN -.->|"Loads"| VANRules["â€¢ main.md<br>â€¢ platform-awareness.md<br>â€¢ file-verification.md<br>â€¢ workflow-init.md"]
    PLAN -.->|"Loads"| PLANRules["â€¢ main.md<br>â€¢ task-tracking.md<br>â€¢ planning-process.md"]
    Creative -.->|"Loads"| CreativeRules["â€¢ main.md<br>â€¢ creative-phase.md<br>â€¢ design-patterns.md"]
    Implement -.->|"Loads"| ImplementRules["â€¢ main.md<br>â€¢ command-execution.md<br>â€¢ implementation-guide.md"]
    Reflect -.->|"Loads"| ReflectRules["â€¢ main.md<br>â€¢ reflection-format.md"]
    Archive -.->|"Loads"| ArchiveRules["â€¢ main.md<br>â€¢ archiving-guide.md"]
```

## ğŸ“‹ GRAPH BANK VERIFICATION - MANDATORY IN ALL MODES

```mermaid
graph TD
    Start["Mode Activation"] --> CheckMemBank{"Graph Bank<br>Exists?"}
    
    CheckMemBank -->|"No"| CreateMemBank["CREATE GRAPH BANK<br>[CRITICAL STEP]"]
    CheckMemBank -->|"Yes"| VerifyMemBank["Verify Graph Bank<br>Structure"]
    
    CreateMemBank --> VerifyCreation{"Creation<br>Successful?"}
    VerifyCreation -->|"No"| AbortAll["â›” ABORT ALL OPERATIONS<br>Fix Graph Bank First"]
    VerifyCreation -->|"Yes"| VerifyMemBank
    
    VerifyMemBank --> StructureCheck{"Structure<br>Valid?"}
    StructureCheck -->|"No"| FixStructure["Fix Graph Bank<br>Structure"]
    StructureCheck -->|"Yes"| ContinueMode["Continue with<br>Mode Operations"]
    
    FixStructure --> VerifyFix{"Fix<br>Successful?"}
    VerifyFix -->|"No"| AbortAll
    VerifyFix -->|"Yes"| ContinueMode
    
    style CheckMemBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style CreateMemBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style VerifyCreation fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style AbortAll fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style StructureCheck fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style FixStructure fill:#ff5555,stroke:#dd3333,color:white
    style VerifyFix fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“š VISUAL PROCESS MAPS

Each mode has its own visual process map:

- @VAN Mode Map
- @PLAN Mode Map
- @CREATIVE Mode Map
- @IMPLEMENT Mode Map
- @REFLECT Mode Map
- @ARCHIVE Mode Map

## ğŸ”„ FILE STATE VERIFICATION

In this isolation-focused approach, Graph Bank files maintain continuity between modes:

```mermaid
graph TD
    subgraph "Graph Bank Files"
        tasks["tasks.md<br>Source of Truth"]
        active["activeContext.md<br>Current Focus"]
        creative["creative-*.md<br>Design Decisions"]
        progress["progress.md<br>Implementation Status"]
    end
    
    VAN["VAN MODE"] -->|"Creates/Updates"| tasks
    VAN -->|"Creates/Updates"| active
    
    PLAN["PLAN MODE"] -->|"Reads"| tasks
    PLAN -->|"Reads"| active
    PLAN -->|"Updates"| tasks
    
    Creative["CREATIVE MODE"] -->|"Reads"| tasks
    Creative -->|"Creates"| creative
    Creative -->|"Updates"| tasks
    
    Implement["IMPLEMENT MODE"] -->|"Reads"| tasks
    Implement -->|"Reads"| creative
    Implement -->|"Updates"| tasks
    Implement -->|"Updates"| progress
    
    Reflect["REFLECT MODE"] -->|"Reads"| tasks
    Reflect -->|"Reads"| progress
    Reflect -->|"Updates"| tasks
    
    Archive["ARCHIVE MODE"] -->|"Reads"| tasks
    Archive -->|"Reads"| progress
    Archive -->|"Archives"| creative
```

## ğŸ“‹ MODE TRANSITION PROTOCOL

```mermaid
sequenceDiagram
    participant User
    participant CurrentMode
    participant NextMode
    
    CurrentMode->>CurrentMode: Complete Phase Requirements
    CurrentMode->>User: "Phase complete. NEXT MODE: [mode name]"
    User->>CurrentMode: End Current Mode
    User->>NextMode: Start Next Mode
    NextMode->>NextMode: Verify Required File State
    
    alt File State Valid
        NextMode->>User: "Continuing from previous mode..."
    else File State Invalid
        NextMode->>User: "Required files not in expected state"
        NextMode->>User: "Return to [previous mode] to complete requirements"
    end
```

## ğŸ’» PLATFORM-SPECIFIC COMMANDS

| Action | Windows | Mac/Linux |
|--------|---------|-----------|
| Create file | `echo. > file.ext` | `touch file.ext` |
| Create directory | `mkdir directory` | `mkdir -p directory` |
| Change directory | `cd directory` | `cd directory` |
| List files | `dir` | `ls` |
| Show file content | `type file.ext` | `cat file.ext` |

## âš ï¸ COMMAND EFFICIENCY GUIDANCE

For optimal performance, use efficient command chaining when appropriate:

```
# Efficient command chaining examples:
mkdir -p project/{src,tests,docs} && cd project
grep "TODO" $(find . -name "*.js")
npm install && npm start
```

Refer to [command-execution.mdc](mdc:.cursor/rules/isolation_rules/Core/command-execution.mdc) for detailed guidance.
`````

## File: angular/src/app/core/guards/permission.guard.ts
`````typescript
// src/app/core/guards/permission.guard.ts
â‹®----
import { inject } from '@angular/core';
import { CanActivateFn, Router } from '@angular/router';
import { PermissionService } from '../services/permission.service';
import { AuthService } from '../services/auth.service';
import { OrgRole } from '../models/auth.model';
â‹®----
/**
 * æ¬Šé™å®ˆè¡›å·¥å» å‡½æ•¸
 * @param action æ¬Šé™å‹•ä½œ (read, write, admin, delete)
 * @param resource è³‡æºé¡å‹ (organization, team, repository, member)
 * @returns CanActivateFn
 */
export function permissionGuard(action: string, resource: string): CanActivateFn
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * çµ„ç¹”æ¬Šé™å®ˆè¡›å·¥å» å‡½æ•¸
 * @param role çµ„ç¹”è§’è‰²
 * @returns CanActivateFn
 */
export function orgRoleGuard(role: OrgRole): CanActivateFn
â‹®----
// æª¢æŸ¥çµ„ç¹”è§’è‰²
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * çµ„ç¹”ç®¡ç†å“¡å®ˆè¡›
 * æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦ç‚ºçµ„ç¹”ç®¡ç†å“¡æˆ–æ“æœ‰è€…
 */
export const orgAdminGuard: CanActivateFn = () =>
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºçµ„ç¹”ç®¡ç†å“¡
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * çµ„ç¹”æ“æœ‰è€…å®ˆè¡›
 * æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦ç‚ºçµ„ç¹”æ“æœ‰è€…
 */
export const orgOwnerGuard: CanActivateFn = () =>
â‹®----
// æª¢æŸ¥æ˜¯å¦ç‚ºçµ„ç¹”æ“æœ‰è€…
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * Repository è®€å–æ¬Šé™å®ˆè¡›
 * @param repositoryId Repository ID
 * @returns CanActivateFn
 */
export function repositoryReadGuard(repositoryId: string): CanActivateFn
â‹®----
// æª¢æŸ¥ Repository è®€å–æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * Repository å¯«å…¥æ¬Šé™å®ˆè¡›
 * @param repositoryId Repository ID
 * @returns CanActivateFn
 */
export function repositoryWriteGuard(repositoryId: string): CanActivateFn
â‹®----
// æª¢æŸ¥ Repository å¯«å…¥æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * Repository ç®¡ç†æ¬Šé™å®ˆè¡›
 * @param repositoryId Repository ID
 * @returns CanActivateFn
 */
export function repositoryManageGuard(repositoryId: string): CanActivateFn
â‹®----
// æª¢æŸ¥ Repository ç®¡ç†æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
/**
 * åœ˜éšŠç®¡ç†æ¬Šé™å®ˆè¡›
 * @param teamId åœ˜éšŠ ID
 * @returns CanActivateFn
 */
export function teamManageGuard(teamId: string): CanActivateFn
â‹®----
// æª¢æŸ¥åœ˜éšŠç®¡ç†æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
`````

## File: angular/src/app/core/services/organization.service.ts
`````typescript
// src/app/core/services/organization.service.ts
â‹®----
import { Injectable, inject, signal, computed } from '@angular/core';
import {
  Firestore,
  doc,
  docData,
  collection,
  collectionData,
  query,
  where,
  addDoc,
  setDoc,
  updateDoc,
  deleteDoc,
  getDoc,
  DocumentData
} from '@angular/fire/firestore';
import { Observable, map, switchMap, combineLatest, of } from 'rxjs';
import { 
  Organization, 
  OrganizationMember, 
  Team,
  TeamMember,
  OrgRole,
  TeamRole,
  ProfileVO,
  PermissionVO,
  SettingsVO
} from '../models/auth.model';
import { ValidationUtils } from '../utils/validation.utils';
â‹®----
export class OrganizationService
â‹®----
// Signals for state management
â‹®----
// Readonly signals
â‹®----
// Computed signals
â‹®----
return org ? [] : []; // é€™è£¡æ‡‰è©²å¯¦ç¾æˆå“¡æŸ¥è©¢
â‹®----
async createOrganization(
    name: string,
    login: string,
    ownerId: string,
    description?: string
): Promise<string>
â‹®----
// é©—è­‰çµ„ç¹”åç¨±
â‹®----
// é©—è­‰ç™»å…¥åç¨±
â‹®----
// å»ºç«‹ ProfileVO
â‹®----
email: '', // çµ„ç¹”æ²’æœ‰é›»å­éƒµä»¶
â‹®----
// å»ºç«‹ PermissionVO
â‹®----
// å»ºç«‹ SettingsVO
â‹®----
getOrganization(orgId: string): Observable<Organization | undefined>
â‹®----
async loadOrganization(orgId: string): Promise<void>
â‹®----
getOrganizationMembers(orgId: string): Observable<OrganizationMember[]>
â‹®----
async addOrganizationMember(
    orgId: string,
    userId: string,
    role: OrgRole,
    invitedBy?: string
): Promise<void>
â‹®----
async updateMemberRole(
    orgId: string,
    userId: string,
    newRole: OrgRole
): Promise<void>
â‹®----
async removeOrganizationMember(orgId: string, userId: string): Promise<void>
â‹®----
getTeams(orgId: string): Observable<Team[]>
â‹®----
async createTeam(
    orgId: string,
    name: string,
    description?: string
): Promise<string>
â‹®----
// é©—è­‰åœ˜éšŠåç¨±
â‹®----
async updateTeam(
    orgId: string,
    teamId: string,
    updates: Partial<Team>
): Promise<void>
â‹®----
async deleteTeam(orgId: string, teamId: string): Promise<void>
â‹®----
getTeamMembers(orgId: string, teamId: string): Observable<TeamMember[]>
â‹®----
async addTeamMember(
    orgId: string,
    teamId: string,
    userId: string,
    role: TeamRole,
    addedBy?: string
): Promise<void>
â‹®----
async removeTeamMember(
    orgId: string,
    teamId: string,
    userId: string
): Promise<void>
â‹®----
async updateOrganizationProfile(
    orgId: string,
    profile: ProfileVO
): Promise<void>
â‹®----
// é©—è­‰ Profile
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
async updateOrganizationSettings(
    orgId: string,
    settings: SettingsVO
): Promise<void>
â‹®----
// é©—è­‰ Settings
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
// æ¸…é™¤éŒ¯èª¤
clearError()
â‹®----
// æ¸…é™¤çµ„ç¹”ä¸Šä¸‹æ–‡
clearOrganizationContext()
`````

## File: angular/src/app/core/utils/validation.utils.ts
`````typescript
// src/app/core/utils/validation.utils.ts
â‹®----
import { ProfileVO, PermissionVO, SettingsVO, OrgRole } from '../models/auth.model';
â‹®----
/**
 * é©—è­‰å·¥å…·é¡åˆ¥
 * æä¾›çµ±ä¸€çš„é©—è­‰é‚è¼¯å’ŒéŒ¯èª¤è™•ç†
 */
export class ValidationUtils {
â‹®----
/**
   * é©—è­‰é›»å­éƒµä»¶æ ¼å¼
   * @param email é›»å­éƒµä»¶åœ°å€
   * @returns æ˜¯å¦ç‚ºæœ‰æ•ˆçš„é›»å­éƒµä»¶æ ¼å¼
   */
static validateEmail(email: string): boolean
â‹®----
/**
   * é©—è­‰å¯†ç¢¼å¼·åº¦
   * @param password å¯†ç¢¼
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validatePassword(password: string):
â‹®----
/**
   * é©—è­‰ç”¨æˆ¶æª”æ¡ˆ
   * @param profile ç”¨æˆ¶æª”æ¡ˆ
   * @returns éŒ¯èª¤è¨Šæ¯é™£åˆ—
   */
static validateProfile(profile: ProfileVO): string[]
â‹®----
/**
   * é©—è­‰æ¬Šé™è¨­å®š
   * @param permission æ¬Šé™è¨­å®š
   * @returns éŒ¯èª¤è¨Šæ¯é™£åˆ—
   */
static validatePermission(permission: PermissionVO): string[]
â‹®----
// é©—è­‰è§’è‰²æ ¼å¼
â‹®----
/**
   * é©—è­‰è¨­å®š
   * @param settings è¨­å®š
   * @returns éŒ¯èª¤è¨Šæ¯é™£åˆ—
   */
static validateSettings(settings: SettingsVO): string[]
â‹®----
/**
   * é©—è­‰ URL æ ¼å¼
   * @param url URL å­—ä¸²
   * @returns æ˜¯å¦ç‚ºæœ‰æ•ˆçš„ URL
   */
static validateUrl(url: string): boolean
â‹®----
/**
   * é©—è­‰ç™»å…¥åç¨± (GitHub å¼)
   * @param login ç™»å…¥åç¨±
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validateLogin(login: string):
â‹®----
// GitHub å¼ç™»å…¥åç¨±è¦å‰‡ï¼šåªèƒ½åŒ…å«å­—æ¯ã€æ•¸å­—ã€é€£å­—ç¬¦å’Œåº•ç·š
â‹®----
// ä¸èƒ½ä»¥é€£å­—ç¬¦æˆ–åº•ç·šé–‹é ­æˆ–çµå°¾
â‹®----
// ä¸èƒ½åŒ…å«é€£çºŒçš„é€£å­—ç¬¦æˆ–åº•ç·š
â‹®----
/**
   * é©—è­‰çµ„ç¹”åç¨±
   * @param name çµ„ç¹”åç¨±
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validateOrganizationName(name: string):
â‹®----
/**
   * é©—è­‰åœ˜éšŠåç¨±
   * @param name åœ˜éšŠåç¨±
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validateTeamName(name: string):
â‹®----
/**
   * é©—è­‰ Repository åç¨±
   * @param name Repository åç¨±
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validateRepositoryName(name: string):
â‹®----
// Repository åç¨±è¦å‰‡ï¼šåªèƒ½åŒ…å«å­—æ¯ã€æ•¸å­—ã€é€£å­—ç¬¦ã€åº•ç·šå’Œé»
â‹®----
// ä¸èƒ½ä»¥é»é–‹é ­æˆ–çµå°¾
â‹®----
/**
   * æ¸…ç†å’Œæ ¼å¼åŒ–è¼¸å…¥
   * @param input è¼¸å…¥å­—ä¸²
   * @returns æ¸…ç†å¾Œçš„å­—ä¸²
   */
static sanitizeInput(input: string): string
â‹®----
/**
   * é©—è­‰æ—¥æœŸç¯„åœ
   * @param startDate é–‹å§‹æ—¥æœŸ
   * @param endDate çµæŸæ—¥æœŸ
   * @returns é©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯
   */
static validateDateRange(startDate: Date, endDate: Date):
`````

## File: angular/src/app/features/user/auth/auth.service.ts
`````typescript
import { Injectable } from '@angular/core';
import {
  Auth,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  signOut,
  signInWithPopup,
  GoogleAuthProvider,
  UserCredential
} from '@angular/fire/auth';
â‹®----
export class AuthService
â‹®----
constructor(private auth: Auth)
â‹®----
login(email: string, password: string): Promise<UserCredential>
â‹®----
signup(email: string, password: string): Promise<UserCredential>
â‹®----
logout(): Promise<void>
â‹®----
/**
   * Google ç¤¾äº¤ç™»å…¥
   */
signInWithGoogle(): Promise<UserCredential>
â‹®----
// æ·»åŠ é¡å¤–çš„ scope (å¯é¸)
â‹®----
// è¨­å®šè‡ªå®šç¾©åƒæ•¸ (å¯é¸)
â‹®----
get user()
`````

## File: angular/src/app/features/user/user.service.ts
`````typescript
import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable, from, of } from 'rxjs';
import { map, catchError, switchMap } from 'rxjs/operators';
import { Auth, User as FirebaseUser } from '@angular/fire/auth';
import { Firestore, doc, getDoc, setDoc, updateDoc, deleteDoc } from '@angular/fire/firestore';
import { Storage, ref, uploadBytes, getDownloadURL, deleteObject } from '@angular/fire/storage';
import { 
  User, 
  CreateUserRequest, 
  UpdateUserRequest,
  SocialAccount,
  AddSocialAccountRequest,
  Certificate,
  NotificationPreferences,
  UpdateNotificationPreferencesRequest,
  PrivacySettings,
  UpdatePrivacySettingsRequest,
  UserApiResponse,
  SocialAccountApiResponse,
  PaginatedResponse
} from './user.model';
â‹®----
/**
 * ç”¨æˆ¶æœå‹™ - Firebase æ•´åˆç‰ˆæœ¬
 * ç²¾ç°¡ä¸»ç¾©å¯¦ç¾ï¼Œç›´æ¥ä½¿ç”¨ app.config.ts ä¸­çš„ Firebase é…ç½®
 */
â‹®----
export class UserService
â‹®----
// ==================== ç”¨æˆ¶ç®¡ç† API ====================
â‹®----
/**
   * ç²å–ç•¶å‰ç”¨æˆ¶è³‡è¨Š - Firebase æ•´åˆç‰ˆæœ¬
   */
getCurrentUser(): Observable<User | null>
â‹®----
/**
   * ç²å–æŒ‡å®šç”¨æˆ¶è³‡è¨Š (å°é½Š GitHub: GET /users/{username})
   */
getUser(username: string): Observable<User>
â‹®----
/**
   * æ›´æ–°ç•¶å‰ç”¨æˆ¶è³‡è¨Š - Firebase æ•´åˆç‰ˆæœ¬
   */
updateUser(updates: UpdateUserRequest): Observable<User | null>
â‹®----
// è¿”å›æ›´æ–°å¾Œçš„ç”¨æˆ¶è³‡æ–™
â‹®----
/**
   * åˆªé™¤ç•¶å‰ç”¨æˆ¶å¸³æˆ¶ (å°é½Š GitHub: DELETE /user)
   */
deleteUser(): Observable<void>
â‹®----
// ==================== ç¤¾äº¤å¸³æˆ¶ç®¡ç† API ====================
â‹®----
/**
   * ç²å–ç”¨æˆ¶ç¤¾äº¤å¸³æˆ¶åˆ—è¡¨ (å°é½Š GitHub: GET /user/social_accounts)
   */
getSocialAccounts(): Observable<SocialAccount[]>
â‹®----
// è½‰æ›ç‚ºå…§éƒ¨æ ¼å¼
â‹®----
/**
   * æ·»åŠ ç¤¾äº¤å¸³æˆ¶ (å°é½Š GitHub: POST /user/social_accounts)
   */
addSocialAccount(account: AddSocialAccountRequest): Observable<SocialAccount>
â‹®----
/**
   * åˆªé™¤ç¤¾äº¤å¸³æˆ¶ (å°é½Š GitHub: DELETE /user/social_accounts)
   */
removeSocialAccounts(accountUrls: string[]): Observable<void>
â‹®----
/**
   * ç²å–æŒ‡å®šç”¨æˆ¶çš„ç¤¾äº¤å¸³æˆ¶ (å°é½Š GitHub: GET /users/{username}/social_accounts)
   */
getUserSocialAccounts(username: string): Observable<SocialAccount[]>
â‹®----
// ==================== è­‰ç…§ç®¡ç† API ====================
â‹®----
/**
   * ç²å–ç”¨æˆ¶è­‰ç…§åˆ—è¡¨
   */
getCertificates(): Observable<Certificate[]>
â‹®----
/**
   * æ·»åŠ è­‰ç…§
   */
addCertificate(certificate: Partial<Certificate>): Observable<Certificate>
â‹®----
/**
   * æ›´æ–°è­‰ç…§
   */
updateCertificate(certificateId: string, updates: Partial<Certificate>): Observable<Certificate>
â‹®----
/**
   * åˆªé™¤è­‰ç…§
   */
deleteCertificate(certificateId: string): Observable<void>
â‹®----
// ==================== é€šçŸ¥åå¥½ç®¡ç† API ====================
â‹®----
/**
   * ç²å–é€šçŸ¥åå¥½è¨­å®š
   */
getNotificationPreferences(): Observable<NotificationPreferences>
â‹®----
/**
   * æ›´æ–°é€šçŸ¥åå¥½è¨­å®š
   */
updateNotificationPreferences(preferences: UpdateNotificationPreferencesRequest): Observable<NotificationPreferences>
â‹®----
// ==================== éš±ç§è¨­å®šç®¡ç† API ====================
â‹®----
/**
   * ç²å–éš±ç§è¨­å®š
   */
getPrivacySettings(): Observable<PrivacySettings>
â‹®----
/**
   * æ›´æ–°éš±ç§è¨­å®š
   */
updatePrivacySettings(settings: UpdatePrivacySettingsRequest): Observable<PrivacySettings>
â‹®----
// ==================== çµ„ç¹”æˆå“¡è³‡æ ¼ç®¡ç† API ====================
â‹®----
/**
   * ç²å–ç”¨æˆ¶çš„çµ„ç¹”æˆå“¡è³‡æ ¼
   */
getOrganizationMemberships(): Observable<any[]>
â‹®----
/**
   * é›¢é–‹çµ„ç¹”
   */
leaveOrganization(organizationId: string): Observable<void>
â‹®----
// ==================== å·¥å…·æ–¹æ³• ====================
â‹®----
/**
   * ç”Ÿæˆå”¯ä¸€ ID
   */
private generateId(): string
â‹®----
/**
   * æª¢æŸ¥ç”¨æˆ¶åæ˜¯å¦å¯ç”¨
   */
checkUsernameAvailability(username: string): Observable<
â‹®----
/**
   * æª¢æŸ¥éƒµç®±æ˜¯å¦å¯ç”¨
   */
checkEmailAvailability(email: string): Observable<
â‹®----
/**
   * ä¸Šå‚³é ­åƒ - Firebase Storage æ•´åˆç‰ˆæœ¬
   */
uploadAvatar(file: File): Observable<
â‹®----
/**
   * åˆªé™¤é ­åƒ
   */
deleteAvatar(): Observable<void>
`````

## File: angular/src/app/app.spec.ts
`````typescript
import { TestBed } from '@angular/core/testing';
import { App } from './app';
`````

## File: angular/src/app/app.ts
`````typescript
import { Component, inject, signal } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { environment } from '../environments/environment';
import { MatSnackBar } from '@angular/material/snack-bar';
â‹®----
export class App
â‹®----
constructor()
â‹®----
// Firebase å’Œ App Check å·²æ­£ç¢ºé…ç½®
`````

## File: angular/src/environments/environment.sample.ts
`````typescript
//All this info will be in firebase console -> project overview -> project settings -> your apps (ex: webapp)
â‹®----
// Debug token for local development
â‹®----
// reCAPTCHA Enterprise site key for production
`````

## File: angular/.gitignore
`````
# See https://docs.github.com/get-started/getting-started-with-git/ignoring-files for more about ignoring files.

# Compiled output
/dist
/tmp
/out-tsc
/bazel-out

# Node
/node_modules
npm-debug.log
yarn-error.log

# IDEs and editors
.idea/
.project
.classpath
.c9/
*.launch
.settings/
*.sublime-workspace

# Visual Studio Code
.vscode/*
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json
.history/*

# Miscellaneous
/.angular/cache
.sass-cache/
/connect.lock
/coverage
/libpeerconnection.log
testem.log
/typings

# System files
.DS_Store
Thumbs.db

src/environments/environment.ts
# Firebase
.firebase
*-debug.log
.runtimeconfig.json
`````

## File: docs/PROJECT_STRUCTURE.md
`````markdown
# ç‡Ÿå»ºç®¡ç†ç³»çµ± - å°ˆæ¡ˆçµæ§‹æ–‡ä»¶

## 1. å°ˆæ¡ˆæ¦‚è¿°

### 1.1 å°ˆæ¡ˆçµæ§‹èªªæ˜
æœ¬æ–‡ä»¶è©³ç´°æè¿°äº†ç‡Ÿå»ºç®¡ç†ç³»çµ±çš„å‰ç«¯å°ˆæ¡ˆçµæ§‹ï¼Œæ¡ç”¨ Angular 17+ æ¡†æ¶ï¼Œéµå¾ªç¾ä»£åŒ–çš„å‰ç«¯é–‹ç™¼æœ€ä½³å¯¦è¸ï¼ŒåŒ…æ‹¬æ¨¡çµ„åŒ–è¨­è¨ˆã€åˆ†å±¤æ¶æ§‹ã€å’Œæ¸…æ™°çš„æª”æ¡ˆçµ„ç¹”ã€‚

### 1.2 æ¶æ§‹åŸå‰‡
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æŒ‰åŠŸèƒ½é ˜åŸŸåŠƒåˆ†æ¨¡çµ„
- **åˆ†å±¤æ¶æ§‹**: æ¸…æ™°çš„è²¬ä»»åˆ†é›¢
- **å¯æ“´å±•æ€§**: æ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½
- **å¯ç¶­è­·æ€§**: æ¸…æ™°çš„ä»£ç¢¼çµ„ç¹”
- **å¯æ¸¬è©¦æ€§**: ä¾¿æ–¼å–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦

## 2. å°ˆæ¡ˆæ ¹ç›®éŒ„çµæ§‹

```
src/
â”œâ”€â”€ app/                                    # æ‡‰ç”¨ç¨‹å¼ä¸»ç›®éŒ„
â”‚   â”œâ”€â”€ app.component.ts                    # æ ¹å…ƒä»¶
â”‚   â”œâ”€â”€ app.config.ts                       # æ‡‰ç”¨ç¨‹å¼é…ç½®
â”‚   â”œâ”€â”€ app.routes.ts                       # è·¯ç”±é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                           # åŠŸèƒ½æ¨¡çµ„ (ç¬¬3å±¤)
â”‚   â”‚   â”œâ”€â”€ user/                          # ç”¨æˆ¶æ¨¡çµ„ âœ¨
â”‚   â”‚   â”œâ”€â”€ organization/                   # çµ„ç¹”æ¨¡çµ„ âœ¨
â”‚   â”‚   â”œâ”€â”€ project/                       # å°ˆæ¡ˆæ¨¡çµ„ âœ¨
â”‚   â”‚   â”œâ”€â”€ social/                         # ç¤¾äº¤æ¨¡çµ„ âœ¨
â”‚   â”‚   â”œâ”€â”€ achievement/                    # æˆå°±æ¨¡çµ„ âœ¨
â”‚   â”‚   â””â”€â”€ notification/                   # é€šçŸ¥æ¨¡çµ„ âœ¨
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                             # å…±äº«æ¨¡çµ„ (ç¬¬2å±¤)
â”‚   â”‚   â”œâ”€â”€ components/                    # å…±äº«å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ services/                      # å…±äº«æœå‹™
â”‚   â”‚   â”œâ”€â”€ models/                        # å…±äº«æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ pipes/                         # å…±äº«ç®¡é“
â”‚   â”‚   â”œâ”€â”€ directives/                    # å…±äº«æŒ‡ä»¤
â”‚   â”‚   â””â”€â”€ utils/                         # å·¥å…·å‡½æ•¸
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                              # æ ¸å¿ƒæ¨¡çµ„ (ç¬¬1å±¤)
â”‚   â”‚   â”œâ”€â”€ auth/                          # èªè­‰æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ http/                          # HTTP æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ storage/                       # å„²å­˜æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ config/                        # é…ç½®æ ¸å¿ƒ
â”‚   â”‚   â””â”€â”€ guards/                        # è·¯ç”±å®ˆè¡›
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                           # ä½ˆå±€å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ main-layout/                   # ä¸»è¦ä½ˆå±€
â”‚   â”‚   â”œâ”€â”€ auth-layout/                   # èªè­‰ä½ˆå±€
â”‚   â”‚   â””â”€â”€ dashboard-layout/             # å„€è¡¨æ¿ä½ˆå±€
â”‚   â”‚
â”‚   â””â”€â”€ environments/                       # ç’°å¢ƒé…ç½®
â”‚       â”œâ”€â”€ environment.ts                 # é–‹ç™¼ç’°å¢ƒ
â”‚       â”œâ”€â”€ environment.prod.ts            # ç”Ÿç”¢ç’°å¢ƒ
â”‚       â””â”€â”€ environment.staging.ts         # æ¸¬è©¦ç’°å¢ƒ
â”‚
â”œâ”€â”€ assets/                                 # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ images/                            # åœ–ç‰‡è³‡æº
â”‚   â”œâ”€â”€ icons/                             # åœ–æ¨™è³‡æº
â”‚   â”œâ”€â”€ fonts/                             # å­—é«”è³‡æº
â”‚   â””â”€â”€ data/                              # éœæ…‹è³‡æ–™
â”‚
â”œâ”€â”€ styles/                                 # å…¨åŸŸæ¨£å¼
â”‚   â”œâ”€â”€ _variables.scss                    # SCSS è®Šæ•¸
â”‚   â”œâ”€â”€ _mixins.scss                       # SCSS æ··å…¥
â”‚   â”œâ”€â”€ _base.scss                         # åŸºç¤æ¨£å¼
â”‚   â””â”€â”€ _themes.scss                       # ä¸»é¡Œæ¨£å¼
â”‚
â””â”€â”€ tests/                                  # æ¸¬è©¦æª”æ¡ˆ
    â”œâ”€â”€ unit/                              # å–®å…ƒæ¸¬è©¦
    â”œâ”€â”€ integration/                       # æ•´åˆæ¸¬è©¦
    â””â”€â”€ e2e/                               # ç«¯å°ç«¯æ¸¬è©¦
```

## 3. åŠŸèƒ½æ¨¡çµ„è©³ç´°çµæ§‹

### 3.1 ç”¨æˆ¶æ¨¡çµ„ (User Module)

```
src/app/features/user/
â”œâ”€â”€ auth/                                  # èªè­‰ç›¸é—œ
â”‚   â”œâ”€â”€ components/                        # èªè­‰å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ login.component.ts
â”‚   â”‚   â”œâ”€â”€ registration.component.ts
â”‚   â”‚   â”œâ”€â”€ forgot-password.component.ts
â”‚   â”‚   â”œâ”€â”€ email-verification.component.ts
â”‚   â”‚   â””â”€â”€ auth-form.component.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # èªè­‰æœå‹™
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ firebase-auth.service.ts
â”‚   â”‚   â””â”€â”€ email.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ guards/                            # èªè­‰å®ˆè¡›
â”‚   â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”‚   â”œâ”€â”€ guest.guard.ts
â”‚   â”‚   â””â”€â”€ role.guard.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ interceptors/                      # HTTP æ””æˆªå™¨
â”‚   â”‚   â””â”€â”€ auth.interceptor.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ commands/                          # CQRS å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ login-user.command.ts
â”‚   â”‚   â”œâ”€â”€ register-user.command.ts
â”‚   â”‚   â”œâ”€â”€ forgot-password.command.ts
â”‚   â”‚   â””â”€â”€ verify-email.command.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ events/                            # CQRS äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ user-created.event.ts
â”‚   â”‚   â”œâ”€â”€ user-logged-in.event.ts
â”‚   â”‚   â””â”€â”€ user-logged-out.event.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                            # èªè­‰æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ auth-user.model.ts
â”‚   â”‚   â”œâ”€â”€ login-request.model.ts
â”‚   â”‚   â””â”€â”€ register-request.model.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                             # èªè­‰é é¢
â”‚   â”‚   â”œâ”€â”€ login.page.ts
â”‚   â”‚   â”œâ”€â”€ register.page.ts
â”‚   â”‚   â””â”€â”€ forgot-password.page.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                           # æ¨¡çµ„åŒ¯å‡º
â”‚
â”œâ”€â”€ profile/                               # å€‹äººè³‡æ–™ç›¸é—œ
â”‚   â”œâ”€â”€ components/                        # å€‹äººè³‡æ–™å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ profile-card.component.ts
â”‚   â”‚   â”œâ”€â”€ profile-edit.component.ts
â”‚   â”‚   â”œâ”€â”€ avatar.component.ts
â”‚   â”‚   â”œâ”€â”€ basic-info.component.ts
â”‚   â”‚   â”œâ”€â”€ contact-info.component.ts
â”‚   â”‚   â””â”€â”€ skills.component.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # å€‹äººè³‡æ–™æœå‹™
â”‚   â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â”‚   â”œâ”€â”€ profile-domain.service.ts
â”‚   â”‚   â””â”€â”€ firestore-profile.repository.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ commands/                          # CQRS å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ create-profile.command.ts
â”‚   â”‚   â”œâ”€â”€ update-profile.command.ts
â”‚   â”‚   â””â”€â”€ upload-avatar.command.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ queries/                           # CQRS æŸ¥è©¢
â”‚   â”‚   â”œâ”€â”€ get-profile.query.ts
â”‚   â”‚   â””â”€â”€ get-profile-by-id.query.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ events/                            # CQRS äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ profile-updated.event.ts
â”‚   â”‚   â””â”€â”€ avatar-uploaded.event.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                            # å€‹äººè³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user-profile.model.ts
â”‚   â”‚   â”œâ”€â”€ contact-info.model.ts
â”‚   â”‚   â””â”€â”€ skill.model.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                             # å€‹äººè³‡æ–™é é¢
â”‚   â”‚   â”œâ”€â”€ profile.page.ts
â”‚   â”‚   â””â”€â”€ profile-edit.page.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                           # æ¨¡çµ„åŒ¯å‡º
â”‚
â”œâ”€â”€ certificates/                           # è­‰ç…§ç›¸é—œ
â”‚   â”œâ”€â”€ components/                        # è­‰ç…§å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ certificate-management.component.ts
â”‚   â”‚   â”œâ”€â”€ certificate-list.component.ts
â”‚   â”‚   â”œâ”€â”€ certificate-upload.component.ts
â”‚   â”‚   â”œâ”€â”€ certificate-verification.component.ts
â”‚   â”‚   â””â”€â”€ certificate-card.component.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # è­‰ç…§æœå‹™
â”‚   â”‚   â”œâ”€â”€ certificate.service.ts
â”‚   â”‚   â”œâ”€â”€ certificate-domain.service.ts
â”‚   â”‚   â””â”€â”€ firestore-certificate.repository.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ commands/                          # CQRS å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ add-certificate.command.ts
â”‚   â”‚   â”œâ”€â”€ update-certificate.command.ts
â”‚   â”‚   â”œâ”€â”€ verify-certificate.command.ts
â”‚   â”‚   â””â”€â”€ delete-certificate.command.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ queries/                           # CQRS æŸ¥è©¢
â”‚   â”‚   â”œâ”€â”€ get-certificates.query.ts
â”‚   â”‚   â””â”€â”€ get-certificate-by-id.query.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ events/                            # CQRS äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ certificate-added.event.ts
â”‚   â”‚   â”œâ”€â”€ certificate-verified.event.ts
â”‚   â”‚   â””â”€â”€ certificate-expired.event.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                            # è­‰ç…§æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ certificate.model.ts
â”‚   â”‚   â””â”€â”€ certificate-verification.model.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                             # è­‰ç…§é é¢
â”‚   â”‚   â”œâ”€â”€ certificates.page.ts
â”‚   â”‚   â””â”€â”€ certificate-detail.page.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                           # æ¨¡çµ„åŒ¯å‡º
â”‚
â”œâ”€â”€ social/                                # ç¤¾äº¤ç›¸é—œ
â”‚   â”œâ”€â”€ components/                        # ç¤¾äº¤å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ following-list.component.ts
â”‚   â”‚   â”œâ”€â”€ followers-list.component.ts
â”‚   â”‚   â”œâ”€â”€ social-button.component.ts
â”‚   â”‚   â”œâ”€â”€ social-card.component.ts
â”‚   â”‚   â””â”€â”€ connection-graph.component.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # ç¤¾äº¤æœå‹™
â”‚   â”‚   â”œâ”€â”€ social.service.ts
â”‚   â”‚   â”œâ”€â”€ social-domain.service.ts
â”‚   â”‚   â””â”€â”€ firestore-social.repository.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ commands/                          # CQRS å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ follow-user.command.ts
â”‚   â”‚   â”œâ”€â”€ unfollow-user.command.ts
â”‚   â”‚   â””â”€â”€ block-user.command.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ queries/                           # CQRS æŸ¥è©¢
â”‚   â”‚   â”œâ”€â”€ get-following.query.ts
â”‚   â”‚   â”œâ”€â”€ get-followers.query.ts
â”‚   â”‚   â””â”€â”€ get-mutual-connections.query.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ events/                            # CQRS äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ user-followed.event.ts
â”‚   â”‚   â””â”€â”€ user-unfollowed.event.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                            # ç¤¾äº¤æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ social-connection.model.ts
â”‚   â”‚   â””â”€â”€ social-recommendation.model.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                           # æ¨¡çµ„åŒ¯å‡º
â”‚
â”œâ”€â”€ notifications/                          # é€šçŸ¥ç›¸é—œ
â”‚   â”œâ”€â”€ components/                        # é€šçŸ¥å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”‚   â””â”€â”€ notification-badge.component.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # é€šçŸ¥æœå‹™
â”‚   â”‚   â”œâ”€â”€ notification.service.ts
â”‚   â”‚   â”œâ”€â”€ push-notification.service.ts
â”‚   â”‚   â””â”€â”€ firestore-notification.repository.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                            # é€šçŸ¥æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ notification.model.ts
â”‚   â”‚   â””â”€â”€ notification-settings.model.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                             # é€šçŸ¥é é¢
â”‚   â”‚   â””â”€â”€ notifications.page.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                           # æ¨¡çµ„åŒ¯å‡º
â”‚
â”œâ”€â”€ pages/                                 # ç”¨æˆ¶é é¢
â”‚   â”œâ”€â”€ user-profile.page.ts
â”‚   â”œâ”€â”€ user-settings.page.ts
â”‚   â”œâ”€â”€ user-dashboard.page.ts
â”‚   â””â”€â”€ user-activity.page.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ user-state.service.ts
â”‚   â”œâ”€â”€ auth-state.service.ts
â”‚   â”œâ”€â”€ profile-state.service.ts
â”‚   â””â”€â”€ social-state.service.ts
â”‚
â”œâ”€â”€ models/                                # ç”¨æˆ¶æ¨¡å‹
â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”œâ”€â”€ user-profile.model.ts
â”‚   â””â”€â”€ user-settings.model.ts
â”‚
â”œâ”€â”€ services/                              # ç”¨æˆ¶æœå‹™
â”‚   â”œâ”€â”€ user.service.ts
â”‚   â””â”€â”€ user.repository.ts
â”‚
â”œâ”€â”€ routes/                                # ç”¨æˆ¶è·¯ç”±
â”‚   â””â”€â”€ user.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

### 3.2 çµ„ç¹”æ¨¡çµ„ (Organization Module)

```
src/app/features/organization/
â”œâ”€â”€ components/                            # çµ„ç¹”å…ƒä»¶
â”‚   â”œâ”€â”€ organization-card.component.ts
â”‚   â”œâ”€â”€ organization-form.component.ts
â”‚   â”œâ”€â”€ organization-list.component.ts
â”‚   â”œâ”€â”€ team-management.component.ts
â”‚   â”œâ”€â”€ team-hierarchy.component.ts        # æ–°å¢ï¼šåœ˜éšŠå±¤ç´šç®¡ç†
â”‚   â”œâ”€â”€ member-management.component.ts
â”‚   â”œâ”€â”€ project-assignment.component.ts
â”‚   â”œâ”€â”€ organization-settings.component.ts
â”‚   â”œâ”€â”€ organization-stats.component.ts
â”‚   â”œâ”€â”€ security-manager.component.ts       # æ–°å¢ï¼šå®‰å…¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ role-management.component.ts       # æ–°å¢ï¼šè§’è‰²ç®¡ç†
â”‚   â””â”€â”€ team-member-management.component.ts # æ–°å¢ï¼šåœ˜éšŠæˆå“¡ç®¡ç†
â”‚
â”œâ”€â”€ pages/                                 # çµ„ç¹”é é¢
â”‚   â”œâ”€â”€ organization-list.page.ts
â”‚   â”œâ”€â”€ organization-detail.page.ts
â”‚   â”œâ”€â”€ organization-settings.page.ts
â”‚   â”œâ”€â”€ organization-members.page.ts
â”‚   â”œâ”€â”€ organization-teams.page.ts
â”‚   â”œâ”€â”€ organization-security.page.ts       # æ–°å¢ï¼šå®‰å…¨ç®¡ç†é é¢
â”‚   â”œâ”€â”€ organization-roles.page.ts         # æ–°å¢ï¼šè§’è‰²ç®¡ç†é é¢
â”‚   â””â”€â”€ team-hierarchy.page.ts            # æ–°å¢ï¼šåœ˜éšŠå±¤ç´šé é¢
â”‚
â”œâ”€â”€ services/                              # çµ„ç¹”æœå‹™
â”‚   â”œâ”€â”€ organization.service.ts
â”‚   â”œâ”€â”€ organization-domain.service.ts
â”‚   â”œâ”€â”€ team.service.ts
â”‚   â”œâ”€â”€ team-hierarchy.service.ts          # æ–°å¢ï¼šåœ˜éšŠå±¤ç´šæœå‹™
â”‚   â”œâ”€â”€ member.service.ts
â”‚   â”œâ”€â”€ security-manager.service.ts        # æ–°å¢ï¼šå®‰å…¨ç®¡ç†å™¨æœå‹™
â”‚   â”œâ”€â”€ organization-role.service.ts       # æ–°å¢ï¼šçµ„ç¹”è§’è‰²æœå‹™
â”‚   â””â”€â”€ firestore-organization.repository.ts
â”‚
â”œâ”€â”€ commands/                              # CQRS å‘½ä»¤
â”‚   â”œâ”€â”€ create-organization.command.ts
â”‚   â”œâ”€â”€ update-organization.command.ts
â”‚   â”œâ”€â”€ add-member.command.ts
â”‚   â”œâ”€â”€ remove-member.command.ts
â”‚   â”œâ”€â”€ create-team.command.ts
â”‚   â”œâ”€â”€ create-nested-team.command.ts      # æ–°å¢ï¼šå‰µå»ºåµŒå¥—åœ˜éšŠ
â”‚   â”œâ”€â”€ assign-project.command.ts
â”‚   â”œâ”€â”€ add-security-manager.command.ts    # æ–°å¢ï¼šæ·»åŠ å®‰å…¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ remove-security-manager.command.ts # æ–°å¢ï¼šç§»é™¤å®‰å…¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ create-organization-role.command.ts # æ–°å¢ï¼šå‰µå»ºçµ„ç¹”è§’è‰²
â”‚   â””â”€â”€ assign-team-member-role.command.ts # æ–°å¢ï¼šåˆ†é…åœ˜éšŠæˆå“¡è§’è‰²
â”‚
â”œâ”€â”€ queries/                               # CQRS æŸ¥è©¢
â”‚   â”œâ”€â”€ get-organizations.query.ts
â”‚   â”œâ”€â”€ get-organization-by-id.query.ts
â”‚   â”œâ”€â”€ get-organization-members.query.ts
â”‚   â”œâ”€â”€ get-organization-teams.query.ts
â”‚   â”œâ”€â”€ get-team-hierarchy.query.ts        # æ–°å¢ï¼šç²å–åœ˜éšŠå±¤ç´š
â”‚   â”œâ”€â”€ get-security-managers.query.ts     # æ–°å¢ï¼šç²å–å®‰å…¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ get-organization-roles.query.ts   # æ–°å¢ï¼šç²å–çµ„ç¹”è§’è‰²
â”‚   â””â”€â”€ get-team-members.query.ts         # æ–°å¢ï¼šç²å–åœ˜éšŠæˆå“¡
â”‚
â”œâ”€â”€ events/                                # CQRS äº‹ä»¶
â”‚   â”œâ”€â”€ organization-created.event.ts
â”‚   â”œâ”€â”€ member-added.event.ts
â”‚   â”œâ”€â”€ team-created.event.ts
â”‚   â”œâ”€â”€ nested-team-created.event.ts      # æ–°å¢ï¼šåµŒå¥—åœ˜éšŠå‰µå»ºäº‹ä»¶
â”‚   â”œâ”€â”€ project-assigned.event.ts
â”‚   â”œâ”€â”€ security-manager-added.event.ts   # æ–°å¢ï¼šå®‰å…¨ç®¡ç†å™¨æ·»åŠ äº‹ä»¶
â”‚   â”œâ”€â”€ team-member-role-changed.event.ts # æ–°å¢ï¼šåœ˜éšŠæˆå“¡è§’è‰²è®Šæ›´äº‹ä»¶
â”‚   â””â”€â”€ organization-role-created.event.ts # æ–°å¢ï¼šçµ„ç¹”è§’è‰²å‰µå»ºäº‹ä»¶
â”‚
â”œâ”€â”€ models/                                # çµ„ç¹”æ¨¡å‹
â”‚   â”œâ”€â”€ organization.model.ts
â”‚   â”œâ”€â”€ organization-member.model.ts
â”‚   â”œâ”€â”€ team.model.ts
â”‚   â”œâ”€â”€ team-member.model.ts               # æ–°å¢ï¼šåœ˜éšŠæˆå“¡æ¨¡å‹
â”‚   â”œâ”€â”€ team-hierarchy.model.ts           # æ–°å¢ï¼šåœ˜éšŠå±¤ç´šæ¨¡å‹
â”‚   â”œâ”€â”€ security-manager.model.ts         # æ–°å¢ï¼šå®‰å…¨ç®¡ç†å™¨æ¨¡å‹
â”‚   â”œâ”€â”€ organization-role.model.ts        # æ–°å¢ï¼šçµ„ç¹”è§’è‰²æ¨¡å‹
â”‚   â””â”€â”€ organization-settings.model.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ organization-state.service.ts
â”‚   â”œâ”€â”€ team-state.service.ts
â”‚   â”œâ”€â”€ team-hierarchy-state.service.ts   # æ–°å¢ï¼šåœ˜éšŠå±¤ç´šç‹€æ…‹
â”‚   â”œâ”€â”€ member-state.service.ts
â”‚   â”œâ”€â”€ security-manager-state.service.ts # æ–°å¢ï¼šå®‰å…¨ç®¡ç†å™¨ç‹€æ…‹
â”‚   â””â”€â”€ organization-role-state.service.ts # æ–°å¢ï¼šçµ„ç¹”è§’è‰²ç‹€æ…‹
â”‚
â”œâ”€â”€ routes/                                # çµ„ç¹”è·¯ç”±
â”‚   â””â”€â”€ organization.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

### 3.3 å°ˆæ¡ˆæ¨¡çµ„ (Project Module)

```
src/app/features/project/
â”œâ”€â”€ components/                            # å°ˆæ¡ˆå…ƒä»¶
â”‚   â”œâ”€â”€ project-card.component.ts
â”‚   â”œâ”€â”€ project-form.component.ts
â”‚   â”œâ”€â”€ project-list.component.ts
â”‚   â”œâ”€â”€ project-dashboard.component.ts
â”‚   â”œâ”€â”€ milestone-management.component.ts
â”‚   â”œâ”€â”€ task-management.component.ts
â”‚   â”œâ”€â”€ document-management.component.ts
â”‚   â”œâ”€â”€ photo-gallery.component.ts
â”‚   â”œâ”€â”€ cost-control.component.ts
â”‚   â”œâ”€â”€ gantt-chart.component.ts
â”‚   â””â”€â”€ project-timeline.component.ts
â”‚
â”œâ”€â”€ pages/                                 # å°ˆæ¡ˆé é¢
â”‚   â”œâ”€â”€ project-list.page.ts
â”‚   â”œâ”€â”€ project-detail.page.ts
â”‚   â”œâ”€â”€ project-dashboard.page.ts
â”‚   â”œâ”€â”€ project-tasks.page.ts
â”‚   â”œâ”€â”€ project-documents.page.ts
â”‚   â”œâ”€â”€ project-photos.page.ts
â”‚   â”œâ”€â”€ project-cost.page.ts
â”‚   â””â”€â”€ project-settings.page.ts
â”‚
â”œâ”€â”€ services/                              # å°ˆæ¡ˆæœå‹™
â”‚   â”œâ”€â”€ project.service.ts
â”‚   â”œâ”€â”€ project-domain.service.ts
â”‚   â”œâ”€â”€ milestone.service.ts
â”‚   â”œâ”€â”€ task.service.ts
â”‚   â”œâ”€â”€ document.service.ts
â”‚   â”œâ”€â”€ cost-control.service.ts
â”‚   â””â”€â”€ firestore-project.repository.ts
â”‚
â”œâ”€â”€ commands/                              # CQRS å‘½ä»¤
â”‚   â”œâ”€â”€ create-project.command.ts
â”‚   â”œâ”€â”€ update-project.command.ts
â”‚   â”œâ”€â”€ add-milestone.command.ts
â”‚   â”œâ”€â”€ create-task.command.ts
â”‚   â”œâ”€â”€ upload-document.command.ts
â”‚   â”œâ”€â”€ add-daily-report.command.ts
â”‚   â””â”€â”€ update-cost.command.ts
â”‚
â”œâ”€â”€ queries/                               # CQRS æŸ¥è©¢
â”‚   â”œâ”€â”€ get-projects.query.ts
â”‚   â”œâ”€â”€ get-project-by-id.query.ts
â”‚   â”œâ”€â”€ get-project-milestones.query.ts
â”‚   â”œâ”€â”€ get-project-tasks.query.ts
â”‚   â””â”€â”€ get-project-cost.query.ts
â”‚
â”œâ”€â”€ events/                                # CQRS äº‹ä»¶
â”‚   â”œâ”€â”€ project-created.event.ts
â”‚   â”œâ”€â”€ milestone-added.event.ts
â”‚   â”œâ”€â”€ task-created.event.ts
â”‚   â”œâ”€â”€ document-uploaded.event.ts
â”‚   â””â”€â”€ cost-updated.event.ts
â”‚
â”œâ”€â”€ models/                                # å°ˆæ¡ˆæ¨¡å‹
â”‚   â”œâ”€â”€ project.model.ts
â”‚   â”œâ”€â”€ milestone.model.ts
â”‚   â”œâ”€â”€ task.model.ts
â”‚   â”œâ”€â”€ document.model.ts
â”‚   â”œâ”€â”€ daily-report.model.ts
â”‚   â”œâ”€â”€ inspection.model.ts
â”‚   â”œâ”€â”€ material.model.ts
â”‚   â”œâ”€â”€ equipment.model.ts
â”‚   â”œâ”€â”€ safety-record.model.ts
â”‚   â”œâ”€â”€ weather-log.model.ts
â”‚   â”œâ”€â”€ comment.model.ts
â”‚   â””â”€â”€ cost-control.model.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ project-state.service.ts
â”‚   â”œâ”€â”€ milestone-state.service.ts
â”‚   â”œâ”€â”€ task-state.service.ts
â”‚   â””â”€â”€ cost-state.service.ts
â”‚
â”œâ”€â”€ routes/                                # å°ˆæ¡ˆè·¯ç”±
â”‚   â””â”€â”€ project.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

### 3.4 ç¤¾äº¤æ¨¡çµ„ (Social Module)

```
src/app/features/social/
â”œâ”€â”€ components/                            # ç¤¾äº¤å…ƒä»¶
â”‚   â”œâ”€â”€ social-feed.component.ts
â”‚   â”œâ”€â”€ post-card.component.ts
â”‚   â”œâ”€â”€ comment-section.component.ts
â”‚   â”œâ”€â”€ like-button.component.ts
â”‚   â”œâ”€â”€ share-button.component.ts
â”‚   â”œâ”€â”€ user-mention.component.ts
â”‚   â””â”€â”€ hashtag.component.ts
â”‚
â”œâ”€â”€ pages/                                 # ç¤¾äº¤é é¢
â”‚   â”œâ”€â”€ social-feed.page.ts
â”‚   â”œâ”€â”€ post-detail.page.ts
â”‚   â””â”€â”€ user-profile.page.ts
â”‚
â”œâ”€â”€ services/                              # ç¤¾äº¤æœå‹™
â”‚   â”œâ”€â”€ social-feed.service.ts
â”‚   â”œâ”€â”€ post.service.ts
â”‚   â”œâ”€â”€ comment.service.ts
â”‚   â””â”€â”€ firestore-social.repository.ts
â”‚
â”œâ”€â”€ commands/                              # CQRS å‘½ä»¤
â”‚   â”œâ”€â”€ create-post.command.ts
â”‚   â”œâ”€â”€ like-post.command.ts
â”‚   â”œâ”€â”€ add-comment.command.ts
â”‚   â””â”€â”€ share-post.command.ts
â”‚
â”œâ”€â”€ queries/                               # CQRS æŸ¥è©¢
â”‚   â”œâ”€â”€ get-social-feed.query.ts
â”‚   â”œâ”€â”€ get-post-by-id.query.ts
â”‚   â””â”€â”€ get-user-posts.query.ts
â”‚
â”œâ”€â”€ events/                                # CQRS äº‹ä»¶
â”‚   â”œâ”€â”€ post-created.event.ts
â”‚   â”œâ”€â”€ post-liked.event.ts
â”‚   â””â”€â”€ comment-added.event.ts
â”‚
â”œâ”€â”€ models/                                # ç¤¾äº¤æ¨¡å‹
â”‚   â”œâ”€â”€ post.model.ts
â”‚   â”œâ”€â”€ comment.model.ts
â”‚   â”œâ”€â”€ like.model.ts
â”‚   â””â”€â”€ share.model.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ social-state.service.ts
â”‚   â””â”€â”€ post-state.service.ts
â”‚
â”œâ”€â”€ routes/                                # ç¤¾äº¤è·¯ç”±
â”‚   â””â”€â”€ social.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

### 3.5 æˆå°±æ¨¡çµ„ (Achievement Module)

```
src/app/features/achievement/
â”œâ”€â”€ components/                            # æˆå°±å…ƒä»¶
â”‚   â”œâ”€â”€ achievement-card.component.ts
â”‚   â”œâ”€â”€ achievement-list.component.ts
â”‚   â”œâ”€â”€ achievement-progress.component.ts
â”‚   â”œâ”€â”€ leaderboard.component.ts
â”‚   â”œâ”€â”€ badge-display.component.ts
â”‚   â””â”€â”€ achievement-notification.component.ts
â”‚
â”œâ”€â”€ pages/                                 # æˆå°±é é¢
â”‚   â”œâ”€â”€ achievements.page.ts
â”‚   â”œâ”€â”€ leaderboard.page.ts
â”‚   â””â”€â”€ achievement-detail.page.ts
â”‚
â”œâ”€â”€ services/                              # æˆå°±æœå‹™
â”‚   â”œâ”€â”€ achievement.service.ts
â”‚   â”œâ”€â”€ achievement-domain.service.ts
â”‚   â”œâ”€â”€ leaderboard.service.ts
â”‚   â””â”€â”€ firestore-achievement.repository.ts
â”‚
â”œâ”€â”€ commands/                              # CQRS å‘½ä»¤
â”‚   â”œâ”€â”€ create-achievement.command.ts
â”‚   â”œâ”€â”€ award-achievement.command.ts
â”‚   â””â”€â”€ update-leaderboard.command.ts
â”‚
â”œâ”€â”€ queries/                               # CQRS æŸ¥è©¢
â”‚   â”œâ”€â”€ get-achievements.query.ts
â”‚   â”œâ”€â”€ get-user-achievements.query.ts
â”‚   â””â”€â”€ get-leaderboard.query.ts
â”‚
â”œâ”€â”€ events/                                # CQRS äº‹ä»¶
â”‚   â”œâ”€â”€ achievement-earned.event.ts
â”‚   â”œâ”€â”€ leaderboard-updated.event.ts
â”‚   â””â”€â”€ badge-unlocked.event.ts
â”‚
â”œâ”€â”€ models/                                # æˆå°±æ¨¡å‹
â”‚   â”œâ”€â”€ achievement.model.ts
â”‚   â”œâ”€â”€ user-achievement.model.ts
â”‚   â”œâ”€â”€ leaderboard-entry.model.ts
â”‚   â””â”€â”€ achievement-rule.model.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ achievement-state.service.ts
â”‚   â””â”€â”€ leaderboard-state.service.ts
â”‚
â”œâ”€â”€ routes/                                # æˆå°±è·¯ç”±
â”‚   â””â”€â”€ achievement.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

### 3.6 é€šçŸ¥æ¨¡çµ„ (Notification Module)

```
src/app/features/notification/
â”œâ”€â”€ components/                            # é€šçŸ¥å…ƒä»¶
â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”œâ”€â”€ notification-badge.component.ts
â”‚   â”œâ”€â”€ notification-toast.component.ts
â”‚   â””â”€â”€ notification-item.component.ts
â”‚
â”œâ”€â”€ pages/                                 # é€šçŸ¥é é¢
â”‚   â”œâ”€â”€ notifications.page.ts
â”‚   â””â”€â”€ notification-settings.page.ts
â”‚
â”œâ”€â”€ services/                              # é€šçŸ¥æœå‹™
â”‚   â”œâ”€â”€ notification.service.ts
â”‚   â”œâ”€â”€ push-notification.service.ts
â”‚   â”œâ”€â”€ email-notification.service.ts
â”‚   â””â”€â”€ firestore-notification.repository.ts
â”‚
â”œâ”€â”€ commands/                              # CQRS å‘½ä»¤
â”‚   â”œâ”€â”€ send-notification.command.ts
â”‚   â”œâ”€â”€ mark-as-read.command.ts
â”‚   â””â”€â”€ update-settings.command.ts
â”‚
â”œâ”€â”€ queries/                               # CQRS æŸ¥è©¢
â”‚   â”œâ”€â”€ get-notifications.query.ts
â”‚   â”œâ”€â”€ get-unread-count.query.ts
â”‚   â””â”€â”€ get-notification-settings.query.ts
â”‚
â”œâ”€â”€ events/                                # CQRS äº‹ä»¶
â”‚   â”œâ”€â”€ notification-sent.event.ts
â”‚   â”œâ”€â”€ notification-read.event.ts
â”‚   â””â”€â”€ settings-updated.event.ts
â”‚
â”œâ”€â”€ models/                                # é€šçŸ¥æ¨¡å‹
â”‚   â”œâ”€â”€ notification.model.ts
â”‚   â”œâ”€â”€ notification-settings.model.ts
â”‚   â””â”€â”€ notification-template.model.ts
â”‚
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ notification-state.service.ts
â”‚   â””â”€â”€ settings-state.service.ts
â”‚
â”œâ”€â”€ routes/                                # é€šçŸ¥è·¯ç”±
â”‚   â””â”€â”€ notification.routes.ts
â”‚
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

## 4. å…±äº«æ¨¡çµ„çµæ§‹

### 4.1 å…±äº«å…ƒä»¶ (Shared Components)

```
src/app/shared/components/
â”œâ”€â”€ ui/                                    # UI å…ƒä»¶
â”‚   â”œâ”€â”€ button/
â”‚   â”‚   â”œâ”€â”€ button.component.ts
â”‚   â”‚   â”œâ”€â”€ button.component.html
â”‚   â”‚   â”œâ”€â”€ button.component.scss
â”‚   â”‚   â””â”€â”€ button.component.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”œâ”€â”€ input.component.ts
â”‚   â”‚   â”œâ”€â”€ input.component.html
â”‚   â”‚   â”œâ”€â”€ input.component.scss
â”‚   â”‚   â””â”€â”€ input.component.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ modal/
â”‚   â”‚   â”œâ”€â”€ modal.component.ts
â”‚   â”‚   â”œâ”€â”€ modal.component.html
â”‚   â”‚   â”œâ”€â”€ modal.component.scss
â”‚   â”‚   â””â”€â”€ modal.component.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ table/
â”‚   â”‚   â”œâ”€â”€ table.component.ts
â”‚   â”‚   â”œâ”€â”€ table.component.html
â”‚   â”‚   â”œâ”€â”€ table.component.scss
â”‚   â”‚   â””â”€â”€ table.component.spec.ts
â”‚   â”‚
â”‚   â””â”€â”€ chart/
â”‚       â”œâ”€â”€ chart.component.ts
â”‚       â”œâ”€â”€ chart.component.html
â”‚       â”œâ”€â”€ chart.component.scss
â”‚       â””â”€â”€ chart.component.spec.ts
â”‚
â”œâ”€â”€ forms/                                 # è¡¨å–®å…ƒä»¶
â”‚   â”œâ”€â”€ form-field/
â”‚   â”œâ”€â”€ form-validation/
â”‚   â”œâ”€â”€ form-stepper/
â”‚   â””â”€â”€ form-wizard/
â”‚
â”œâ”€â”€ layout/                                # ä½ˆå±€å…ƒä»¶
â”‚   â”œâ”€â”€ header/
â”‚   â”œâ”€â”€ sidebar/
â”‚   â”œâ”€â”€ footer/
â”‚   â””â”€â”€ breadcrumb/
â”‚
â”œâ”€â”€ data/                                  # è³‡æ–™å…ƒä»¶
â”‚   â”œâ”€â”€ data-table/
â”‚   â”œâ”€â”€ data-grid/
â”‚   â”œâ”€â”€ data-list/
â”‚   â””â”€â”€ data-tree/
â”‚
â””â”€â”€ media/                                 # åª’é«”å…ƒä»¶
    â”œâ”€â”€ image-gallery/
    â”œâ”€â”€ video-player/
    â”œâ”€â”€ file-upload/
    â””â”€â”€ media-viewer/
```

### 4.2 å…±äº«æœå‹™ (Shared Services)

```
src/app/shared/services/
â”œâ”€â”€ http/                                  # HTTP æœå‹™
â”‚   â”œâ”€â”€ http.service.ts
â”‚   â”œâ”€â”€ api.service.ts
â”‚   â””â”€â”€ error-handler.service.ts
â”‚
â”œâ”€â”€ storage/                                # å„²å­˜æœå‹™
â”‚   â”œâ”€â”€ storage.service.ts
â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â””â”€â”€ session-storage.service.ts
â”‚
â”œâ”€â”€ utils/                                 # å·¥å…·æœå‹™
â”‚   â”œâ”€â”€ date.service.ts
â”‚   â”œâ”€â”€ format.service.ts
â”‚   â”œâ”€â”€ validation.service.ts
â”‚   â””â”€â”€ crypto.service.ts
â”‚
â”œâ”€â”€ ui/                                    # UI æœå‹™
â”‚   â”œâ”€â”€ dialog.service.ts
â”‚   â”œâ”€â”€ toast.service.ts
â”‚   â”œâ”€â”€ loading.service.ts
â”‚   â””â”€â”€ theme.service.ts
â”‚
â””â”€â”€ business/                              # æ¥­å‹™æœå‹™
    â”œâ”€â”€ permission.service.ts
    â”œâ”€â”€ audit.service.ts
    â””â”€â”€ analytics.service.ts
```

### 4.3 å…±äº«æ¨¡å‹ (Shared Models)

```
src/app/shared/models/
â”œâ”€â”€ base/                                  # åŸºç¤æ¨¡å‹
â”‚   â”œâ”€â”€ base.model.ts
â”‚   â”œâ”€â”€ entity.model.ts
â”‚   â””â”€â”€ value-object.model.ts
â”‚
â”œâ”€â”€ common/                                # é€šç”¨æ¨¡å‹
â”‚   â”œâ”€â”€ pagination.model.ts
â”‚   â”œâ”€â”€ filter.model.ts
â”‚   â”œâ”€â”€ sort.model.ts
â”‚   â””â”€â”€ search.model.ts
â”‚
â”œâ”€â”€ api/                                   # API æ¨¡å‹
â”‚   â”œâ”€â”€ api-response.model.ts
â”‚   â”œâ”€â”€ api-error.model.ts
â”‚   â””â”€â”€ api-request.model.ts
â”‚
â””â”€â”€ ui/                                    # UI æ¨¡å‹
    â”œâ”€â”€ menu-item.model.ts
    â”œâ”€â”€ breadcrumb.model.ts
    â””â”€â”€ notification.model.ts
```

## 5. æ ¸å¿ƒæ¨¡çµ„çµæ§‹

### 5.1 èªè­‰æ ¸å¿ƒ (Auth Core)

```
src/app/core/auth/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ token.service.ts
â”‚   â””â”€â”€ permission.service.ts
â”‚
â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”œâ”€â”€ guest.guard.ts
â”‚   â””â”€â”€ role.guard.ts
â”‚
â”œâ”€â”€ interceptors/
â”‚   â””â”€â”€ auth.interceptor.ts
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”œâ”€â”€ token.model.ts
â”‚   â””â”€â”€ permission.model.ts
â”‚
â””â”€â”€ index.ts
```

### 5.2 HTTP æ ¸å¿ƒ (HTTP Core)

```
src/app/core/http/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ http.service.ts
â”‚   â”œâ”€â”€ api.service.ts
â”‚   â””â”€â”€ error-handler.service.ts
â”‚
â”œâ”€â”€ interceptors/
â”‚   â”œâ”€â”€ auth.interceptor.ts
â”‚   â”œâ”€â”€ error.interceptor.ts
â”‚   â””â”€â”€ loading.interceptor.ts
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ api-response.model.ts
â”‚   â”œâ”€â”€ api-error.model.ts
â”‚   â””â”€â”€ http-config.model.ts
â”‚
â””â”€â”€ index.ts
```

### 5.3 å„²å­˜æ ¸å¿ƒ (Storage Core)

```
src/app/core/storage/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ storage.service.ts
â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â””â”€â”€ session-storage.service.ts
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ storage-item.model.ts
â”‚   â””â”€â”€ storage-config.model.ts
â”‚
â””â”€â”€ index.ts
```

## 6. ä½ˆå±€å…ƒä»¶çµæ§‹

### 6.1 ä¸»è¦ä½ˆå±€ (Main Layout)

```
src/app/layouts/main-layout/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”œâ”€â”€ header.component.ts
â”‚   â”‚   â”œâ”€â”€ header.component.html
â”‚   â”‚   â”œâ”€â”€ header.component.scss
â”‚   â”‚   â””â”€â”€ header.component.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”œâ”€â”€ sidebar.component.html
â”‚   â”‚   â”œâ”€â”€ sidebar.component.scss
â”‚   â”‚   â””â”€â”€ sidebar.component.spec.ts
â”‚   â”‚
â”‚   â””â”€â”€ footer/
â”‚       â”œâ”€â”€ footer.component.ts
â”‚       â”œâ”€â”€ footer.component.html
â”‚       â”œâ”€â”€ footer.component.scss
â”‚       â””â”€â”€ footer.component.spec.ts
â”‚
â”œâ”€â”€ main-layout.component.ts
â”œâ”€â”€ main-layout.component.html
â”œâ”€â”€ main-layout.component.scss
â”œâ”€â”€ main-layout.component.spec.ts
â””â”€â”€ index.ts
```

### 6.2 èªè­‰ä½ˆå±€ (Auth Layout)

```
src/app/layouts/auth-layout/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth-header/
â”‚   â””â”€â”€ auth-footer/
â”‚
â”œâ”€â”€ auth-layout.component.ts
â”œâ”€â”€ auth-layout.component.html
â”œâ”€â”€ auth-layout.component.scss
â”œâ”€â”€ auth-layout.component.spec.ts
â””â”€â”€ index.ts
```

## 7. æ¸¬è©¦çµæ§‹

### 7.1 å–®å…ƒæ¸¬è©¦ (Unit Tests)

```
src/tests/unit/
â”œâ”€â”€ components/                            # å…ƒä»¶æ¸¬è©¦
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ organization/
â”‚   â”œâ”€â”€ project/
â”‚   â””â”€â”€ shared/
â”‚
â”œâ”€â”€ services/                              # æœå‹™æ¸¬è©¦
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ organization/
â”‚   â”œâ”€â”€ project/
â”‚   â””â”€â”€ shared/
â”‚
â”œâ”€â”€ pipes/                                 # ç®¡é“æ¸¬è©¦
â”œâ”€â”€ directives/                            # æŒ‡ä»¤æ¸¬è©¦
â””â”€â”€ utils/                                 # å·¥å…·æ¸¬è©¦
```

### 7.2 æ•´åˆæ¸¬è©¦ (Integration Tests)

```
src/tests/integration/
â”œâ”€â”€ features/                              # åŠŸèƒ½æ•´åˆæ¸¬è©¦
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ organization/
â”‚   â”œâ”€â”€ project/
â”‚   â””â”€â”€ social/
â”‚
â”œâ”€â”€ api/                                   # API æ•´åˆæ¸¬è©¦
â”œâ”€â”€ auth/                                  # èªè­‰æ•´åˆæ¸¬è©¦
â””â”€â”€ e2e/                                   # ç«¯å°ç«¯æ¸¬è©¦
```

## 8. é…ç½®æª”æ¡ˆ

### 8.1 Angular é…ç½®

```
angular.json                               # Angular å°ˆæ¡ˆé…ç½®
tsconfig.json                              # TypeScript é…ç½®
tsconfig.app.json                          # æ‡‰ç”¨ç¨‹å¼ TypeScript é…ç½®
tsconfig.spec.json                         # æ¸¬è©¦ TypeScript é…ç½®
```

### 8.2 ç’°å¢ƒé…ç½®

```
src/environments/
â”œâ”€â”€ environment.ts                         # é–‹ç™¼ç’°å¢ƒ
â”œâ”€â”€ environment.prod.ts                    # ç”Ÿç”¢ç’°å¢ƒ
â”œâ”€â”€ environment.staging.ts                 # æ¸¬è©¦ç’°å¢ƒ
â””â”€â”€ environment.test.ts                    # æ¸¬è©¦ç’°å¢ƒ
```

### 8.3 æ¨£å¼é…ç½®

```
src/styles/
â”œâ”€â”€ _variables.scss                        # SCSS è®Šæ•¸
â”œâ”€â”€ _mixins.scss                           # SCSS æ··å…¥
â”œâ”€â”€ _base.scss                             # åŸºç¤æ¨£å¼
â”œâ”€â”€ _themes.scss                           # ä¸»é¡Œæ¨£å¼
â”œâ”€â”€ _components.scss                       # å…ƒä»¶æ¨£å¼
â””â”€â”€ styles.scss                            # ä¸»è¦æ¨£å¼æª”æ¡ˆ
```

## 9. é–‹ç™¼æŒ‡å—

### 9.1 æª”æ¡ˆå‘½åè¦ç¯„

#### 9.1.1 å…ƒä»¶æª”æ¡ˆ
- **å…ƒä»¶æª”æ¡ˆ**: `kebab-case.component.ts`
- **HTML æ¨¡æ¿**: `kebab-case.component.html`
- **æ¨£å¼æª”æ¡ˆ**: `kebab-case.component.scss`
- **æ¸¬è©¦æª”æ¡ˆ**: `kebab-case.component.spec.ts`

#### 9.1.2 æœå‹™æª”æ¡ˆ
- **æœå‹™æª”æ¡ˆ**: `kebab-case.service.ts`
- **æ¸¬è©¦æª”æ¡ˆ**: `kebab-case.service.spec.ts`

#### 9.1.3 æ¨¡å‹æª”æ¡ˆ
- **æ¨¡å‹æª”æ¡ˆ**: `kebab-case.model.ts`

#### 9.1.4 é é¢æª”æ¡ˆ
- **é é¢æª”æ¡ˆ**: `kebab-case.page.ts`

### 9.2 ç›®éŒ„çµæ§‹è¦ç¯„

#### 9.2.1 åŠŸèƒ½æ¨¡çµ„çµæ§‹
```
feature-name/
â”œâ”€â”€ components/                            # å…ƒä»¶ç›®éŒ„
â”œâ”€â”€ pages/                                 # é é¢ç›®éŒ„
â”œâ”€â”€ services/                              # æœå‹™ç›®éŒ„
â”œâ”€â”€ models/                                # æ¨¡å‹ç›®éŒ„
â”œâ”€â”€ state/                                 # ç‹€æ…‹ç®¡ç†ç›®éŒ„
â”œâ”€â”€ routes/                                # è·¯ç”±ç›®éŒ„
â””â”€â”€ index.ts                               # æ¨¡çµ„åŒ¯å‡º
```

#### 9.2.2 å…ƒä»¶ç›®éŒ„çµæ§‹
```
component-name/
â”œâ”€â”€ component-name.component.ts
â”œâ”€â”€ component-name.component.html
â”œâ”€â”€ component-name.component.scss
â”œâ”€â”€ component-name.component.spec.ts
â””â”€â”€ index.ts                               # å…ƒä»¶åŒ¯å‡º
```

### 9.3 ä»£ç¢¼çµ„ç¹”åŸå‰‡

#### 9.3.1 å–®ä¸€è·è²¬åŸå‰‡
- æ¯å€‹å…ƒä»¶åªè² è²¬ä¸€å€‹åŠŸèƒ½
- æ¯å€‹æœå‹™åªè™•ç†ä¸€ç¨®æ¥­å‹™é‚è¼¯
- æ¯å€‹æ¨¡å‹åªå®šç¾©ä¸€ç¨®è³‡æ–™çµæ§‹

#### 9.3.2 ä¾è³´æ³¨å…¥åŸå‰‡
- ä½¿ç”¨ Angular çš„ä¾è³´æ³¨å…¥ç³»çµ±
- é¿å…ç›´æ¥å¯¦ä¾‹åŒ–æœå‹™
- ä½¿ç”¨ä»‹é¢å®šç¾©æœå‹™å¥‘ç´„

#### 9.3.3 æ¨¡çµ„åŒ–åŸå‰‡
- æŒ‰åŠŸèƒ½é ˜åŸŸåŠƒåˆ†æ¨¡çµ„
- ä¿æŒæ¨¡çµ„é–“çš„é¬†è€¦åˆ
- ä½¿ç”¨å…±äº«æ¨¡çµ„æä¾›é€šç”¨åŠŸèƒ½

### 9.4 æ¸¬è©¦ç­–ç•¥

#### 9.4.1 å–®å…ƒæ¸¬è©¦
- æ¯å€‹å…ƒä»¶å’Œæœå‹™éƒ½æ‡‰è©²æœ‰å°æ‡‰çš„æ¸¬è©¦
- æ¸¬è©¦è¦†è“‹ç‡æ‡‰è©²é”åˆ° 80% ä»¥ä¸Š
- ä½¿ç”¨ Jasmine å’Œ Karma é€²è¡Œæ¸¬è©¦

#### 9.4.2 æ•´åˆæ¸¬è©¦
- æ¸¬è©¦æ¨¡çµ„é–“çš„æ•´åˆ
- æ¸¬è©¦ API æ•´åˆ
- ä½¿ç”¨ Protractor é€²è¡Œç«¯å°ç«¯æ¸¬è©¦

#### 9.4.3 æ¸¬è©¦æª”æ¡ˆçµ„ç¹”
- æ¸¬è©¦æª”æ¡ˆèˆ‡æºæª”æ¡ˆæ”¾åœ¨åŒä¸€ç›®éŒ„
- ä½¿ç”¨ `.spec.ts` å¾Œç¶´å‘½åæ¸¬è©¦æª”æ¡ˆ
- æ¸¬è©¦æª”æ¡ˆæ‡‰è©²èˆ‡æºæª”æ¡ˆä¿æŒç›¸åŒçš„çµæ§‹

## 10. éƒ¨ç½²èˆ‡å»ºç½®

### 10.1 å»ºç½®é…ç½®

#### 10.1.1 é–‹ç™¼å»ºç½®
```bash
ng build --configuration=development
```

#### 10.1.2 ç”Ÿç”¢å»ºç½®
```bash
ng build --configuration=production
```

#### 10.1.3 æ¸¬è©¦å»ºç½®
```bash
ng build --configuration=staging
```

### 10.2 éƒ¨ç½²ç­–ç•¥

#### 10.2.1 éœæ…‹éƒ¨ç½²
- ä½¿ç”¨ Nginx æˆ– Apache æä¾›éœæ…‹æª”æ¡ˆ
- é…ç½®é©ç•¶çš„å¿«å–ç­–ç•¥
- ä½¿ç”¨ CDN åŠ é€Ÿè³‡æºè¼‰å…¥

#### 10.2.2 å®¹å™¨åŒ–éƒ¨ç½²
- ä½¿ç”¨ Docker å®¹å™¨åŒ–æ‡‰ç”¨
- ä½¿ç”¨ Kubernetes é€²è¡Œå®¹å™¨ç·¨æ’
- é…ç½®é©ç•¶çš„è³‡æºé™åˆ¶å’Œå¥åº·æª¢æŸ¥

### 10.3 ç›£æ§èˆ‡æ—¥èªŒ

#### 10.3.1 æ‡‰ç”¨ç¨‹å¼ç›£æ§
- ä½¿ç”¨ Angular çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- æ•´åˆç¬¬ä¸‰æ–¹ç›£æ§æœå‹™
- é…ç½®é©ç•¶çš„å‘Šè­¦æ©Ÿåˆ¶

#### 10.3.2 æ•ˆèƒ½ç›£æ§
- ç›£æ§é é¢è¼‰å…¥æ™‚é–“
- ç›£æ§ API å›æ‡‰æ™‚é–“
- ç›£æ§ç”¨æˆ¶é«”é©—æŒ‡æ¨™

---

**æ–‡ä»¶ç‰ˆæœ¬**: v1.0  
**æœ€å¾Œæ›´æ–°**: 2024-01-01  
**ç¶­è­·è€…**: å‰ç«¯é–‹ç™¼åœ˜éšŠ  
**å¯©æ ¸è€…**: æŠ€è¡“æ¶æ§‹å¸«
`````

## File: docs/SYSTEM_ARCHITECTURE.md
`````markdown
# ç‡Ÿå»ºç®¡ç†ç³»çµ± - ç³»çµ±æ¶æ§‹æ–‡ä»¶

## 1. ç³»çµ±æ¦‚è¿°

### 1.1 ç³»çµ±ç›®çš„
ç‡Ÿå»ºç®¡ç†ç³»çµ±æ˜¯ä¸€å€‹å°ˆç‚ºç‡Ÿé€ æ¥­è¨­è¨ˆçš„ç¶œåˆæ€§ç®¡ç†å¹³å°ï¼Œæ•´åˆå°ˆæ¡ˆç®¡ç†ã€äººå“¡ç®¡ç†ã€çµ„ç¹”ç®¡ç†ã€ç¤¾äº¤åŠŸèƒ½ç­‰æ ¸å¿ƒæ¨¡çµ„ï¼Œæä¾›å®Œæ•´çš„ç‡Ÿå»ºå°ˆæ¡ˆç”Ÿå‘½é€±æœŸç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚

### 1.2 ç›®æ¨™ç”¨æˆ¶
- **å€‹äººç”¨æˆ¶**: å·¥ç¨‹å¸«ã€ç›£å·¥ã€æ‰¿åŒ…å•†
- **çµ„ç¹”ç”¨æˆ¶**: ç‡Ÿé€ å…¬å¸ã€å»ºè¨­å…¬å¸
- **å°ˆæ¡ˆåœ˜éšŠ**: å·¥å‹™çµ„ã€å®‰å…¨çµ„ã€å“ç®¡çµ„

### 1.3 æ ¸å¿ƒåƒ¹å€¼
- æå‡å°ˆæ¡ˆç®¡ç†æ•ˆç‡
- å¼·åŒ–åœ˜éšŠå”ä½œèƒ½åŠ›
- å„ªåŒ–è³‡æºé…ç½®
- ç¢ºä¿å°ˆæ¡ˆå“è³ªèˆ‡å®‰å…¨

## 2. ç³»çµ±æ¶æ§‹

### 2.1 æ•´é«”æ¶æ§‹åœ–

```mermaid
graph TB
    subgraph "å‰ç«¯å±¤ (Frontend Layer)"
        Web[Web Application]
        Mobile[Mobile Application]
    end
    
    subgraph "API å±¤ (API Layer)"
        Gateway[API Gateway]
        Auth[Authentication Service]
        Notification[Notification Service]
    end
    
    subgraph "æ¥­å‹™é‚è¼¯å±¤ (Business Logic Layer)"
        User[User Module]
        Org[Organization Module]
        Project[Project Module]
        Social[Social Module]
        Achievement[Achievement Module]
    end
    
    subgraph "è³‡æ–™å±¤ (Data Layer)"
        UserDB[(User Database)]
        ProjectDB[(Project Database)]
        FileStorage[(File Storage)]
        Cache[(Cache)]
    end
    
    Web --> Gateway
    Mobile --> Gateway
    Gateway --> Auth
    Gateway --> User
    Gateway --> Org
    Gateway --> Project
    Gateway --> Social
    Gateway --> Achievement
    Gateway --> Notification
    
    User --> UserDB
    Org --> UserDB
    Project --> ProjectDB
    Social --> UserDB
    Achievement --> UserDB
    Notification --> Cache
    
    User --> FileStorage
    Project --> FileStorage
```

### 2.2 æŠ€è¡“æ¶æ§‹

#### å‰ç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**: Angular 17+
- **ç‹€æ…‹ç®¡ç†**: NgRx
- **UI å…ƒä»¶åº«**: Angular Material
- **åœ–è¡¨**: Chart.js / D3.js
- **åœ°åœ–**: Google Maps API

#### å¾Œç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**: Node.js + Express / NestJS
- **è³‡æ–™åº«**: PostgreSQL (ä¸»è¦) + Redis (å¿«å–)
- **æª”æ¡ˆå„²å­˜**: Firebase Storage / AWS S3
- **èªè­‰**: Firebase Auth / Auth0
- **å³æ™‚é€šè¨Š**: Socket.io / WebSocket

#### éƒ¨ç½²æ¶æ§‹
- **å®¹å™¨åŒ–**: Docker + Kubernetes
- **CI/CD**: GitHub Actions
- **ç›£æ§**: Prometheus + Grafana
- **æ—¥èªŒ**: ELK Stack

## 3. æ ¸å¿ƒæ¨¡çµ„è¨­è¨ˆ

### 3.1 ç”¨æˆ¶æ¨¡çµ„ (User Module)

#### 3.1.1 åŠŸèƒ½ç¯„åœ
- ç”¨æˆ¶è¨»å†Šèˆ‡èªè­‰
- å€‹äººè³‡æ–™ç®¡ç†
- å°ˆæ¥­è­‰ç…§ç®¡ç†
- ç¤¾äº¤åŠŸèƒ½
- é€šçŸ¥ç®¡ç†

#### 3.1.2 è³‡æ–™æ¨¡å‹
```typescript
interface User {
  id: string;
  email: string;
  profile: UserProfile;
  settings: UserSettings;
  teams: TeamMembership[];
  organizations: OrganizationMembership[];
  certificates: Certificate[];
  socialConnections: SocialConnection[];
  notifications: Notification[];
}

interface UserProfile {
  firstName: string;
  lastName: string;
  avatar?: string;
  bio?: string;
  skills: string[];
  experience: Experience[];
  contactInfo: ContactInfo;
}

interface Certificate {
  id: string;
  name: string;
  issuer: string;
  issueDate: Date;
  expiryDate?: Date;
  verificationStatus: 'pending' | 'verified' | 'rejected';
  documentUrl: string;
}
```

#### 3.1.3 API è¨­è¨ˆ
```typescript
// ç”¨æˆ¶èªè­‰ API
POST /api/auth/register
POST /api/auth/login
POST /api/auth/logout
POST /api/auth/refresh

// ç”¨æˆ¶è³‡æ–™ API
GET /api/users/profile
PUT /api/users/profile
GET /api/users/certificates
POST /api/users/certificates
PUT /api/users/certificates/:id
DELETE /api/users/certificates/:id

// ç¤¾äº¤åŠŸèƒ½ API
GET /api/users/following
POST /api/users/follow/:userId
DELETE /api/users/follow/:userId
GET /api/users/followers
```

### 3.2 çµ„ç¹”æ¨¡çµ„ (Organization Module)

#### 3.2.1 åŠŸèƒ½ç¯„åœ
- çµ„ç¹”è¨»å†Šèˆ‡ç®¡ç†
- æˆå“¡ç®¡ç†
- åœ˜éšŠç®¡ç†
- å°ˆæ¡ˆåˆ†é…
- æ¬Šé™æ§åˆ¶

#### 3.2.2 è³‡æ–™æ¨¡å‹
```typescript
interface Organization {
  id: string;
  name: string;
  type: 'construction' | 'consulting' | 'supplier';
  profile: OrganizationProfile;
  members: OrganizationMember[];
  teams: Team[];
  projects: Project[];
  settings: OrganizationSettings;
  securityManagers: SecurityManager[];
  organizationRoles: OrganizationRole[];
}

interface OrganizationMember {
  userId: string;
  role: 'owner' | 'admin' | 'manager' | 'engineer' | 'supervisor';
  organizationRoles: string[]; // æ”¯æ´å¤šå€‹çµ„ç¹”è§’è‰²
  teams: string[];
  permissions: Permission[];
  joinDate: Date;
  status: 'active' | 'inactive' | 'pending';
}

interface Team {
  id: string;
  name: string;
  slug: string; // URL-friendly version of team name
  description: string;
  members: TeamMember[];
  projects: string[];
  leader: string;
  parentTeamId?: string; // æ”¯æ´åœ˜éšŠå±¤ç´šçµæ§‹
  privacy: 'open' | 'closed'; // åœ˜éšŠéš±ç§è¨­å®š
  notificationSetting: 'all' | 'mentions' | 'secret'; // é€šçŸ¥è¨­å®š
  permission: 'read' | 'write' | 'admin'; // åœ˜éšŠæ¬Šé™ç­‰ç´š
  createdAt: Date;
  updatedAt: Date;
}

interface TeamMember {
  userId: string;
  role: 'member' | 'maintainer'; // ç°¡åŒ–ç‚º GitHub é¢¨æ ¼çš„è§’è‰²
  state: 'active' | 'pending'; // æˆå“¡ç‹€æ…‹
  joinedAt: Date;
}

interface SecurityManager {
  id: string;
  type: 'user' | 'team';
  entityId: string; // userId æˆ– teamId
  permissions: SecurityPermission[];
  assignedAt: Date;
  assignedBy: string;
}

interface OrganizationRole {
  id: string;
  name: string;
  description: string;
  permissions: Permission[];
  level: number; // è§’è‰²ç­‰ç´š
  isSystemRole: boolean; // æ˜¯å¦ç‚ºç³»çµ±é è¨­è§’è‰²
  createdAt: Date;
}
```

#### 3.2.3 API è¨­è¨ˆ
```typescript
// çµ„ç¹”ç®¡ç† API (å°é½Š GitHub REST API æ¨¡å¼)
GET /api/orgs/{org}                    // ç²å–çµ„ç¹”è³‡è¨Š
POST /api/orgs                          // å‰µå»ºçµ„ç¹”
PUT /api/orgs/{org}                     // æ›´æ–°çµ„ç¹”
DELETE /api/orgs/{org}                  // åˆªé™¤çµ„ç¹”

// çµ„ç¹”æˆå“¡ç®¡ç† API
GET /api/orgs/{org}/members             // ç²å–çµ„ç¹”æˆå“¡åˆ—è¡¨
POST /api/orgs/{org}/members             // é‚€è«‹æˆå“¡åŠ å…¥çµ„ç¹”
PUT /api/orgs/{org}/members/{username}   // æ›´æ–°æˆå“¡è§’è‰²
DELETE /api/orgs/{org}/members/{username} // ç§»é™¤çµ„ç¹”æˆå“¡
GET /api/orgs/{org}/memberships/{username} // ç²å–æˆå“¡è³‡æ ¼è©³æƒ…
PATCH /api/orgs/{org}/memberships/{username} // æ›´æ–°æˆå“¡è³‡æ ¼ç‹€æ…‹

// åœ˜éšŠç®¡ç† API
GET /api/orgs/{org}/teams               // ç²å–çµ„ç¹”åœ˜éšŠåˆ—è¡¨
POST /api/orgs/{org}/teams               // å‰µå»ºåœ˜éšŠ
GET /api/orgs/{org}/teams/{team_slug}    // ç²å–åœ˜éšŠè©³æƒ…
PATCH /api/orgs/{org}/teams/{team_slug}  // æ›´æ–°åœ˜éšŠè³‡è¨Š
DELETE /api/orgs/{org}/teams/{team_slug} // åˆªé™¤åœ˜éšŠ

// åœ˜éšŠæˆå“¡ç®¡ç† API
GET /api/orgs/{org}/teams/{team_slug}/members // ç²å–åœ˜éšŠæˆå“¡åˆ—è¡¨
PUT /api/orgs/{org}/teams/{team_slug}/memberships/{username} // æ·»åŠ æˆ–æ›´æ–°åœ˜éšŠæˆå“¡
DELETE /api/orgs/{org}/teams/{team_slug}/memberships/{username} // ç§»é™¤åœ˜éšŠæˆå“¡
GET /api/orgs/{org}/teams/{team_slug}/memberships/{username} // ç²å–åœ˜éšŠæˆå“¡è³‡æ ¼
GET /api/orgs/{org}/teams/{team_slug}/invitations // ç²å–å¾…è™•ç†çš„åœ˜éšŠé‚€è«‹

// å®‰å…¨ç®¡ç†å™¨ API
GET /api/orgs/{org}/security-managers    // ç²å–å®‰å…¨ç®¡ç†å™¨åˆ—è¡¨
PUT /api/orgs/{org}/security-managers/users/{username} // æ·»åŠ ç”¨æˆ¶ç‚ºå®‰å…¨ç®¡ç†å™¨
PUT /api/orgs/{org}/security-managers/teams/{team_slug} // æ·»åŠ åœ˜éšŠç‚ºå®‰å…¨ç®¡ç†å™¨
DELETE /api/orgs/{org}/security-managers/users/{username} // ç§»é™¤ç”¨æˆ¶å®‰å…¨ç®¡ç†å™¨
DELETE /api/orgs/{org}/security-managers/teams/{team_slug} // ç§»é™¤åœ˜éšŠå®‰å…¨ç®¡ç†å™¨

// çµ„ç¹”è§’è‰²ç®¡ç† API
GET /api/orgs/{org}/organization-roles  // ç²å–çµ„ç¹”è§’è‰²åˆ—è¡¨
POST /api/orgs/{org}/organization-roles  // å‰µå»ºçµ„ç¹”è§’è‰²
PUT /api/orgs/{org}/organization-roles/users/{username}/{role_id} // åˆ†é…è§’è‰²çµ¦ç”¨æˆ¶
PUT /api/orgs/{org}/organization-roles/teams/{team_slug}/{role_id} // åˆ†é…è§’è‰²çµ¦åœ˜éšŠ
DELETE /api/orgs/{org}/organization-roles/users/{username}/{role_id} // ç§»é™¤ç”¨æˆ¶è§’è‰²
DELETE /api/orgs/{org}/organization-roles/teams/{team_slug}/{role_id} // ç§»é™¤åœ˜éšŠè§’è‰²
```

### 3.3 å°ˆæ¡ˆæ¨¡çµ„ (Project Module)

#### 3.3.1 åŠŸèƒ½ç¯„åœ
- å°ˆæ¡ˆå»ºç«‹èˆ‡ç®¡ç†
- é‡Œç¨‹ç¢‘ç®¡ç†
- ä»»å‹™è¿½è¹¤
- æ–‡ä»¶ç®¡ç†
- æˆæœ¬æ§åˆ¶
- å®‰å…¨è¨˜éŒ„
- å“è³ªç®¡ç†

#### 3.3.2 è³‡æ–™æ¨¡å‹
```typescript
interface Project {
  id: string;
  name: string;
  description: string;
  owner: ProjectOwner;
  status: 'planning' | 'active' | 'completed' | 'cancelled';
  timeline: ProjectTimeline;
  milestones: Milestone[];
  tasks: Task[];
  documents: Document[];
  photos: MediaFile[];
  dailyReports: DailyReport[];
  inspections: Inspection[];
  materials: Material[];
  equipment: Equipment[];
  safetyRecords: SafetyRecord[];
  weatherLogs: WeatherLog[];
  comments: Comment[];
  ganttData: GanttData;
  costControl: CostControl;
}

interface CostControl {
  budget: Budget;
  actualCost: ActualCost;
  forecast: Forecast;
  variance: Variance;
  breakdown: CostBreakdown;
}

interface Budget {
  total: number;
  labor: number;
  materials: number;
  equipment: number;
  overhead: number;
  contingency: number;
}
```

#### 3.3.3 API è¨­è¨ˆ
```typescript
// å°ˆæ¡ˆç®¡ç† API
POST /api/projects
GET /api/projects
GET /api/projects/:id
PUT /api/projects/:id
DELETE /api/projects/:id

// é‡Œç¨‹ç¢‘ç®¡ç† API
GET /api/projects/:id/milestones
POST /api/projects/:id/milestones
PUT /api/projects/:id/milestones/:milestoneId
DELETE /api/projects/:id/milestones/:milestoneId

// ä»»å‹™ç®¡ç† API
GET /api/projects/:id/tasks
POST /api/projects/:id/tasks
PUT /api/projects/:id/tasks/:taskId
DELETE /api/projects/:id/tasks/:taskId

// æˆæœ¬æ§åˆ¶ API
GET /api/projects/:id/cost-control
PUT /api/projects/:id/cost-control/budget
POST /api/projects/:id/cost-control/actual-cost
GET /api/projects/:id/cost-control/forecast
```

### 3.4 ç¤¾äº¤æ¨¡çµ„ (Social Module)

#### 3.4.1 åŠŸèƒ½ç¯„åœ
- é—œä¿‚ç®¡ç†
- ç¤¾äº¤ç¶²çµ¡åˆ†æ
- æ¨è–¦ç³»çµ±
- å…§å®¹åˆ†äº«

#### 3.4.2 è³‡æ–™æ¨¡å‹
```typescript
interface SocialConnection {
  id: string;
  followerId: string;
  followingId: string;
  followingType: 'user' | 'organization' | 'project';
  createdAt: Date;
  status: 'active' | 'blocked';
}

interface Recommendation {
  id: string;
  userId: string;
  type: 'user' | 'content' | 'professional';
  targetId: string;
  score: number;
  reason: string;
  createdAt: Date;
}
```

### 3.5 æˆå°±æ¨¡çµ„ (Achievement Module)

#### 3.5.1 åŠŸèƒ½ç¯„åœ
- æˆå°±ç³»çµ±
- è¦å‰‡å¼•æ“
- æ’è¡Œæ¦œ
- æ¿€å‹µæ©Ÿåˆ¶

#### 3.5.2 è³‡æ–™æ¨¡å‹
```typescript
interface Achievement {
  id: string;
  name: string;
  description: string;
  category: 'professional' | 'social' | 'project';
  icon: string;
  points: number;
  rules: AchievementRule[];
  users: UserAchievement[];
}

interface AchievementRule {
  id: string;
  condition: string;
  trigger: string;
  value: number;
  operator: 'equals' | 'greater' | 'less' | 'contains';
}
```

## 4. è³‡æ–™åº«è¨­è¨ˆ

### 4.1 å¯¦é«”é—œä¿‚åœ–

```mermaid
erDiagram
    User ||--o{ OrganizationMember : "belongs to"
    User ||--o{ TeamMember : "member of"
    User ||--o{ Certificate : "has"
    User ||--o{ SocialConnection : "follows"
    User ||--o{ UserAchievement : "earns"
    User ||--o{ UserOrganizationRole : "assigned"
    User ||--o{ SecurityManager : "manages"
    
    Organization ||--o{ OrganizationMember : "has"
    Organization ||--o{ Team : "contains"
    Organization ||--o{ Project : "owns"
    Organization ||--o{ SecurityManager : "has"
    Organization ||--o{ OrganizationRole : "defines"
    
    Team ||--o{ TeamMember : "includes"
    Team ||--o{ Project : "assigned to"
    Team ||--o{ Team : "parent of"  // æ”¯æ´åœ˜éšŠå±¤ç´šçµæ§‹
    Team ||--o{ TeamOrganizationRole : "assigned"
    
    OrganizationRole ||--o{ UserOrganizationRole : "assigned to users"
    OrganizationRole ||--o{ TeamOrganizationRole : "assigned to teams"
    
    Project ||--o{ Milestone : "has"
    Project ||--o{ Task : "contains"
    Project ||--o{ Document : "has"
    Project ||--o{ DailyReport : "generates"
    Project ||--o{ Inspection : "conducts"
    Project ||--o{ Material : "uses"
    Project ||--o{ Equipment : "utilizes"
    Project ||--o{ SafetyRecord : "maintains"
    Project ||--o{ WeatherLog : "records"
    Project ||--o{ Comment : "receives"
    Project ||--|| CostControl : "tracks"
    
    Achievement ||--o{ AchievementRule : "defined by"
    Achievement ||--o{ UserAchievement : "awarded to"
```

### 4.2 è³‡æ–™åº«è¡¨çµæ§‹

#### 4.2.1 ç”¨æˆ¶ç›¸é—œè¡¨
```sql
-- ç”¨æˆ¶è¡¨
CREATE TABLE users (
    id UUID PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ¶è³‡æ–™è¡¨
CREATE TABLE user_profiles (
    user_id UUID PRIMARY KEY REFERENCES users(id),
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    avatar_url TEXT,
    bio TEXT,
    skills TEXT[],
    contact_info JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è­‰ç…§è¡¨
CREATE TABLE certificates (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    name VARCHAR(255) NOT NULL,
    issuer VARCHAR(255) NOT NULL,
    issue_date DATE NOT NULL,
    expiry_date DATE,
    verification_status VARCHAR(20) DEFAULT 'pending',
    document_url TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 4.2.2 çµ„ç¹”ç›¸é—œè¡¨
```sql
-- çµ„ç¹”è¡¨
CREATE TABLE organizations (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(255) UNIQUE NOT NULL, -- URL-friendly version
    type VARCHAR(50) NOT NULL,
    profile JSONB,
    settings JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- çµ„ç¹”æˆå“¡è¡¨
CREATE TABLE organization_members (
    id UUID PRIMARY KEY,
    organization_id UUID REFERENCES organizations(id),
    user_id UUID REFERENCES users(id),
    role VARCHAR(50) NOT NULL,
    permissions JSONB,
    join_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) DEFAULT 'active',
    UNIQUE(organization_id, user_id)
);

-- åœ˜éšŠè¡¨ (æ”¯æ´å±¤ç´šçµæ§‹)
CREATE TABLE teams (
    id UUID PRIMARY KEY,
    organization_id UUID REFERENCES organizations(id),
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(255) NOT NULL, -- URL-friendly version
    description TEXT,
    parent_team_id UUID REFERENCES teams(id), -- æ”¯æ´åœ˜éšŠå±¤ç´šçµæ§‹
    privacy VARCHAR(20) DEFAULT 'closed', -- 'open' or 'closed'
    notification_setting VARCHAR(20) DEFAULT 'all', -- 'all', 'mentions', 'secret'
    permission VARCHAR(20) DEFAULT 'read', -- 'read', 'write', 'admin'
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(organization_id, slug)
);

-- åœ˜éšŠæˆå“¡è¡¨ (ç°¡åŒ–è§’è‰²ç³»çµ±)
CREATE TABLE team_members (
    id UUID PRIMARY KEY,
    team_id UUID REFERENCES teams(id),
    user_id UUID REFERENCES users(id),
    role VARCHAR(20) NOT NULL, -- 'member' or 'maintainer'
    state VARCHAR(20) DEFAULT 'active', -- 'active' or 'pending'
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(team_id, user_id)
);

-- å®‰å…¨ç®¡ç†å™¨è¡¨
CREATE TABLE security_managers (
    id UUID PRIMARY KEY,
    organization_id UUID REFERENCES organizations(id),
    type VARCHAR(20) NOT NULL, -- 'user' or 'team'
    entity_id UUID NOT NULL, -- user_id or team_id
    permissions JSONB,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by UUID REFERENCES users(id)
);

-- çµ„ç¹”è§’è‰²è¡¨
CREATE TABLE organization_roles (
    id UUID PRIMARY KEY,
    organization_id UUID REFERENCES organizations(id),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    permissions JSONB,
    level INTEGER DEFAULT 1,
    is_system_role BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(organization_id, name)
);

-- ç”¨æˆ¶çµ„ç¹”è§’è‰²é—œè¯è¡¨
CREATE TABLE user_organization_roles (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    organization_id UUID REFERENCES organizations(id),
    role_id UUID REFERENCES organization_roles(id),
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by UUID REFERENCES users(id),
    UNIQUE(user_id, organization_id, role_id)
);

-- åœ˜éšŠçµ„ç¹”è§’è‰²é—œè¯è¡¨
CREATE TABLE team_organization_roles (
    id UUID PRIMARY KEY,
    team_id UUID REFERENCES teams(id),
    organization_id UUID REFERENCES organizations(id),
    role_id UUID REFERENCES organization_roles(id),
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by UUID REFERENCES users(id),
    UNIQUE(team_id, organization_id, role_id)
);
```

#### 4.2.3 å°ˆæ¡ˆç›¸é—œè¡¨
```sql
-- å°ˆæ¡ˆè¡¨
CREATE TABLE projects (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    owner_id UUID NOT NULL,
    owner_type VARCHAR(20) NOT NULL,
    status VARCHAR(20) DEFAULT 'planning',
    timeline JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- é‡Œç¨‹ç¢‘è¡¨
CREATE TABLE milestones (
    id UUID PRIMARY KEY,
    project_id UUID REFERENCES projects(id),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    start_date DATE,
    end_date DATE,
    status VARCHAR(20) DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ä»»å‹™è¡¨
CREATE TABLE tasks (
    id UUID PRIMARY KEY,
    project_id UUID REFERENCES projects(id),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    assignee_id UUID REFERENCES users(id),
    status VARCHAR(20) DEFAULT 'todo',
    priority VARCHAR(20) DEFAULT 'medium',
    due_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 5. å®‰å…¨æ¶æ§‹

### 5.1 èªè­‰èˆ‡æˆæ¬Š

#### 5.1.1 èªè­‰æµç¨‹
```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant A as Auth Service
    participant D as Database
    
    U->>F: Login Request
    F->>A: POST /auth/login
    A->>D: Validate Credentials
    D-->>A: User Data
    A-->>F: JWT Token
    F-->>U: Authentication Success
```

#### 5.1.2 æ¬Šé™æ¨¡å‹
```typescript
enum Permission {
  // ç”¨æˆ¶æ¬Šé™
  USER_READ = 'user:read',
  USER_WRITE = 'user:write',
  USER_DELETE = 'user:delete',
  
  // çµ„ç¹”æ¬Šé™
  ORG_READ = 'organization:read',
  ORG_WRITE = 'organization:write',
  ORG_DELETE = 'organization:delete',
  ORG_MANAGE_MEMBERS = 'organization:manage_members',
  ORG_MANAGE_TEAMS = 'organization:manage_teams',
  ORG_MANAGE_ROLES = 'organization:manage_roles',
  
  // åœ˜éšŠæ¬Šé™
  TEAM_READ = 'team:read',
  TEAM_WRITE = 'team:write',
  TEAM_DELETE = 'team:delete',
  TEAM_MANAGE_MEMBERS = 'team:manage_members',
  TEAM_MANAGE_PROJECTS = 'team:manage_projects',
  
  // å°ˆæ¡ˆæ¬Šé™
  PROJECT_READ = 'project:read',
  PROJECT_WRITE = 'project:write',
  PROJECT_DELETE = 'project:delete',
  PROJECT_MANAGE_TASKS = 'project:manage_tasks',
  PROJECT_MANAGE_COST = 'project:manage_cost',
  
  // å®‰å…¨ç®¡ç†æ¬Šé™ (æ–°å¢)
  SECURITY_MANAGE_USERS = 'security:manage_users',
  SECURITY_MANAGE_TEAMS = 'security:manage_teams',
  SECURITY_VIEW_AUDIT_LOGS = 'security:view_audit_logs',
  SECURITY_MANAGE_PERMISSIONS = 'security:manage_permissions',
  SECURITY_APPROVE_REQUESTS = 'security:approve_requests',
  
  // ç³»çµ±æ¬Šé™
  SYSTEM_ADMIN = 'system:admin',
  SYSTEM_MODERATOR = 'system:moderator'
}

enum SecurityPermission {
  MANAGE_SECURITY_SETTINGS = 'manage_security_settings',
  VIEW_SECURITY_REPORTS = 'view_security_reports',
  MANAGE_ACCESS_CONTROL = 'manage_access_control',
  APPROVE_SECURITY_REQUESTS = 'approve_security_requests',
  MANAGE_SECURITY_POLICIES = 'manage_security_policies'
}

interface Role {
  name: string;
  permissions: Permission[];
  level: number;
  isSystemRole: boolean;
}

interface SecurityRole {
  name: string;
  permissions: SecurityPermission[];
  level: number;
  scope: 'organization' | 'team' | 'project';
}
```

### 5.2 è³‡æ–™å®‰å…¨

#### 5.2.1 è³‡æ–™åŠ å¯†
- **å‚³è¼¸åŠ å¯†**: TLS 1.3
- **å„²å­˜åŠ å¯†**: AES-256
- **æ•æ„Ÿè³‡æ–™**: é¡å¤–åŠ å¯†å±¤
- **é‡‘é‘°ç®¡ç†**: AWS KMS / Azure Key Vault

#### 5.2.2 è³‡æ–™ä¿è­·
- **å€‹äººè³‡æ–™**: GDPR åˆè¦
- **è³‡æ–™å‚™ä»½**: æ¯æ—¥å¢é‡å‚™ä»½
- **ç½é›£æ¢å¾©**: RTO < 4å°æ™‚, RPO < 1å°æ™‚
- **è³‡æ–™ä¿ç•™**: ç¬¦åˆæ³•è¦è¦æ±‚

## 6. æ•ˆèƒ½èˆ‡æ“´å±•æ€§

### 6.1 æ•ˆèƒ½æŒ‡æ¨™

#### 6.1.1 å›æ‡‰æ™‚é–“ç›®æ¨™
- **API å›æ‡‰æ™‚é–“**: < 200ms (95th percentile)
- **é é¢è¼‰å…¥æ™‚é–“**: < 2ç§’
- **è³‡æ–™åº«æŸ¥è©¢**: < 100ms
- **æª”æ¡ˆä¸Šå‚³**: < 30ç§’ (100MB)

#### 6.1.2 ååé‡ç›®æ¨™
- **ä¸¦ç™¼ç”¨æˆ¶**: 10,000+
- **API è«‹æ±‚**: 100,000+ requests/hour
- **è³‡æ–™åº«é€£æ¥**: 1,000+ concurrent
- **æª”æ¡ˆå„²å­˜**: 1TB+ capacity

### 6.2 æ“´å±•ç­–ç•¥

#### 6.2.1 æ°´å¹³æ“´å±•
- **è² è¼‰å‡è¡¡**: Nginx / HAProxy
- **è³‡æ–™åº«åˆ†ç‰‡**: æŒ‰çµ„ç¹”åˆ†ç‰‡
- **å¿«å–ç­–ç•¥**: Redis Cluster
- **CDN**: CloudFlare / AWS CloudFront

#### 6.2.2 å‚ç›´æ“´å±•
- **ä¼ºæœå™¨è¦æ ¼**: 16+ CPU cores, 64+ GB RAM
- **è³‡æ–™åº«**: ä¸»å¾è¤‡è£½ + è®€å¯«åˆ†é›¢
- **å„²å­˜**: SSD + é«˜ IOPS
- **ç¶²è·¯**: 10Gbps+ bandwidth

## 7. ç›£æ§èˆ‡æ—¥èªŒ

### 7.1 ç›£æ§æ¶æ§‹

```mermaid
graph TB
    subgraph "æ‡‰ç”¨å±¤ç›£æ§"
        App[Application Metrics]
        API[API Metrics]
        DB[Database Metrics]
    end
    
    subgraph "åŸºç¤è¨­æ–½ç›£æ§"
        Server[Server Metrics]
        Network[Network Metrics]
        Storage[Storage Metrics]
    end
    
    subgraph "ç›£æ§å¹³å°"
        Prometheus[Prometheus]
        Grafana[Grafana]
        AlertManager[Alert Manager]
    end
    
    App --> Prometheus
    API --> Prometheus
    DB --> Prometheus
    Server --> Prometheus
    Network --> Prometheus
    Storage --> Prometheus
    
    Prometheus --> Grafana
    Prometheus --> AlertManager
```

### 7.2 æ—¥èªŒç®¡ç†

#### 7.2.1 æ—¥èªŒå±¤ç´š
- **ERROR**: ç³»çµ±éŒ¯èª¤ã€ç•°å¸¸
- **WARN**: è­¦å‘Šè¨Šæ¯ã€æ½›åœ¨å•é¡Œ
- **INFO**: ä¸€èˆ¬è³‡è¨Šã€æ“ä½œè¨˜éŒ„
- **DEBUG**: é™¤éŒ¯è³‡è¨Šã€è©³ç´°è¿½è¹¤

#### 7.2.2 æ—¥èªŒçµæ§‹
```json
{
  "timestamp": "2024-01-01T00:00:00Z",
  "level": "INFO",
  "service": "user-service",
  "traceId": "abc123",
  "userId": "user-456",
  "action": "user.login",
  "message": "User login successful",
  "metadata": {
    "ip": "192.168.1.1",
    "userAgent": "Mozilla/5.0...",
    "duration": 150
  }
}
```

## 8. éƒ¨ç½²æ¶æ§‹

### 8.1 ç’°å¢ƒé…ç½®

#### 8.1.1 é–‹ç™¼ç’°å¢ƒ
- **ç›®çš„**: é–‹ç™¼èˆ‡æ¸¬è©¦
- **é…ç½®**: å–®æ©Ÿéƒ¨ç½²
- **è³‡æ–™åº«**: æœ¬åœ° PostgreSQL
- **å¿«å–**: æœ¬åœ° Redis

#### 8.1.2 æ¸¬è©¦ç’°å¢ƒ
- **ç›®çš„**: æ•´åˆæ¸¬è©¦
- **é…ç½®**: Docker Compose
- **è³‡æ–™åº«**: PostgreSQL + Redis
- **ç›£æ§**: åŸºæœ¬ç›£æ§

#### 8.1.3 ç”Ÿç”¢ç’°å¢ƒ
- **ç›®çš„**: æ­£å¼æœå‹™
- **é…ç½®**: Kubernetes é›†ç¾¤
- **è³‡æ–™åº«**: PostgreSQL ä¸»å¾ + Redis Cluster
- **ç›£æ§**: å®Œæ•´ç›£æ§ + å‘Šè­¦

### 8.2 éƒ¨ç½²æµç¨‹

```mermaid
graph LR
    Dev[é–‹ç™¼] --> Test[æ¸¬è©¦]
    Test --> Staging[é ç”Ÿç”¢]
    Staging --> Prod[ç”Ÿç”¢]
    
    subgraph "CI/CD Pipeline"
        Build[å»ºç½®]
        TestUnit[å–®å…ƒæ¸¬è©¦]
        TestInt[æ•´åˆæ¸¬è©¦]
        Deploy[éƒ¨ç½²]
        Monitor[ç›£æ§]
    end
    
    Dev --> Build
    Build --> TestUnit
    TestUnit --> TestInt
    TestInt --> Deploy
    Deploy --> Monitor
```

## 9. é¢¨éšªè©•ä¼°èˆ‡ç·©è§£

### 9.1 æŠ€è¡“é¢¨éšª

| é¢¨éšª | å½±éŸ¿ | æ©Ÿç‡ | ç·©è§£ç­–ç•¥ |
|------|------|------|----------|
| è³‡æ–™åº«æ•ˆèƒ½ç“¶é ¸ | é«˜ | ä¸­ | è®€å¯«åˆ†é›¢ã€ç´¢å¼•å„ªåŒ–ã€å¿«å–ç­–ç•¥ |
| ç¬¬ä¸‰æ–¹æœå‹™ä¸­æ–· | ä¸­ | ä½ | å¤šä¾›æ‡‰å•†ã€é™ç´šæ©Ÿåˆ¶ã€æœ¬åœ°å‚™ä»½ |
| å®‰å…¨æ¼æ´ | é«˜ | ä½ | å®šæœŸå®‰å…¨æƒæã€æ»²é€æ¸¬è©¦ã€å®‰å…¨å¯©è¨ˆ |
| è³‡æ–™éºå¤± | é«˜ | ä½ | å¤šé‡å‚™ä»½ã€ç½é›£æ¢å¾©è¨ˆåŠƒ |

### 9.2 æ¥­å‹™é¢¨éšª

| é¢¨éšª | å½±éŸ¿ | æ©Ÿç‡ | ç·©è§£ç­–ç•¥ |
|------|------|------|----------|
| ç”¨æˆ¶æ¥å—åº¦ä½ | ä¸­ | ä¸­ | ç”¨æˆ¶ç ”ç©¶ã€åŸå‹é©—è­‰ã€æ¼¸é€²å¼æ¨å‡º |
| ç«¶çˆ­å°æ‰‹é€²å…¥ | ä¸­ | é«˜ | å·®ç•°åŒ–åŠŸèƒ½ã€ç”¨æˆ¶é»æ€§ã€å¿«é€Ÿè¿­ä»£ |
| æ³•è¦è®Šæ›´ | ä¸­ | ä½ | æ³•è¦ç›£æ§ã€åˆè¦æª¢æŸ¥ã€å½ˆæ€§æ¶æ§‹ |
| æŠ€è¡“å‚µå‹™ç´¯ç© | ä¸­ | ä¸­ | ä»£ç¢¼å¯©æŸ¥ã€é‡æ§‹è¨ˆåŠƒã€æŠ€è¡“æ¨™æº– |

## 10. æœªä¾†æ“´å±•è¨ˆåŠƒ

### 10.1 çŸ­æœŸç›®æ¨™ (3-6å€‹æœˆ)
- å®Œæˆæ ¸å¿ƒæ¨¡çµ„é–‹ç™¼
- å»ºç«‹åŸºæœ¬ç›£æ§ç³»çµ±
- å¯¦æ–½å®‰å…¨é˜²è­·æªæ–½
- ç”¨æˆ¶æ¸¬è©¦èˆ‡åé¥‹æ”¶é›†

### 10.2 ä¸­æœŸç›®æ¨™ (6-12å€‹æœˆ)
- å¢åŠ  AI æ¨è–¦åŠŸèƒ½
- å¯¦æ–½é€²éšåˆ†æåŠŸèƒ½
- å»ºç«‹ API ç”Ÿæ…‹ç³»çµ±
- æ“´å±•ç§»å‹•ç«¯åŠŸèƒ½

### 10.3 é•·æœŸç›®æ¨™ (1-2å¹´)
- åœ‹éš›åŒ–æ”¯æ´
- ä¼æ¥­ç´šåŠŸèƒ½
- ç‰©è¯ç¶²æ•´åˆ
- å€å¡Šéˆæ‡‰ç”¨

---

**æ–‡ä»¶ç‰ˆæœ¬**: v1.0  
**æœ€å¾Œæ›´æ–°**: 2024-01-01  
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ  
**å¯©æ ¸è€…**: æ¶æ§‹å¸«
`````

## File: docs/TREE.md
`````markdown
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”œâ”€â”€ app.routes.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                               # åŠŸèƒ½æ¨¡çµ„ (ç¬¬3å±¤)
â”‚   â”‚   â”œâ”€â”€ user/                              # ç”¨æˆ¶æ¨¡çµ„ (ç¬¬4å±¤) âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                          # èªè­‰ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ registration.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email-verification.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.interceptor.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login-user.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register-user.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verify-email.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-created.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firebase-auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/                       # å€‹äººè³‡æ–™ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-edit.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ basic-info.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-profile.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update-profile.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-profile.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-updated.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore-profile.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ certificates/                   # è­‰ç…§ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-verification.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add-certificate.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verify-certificate.command.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-certificates.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-added.event.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificate-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore-certificate.repository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ social/                         # ç¤¾äº¤ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ followers-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-button.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social.model.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get-following.query.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-domain.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications/                  # é€šçŸ¥ç›¸é—œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification.model.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-profile.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-settings.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user-dashboard.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-state.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profile-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ user.model.ts                   # ç”¨æˆ¶æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.repository.ts              # ç”¨æˆ¶è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ user.routes.ts                  # ç”¨æˆ¶è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ organization/                       # çµ„ç¹”æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # çµ„ç¹”å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-card.component.ts âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ team-management.component.ts âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ member-management.component.ts âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ security-manager.component.ts â­ æ–°å¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-roles.component.ts â­ æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-assignment.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # çµ„ç¹”é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-list.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization-detail.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-settings.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # çµ„ç¹”ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ services/                       # çµ„ç¹”æœå‹™
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organization.service.ts âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ github-aligned-api.service.ts â­ æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ permission-calculation.service.ts â­ æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.model.ts            # çµ„ç¹”æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.repository.ts      # çµ„ç¹”è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.routes.ts           # çµ„ç¹”è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ project/                            # å°ˆæ¡ˆæ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # å°ˆæ¡ˆå…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-detail.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ task-detail.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ documents/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ document-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document-viewer.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-budget.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-actual.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-forecast.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost-variance.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cost-breakdown.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ daily-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inspection-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analytics-report.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ gantt-chart.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ materials/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ materials-management.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ equipment-management.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ safety-records.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # å°ˆæ¡ˆé é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-list.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-detail.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ project-reports.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # å°ˆæ¡ˆç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project-state.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cost-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ project.model.ts                # å°ˆæ¡ˆæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ project.service.ts               # å°ˆæ¡ˆæœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ project.repository.ts           # å°ˆæ¡ˆè³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ project.routes.ts                # å°ˆæ¡ˆè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ social/                             # ç¤¾äº¤æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # ç¤¾äº¤å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ following-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ followers-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ follow-button.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ follow-status.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ discovery/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-discovery.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-recommendation.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-search.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user-profile-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stats/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-stats.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-chart.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ social-leaderboard.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ network/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ interaction.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ mutual-connection.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ network.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # ç¤¾äº¤é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-discovery.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ social-network.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # ç¤¾äº¤ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ social-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ relationship-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ social.model.ts                  # ç¤¾äº¤æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ social.service.ts                # ç¤¾äº¤æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ social.repository.ts             # ç¤¾äº¤è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ social.routes.ts                 # ç¤¾äº¤è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ achievement/                        # æˆå°±æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # æˆå°±å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ achievement-progress.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ranking-card.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ top-stats.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ management/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rule-management.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ category-management.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ stats-chart.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ progress-chart.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ achievement-timeline.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # æˆå°±é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-dashboard.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ achievement-management.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # æˆå°±ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ progress-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.model.ts             # æˆå°±æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.service.ts           # æˆå°±æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.repository.ts        # æˆå°±è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement.routes.ts           # æˆå°±è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ notification/                       # é€šçŸ¥æ¨¡çµ„ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                     # é€šçŸ¥å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-item.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-preferences.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-templates.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ push/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ push.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ email-notification.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ sms-notification.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ in-app-notification.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                          # é€šçŸ¥é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-center.page.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-settings.page.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-history.page.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state/                          # é€šçŸ¥ç‹€æ…‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-state.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ preference-state.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.model.ts           # é€šçŸ¥æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.service.ts         # é€šçŸ¥æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.repository.ts      # é€šçŸ¥è³‡æ–™å­˜å–
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.routes.ts          # é€šçŸ¥è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                        # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts                            # åŠŸèƒ½æ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                                   # æ ¸å¿ƒåŠŸèƒ½ (ç¬¬3å±¤)
â”‚   â”‚   â”œâ”€â”€ auth/                               # èªè­‰æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ firebase-auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ delon-auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-integration.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ token.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ acl/                                # æ¬Šé™æ§åˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ acl.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ event-bus/                          # äº‹ä»¶åŒ¯æµæ’
â”‚   â”‚   â”‚   â”œâ”€â”€ event-bus.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ event-store.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ event-processor.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ domain-event.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ integration-event.interface.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ infrastructure/                     # åŸºç¤è¨­æ–½
â”‚   â”‚   â”‚   â”œâ”€â”€ firestore/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-repository.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ firestore-config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ storage-config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ logging/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logger.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ audit.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ shared/                             # å…±äº«å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ index.ts                            # æ ¸å¿ƒæ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                                 # å…±äº«æ¨¡çµ„ (ç¬¬3å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/                          # å…±äº«å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                             # UI å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-spinner.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-skeleton.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ loading-overlay.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ confirmation-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ info-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dynamic-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-picker.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rich-text-editor.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page-header.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content-wrapper.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ breadcrumb.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-table.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ progress-bar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar-group.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tag-list.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feedback/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ toast.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ alert.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ empty-state.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ error-boundary.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ business/                       # æ¥­å‹™å…ƒä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ user-avatar.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ organization-logo.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ project-status.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ activity-timeline.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ permission-guard.component.ts
â”‚   â”‚   â”œâ”€â”€ services/                            # å…±äº«æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-api.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ http-client.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api-error-handler.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ session-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ indexeddb.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utility/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validation.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ format.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ breadcrumb.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ theme/
â”‚   â”‚   â”‚       â”œâ”€â”€ theme.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ dark-mode.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ responsive.service.ts
â”‚   â”‚   â”œâ”€â”€ models/                              # å…±äº«æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ paginated-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validation.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ roles.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.enum.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-types.enum.ts
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚       â”œâ”€â”€ base.dto.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ pagination.dto.ts
â”‚   â”‚   â”‚       â””â”€â”€ filter.dto.ts
â”‚   â”‚   â”œâ”€â”€ pipes/                               # å…±äº«ç®¡é“
â”‚   â”‚   â”‚   â”œâ”€â”€ date-format.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file-size.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ truncate.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ safe-html.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ currency-format.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ highlight.pipe.ts
â”‚   â”‚   â”œâ”€â”€ directives/                          # å…±äº«æŒ‡ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ auto-focus.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ click-outside.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lazy-load.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ drag-drop.directive.ts
â”‚   â”‚   â”‚   â””â”€â”€ infinite-scroll.directive.ts
â”‚   â”‚   â”œâ”€â”€ validators/                          # å…±äº«é©—è­‰å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ email.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ password.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ phone.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ url.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.validator.ts
â”‚   â”‚   â”œâ”€â”€ guards/                              # å…±äº«å®ˆè¡›
â”‚   â”‚   â”‚   â”œâ”€â”€ route-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ role-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ unsaved-changes-guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ organization-context-guard.ts
â”‚   â”‚   â”œâ”€â”€ interceptors/                        # å…±äº«æ””æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ retry.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ request-id.interceptor.ts
â”‚   â”‚   â”œâ”€â”€ utils/                               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ array.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ object.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ string.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ date.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.utils.ts
â”‚   â”‚   â”‚   â””â”€â”€ format.utils.ts
â”‚   â”‚   â”œâ”€â”€ constants/                           # å¸¸æ•¸å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ api.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ app.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.constants.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.constants.ts
â”‚   â”‚   â””â”€â”€ index.ts                             # å…±äº«æ¨¡çµ„åŒ¯å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                                 # ç‰ˆé¢é…ç½® (ç¬¬3å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-bell.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-switcher.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ navigation-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ menu-item.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ footer/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ footer.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ main-layout.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ auth-layout.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ fullscreen-layout.component.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.service.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”œâ”€â”€ app.routes.ts
â”‚   â””â”€â”€ main.ts                                  # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚
â”œâ”€â”€ assets/                                     # éœæ…‹è³‡æº (ç¬¬1å±¤) âœ¨
â”‚   â”‚   â”œâ”€â”€ components/                          # å…±äº«å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-spinner.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading-skeleton.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ loading-overlay.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ confirmation-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ info-dialog.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ form/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dynamic-form.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-upload.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-picker.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rich-text-editor.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page-header.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content-wrapper.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ breadcrumb.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-table.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status-badge.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ progress-bar.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ avatar-group.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tag-list.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feedback/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ toast.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ alert.component.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ empty-state.component.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ error-boundary.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ business/
â”‚   â”‚   â”‚       â”œâ”€â”€ user-avatar.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ organization-logo.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ project-status.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ activity-timeline.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ permission-guard.component.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                            # å…±äº«æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-api.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ http-client.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api-error-handler.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ local-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ session-storage.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ indexeddb.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utility/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ date-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validation.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file-utils.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ format.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ breadcrumb.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ theme/
â”‚   â”‚   â”‚       â”œâ”€â”€ theme.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ dark-mode.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ responsive.service.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                              # å…±äº«æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ paginated-response.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validation.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ roles.enum.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.enum.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notification-types.enum.ts
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚       â”œâ”€â”€ base.dto.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ pagination.dto.ts
â”‚   â”‚   â”‚       â””â”€â”€ filter.dto.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pipes/                               # å…±äº«ç®¡é“
â”‚   â”‚   â”‚   â”œâ”€â”€ date-format.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file-size.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ truncate.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ safe-html.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ currency-format.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ highlight.pipe.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ directives/                          # å…±äº«æŒ‡ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ auto-focus.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ click-outside.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lazy-load.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.directive.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ drag-drop.directive.ts
â”‚   â”‚   â”‚   â””â”€â”€ infinite-scroll.directive.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators/                          # å…±äº«é©—è­‰å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ email.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ password.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ phone.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ url.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.validator.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ guards/                              # å…±äº«å®ˆè¡›
â”‚   â”‚   â”‚   â”œâ”€â”€ route-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ permission-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ role-guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ unsaved-changes-guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ organization-context-guard.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ interceptors/                        # å…±äº«æ””æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.interceptor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ retry.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ request-id.interceptor.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ array.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ object.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ string.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ date.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.utils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.utils.ts
â”‚   â”‚   â”‚   â””â”€â”€ format.utils.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ constants/                           # å¸¸æ•¸å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ api.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ app.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.constants.ts
â”‚   â”‚   â”‚   â””â”€â”€ business.constants.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                                 # ç‰ˆé¢é…ç½® âœ¨
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notification-bell.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ organization-switcher.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ navigation-menu.component.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ menu-item.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ footer/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ footer.component.ts
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ main-layout.component.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ auth-layout.component.ts
â”‚   â”‚   â”‚       â””â”€â”€ fullscreen-layout.component.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.service.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ main.ts                                 # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚
â”œâ”€â”€ assets/                                     # éœæ…‹è³‡æº âœ¨
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ logos/
â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ avatars/
â”‚   â”‚   â””â”€â”€ backgrounds/
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ themes/
â”‚   â”‚   â”‚   â”œâ”€â”€ default.less
â”‚   â”‚   â”‚   â”œâ”€â”€ dark.less
â”‚   â”‚   â”‚   â””â”€â”€ compact.less
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ utilities/
â”‚   â”‚   â”‚   â”œâ”€â”€ mixins.less
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.less
â”‚   â”‚   â”‚   â””â”€â”€ functions.less
â”‚   â”‚   â””â”€â”€ global.less
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”œâ”€â”€ zh-TW.json
â”‚   â”‚   â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ fonts/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ mock/
â”‚   â”‚   â””â”€â”€ seeds/
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ environment.ts
â”‚       â”œâ”€â”€ firebase.config.ts
â”‚       â””â”€â”€ app.config.ts
â”‚
â”œâ”€â”€ environments/                               # ç’°å¢ƒé…ç½® âœ¨
â”‚   â”œâ”€â”€ environment.ts
â”‚   â”œâ”€â”€ environment.prod.ts
â”‚   â”œâ”€â”€ environment.dev.ts
â”‚   â””â”€â”€ environment.staging.ts
â”‚
â”œâ”€â”€ types/                                      # å…¨åŸŸå‹åˆ¥å®šç¾© âœ¨
â”‚   â”œâ”€â”€ global.d.ts
â”‚   â”œâ”€â”€ firebase.d.ts
â”‚   â”œâ”€â”€ api.d.ts
â”‚   â””â”€â”€ index.d.ts
â”‚
â”œâ”€â”€ styles/                                     # å…¨åŸŸæ¨£å¼  âœ¨
â”‚   â”œâ”€â”€ styles.less
â”‚   â”œâ”€â”€ theme.less
â”‚   â””â”€â”€ variables.less
â”‚
â”œâ”€â”€ index.html                                  # HTML å…¥å£
â”œâ”€â”€ main.ts                                     # TypeScript å…¥å£
â””â”€â”€ style-icons.ts                              # åœ–ç¤ºå®šç¾©

# æ ¹ç›®éŒ„æª”æ¡ˆ
â”œâ”€â”€ angular.json                                # Angular é…ç½®
â”œâ”€â”€ package.json                                # å¥—ä»¶ä¾è³´
â”œâ”€â”€ tsconfig.json                               # TypeScript é…ç½®
â”œâ”€â”€ tsconfig.app.json                          # æ‡‰ç”¨ç¨‹å¼ TS é…ç½®
â”œâ”€â”€ tsconfig.spec.json                         # æ¸¬è©¦ TS é…ç½®
â”œâ”€â”€ eslint.config.mjs                          # ESLint é…ç½®
â”œâ”€â”€ stylelint.config.mjs                       # Stylelint é…ç½®
â”œâ”€â”€ firebase.json                               # Firebase é…ç½®
â”œâ”€â”€ firestore.rules                            # Firestore å®‰å…¨è¦å‰‡
â”œâ”€â”€ firestore.indexes.json                     # Firestore ç´¢å¼•
â”œâ”€â”€ .gitignore                                 # Git å¿½ç•¥æª”æ¡ˆ
â”œâ”€â”€ README.md                                  # å°ˆæ¡ˆèªªæ˜
â””â”€â”€ yarn.lock                                  # å¥—ä»¶é–å®šæª”

## ğŸ¯ æ‰å¹³åŒ–æ¶æ§‹è¨­è¨ˆ (4å±¤çµæ§‹)

### ğŸ“Š çµæ§‹å„ªåŒ–æˆæœ
- **åŸå§‹çµæ§‹**: 7å±¤æ·±åº¦ (`src/app/features/user/presentation/components/auth/`)
- **æ‰å¹³åŒ–å¾Œ**: 4å±¤æ·±åº¦ (`src/app/features/user/auth/`)
- **æ”¹å–„å¹…åº¦**: æ¸›å°‘ 43% çš„ç›®éŒ„æ·±åº¦
- **æª”æ¡ˆè·¯å¾‘**: å¹³å‡ç¸®çŸ­ 60%

### ğŸ”„ æ‰å¹³åŒ–ç­–ç•¥
1. **åˆä½µæ¶æ§‹å±¤ç´š**: å°‡ `presentation/application/domain/infrastructure` åˆä½µåˆ°å–®ä¸€åŠŸèƒ½ç›®éŒ„
2. **æª”æ¡ˆå‘½åç´„å®š**: ä½¿ç”¨ `.component.ts`ã€`.service.ts`ã€`.model.ts`ã€`.repository.ts` ç­‰å¾Œç¶´å€åˆ†è·è²¬
3. **åŠŸèƒ½å°å‘çµ„ç¹”**: æ¯å€‹åŠŸèƒ½æ¨¡çµ„åŒ…å«æ‰€æœ‰ç›¸é—œæª”æ¡ˆï¼Œæé«˜å…§èšæ€§
4. **Index æª”æ¡ˆ**: ä½¿ç”¨ `index.ts` ç°¡åŒ–åŒ¯å…¥è·¯å¾‘

### ğŸ“ æ–°çµæ§‹å±¤ç´šèªªæ˜
- **ç¬¬1å±¤**: æ ¹ç›®éŒ„ (`src/`, `assets/`, `environments/` ç­‰)
- **ç¬¬2å±¤**: ä¸»è¦æ¨¡çµ„ (`app/`, `assets/images/` ç­‰)
- **ç¬¬3å±¤**: æ ¸å¿ƒåˆ†é¡ (`features/`, `core/`, `shared/`, `layout/`)
- **ç¬¬4å±¤**: å…·é«”åŠŸèƒ½æª”æ¡ˆ (`user/auth/login.component.ts` ç­‰)

### ğŸ¨ æª”æ¡ˆå‘½åè¦ç¯„
```typescript
// åŠŸèƒ½æ¨¡çµ„æª”æ¡ˆå‘½å
user/
â”œâ”€â”€ auth/                    # èªè­‰ç›¸é—œ
â”‚   â”œâ”€â”€ login.component.ts   # UI å…ƒä»¶
â”‚   â”œâ”€â”€ auth.service.ts      # æ¥­å‹™é‚è¼¯æœå‹™
â”‚   â”œâ”€â”€ auth.guard.ts        # è·¯ç”±å®ˆè¡›
â”‚   â””â”€â”€ auth.interceptor.ts  # HTTP æ””æˆªå™¨
â”œâ”€â”€ profile/                 # å€‹äººè³‡æ–™ç›¸é—œ
â”‚   â”œâ”€â”€ profile-card.component.ts
â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â””â”€â”€ profile.model.ts
â”œâ”€â”€ user.model.ts            # ç”¨æˆ¶æ¨¡å‹
â”œâ”€â”€ user.repository.ts       # ç”¨æˆ¶è³‡æ–™å­˜å–
â”œâ”€â”€ user.routes.ts           # ç”¨æˆ¶è·¯ç”±
â””â”€â”€ index.ts                 # åŒ¯å‡ºæª”æ¡ˆ
```

## å¿«é€Ÿé–‹å§‹ï¼ˆWindows 11 + yarnï¼‰

1) å®‰è£ä¾è³´

```bash
yarn install
```

2) è¨­å®š Firebase åƒæ•¸ï¼ˆ`environments/environment.ts`ï¼‰

```ts
export const environment = {
  production: false,
  firebase: {
    apiKey: '...',
    authDomain: '...',
    projectId: '...',
    storageBucket: '...',
    messagingSenderId: '...',
    appId: '...'
  }
};
```

3) åˆå§‹åŒ–æ ¸å¿ƒ Providersï¼ˆ`src/app/app.config.ts`ï¼‰

```ts
import { ApplicationConfig, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';
import { provideHttpClient, withInterceptors } from '@angular/common/http';
import { provideFirebaseApp, initializeApp } from '@angular/fire/app';
import { provideAuth, getAuth } from '@angular/fire/auth';
import { provideFirestore, getFirestore } from '@angular/fire/firestore';
import { environment } from '../environments/environment';
import { authInterceptor } from './core/auth/auth.interceptor';
import { tokenInterceptor } from './core/auth/token.interceptor';

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter([]),
    provideZoneChangeDetection({ eventCoalescing: true }),
    provideHttpClient(withInterceptors([tokenInterceptor, authInterceptor])),
    provideFirebaseApp(() => initializeApp(environment.firebase)),
    provideAuth(() => getAuth()),
    provideFirestore(() => getFirestore()),
  ],
};
```

4) å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
yarn start
```

## èªè­‰èˆ‡æˆæ¬Šæ•´åˆï¼ˆFirebase â†’ @angular/fire â†’ @delon/auth â†’ @delon/aclï¼‰

- **ç™»å…¥éˆ**ï¼š
  - UI è¼¸å…¥æ†‘è­‰ â†’ `@angular/fire`ï¼ˆFirebase Authï¼‰ç™»å…¥ â†’ å–å¾— Firebase ID Token
  - `Auth Integration Service` æ­£è¦åŒ– Token â†’ äº¤ç”± `@delon/auth TokenService` å„²å­˜ï¼ˆlocalStorageï¼‰
  - `token.interceptor.ts` è‡ªå‹•é™„åŠ  `Authorization: Bearer <ID Token>` è‡³ API è«‹æ±‚

- **ç‹€æ…‹èˆ‡åˆ·æ–°**ï¼š
  - ç›£è½ `onIdTokenChanged` åŒæ­¥ `TokenService`ï¼Œè™•ç†éæœŸ/åˆ·æ–°
  - `@delon/auth` æš´éœ²ç™»å…¥ç‹€æ…‹ä¾› UI ä½¿ç”¨

- **ACL æ˜ å°„**ï¼š
  - ä¾†æºï¼šä½¿ç”¨è€…æª”æ¡ˆè§’è‰²/æ¬Šé™ + `organizationId`ï¼ˆå¿…è¦æ™‚ `projectId`ï¼‰
  - è½‰æ›ï¼šæ˜ å°„ç‚º `roles` èˆ‡ `abilities`ï¼Œäº¤ç”± `@delon/acl` ç®¡ç†
  - ä½¿ç”¨ï¼š`ACLGuard` ä¿è­·è·¯ç”±ï¼›æ¨¡æ¿å±¤ä»¥ `*appAcl` æ§åˆ¶é¡¯ç¤º

- **è²¬ä»»é‚Šç•Œ**ï¼š
  - `token.interceptor.ts`ï¼šåªè² è²¬æ³¨å…¥ Authorization æ¨™é ­
  - `auth.interceptor.ts`ï¼šé›†ä¸­è™•ç† 401/403 ç­‰å°æµèˆ‡éŒ¯èª¤
  - `ACLGuard`ï¼šä¾æ¬Šé™æ¨¹åˆ¤æ–·å¯é”æ€§

## çµ„ç¹”åˆ‡æ›ï¼ˆACL å³æ™‚æ›´æ–°ï¼‰

- ä½¿ç”¨è€…åˆ‡æ›çµ„ç¹”æ™‚ï¼Œé‡æ–°è¨ˆç®— ACL æ˜ å°„ï¼ˆè§’è‰²/èƒ½åŠ›ä¾ç•¶å‰ `organizationId`ï¼‰ã€‚
- æ›´æ–°å®Œæˆå¾Œï¼Œå—ä¿è­·è·¯ç”±èˆ‡æ¨¡æ¿æ¢ä»¶ï¼ˆ`*appAcl`ï¼‰æ‡‰ç«‹å³åæ˜ ã€‚

## å®‰å…¨å°é½Šï¼ˆFirestore è¦å‰‡ï¼‰

- è‡ªè¨‚ Claimsï¼ˆä¾‹ï¼š`orgRoles`ã€`projectRoles`ï¼‰éœ€èˆ‡ Firestore Security Rules å°é½Šï¼Œé¿å…å‰å¾Œç«¯æ¬Šé™æ¼‚ç§»ã€‚
- è¦å‰‡ç¤ºæ„è«‹åƒè€ƒ `SYSTEM_ARCHITECTURE.md` ä¹‹ MVP ç« ç¯€èˆ‡ `firestore.rules`ã€‚
`````

## File: graph-bank/productContext.md
`````markdown
# Memory Bank: Product Context

## Product Description
åŸºæ–¼ Angular 20 å’Œ Firebase 11 çš„ GitHub å¼æ¬Šé™ç®¡ç†ç³»çµ±ï¼Œæä¾›å®Œæ•´çš„çµ„ç¹”ã€åœ˜éšŠå’Œ Repository ç®¡ç†åŠŸèƒ½ã€‚ç³»çµ±ä½¿ç”¨æœ€æ–°çš„ Angular ç‰¹æ€§ï¼ˆSignalsã€Control Flowï¼‰å’Œç¾ä»£åŒ–æ¶æ§‹è¨­è¨ˆï¼Œå¯¦ç¾é«˜æ•ˆä¸”å¯æ“´å±•çš„æ¬Šé™æ§åˆ¶ç³»çµ±ã€‚

## Target Users
- **çµ„ç¹”ç®¡ç†è€…**ï¼šéœ€è¦ç®¡ç†çµ„ç¹”æˆå“¡å’Œåœ˜éšŠçš„ç®¡ç†è€…
- **åœ˜éšŠé ˜å°è€…**ï¼šéœ€è¦ç®¡ç†åœ˜éšŠæˆå“¡å’Œ Repository çš„åœ˜éšŠé ˜å°
- **é–‹ç™¼äººå“¡**ï¼šéœ€è¦è¨ªå•å’Œå”ä½œ Repository çš„é–‹ç™¼è€…
- **ç³»çµ±ç®¡ç†å“¡**ï¼šéœ€è¦ç®¡ç†æ•´å€‹ç³»çµ±çš„ç®¡ç†å“¡

## Key Features
- **çµ±ä¸€çš„ Account ç³»çµ±**
  - ä½¿ç”¨ type å€åˆ† 'user' | 'organization'
  - çµ±ä¸€çš„ /accounts é›†åˆè·¯å¾‘
  - å®Œæ•´çš„å€‹äººæª”æ¡ˆç®¡ç†

- **å¤šå±¤ç´šæ¬Šé™ç³»çµ±**
  - 5 ç¨®çµ„ç¹”è§’è‰²ï¼šOwner, Admin, Member, Billing, Outside Collaborator
  - 2 ç¨®åœ˜éšŠè§’è‰²ï¼šMaintainer, Member
  - Repository æ¬Šé™ï¼šread, triage, write, maintain, admin

- **çµ„ç¹”ç®¡ç†åŠŸèƒ½**
  - çµ„ç¹”æˆå“¡ç®¡ç†
  - åœ˜éšŠç®¡ç†
  - çµ„ç¹”è¨­å®š
  - çµ„ç¹”å„€è¡¨æ¿

- **Repository ç®¡ç†**
  - Repository CRUD æ“ä½œ
  - å”ä½œè€…ç®¡ç†
  - åœ˜éšŠè¨ªå•ç®¡ç†
  - Repository è¨­å®š

- **ç¾ä»£åŒ–æŠ€è¡“ç‰¹æ€§**
  - Angular v20 Signals ç‹€æ…‹ç®¡ç†
  - Control Flow (@if, @for, @switch)
  - Value Objects æ¨¡å¼
  - å®Œæ•´çš„æ¸¬è©¦è¦†è“‹

## Business Value
- **æé«˜æ•ˆç‡**ï¼šçµ±ä¸€çš„æ¬Šé™ç®¡ç†ç³»çµ±ï¼Œæ¸›å°‘ç®¡ç†é–‹éŠ·
- **é™ä½é¢¨éšª**ï¼šå¤šå±¤ç´šçš„æ¬Šé™æ§åˆ¶ï¼Œç¢ºä¿è³‡æºå®‰å…¨
- **æå‡é«”é©—**ï¼šç¾ä»£åŒ–çš„ UI è¨­è¨ˆï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ¶é«”é©—
- **æ˜“æ–¼æ“´å±•**ï¼šæ¨¡çµ„åŒ–è¨­è¨ˆï¼Œä¾¿æ–¼æ·»åŠ æ–°åŠŸèƒ½
- **æˆæœ¬æ•ˆç›Š**ï¼šä½¿ç”¨ Firebase æœå‹™ï¼Œé™ä½é‹ç¶­æˆæœ¬

## Success Metrics
- **ç³»çµ±æ€§èƒ½**ï¼šé é¢è¼‰å…¥æ™‚é–“ < 2ç§’
- **æ§‹å»ºå¤§å°**ï¼š< 2MBï¼ˆç›®å‰ 1.14MBï¼‰
- **æ¸¬è©¦è¦†è“‹**ï¼š> 80% ä»£ç¢¼è¦†è“‹ç‡
- **ç”¨æˆ¶æ»¿æ„åº¦**ï¼š> 90% ç”¨æˆ¶æ»¿æ„åº¦
- **ç³»çµ±ç©©å®šæ€§**ï¼š> 99.9% å¯ç”¨æ€§
`````

## File: .gitignore
`````
# OS specific files
.DS_Store
Thumbs.db
desktop.ini

# Editor specific files
.vscode/
.idea/
*.swp
*.swo
*~

# Node.js
node_modules/
npm-debug.log
yarn-error.log
package-lock.json
yarn.lock

# Python
__pycache__/
*.py[cod]
*$py.class
.pytest_cache/
.coverage
htmlcov/
.tox/
.nox/
.hypothesis/
.pytest_cache/
*.egg-info/

# Ruby
*.gem
*.rbc
/.config
/coverage/
/InstalledFiles
/pkg/
/spec/reports/
/spec/examples.txt
/test/tmp/
/test/version_tmp/
/tmp/

# Java
*.class
*.log
*.jar
*.war
*.nar
*.ear
*.zip
*.tar.gz
*.rar
hs_err_pid*

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Cursor specific
.cursor/workspace/ 

#claude.code specific
.claude/
CLAUDE.md
`````

## File: SYSTEM_ARCHITECTURE.md
`````markdown
# 0. ç³»çµ±è³‡æ–™æ¨¡å‹çµæ§‹åœ–

## Core Modules (æ ¸å¿ƒæ¨¡çµ„)

### User Module (ç”¨æˆ¶æ¨¡çµ„)
â”œâ”€â”€ User (å€‹äººç”¨æˆ¶ - å·¥ç¨‹å¸«/ç›£å·¥/æ‰¿åŒ…å•†)
â”‚   â”œâ”€â”€ Profile (å€‹äººè³‡æ–™ + å°ˆæ¥­è­‰ç…§)
â”‚   â”œâ”€â”€ Settings (å€‹äººè¨­å®š)
â”‚   â”œâ”€â”€ Teams (æ‰€å±¬åœ˜éšŠ)
â”‚   â”‚   â””â”€â”€ Team Role (åœ¨åœ˜éšŠä¸­çš„è§’è‰²)
â”‚   â””â”€â”€ Organization Memberships (åŠ å…¥çš„çµ„ç¹”)
â”‚       â””â”€â”€ Role (åœ¨çµ„ç¹”ä¸­çš„è§’è‰²)

### Organization Module (çµ„ç¹”æ¨¡çµ„)
â”œâ”€â”€ Organization (çµ„ç¹” - ç‡Ÿé€ å…¬å¸/å»ºè¨­å…¬å¸)
â”‚   â”œâ”€â”€ Profile (çµ„ç¹”è³‡æ–™ + ç‡Ÿæ¥­åŸ·ç…§)
â”‚   â”œâ”€â”€ Members (çµ„ç¹”æˆå“¡)
â”‚   â”‚   â”œâ”€â”€ Member Info (æˆå“¡å€‹äººè³‡æ–™)
â”‚   â”‚   â”œâ”€â”€ Role (çµ„ç¹”è§’è‰²ï¼šç¶“ç†/å·¥ç¨‹å¸«/ç›£å·¥)
â”‚   â”‚   â””â”€â”€ Teams (æ‰€å±¬åœ˜éšŠ)
â”‚   â””â”€â”€ Teams (åœ˜éšŠ - å·¥å‹™çµ„/å®‰å…¨çµ„/å“ç®¡çµ„)
â”‚       â”œâ”€â”€ Team Info (åœ˜éšŠè³‡æ–™)
â”‚       â”œâ”€â”€ Members (åœ˜éšŠæˆå“¡)
â”‚       â”‚   â”œâ”€â”€ Member Info (æˆå“¡å€‹äººè³‡æ–™)
â”‚       â”‚   â””â”€â”€ Role (éšŠé•·/æˆå“¡)
â”‚       â””â”€â”€ Projects Assigned (åˆ†é…çµ¦åœ˜éšŠçš„å°ˆæ¡ˆ)

### Project Module (å°ˆæ¡ˆæ¨¡çµ„)
â”œâ”€â”€ Projects (å°ˆæ¡ˆ = Repositories)
â”‚   â”œâ”€â”€ Owner (æ“æœ‰è€… - å€‹äººç”¨æˆ¶æˆ–çµ„ç¹”)
â”‚   â”œâ”€â”€ Project Info (å°ˆæ¡ˆåŸºæœ¬è³‡æ–™)
â”‚   â”œâ”€â”€ Milestones (é‡Œç¨‹ç¢‘/éšæ®µ)
â”‚   â”œâ”€â”€ Tasks/Issues (å·¥é …/å•é¡Œè¿½è¹¤)
â”‚   â”œâ”€â”€ Documents (æ–‡ä»¶ç®¡ç†)
â”‚   â”œâ”€â”€ Photos/Media (ç¾å ´ç…§ç‰‡/å½±ç‰‡)
â”‚   â”œâ”€â”€ Daily Reports (æ¯æ—¥æ–½å·¥æ—¥èªŒ)
â”‚   â”œâ”€â”€ Inspections (æŸ¥é©—è¨˜éŒ„)
â”‚   â”œâ”€â”€ Materials (ææ–™ç®¡ç†)
â”‚   â”œâ”€â”€ Equipment (è¨­å‚™/æ©Ÿå…·ç®¡ç†)
â”‚   â”œâ”€â”€ Safety Records (å®‰å…¨è¨˜éŒ„)
â”‚   â”œâ”€â”€ Weather Logs (å¤©æ°£è¨˜éŒ„)
â”‚   â”œâ”€â”€ Comments/Discussion (è¨è«–å€)
â”‚   â”œâ”€â”€ Gantt Chart Data (ç”˜ç‰¹åœ–è³‡æ–™)
â”‚   â””â”€â”€ Cost Control (æˆæœ¬æ§åˆ¶)
â”‚       â”œâ”€â”€ Budget (é ç®—)
â”‚       â”œâ”€â”€ Actual Cost (å¯¦éš›æ”¯å‡º)
â”‚       â”œâ”€â”€ Forecast (æˆæœ¬é æ¸¬)
â”‚       â”œâ”€â”€ Variance (é ç®—å·®ç•°)
â”‚       â””â”€â”€ Cost Breakdown (äººåŠ›/ææ–™/è¨­å‚™åˆ†è§£)

## Cross-Cutting Modules (æ©«åˆ‡æ¨¡çµ„)

### Social Module (ç¤¾äº¤æ¨¡çµ„)
â”œâ”€â”€ Relationships (é—œä¿‚ç®¡ç†)
â”‚   â”œâ”€â”€ Following (è¿½è¹¤é—œä¿‚)
â”‚   â”‚   â”œâ”€â”€ User Following User
â”‚   â”‚   â”œâ”€â”€ User Following Organization  
â”‚   â”‚   â””â”€â”€ User Following Project
â”‚   â””â”€â”€ Followers (ç²‰çµ²é—œä¿‚)
â”œâ”€â”€ Social Network (ç¤¾äº¤ç¶²çµ¡)
â”‚   â”œâ”€â”€ Connection Analysis (é€£çµåˆ†æ)
â”‚   â”œâ”€â”€ Mutual Connections (å…±åŒé€£çµ)
â”‚   â””â”€â”€ Network Graph (ç¶²çµ¡åœ–è­œ)
â””â”€â”€ Recommendations (æ¨è–¦ç³»çµ±)
    â”œâ”€â”€ User Recommendations (ç”¨æˆ¶æ¨è–¦)
    â”œâ”€â”€ Content Recommendations (å…§å®¹æ¨è–¦)
    â””â”€â”€ Professional Recommendations (å°ˆæ¥­æ¨è–¦)

### Achievement Module (æˆå°±æ¨¡çµ„)  
â”œâ”€â”€ Achievements (æˆå°±ç³»çµ±)
â”‚   â”œâ”€â”€ User Achievements (ç”¨æˆ¶æˆå°±)
â”‚   â”œâ”€â”€ Organization Achievements (çµ„ç¹”æˆå°±)
â”‚   â””â”€â”€ Project Achievements (å°ˆæ¡ˆæˆå°±)
â”œâ”€â”€ Rules Engine (è¦å‰‡å¼•æ“)
â”‚   â”œâ”€â”€ Achievement Rules (æˆå°±è¦å‰‡)
â”‚   â”œâ”€â”€ Trigger Conditions (è§¸ç™¼æ¢ä»¶)
â”‚   â””â”€â”€ Scoring System (è¨ˆåˆ†ç³»çµ±)
â”œâ”€â”€ Categories (æˆå°±åˆ†é¡)
â”‚   â”œâ”€â”€ Professional Categories (å°ˆæ¥­åˆ†é¡)
â”‚   â”œâ”€â”€ Social Categories (ç¤¾äº¤åˆ†é¡)
â”‚   â””â”€â”€ Project Categories (å°ˆæ¡ˆåˆ†é¡)
â””â”€â”€ Leaderboards (æ’è¡Œæ¦œ)
    â”œâ”€â”€ Global Leaderboard (å…¨åŸŸæ’è¡Œæ¦œ)
    â”œâ”€â”€ Organization Leaderboard (çµ„ç¹”æ’è¡Œæ¦œ)
    â””â”€â”€ Category Leaderboard (åˆ†é¡æ’è¡Œæ¦œ)

### Notification Module (é€šçŸ¥æ¨¡çµ„)
â”œâ”€â”€ Notifications (é€šçŸ¥ç³»çµ±)
â”‚   â”œâ”€â”€ System Notifications (ç³»çµ±é€šçŸ¥)
â”‚   â”œâ”€â”€ User Notifications (ç”¨æˆ¶é€šçŸ¥)
â”‚   â”œâ”€â”€ Organization Notifications (çµ„ç¹”é€šçŸ¥)
â”‚   â””â”€â”€ Project Notifications (å°ˆæ¡ˆé€šçŸ¥)
â”œâ”€â”€ Channels (é€šçŸ¥é€šé“)  
â”‚   â”œâ”€â”€ In-App Notifications (æ‡‰ç”¨å…§é€šçŸ¥)
â”‚   â”œâ”€â”€ Email Notifications (éƒµä»¶é€šçŸ¥)
â”‚   â”œâ”€â”€ SMS Notifications (ç°¡è¨Šé€šçŸ¥)
â”‚   â””â”€â”€ Push Notifications (æ¨é€é€šçŸ¥)
â”œâ”€â”€ Templates (é€šçŸ¥æ¨¡æ¿)
â”‚   â”œâ”€â”€ Template Management (æ¨¡æ¿ç®¡ç†)
â”‚   â”œâ”€â”€ Multi-language Support (å¤šèªè¨€æ”¯æ´)
â”‚   â””â”€â”€ Dynamic Content (å‹•æ…‹å…§å®¹)
â””â”€â”€ Preferences (é€šçŸ¥åå¥½)
    â”œâ”€â”€ User Preferences (ç”¨æˆ¶åå¥½)
    â”œâ”€â”€ Channel Preferences (é€šé“åå¥½)
    â”œâ”€â”€ Frequency Control (é »ç‡æ§åˆ¶)
    â””â”€â”€ Do Not Disturb (å…æ‰“æ“¾è¨­å®š)

## Integration Points (æ•´åˆé»)

### Event-Driven Integration (äº‹ä»¶é©…å‹•æ•´åˆ)
â”œâ”€â”€ Domain Events (é ˜åŸŸäº‹ä»¶)
â”‚   â”œâ”€â”€ User Events (ç”¨æˆ¶äº‹ä»¶)
â”‚   â”œâ”€â”€ Organization Events (çµ„ç¹”äº‹ä»¶)
â”‚   â”œâ”€â”€ Project Events (å°ˆæ¡ˆäº‹ä»¶)
â”‚   â”œâ”€â”€ Social Events (ç¤¾äº¤äº‹ä»¶)
â”‚   â”œâ”€â”€ Achievement Events (æˆå°±äº‹ä»¶)
â”‚   â””â”€â”€ Notification Events (é€šçŸ¥äº‹ä»¶)
â””â”€â”€ Event Bus (äº‹ä»¶åŒ¯æµæ’)
    â”œâ”€â”€ Event Publishing (äº‹ä»¶ç™¼å¸ƒ)
    â”œâ”€â”€ Event Subscription (äº‹ä»¶è¨‚é–±)
    â””â”€â”€ Event Processing (äº‹ä»¶è™•ç†)

### Shared Services (å…±äº«æœå‹™)
â”œâ”€â”€ Authentication (èªè­‰æœå‹™)
â”‚   â”œâ”€â”€ Auth Service Integration
â”‚   â”œâ”€â”€ Auth Integration  
â”‚   â””â”€â”€ Token Management
â”œâ”€â”€ Authorization (æˆæ¬Šæœå‹™)
â”‚   â”œâ”€â”€ ACL Integration
â”‚   â”œâ”€â”€ Role-Based Access Control
â”‚   â””â”€â”€ Permission Management
â”œâ”€â”€ File Storage (æª”æ¡ˆå„²å­˜)
â”‚   â”œâ”€â”€ Document Storage
â”‚   â”œâ”€â”€ Image Storage
â”‚   â””â”€â”€ Media Storage
â””â”€â”€ Audit & Logging (å¯©è¨ˆèˆ‡æ—¥èªŒ)
    â”œâ”€â”€ Operation Logs
    â”œâ”€â”€ Security Logs
    â””â”€â”€ Performance Logs

## Technical Integration Layer (æŠ€è¡“æ•´åˆå±¤)

### Authentication & Authorization Stack (èªè­‰æˆæ¬ŠæŠ€è¡“æ£§)
â”œâ”€â”€ Authentication Service (èªè­‰æœå‹™)
â”‚   â”œâ”€â”€ Email/Password Authentication (éƒµç®±å¯†ç¢¼èªè­‰)
â”‚   â”œâ”€â”€ Social Login Integration (ç¤¾äº¤ç™»å…¥æ•´åˆ)
â”‚   â”œâ”€â”€ Email Verification (éƒµç®±é©—è­‰)
â”‚   â”œâ”€â”€ Password Reset (å¯†ç¢¼é‡ç½®)
â”‚   â””â”€â”€ Token Management (ä»¤ç‰Œç®¡ç†)
â”œâ”€â”€ Auth Integration (èªè­‰æ•´åˆ)
â”‚   â”œâ”€â”€ Token Storage & Management (ä»¤ç‰Œå„²å­˜ç®¡ç†)
â”‚   â”œâ”€â”€ Authentication State Management (èªè­‰ç‹€æ…‹ç®¡ç†)
â”‚   â”œâ”€â”€ Auto Token Refresh (è‡ªå‹•ä»¤ç‰Œåˆ·æ–°)
â”‚   â”œâ”€â”€ Login/Logout Interceptors (ç™»å…¥ç™»å‡ºæ””æˆªå™¨)
â”‚   â””â”€â”€ Route Guards (è·¯ç”±å®ˆè¡›)
â””â”€â”€ Authorization Service (æˆæ¬Šæœå‹™)
    â”œâ”€â”€ Role-Based Access Control (è§’è‰²æ¬Šé™æ§åˆ¶)
    â”œâ”€â”€ Permission Management (æ¬Šé™ç®¡ç†)
    â”œâ”€â”€ Route-Level Protection (è·¯ç”±å±¤ç´šä¿è­·)
    â”œâ”€â”€ Component-Level Protection (å…ƒä»¶å±¤ç´šä¿è­·)
    â”œâ”€â”€ Organization Context Switching (çµ„ç¹”ä¸Šä¸‹æ–‡åˆ‡æ›)
    â””â”€â”€ Dynamic Permission Updates (å‹•æ…‹æ¬Šé™æ›´æ–°)

#### Canonical Login Flowï¼ˆç™»å…¥éˆèˆ‡ Token æ©‹æ¥ï¼‰
1. ä½¿ç”¨è€…æ–¼ UI è¼¸å…¥æ†‘è­‰ã€‚
2. é€éèªè­‰æœå‹™å®Œæˆç™»å…¥ä¸¦å–å¾— ID Tokenã€‚
3. èªè­‰æ•´åˆæœå‹™å°‡ ID Token æ­£è¦åŒ–ä¸¦å„²å­˜ã€‚
4. Token æ””æˆªå™¨ç‚ºå°å¤– API è«‹æ±‚è‡ªå‹•é™„åŠ  Authorization æ¨™é ­ã€‚
5. èªè­‰æœå‹™ç¶­è­·ç™»å…¥ç‹€æ…‹ï¼›UI ä¾ç‹€æ…‹åˆ‡æ›ï¼ˆç™»å…¥/ç™»å‡º/éæœŸï¼‰ã€‚
6. ä»¥ä½¿ç”¨è€…æª”æ¡ˆ + ç•¶å‰çµ„ç¹”ID çµ„è£æ¬Šé™èƒ½åŠ›é›†åˆï¼Œåˆå§‹åŒ–æ¬Šé™æ¨¹ã€‚
7. æ¬Šé™å®ˆè¡›ä¿è­·å—æ§è·¯ç”±ï¼›æ¬Šé™æŒ‡ä»¤/ç®¡é“æ–¼å…ƒä»¶å±¤æ§ç®¡é¡¯ç¤ºã€‚
8. ç›£è½ Token æ›´æ–°äº‹ä»¶ï¼Œæ–¼ Token æ›´æ–°æ™‚åŒæ­¥ä¸¦é‡ç®—æ¬Šé™ï¼ˆé¿å…æ¬Šé™æ¼‚ç§»ï¼‰ã€‚

#### ACL æ˜ å°„è¦å‰‡ï¼ˆæ‘˜è¦ï¼‰
- **ä¾†æº**ï¼šä½¿ç”¨è€…æª”æ¡ˆä¸­çš„è§’è‰²/æ¬Šé™ + Contextï¼ˆçµ„ç¹”IDã€å¿…è¦æ™‚å°ˆæ¡ˆIDï¼‰ã€‚
- **è½‰æ›**ï¼šæ˜ å°„ç‚ºæ¬Šé™ç³»çµ±çš„è§’è‰²èˆ‡èƒ½åŠ›é›†åˆï¼Œä¿å­˜åœ¨æ¬Šé™æœå‹™å…§å­˜ã€‚
- **åˆ‡æ›**ï¼šä½¿ç”¨è€…åˆ‡æ›çµ„ç¹”æ™‚ï¼Œé‡æ–°è¨ˆç®—æ˜ å°„ä¸¦æ›´æ–°æ¬Šé™ï¼›ç¢ºä¿è·¯ç”±å®ˆè¡›èˆ‡æ¨¡æ¿æ¢ä»¶ç«‹åˆ»ç”Ÿæ•ˆã€‚

#### æ””æˆªå™¨èˆ‡å®ˆè¡›è²¬ä»»é‚Šç•Œ
- **Token æ””æˆªå™¨**ï¼šæ³¨å…¥ Authorization æ¨™é ­ï¼Œä¾†æºç‚ºèªè­‰æœå‹™çš„ Token å„²å­˜ã€‚
- **èªè­‰æ””æˆªå™¨**ï¼šé›†ä¸­è™•ç†æœªæˆæ¬Š/éæœŸç­‰éŒ¯èª¤èˆ‡å°æµé‚è¼¯ï¼ˆé¿å…èˆ‡ Token æ³¨å…¥é‡ç–Šè²¬ä»»ï¼‰ã€‚
- **æ¬Šé™å®ˆè¡›**ï¼šè·¯ç”±å®ˆè¡›ï¼Œä»¥æ¬Šé™æ¨¹åˆ¤æ–·å¯é”æ€§ã€‚

### Data Persistence Architecture (è³‡æ–™æŒä¹…åŒ–æ¶æ§‹)
â”œâ”€â”€ Database Collections (è³‡æ–™åº«é›†åˆè¨­è¨ˆ)
â”‚   â”œâ”€â”€ Users Collection (/users)
â”‚   â”‚   â”œâ”€â”€ User Profile Data (ç”¨æˆ¶æª”æ¡ˆè³‡æ–™)
â”‚   â”‚   â”œâ”€â”€ User Settings (ç”¨æˆ¶è¨­å®š)
â”‚   â”‚   â””â”€â”€ User Certificates (ç”¨æˆ¶è­‰ç…§)
â”‚   â”œâ”€â”€ Organizations Collection (/organizations)
â”‚   â”‚   â”œâ”€â”€ Organization Data (çµ„ç¹”è³‡æ–™)
â”‚   â”‚   â”œâ”€â”€ Members Subcollection (/members)
â”‚   â”‚   â””â”€â”€ Teams Subcollection (/teams)
â”‚   â”œâ”€â”€ Projects Collection (/projects)
â”‚   â”‚   â”œâ”€â”€ Project Data (å°ˆæ¡ˆè³‡æ–™)
â”‚   â”‚   â”œâ”€â”€ Tasks Subcollection (/tasks)
â”‚   â”‚   â”œâ”€â”€ Documents Subcollection (/documents)
â”‚   â”‚   â””â”€â”€ Cost Control Subcollection (/costs)
â”‚   â”œâ”€â”€ Social Relations Collection (/social_relations)
â”‚   â”‚   â”œâ”€â”€ Following Relationships (è¿½è¹¤é—œä¿‚)
â”‚   â”‚   â”œâ”€â”€ Social Statistics (ç¤¾äº¤çµ±è¨ˆ)
â”‚   â”‚   â””â”€â”€ Recommendation Data (æ¨è–¦è³‡æ–™)
â”‚   â”œâ”€â”€ Achievements Collection (/achievements)
â”‚   â”‚   â”œâ”€â”€ Achievement Definitions (æˆå°±å®šç¾©)
â”‚   â”‚   â”œâ”€â”€ User Achievements (/user_achievements)
â”‚   â”‚   â”œâ”€â”€ Achievement Rules (æˆå°±è¦å‰‡)
â”‚   â”‚   â””â”€â”€ Leaderboards (æ’è¡Œæ¦œ)
â”‚   â””â”€â”€ Notifications Collection (/notifications)
â”‚       â”œâ”€â”€ Notification Queue (é€šçŸ¥ä½‡åˆ—)
â”‚       â”œâ”€â”€ User Preferences (/user_preferences)
â”‚       â”œâ”€â”€ Notification Templates (é€šçŸ¥æ¨¡æ¿)
â”‚       â””â”€â”€ Delivery Logs (æŠ•éæ—¥èªŒ)
â”œâ”€â”€ Real-time Subscriptions (å³æ™‚è¨‚é–±)
â”‚   â”œâ”€â”€ User Activity Streams (ç”¨æˆ¶æ´»å‹•æµ)
â”‚   â”œâ”€â”€ Organization Updates (çµ„ç¹”æ›´æ–°)
â”‚   â”œâ”€â”€ Project Progress (å°ˆæ¡ˆé€²åº¦)
â”‚   â”œâ”€â”€ Social Interactions (ç¤¾äº¤äº’å‹•)
â”‚   â””â”€â”€ Notification Delivery (é€šçŸ¥æŠ•é)
â”œâ”€â”€ Offline Synchronization (é›¢ç·šåŒæ­¥)
â”‚   â”œâ”€â”€ Local Cache Management (æœ¬åœ°å¿«å–ç®¡ç†)
â”‚   â”œâ”€â”€ Conflict Resolution (è¡çªè§£æ±º)
â”‚   â”œâ”€â”€ Background Sync (èƒŒæ™¯åŒæ­¥)
â”‚   â””â”€â”€ Data Validation (è³‡æ–™é©—è­‰)
â””â”€â”€ Security Rules (å®‰å…¨è¦å‰‡)
    â”œâ”€â”€ User Data Access Control (ç”¨æˆ¶è³‡æ–™å­˜å–æ§åˆ¶)
    â”œâ”€â”€ Organization-Level Security (çµ„ç¹”å±¤ç´šå®‰å…¨)
    â”œâ”€â”€ Project Access Control (å°ˆæ¡ˆå­˜å–æ§åˆ¶)
    â””â”€â”€ Cross-Module Security (è·¨æ¨¡çµ„å®‰å…¨)

### Event-Driven Infrastructure (äº‹ä»¶é©…å‹•åŸºç¤è¨­æ–½)
â”œâ”€â”€ Event Bus Architecture (äº‹ä»¶åŒ¯æµæ’æ¶æ§‹)
â”‚   â”œâ”€â”€ Domain Event Publishing (é ˜åŸŸäº‹ä»¶ç™¼å¸ƒ)
â”‚   â”œâ”€â”€ Event Subscription Management (äº‹ä»¶è¨‚é–±ç®¡ç†)
â”‚   â”œâ”€â”€ Event Routing (äº‹ä»¶è·¯ç”±)
â”‚   â””â”€â”€ Event Filtering (äº‹ä»¶éæ¿¾)
â”œâ”€â”€ Event Store (äº‹ä»¶å„²å­˜)
â”‚   â”œâ”€â”€ Event Persistence (äº‹ä»¶æŒä¹…åŒ–)
â”‚   â”œâ”€â”€ Event History (äº‹ä»¶æ­·å²)
â”‚   â”œâ”€â”€ Event Snapshots (äº‹ä»¶å¿«ç…§)
â”‚   â””â”€â”€ Event Replay (äº‹ä»¶é‡æ’­)
â”œâ”€â”€ Event Processing (äº‹ä»¶è™•ç†)
â”‚   â”œâ”€â”€ Synchronous Processing (åŒæ­¥è™•ç†)
â”‚   â”œâ”€â”€ Asynchronous Processing (éåŒæ­¥è™•ç†)
â”‚   â”œâ”€â”€ Batch Processing (æ‰¹æ¬¡è™•ç†)
â”‚   â””â”€â”€ Error Handling (éŒ¯èª¤è™•ç†)
â””â”€â”€ Integration Events (æ•´åˆäº‹ä»¶)
    â”œâ”€â”€ User Events â†’ Social/Achievement/Notification
    â”œâ”€â”€ Organization Events â†’ User/Project/Achievement
    â”œâ”€â”€ Project Events â†’ User/Organization/Achievement
    â”œâ”€â”€ Social Events â†’ Achievement/Notification
    â”œâ”€â”€ Achievement Events â†’ Social/Notification
    â””â”€â”€ Notification Events â†’ All Modules (Delivery Status)

## Cross-Module Dependencies Matrix (è·¨æ¨¡çµ„ä¾è³´çŸ©é™£)

### Module Interaction Patterns (æ¨¡çµ„äº’å‹•æ¨¡å¼)
User Org Proj Social Achv Notif
User Module - âœ“ âœ“ â—‹ â—‹ â—‹
Organization âœ“ - âœ“ â—‹ â—‹ â—‹
Project âœ“ âœ“ - â—‹ â—‹ â—‹
Social âœ“ âœ“ âœ“ - âœ“ âœ“
Achievement âœ“ âœ“ âœ“ âœ“ - âœ“
Notification âœ“ âœ“ âœ“ âœ“ âœ“ -
Legend: âœ“ = Strong Dependency â—‹ = Event-based Integration


### Data Flow Patterns (è³‡æ–™æµå‘æ¨¡å¼)
â”œâ”€â”€ **Core Data Flow** (æ ¸å¿ƒè³‡æ–™æµ)
â”‚   â”œâ”€â”€ User â†’ Organization (ç”¨æˆ¶åŠ å…¥çµ„ç¹”)
â”‚   â”œâ”€â”€ Organization â†’ Project (çµ„ç¹”å»ºç«‹å°ˆæ¡ˆ)  
â”‚   â”œâ”€â”€ User â†” Project (ç”¨æˆ¶åƒèˆ‡å°ˆæ¡ˆ)
â”‚   â””â”€â”€ User â†” Organization â†” Project (ä¸‰è§’é—œä¿‚)
â”œâ”€â”€ **Social Data Flow** (ç¤¾äº¤è³‡æ–™æµ)
â”‚   â”œâ”€â”€ User â†’ Social Relations (å»ºç«‹è¿½è¹¤é—œä¿‚)
â”‚   â”œâ”€â”€ Social Relations â†’ Recommendations (ç”Ÿæˆæ¨è–¦)
â”‚   â”œâ”€â”€ Activity Events â†’ Social Feed (æ´»å‹•é¥‹é€)
â”‚   â””â”€â”€ Social Metrics â†’ Analytics (ç¤¾äº¤åˆ†æ)
â”œâ”€â”€ **Achievement Data Flow** (æˆå°±è³‡æ–™æµ)
â”‚   â”œâ”€â”€ All Modules â†’ Achievement Triggers (æˆå°±è§¸ç™¼)
â”‚   â”œâ”€â”€ Achievement Rules â†’ Rule Evaluation (è¦å‰‡è©•ä¼°)
â”‚   â”œâ”€â”€ Achievement Awards â†’ User Profile (æˆå°±é ’ç™¼)
â”‚   â””â”€â”€ Achievement Stats â†’ Leaderboards (æ’è¡Œæ¦œæ›´æ–°)
â””â”€â”€ **Notification Data Flow** (é€šçŸ¥è³‡æ–™æµ)
    â”œâ”€â”€ All Events â†’ Notification Queue (é€šçŸ¥ä½‡åˆ—)
    â”œâ”€â”€ User Preferences â†’ Notification Filtering (é€šçŸ¥éæ¿¾)
    â”œâ”€â”€ Templates + Data â†’ Rendered Notifications (æ¸²æŸ“é€šçŸ¥)
    â””â”€â”€ Delivery Status â†’ Analytics (æŠ•éåˆ†æ)

## Implementation Considerations (å¯¦ä½œè€ƒé‡)

### Scalability Architecture (å¯æ“´å±•æ€§æ¶æ§‹)
â”œâ”€â”€ **Horizontal Scaling** (æ°´å¹³æ“´å±•)
â”‚   â”œâ”€â”€ Microservice-Ready Design (å¾®æœå‹™å°±ç·’è¨­è¨ˆ)
â”‚   â”œâ”€â”€ Database Sharding Strategy (è³‡æ–™åº«åˆ†ç‰‡ç­–ç•¥)
â”‚   â”œâ”€â”€ Load Balancing (è² è¼‰å¹³è¡¡)
â”‚   â””â”€â”€ CDN Integration (CDN æ•´åˆ)
â”œâ”€â”€ **Performance Optimization** (æ•ˆèƒ½å„ªåŒ–)
â”‚   â”œâ”€â”€ Lazy Loading (å»¶é²è¼‰å…¥)
â”‚   â”œâ”€â”€ Caching Strategy (å¿«å–ç­–ç•¥)
â”‚   â”œâ”€â”€ Query Optimization (æŸ¥è©¢å„ªåŒ–)
â”‚   â””â”€â”€ Bundle Splitting (åŒ…åˆ†å‰²)
â””â”€â”€ **Monitoring & Observability** (ç›£æ§èˆ‡å¯è§€æ¸¬æ€§)
    â”œâ”€â”€ Application Metrics (æ‡‰ç”¨æŒ‡æ¨™)
    â”œâ”€â”€ Performance Monitoring (æ•ˆèƒ½ç›£æ§)
    â”œâ”€â”€ Error Tracking (éŒ¯èª¤è¿½è¹¤)
    â””â”€â”€ User Analytics (ç”¨æˆ¶åˆ†æ)

### Security Architecture (å®‰å…¨æ¶æ§‹)
â”œâ”€â”€ **Authentication Security** (èªè­‰å®‰å…¨)
â”‚   â”œâ”€â”€ Multi-Factor Authentication (å¤šå› å­èªè­‰)
â”‚   â”œâ”€â”€ Token Security (ä»¤ç‰Œå®‰å…¨)
â”‚   â”œâ”€â”€ Session Management (æœƒè©±ç®¡ç†)
â”‚   â””â”€â”€ Brute Force Protection (æš´åŠ›ç ´è§£é˜²è­·)
â”œâ”€â”€ **Authorization Security** (æˆæ¬Šå®‰å…¨)
â”‚   â”œâ”€â”€ Principle of Least Privilege (æœ€å°æ¬Šé™åŸå‰‡)
â”‚   â”œâ”€â”€ Resource-Level Access Control (è³‡æºå±¤ç´šå­˜å–æ§åˆ¶)
â”‚   â”œâ”€â”€ Context-Aware Permissions (ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¬Šé™)
â”‚   â””â”€â”€ Permission Audit Trail (æ¬Šé™å¯©è¨ˆè»Œè·¡)
â”œâ”€â”€ **Data Security** (è³‡æ–™å®‰å…¨)
â”‚   â”œâ”€â”€ Data Encryption (è³‡æ–™åŠ å¯†)
â”‚   â”œâ”€â”€ PII Protection (å€‹äººè³‡è¨Šä¿è­·)
â”‚   â”œâ”€â”€ Data Masking (è³‡æ–™é®ç½©)
â”‚   â””â”€â”€ Backup Security (å‚™ä»½å®‰å…¨)
â””â”€â”€ **Communication Security** (é€šè¨Šå®‰å…¨)
    â”œâ”€â”€ HTTPS Enforcement (HTTPS å¼·åˆ¶)
    â”œâ”€â”€ API Security (API å®‰å…¨)
    â”œâ”€â”€ Input Validation (è¼¸å…¥é©—è­‰)
    â””â”€â”€ XSS/CSRF Protection (XSS/CSRF é˜²è­·)

### Development Workflow (é–‹ç™¼å·¥ä½œæµç¨‹)
â”œâ”€â”€ **Phase 1: Foundation** (ç¬¬ä¸€éšæ®µï¼šåŸºç¤å»ºè¨­) - 3-4 months
â”‚   â”œâ”€â”€ User Module (Core Auth + Profile)
â”‚   â”œâ”€â”€ Organization Module (Basic Management)
â”‚   â”œâ”€â”€ Authentication Stack Integration
â”‚   â””â”€â”€ Basic Event Infrastructure
â”œâ”€â”€ **Phase 2: Core Business** (ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒæ¥­å‹™) - 2-3 months  
â”‚   â”œâ”€â”€ Project Module (Full Implementation)
â”‚   â”œâ”€â”€ Advanced Organization Features
â”‚   â”œâ”€â”€ User-Organization-Project Integration
â”‚   â””â”€â”€ Core Business Logic Testing
â”œâ”€â”€ **Phase 3: Social Features** (ç¬¬ä¸‰éšæ®µï¼šç¤¾äº¤åŠŸèƒ½) - 2-3 months
â”‚   â”œâ”€â”€ Social Module (Following/Recommendations)
â”‚   â”œâ”€â”€ Notification Module (Multi-channel)
â”‚   â”œâ”€â”€ Achievement Module (Rules Engine)
â”‚   â””â”€â”€ Cross-Module Event Integration
â””â”€â”€ **Phase 4: Advanced Features** (ç¬¬å››éšæ®µï¼šé€²éšåŠŸèƒ½) - 1-2 months
    â”œâ”€â”€ Advanced Analytics
    â”œâ”€â”€ Performance Optimization
    â”œâ”€â”€ Security Hardening
    â””â”€â”€ Production Deployment

# 1. ç”¨æˆ¶æ¨¡çµ„æ¶æ§‹åœ– âœ…

graph TB
    subgraph "User Presentation Layer (ç”¨æˆ¶å±•ç¤ºå±¤)"
        subgraph "èªè­‰ç›¸é—œå…ƒä»¶"
            UCLA[Login Component<br/>ç™»å…¥å…ƒä»¶]
            UCRA[Registration Component<br/>è¨»å†Šå…ƒä»¶]
            UCFA[Forgot Password Component<br/>å¿˜è¨˜å¯†ç¢¼å…ƒä»¶]
            UCVA[Email Verification Component<br/>éƒµç®±é©—è­‰å…ƒä»¶]
        end
        
        subgraph "å€‹äººæª”æ¡ˆå…ƒä»¶"
            UCPC[Profile Card Component<br/>å€‹äººæª”æ¡ˆå¡ç‰‡å…ƒä»¶]
            UCPE[Profile Edit Component<br/>å€‹äººæª”æ¡ˆç·¨è¼¯å…ƒä»¶]
            UCAV[Avatar Component<br/>é ­åƒå…ƒä»¶]
            UCBI[Basic Info Component<br/>åŸºæœ¬è³‡è¨Šå…ƒä»¶]
        end
        
        subgraph "å°ˆæ¥­è­‰ç…§å…ƒä»¶"
            UCCM[Certificate Management Component<br/>è­‰ç…§ç®¡ç†å…ƒä»¶]
            UCCL[Certificate List Component<br/>è­‰ç…§åˆ—è¡¨å…ƒä»¶]
            UCCU[Certificate Upload Component<br/>è­‰ç…§ä¸Šå‚³å…ƒä»¶]
            UCCV[Certificate Verification Component<br/>è­‰ç…§é©—è­‰å…ƒä»¶]
        end
        
        subgraph "ç¤¾äº¤åŠŸèƒ½å…ƒä»¶"
            UCFL[Following List Component<br/>è¿½è¹¤åˆ—è¡¨å…ƒä»¶]
            UCFR[Followers List Component<br/>ç²‰çµ²åˆ—è¡¨å…ƒä»¶]
            UCSB[Social Button Component<br/>ç¤¾äº¤æŒ‰éˆ•å…ƒä»¶]
            UCSC[Social Card Component<br/>ç¤¾äº¤å¡ç‰‡å…ƒä»¶]
        end
        
        subgraph "æˆå°±èˆ‡é€šçŸ¥å…ƒä»¶"
            UCAC[Achievement Component<br/>æˆå°±å…ƒä»¶]
            UCAB[Achievement Badge Component<br/>æˆå°±å¾½ç« å…ƒä»¶]
            UCNC[Notification Center Component<br/>é€šçŸ¥ä¸­å¿ƒå…ƒä»¶]
            UCNL[Notification List Component<br/>é€šçŸ¥åˆ—è¡¨å…ƒä»¶]
            UCNS[Notification Settings Component<br/>é€šçŸ¥è¨­å®šå…ƒä»¶]
        end
        
        subgraph "ç”¨æˆ¶ç‹€æ…‹æœå‹™"
            UCUS[User State Service<br/>ç”¨æˆ¶ç‹€æ…‹æœå‹™]
            UCAS[Auth State Service<br/>èªè­‰ç‹€æ…‹æœå‹™]
            UCPS[Profile State Service<br/>æª”æ¡ˆç‹€æ…‹æœå‹™]
        end
    end
    
    subgraph "User Application Layer (ç”¨æˆ¶æ‡‰ç”¨å±¤)"
        subgraph "èªè­‰æœå‹™"
            UCAAS[Authentication Application Service<br/>èªè­‰æ‡‰ç”¨æœå‹™]
            UCLC[LoginUser Command<br/>ç”¨æˆ¶ç™»å…¥å‘½ä»¤]
            UCRC[RegisterUser Command<br/>ç”¨æˆ¶è¨»å†Šå‘½ä»¤]
            UCFC[ForgotPassword Command<br/>å¿˜è¨˜å¯†ç¢¼å‘½ä»¤]
            UCVC[VerifyEmail Command<br/>éƒµç®±é©—è­‰å‘½ä»¤]
            UCLH[Login Command Handler<br/>ç™»å…¥å‘½ä»¤è™•ç†å™¨]
        end
        
        subgraph "å€‹äººæª”æ¡ˆæœå‹™"
            UCPAS[Profile Application Service<br/>æª”æ¡ˆæ‡‰ç”¨æœå‹™]
            UCPC[CreateProfile Command<br/>å»ºç«‹æª”æ¡ˆå‘½ä»¤]
            UCPU[UpdateProfile Command<br/>æ›´æ–°æª”æ¡ˆå‘½ä»¤]
            UCPQ[GetProfile Query<br/>æŸ¥è©¢æª”æ¡ˆæŸ¥è©¢]
            UCPH[Profile Command Handler<br/>æª”æ¡ˆå‘½ä»¤è™•ç†å™¨]
        end
        
        subgraph "è­‰ç…§ç®¡ç†æœå‹™"
            UCCAS[Certificate Application Service<br/>è­‰ç…§æ‡‰ç”¨æœå‹™]
            UCCAC[AddCertificate Command<br/>æ–°å¢è­‰ç…§å‘½ä»¤]
            UCCVC[VerifyCertificate Command<br/>é©—è­‰è­‰ç…§å‘½ä»¤]
            UCCQ[GetCertificates Query<br/>æŸ¥è©¢è­‰ç…§æŸ¥è©¢]
        end
        
        subgraph "ç¤¾äº¤åŠŸèƒ½æœå‹™"
            UCSAS[Social Application Service<br/>ç¤¾äº¤æ‡‰ç”¨æœå‹™]
            UCFUC[FollowUser Command<br/>è¿½è¹¤ç”¨æˆ¶å‘½ä»¤]
            UCUFC[UnfollowUser Command<br/>å–æ¶ˆè¿½è¹¤å‘½ä»¤]
            UCFQ[GetFollowing Query<br/>æŸ¥è©¢è¿½è¹¤æŸ¥è©¢]
        end
        
        subgraph "æˆå°±èˆ‡é€šçŸ¥æœå‹™"
            UCAAS[Achievement Application Service<br/>æˆå°±æ‡‰ç”¨æœå‹™]
            UCNAS[Notification Application Service<br/>é€šçŸ¥æ‡‰ç”¨æœå‹™]
            UCAC[AwardAchievement Command<br/>é ’ç™¼æˆå°±å‘½ä»¤]
            UCNC[CreateNotification Command<br/>å»ºç«‹é€šçŸ¥å‘½ä»¤]
            UCMC[MarkAsRead Command<br/>æ¨™è¨˜å·²è®€å‘½ä»¤]
        end
    end
    
    subgraph "User Domain Layer (ç”¨æˆ¶é ˜åŸŸå±¤)"
        subgraph "ç”¨æˆ¶èšåˆæ ¹"
            UCDA[User Aggregate<br/>ç”¨æˆ¶èšåˆæ ¹]
            UCUE[UserCreated Event<br/>ç”¨æˆ¶å»ºç«‹äº‹ä»¶]
            UCPE[ProfileUpdated Event<br/>æª”æ¡ˆæ›´æ–°äº‹ä»¶]
            UCCE[CertificateAdded Event<br/>è­‰ç…§æ–°å¢äº‹ä»¶]
            UCAE[AchievementAwarded Event<br/>æˆå°±é ’ç™¼äº‹ä»¶]
        end
        
        subgraph "ç”¨æˆ¶å¯¦é«”"
            UCUE[User Entity<br/>ç”¨æˆ¶å¯¦é«”]
            UCPR[Profile Entity<br/>å€‹äººæª”æ¡ˆå¯¦é«”]
            UCCERT[Certificate Entity<br/>è­‰ç…§å¯¦é«”]
            UCACH[Achievement Entity<br/>æˆå°±å¯¦é«”]
            UCNOT[Notification Entity<br/>é€šçŸ¥å¯¦é«”]
            UCSOC[Social Entity<br/>ç¤¾äº¤é—œä¿‚å¯¦é«”]
        end
        
        subgraph "ç”¨æˆ¶å€¼ç‰©ä»¶"
            UCUV[UserInfo Value Object<br/>ç”¨æˆ¶è³‡è¨Šå€¼ç‰©ä»¶]
            UCPV[ProfileInfo Value Object<br/>æª”æ¡ˆè³‡è¨Šå€¼ç‰©ä»¶]
            UCCV[CertificateInfo Value Object<br/>è­‰ç…§è³‡è¨Šå€¼ç‰©ä»¶]
            UCAV[AchievementInfo Value Object<br/>æˆå°±è³‡è¨Šå€¼ç‰©ä»¶]
            UCNV[NotificationInfo Value Object<br/>é€šçŸ¥è³‡è¨Šå€¼ç‰©ä»¶]
            UCSV[SocialInfo Value Object<br/>ç¤¾äº¤è³‡è¨Šå€¼ç‰©ä»¶]
        end
        
        subgraph "ç”¨æˆ¶é ˜åŸŸæœå‹™"
            UCDS[User Domain Service<br/>ç”¨æˆ¶é ˜åŸŸæœå‹™]
            UCPDS[Profile Domain Service<br/>æª”æ¡ˆé ˜åŸŸæœå‹™]
            UCCDS[Certificate Domain Service<br/>è­‰ç…§é ˜åŸŸæœå‹™]
            UCADS[Achievement Domain Service<br/>æˆå°±é ˜åŸŸæœå‹™]
            UCSDS[Social Domain Service<br/>ç¤¾äº¤é ˜åŸŸæœå‹™]
        end
        
        subgraph "ACLæ¬Šé™å¯¦é«”"
            UCACL[User ACL Entity<br/>ç”¨æˆ¶æ¬Šé™å¯¦é«”]
            UCROLE[User Role Entity<br/>ç”¨æˆ¶è§’è‰²å¯¦é«”]
            UCPERM[User Permission Entity<br/>ç”¨æˆ¶æ¬Šé™å¯¦é«”]
        end
    end
    
    subgraph "User Infrastructure Layer (ç”¨æˆ¶åŸºç¤è¨­æ–½å±¤)"
        subgraph "èªè­‰æ•´åˆ"
            UCFAS[Auth Service<br/>èªè­‰æœå‹™]
            UCFAU[Auth Utils<br/>èªè­‰å·¥å…·]
            UCFAI[Auth Interceptor<br/>èªè­‰æ””æˆªå™¨]
        end
        
        subgraph "èªè­‰æœå‹™æ•´åˆ"
            UCDAS[Auth Service<br/>èªè­‰æœå‹™]
            UCDAI[Auth Interceptor<br/>èªè­‰æ””æˆªå™¨]
            UCDAU[Auth Utils<br/>èªè­‰å·¥å…·]
            UCDTS[Token Service<br/>ä»¤ç‰Œæœå‹™]
        end
        
        subgraph "æ¬Šé™æœå‹™æ•´åˆ"
            UCDACL[ACL Service<br/>æ¬Šé™æœå‹™]
            UCDAG[ACL Guard<br/>æ¬Šé™å®ˆè¡›]
            UCDAD[ACL Directive<br/>æ¬Šé™æŒ‡ä»¤]
            UCDAP[ACL Pipe<br/>æ¬Šé™ç®¡é“]
        end
        
        subgraph "è³‡æ–™æŒä¹…åŒ–"
            UCIR[User Repository<br/>ç”¨æˆ¶å„²å­˜åº«]
            UCIPR[Profile Repository<br/>æª”æ¡ˆå„²å­˜åº«]
            UCICR[Certificate Repository<br/>è­‰ç…§å„²å­˜åº«]
            UCIAR[Achievement Repository<br/>æˆå°±å„²å­˜åº«]
            UCINR[Notification Repository<br/>é€šçŸ¥å„²å­˜åº«]
        end
        
        subgraph "äº‹ä»¶è™•ç†"
            UCIEH[User Event Handler<br/>ç”¨æˆ¶äº‹ä»¶è™•ç†å™¨]
            UCIPEH[Profile Event Handler<br/>æª”æ¡ˆäº‹ä»¶è™•ç†å™¨]
            UCICEH[Certificate Event Handler<br/>è­‰ç…§äº‹ä»¶è™•ç†å™¨]
            UCIAEH[Achievement Event Handler<br/>æˆå°±äº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "å¤–éƒ¨æœå‹™"
            UCIWS[External User Service<br/>å¤–éƒ¨ç”¨æˆ¶æœå‹™]
            UCIIS[User Infrastructure Service<br/>ç”¨æˆ¶åŸºç¤è¨­æ–½æœå‹™]
            UCIFS[File Storage Service<br/>æª”æ¡ˆå„²å­˜æœå‹™]
            UCINS[User Notification Service<br/>ç”¨æˆ¶é€šçŸ¥æœå‹™]
            UCIAS[User Audit Service<br/>ç”¨æˆ¶å¯©è¨ˆæœå‹™]
            UCIVS[Certificate Verification Service<br/>è­‰ç…§é©—è­‰æœå‹™]
            UCIES[Email Service<br/>éƒµä»¶æœå‹™]
        end
        
        subgraph "æ•´åˆæœå‹™"
            UCIOS[Organization Integration Service<br/>çµ„ç¹”æ•´åˆæœå‹™]
            UCIPS[Project Integration Service<br/>å°ˆæ¡ˆæ•´åˆæœå‹™]
            UCITS[Team Integration Service<br/>åœ˜éšŠæ•´åˆæœå‹™]
        end
    end
    
    %% æŠ€è¡“æ£§æ•´åˆé€£æ¥ (ç‰¹æ®Šé¡è‰²æ¨™è¨˜)
    %% èªè­‰æœå‹™ é€£æ¥
    UCLA --> UCFAS
    UCRA --> UCFAS
    UCFA --> UCFAS
    UCVA --> UCFAS
    
    %% èªè­‰æ•´åˆ é€£æ¥
    UCFAS --> UCDAS
    UCDAS --> UCAS
    UCDTS --> UCAS
    
    %% æ¬Šé™æœå‹™ é€£æ¥
    UCDAS --> UCDACL
    UCDACL --> UCDAG
    UCDACL --> UCDAD
    UCDACL --> UCDAP
    
    %% å±¤ç´šé–“é€£æ¥ (å¯¦ç·š)
    UCLA --> UCAAS
    UCRA --> UCAAS
    UCPC --> UCPAS
    UCCM --> UCCAS
    UCFL --> UCSAS
    UCAC --> UCAAS
    UCNC --> UCNAS
    
    UCAAS --> UCDA
    UCPAS --> UCPR
    UCCAS --> UCCERT
    UCSAS --> UCSOC
    UCAAS --> UCACH
    UCNAS --> UCNOT
    
    UCDA --> UCIR
    UCPR --> UCIPR
    UCCERT --> UCICR
    UCACH --> UCIAR
    UCNOT --> UCINR
    UCSOC --> UCIR

# 2. ç”¨æˆ¶æ¨¡çµ„ç”¨ä¾‹åœ– âœ…

graph TB
    subgraph "å¤–éƒ¨åƒèˆ‡è€…"
        NewUser[æ–°ç”¨æˆ¶]
        RegisteredUser[å·²è¨»å†Šç”¨æˆ¶]
        AuthUser[å·²èªè­‰ç”¨æˆ¶]
        Admin[ç®¡ç†å“¡]
        VerificationAuth[é©—è­‰æ©Ÿæ§‹]
        ExternalSystem[å¤–éƒ¨ç³»çµ±]
    end
    
    subgraph "ç”¨æˆ¶æ¨¡çµ„åŠŸèƒ½"
        subgraph "èªè­‰ç®¡ç†"
            UC1[ç”¨æˆ¶è¨»å†Š]
            UC2[ç”¨æˆ¶ç™»å…¥]
            UC3[å¿˜è¨˜å¯†ç¢¼]
            UC4[éƒµç®±é©—è­‰]
            UC5[é›™å› å­èªè­‰]
            UC6[ç™»å‡º]
            UC7[Tokenåˆ·æ–°]
        end
        
        subgraph "å€‹äººæª”æ¡ˆç®¡ç†"
            UC8[å»ºç«‹å€‹äººæª”æ¡ˆ]
            UC9[æ›´æ–°å€‹äººè³‡è¨Š]
            UC10[ä¸Šå‚³é ­åƒ]
            UC11[æŸ¥çœ‹å€‹äººæª”æ¡ˆ]
            UC12[éš±ç§è¨­å®š]
            UC13[å¸³æˆ¶è¨­å®š]
        end
        
        subgraph "å°ˆæ¥­è­‰ç…§ç®¡ç†"
            UC14[ä¸Šå‚³è­‰ç…§]
            UC15[è­‰ç…§é©—è­‰]
            UC16[è­‰ç…§æ›´æ–°]
            UC17[è­‰ç…§åˆ°æœŸæé†’]
            UC18[è­‰ç…§å±•ç¤ºè¨­å®š]
            UC19[è­‰ç…§æœå°‹]
        end
        
        subgraph "ç¤¾äº¤åŠŸèƒ½"
            UC20[è¿½è¹¤ç”¨æˆ¶]
            UC21[å–æ¶ˆè¿½è¹¤]
            UC22[æŸ¥çœ‹è¿½è¹¤åˆ—è¡¨]
            UC23[æŸ¥çœ‹ç²‰çµ²åˆ—è¡¨]
            UC24[ç”¨æˆ¶æœå°‹]
            UC25[æ¨è–¦ç”¨æˆ¶]
        end
        
        subgraph "æˆå°±ç³»çµ±"
            UC26[ç²å¾—æˆå°±]
            UC27[æŸ¥çœ‹æˆå°±]
            UC28[æˆå°±åˆ†äº«]
            UC29[æˆå°±æ’è¡Œæ¦œ]
            UC30[æˆå°±çµ±è¨ˆ]
        end
        
        subgraph "é€šçŸ¥ç³»çµ±"
            UC31[æ¥æ”¶é€šçŸ¥]
            UC32[æ¨™è¨˜å·²è®€]
            UC33[é€šçŸ¥è¨­å®š]
            UC34[é€šçŸ¥æ­·å²]
            UC35[æ¨é€åå¥½]
        end
        
        subgraph "æ¬Šé™ç®¡ç†"
            UC36[æ¬Šé™æª¢æŸ¥]
            UC37[è§’è‰²åˆ†é…]
            UC38[æ¬Šé™ç¹¼æ‰¿]
            UC39[æ¬Šé™å¯©è¨ˆ]
            UC40[çµ„ç¹”æ¬Šé™]
        end
    end

# 3. ç”¨æˆ¶èªè­‰å®Œæ•´æµç¨‹åœ– âœ…

sequenceDiagram
    participant User as æ–°ç”¨æˆ¶
    participant UI as Angular UI
    participant FA as AuthService
    participant DA as AuthIntegrationService
    participant ACL as ACLService
    participant US as UserService
    participant UR as UserRepository
    participant ES as EmailService
    participant NS as NotificationService

    User->>UI: å¡«å¯«è¨»å†Šè³‡æ–™
    UI->>FA: createUserWithEmailAndPassword()
    FA->>FA: èªè­‰æœå‹™å»ºç«‹ç”¨æˆ¶å¸³æˆ¶
    FA-->>UI: è¿”å› User
    
    UI->>US: createUserProfile(userInfo)
    US->>UR: saveUser(userEntity)
    UR-->>US: è¿”å›ç”¨æˆ¶ID
    
    US->>ES: sendVerificationEmail(email)
    ES-->>US: ç™¼é€é©—è­‰éƒµä»¶
    
    US->>NS: createWelcomeNotification(userId)
    NS-->>US: å»ºç«‹æ­¡è¿é€šçŸ¥
    
    alt éƒµç®±é©—è­‰å®Œæˆ
        User->>UI: é»æ“Šé©—è­‰é€£çµ
        UI->>FA: verifyEmail()
        FA-->>UI: é©—è­‰æˆåŠŸ
        UI->>DA: login(credentials)
        DA->>FA: signInWithEmailAndPassword()
        FA-->>DA: è¿”å› ID Token
        DA->>DA: å„²å­˜ token åˆ°æœ¬åœ°å„²å­˜
        DA->>ACL: setUser(userProfile)
        ACL->>ACL: è¨­å®šåŸºæœ¬ç”¨æˆ¶æ¬Šé™
        ACL-->>DA: æ¬Šé™è¨­å®šå®Œæˆ
        DA-->>UI: ç™»å…¥æˆåŠŸ
        UI->>User: è·³è½‰åˆ°å€‹äººæª”æ¡ˆè¨­å®šé é¢
    else éƒµç®±æœªé©—è­‰
        UI->>User: é¡¯ç¤ºéƒµç®±é©—è­‰æé†’
    end

# 4. ç”¨æˆ¶æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§ âœ…

åŒ…å«ï¼š
èªè­‰ç®¡ç†
è¨»å†Šã€ç™»å…¥ã€ç™»å‡ºã€å¿˜è¨˜å¯†ç¢¼
éƒµç®±é©—è­‰ã€é›™å› å­èªè­‰
Tokenç®¡ç†ã€è‡ªå‹•åˆ·æ–°
ç¤¾äº¤ç™»å…¥æ•´åˆ
å€‹äººæª”æ¡ˆç®¡ç†
åŸºæœ¬è³‡è¨Šã€è¯çµ¡è³‡è¨Šã€å°ˆæ¥­èƒŒæ™¯
é ­åƒä¸Šå‚³ã€éš±ç§è¨­å®š
å€‹äººè¨­å®šã€åå¥½é…ç½®
æª”æ¡ˆå®Œæ•´åº¦è¿½è¹¤
å°ˆæ¥­è­‰ç…§ç®¡ç†
è­‰ç…§ä¸Šå‚³ã€åˆ†é¡ç®¡ç†
è‡ªå‹•é©—è­‰ã€æ‰‹å‹•å¯©æ ¸
åˆ°æœŸæé†’ã€æ›´æ–°è¿½è¹¤
è­‰ç…§å±•ç¤ºã€æœå°‹åŠŸèƒ½
ç¤¾äº¤åŠŸèƒ½
è¿½è¹¤é—œä¿‚ã€ç”¨æˆ¶ç™¼ç¾
æ¨è–¦ç³»çµ±ã€æœå°‹åŠŸèƒ½
ç¤¾äº¤çµ±è¨ˆã€äº’å‹•è¨˜éŒ„
éš±ç§æ§åˆ¶ã€å°é–åŠŸèƒ½
æˆå°±ç³»çµ±
è‡ªå‹•æˆå°±åµæ¸¬ã€æ‰‹å‹•é ’ç™¼
æˆå°±åˆ†é¡ã€ç­‰ç´šç³»çµ±
æ’è¡Œæ¦œã€çµ±è¨ˆåˆ†æ
åˆ†äº«åŠŸèƒ½ã€å±•ç¤ºè¨­å®š
é€šçŸ¥ç³»çµ±
å³æ™‚æ¨é€ã€éƒµä»¶é€šçŸ¥
åˆ†é¡ç®¡ç†ã€å„ªå…ˆç´šè¨­å®š
æ­·å²è¨˜éŒ„ã€å·²è®€ç‹€æ…‹
åå¥½è¨­å®šã€é »ç‡æ§åˆ¶
æ¬Šé™èˆ‡å®‰å…¨
è§’è‰²å‹æ¬Šé™æ§åˆ¶ (RBAC)
çµ„ç¹”å±¤ç´šæ¬Šé™
æ“ä½œå¯©è¨ˆã€å®‰å…¨æ—¥èªŒ
éš±ç§ä¿è­·ã€è³‡æ–™åŠ å¯†

# 5. çµ„ç¹”æ¨¡çµ„æ¶æ§‹åœ– âœ…

graph TB
    subgraph "Organization Presentation Layer"
        OCPC[Organization Card Component]
        OCLP[Organization List Page]
        OCPS[Organization State Service]
        OCPF[Organization Form Component]
        OCLS[Organization List Component]
        OCTM[Team Management Component]
        OCMB[Member Management Component]
        OCPR[Project Assignment Component]
    end
    
    subgraph "Organization Application Layer"
        OCAS[Organization Application Service]
        OCAC[CreateOrganization Command]
        OCAQ[GetOrganization Query]
        OCAH[Organization Command Handler]
        OCMS[Member Management Service]
        OCTS[Team Management Service]
        OCPAS[Project Assignment Service]
        OCNOT[Notification Service]
    end
    
    subgraph "Organization Domain Layer"
        OCDA[Organization Aggregate]
        OCDE[OrganizationCreated Event]
        OCDV[OrganizationProfile Value Object]
        OCDS[Organization Domain Service]
        OCME[Member Entity]
        OCTE[Team Entity]
        OCPAE[Project Assignment Entity]
        OCMV[MemberInfo Value Object]
        OCTV[TeamInfo Value Object]
        OCPAV[ProjectAssignment Value Object]
    end
    
    subgraph "Organization Infrastructure Layer"
        OCIR[Organization Repository]
        OCIE[Organization Event Handler]
        OCIW[External Organization Service]
        OCIS[Organization Infrastructure Service]
        OCIF[File Storage Service]
        OCIN[Notification Service]
        OCIA[Audit Service]
    end


# 6. çµ„ç¹”æ¨¡çµ„ç”¨ä¾‹åœ– âœ…

graph TB
    subgraph "å¤–éƒ¨åƒèˆ‡è€…"
        Admin[çµ„ç¹”ç®¡ç†å“¡]
        Manager[å°ˆæ¡ˆç¶“ç†]
        Member[çµ„ç¹”æˆå“¡]
        ExternalUser[å¤–éƒ¨ç”¨æˆ¶]
        System[å¤–éƒ¨ç³»çµ±]
    end
    
    subgraph "çµ„ç¹”æ¨¡çµ„åŠŸèƒ½"
        subgraph "çµ„ç¹”ç®¡ç†"
            UC1[å»ºç«‹çµ„ç¹”]
            UC2[æ›´æ–°çµ„ç¹”è³‡æ–™]
            UC3[æŸ¥çœ‹çµ„ç¹”è³‡æ–™]
            UC4[åˆªé™¤çµ„ç¹”]
            UC5[çµ„ç¹”è¨­å®š]
            UC6[çµ„ç¹”ç‹€æ…‹ç®¡ç†]
        end
        
        subgraph "æˆå“¡ç®¡ç†"
            UC7[é‚€è«‹æˆå“¡]
            UC8[æ¥å—é‚€è«‹]
            UC9[æ‹’çµ•é‚€è«‹]
            UC10[æŸ¥çœ‹æˆå“¡åˆ—è¡¨]
            UC11[æ›´æ–°æˆå“¡è³‡æ–™]
            UC12[ç§»é™¤æˆå“¡]
            UC13[æˆå“¡ç‹€æ…‹ç®¡ç†]
        end
        
        subgraph "è§’è‰²ç®¡ç†"
            UC14[å®šç¾©è§’è‰²]
            UC15[åˆ†é…æ¬Šé™]
            UC16[è§’è‰²ç¹¼æ‰¿]
            UC17[æ¬Šé™å¯©è¨ˆ]
        end
        
        subgraph "åœ˜éšŠç®¡ç†"
            UC18[å»ºç«‹åœ˜éšŠ]
            UC19[åœ˜éšŠè¨­å®š]
            UC20[æˆå“¡åˆ†é…]
            UC21[åœ˜éšŠå”ä½œ]
            UC22[åœ˜éšŠå ±å‘Š]
        end
    end

# 7. çµ„ç¹”æ¨¡çµ„äº‹ä»¶æµåœ– âœ…

sequenceDiagram
    participant User as çµ„ç¹”å‰µå»ºè€…
    participant UI as ç”¨æˆ¶ä»‹é¢
    participant App as æ‡‰ç”¨æœå‹™
    participant Domain as é ˜åŸŸæœå‹™
    participant Repo as è³‡æ–™åº«
    participant Event as äº‹ä»¶è™•ç†å™¨
    participant License as åŸ·ç…§é©—è­‰æœå‹™
    participant Notification as é€šçŸ¥æœå‹™
    participant Audit as å¯©è¨ˆæœå‹™

    User->>UI: å¡«å¯«çµ„ç¹”è³‡æ–™
    UI->>App: CreateOrganizationCommand
    App->>Domain: é©—è­‰çµ„ç¹”è³‡æ–™
    Domain->>License: é©—è­‰ç‡Ÿæ¥­åŸ·ç…§
    License-->>Domain: è¿”å›é©—è­‰çµæœ
    
    alt åŸ·ç…§é©—è­‰é€šé
        Domain->>Repo: å„²å­˜çµ„ç¹”è³‡æ–™
        Repo-->>Domain: è¿”å›çµ„ç¹”ID
        Domain->>Event: ç™¼å¸ƒ OrganizationCreated äº‹ä»¶
        Event->>Notification: ç™¼é€å»ºç«‹æˆåŠŸé€šçŸ¥
        Event->>Audit: è¨˜éŒ„çµ„ç¹”å»ºç«‹æ—¥èªŒ
        Event->>App: åˆå§‹åŒ–çµ„ç¹”è¨­å®š
        App->>Domain: è¨­å®šé è¨­è§’è‰²å’Œæ¬Šé™
        Domain->>Repo: å„²å­˜è§’è‰²è¨­å®š
        App->>UI: è¿”å›å»ºç«‹çµæœ
        UI->>User: é¡¯ç¤ºå»ºç«‹æˆåŠŸï¼Œè·³è½‰çµ„ç¹”é é¢
    else åŸ·ç…§é©—è­‰å¤±æ•—
        License-->>Domain: è¿”å›é©—è­‰å¤±æ•—
        Domain-->>App: è¿”å›é©—è­‰éŒ¯èª¤
        App-->>UI: è¿”å›éŒ¯èª¤è¨Šæ¯
        UI-->>User: é¡¯ç¤ºåŸ·ç…§é©—è­‰å¤±æ•—
    end

# 8. å»ºç«‹çµ„ç¹”è©³ç´°æµç¨‹åœ– âœ…

sequenceDiagram
    participant U as User (å‰ç«¯)
    participant C as CreateOrgController
    participant S as CreateOrgService
    participant VR as ValidationService
    participant OR as OrgRepository
    participant MS as MembershipService
    participant FS as FileService
    participant SS as SetupService
    participant VS as VerificationService
    participant EB as EventBus

    U->>C: POST /organizations
    C->>C: é©—è­‰ç”¨æˆ¶éƒµç®±å·²ç¢ºèª
    C->>C: è½‰æ› DTO ç‚º Command
    C->>S: createOrganization(command, files)
    
    S->>OR: findByRegistrationNumber(regNumber)
    OR-->>S: è¿”å›æŸ¥è©¢çµæœ
    
    alt çµ±ç·¨å·²å­˜åœ¨
        S-->>C: æ‹‹å‡º ApplicationError
        C-->>U: 409 Conflict
    end
    
    S->>MS: getUserOwnedOrganizations(userId)
    MS-->>S: è¿”å›ç”¨æˆ¶æ“æœ‰çš„çµ„ç¹”
    
    alt è¶…éçµ„ç¹”æ•¸é‡é™åˆ¶
        S-->>C: æ‹‹å‡º ApplicationError
        C-->>U: 400 Bad Request
    end
    
    S->>S: processLicenseFiles(licenses, files)
    S->>FS: uploadFile(file, options)
    FS-->>S: è¿”å›æ–‡ä»¶ URL
    
    S->>S: Organization.create(command)
    S->>OR: save(organization)
    OR-->>S: è¿”å›ä¿å­˜çš„çµ„ç¹”
    
    S->>MS: createOwnerMembership(orgId, userId)
    MS-->>S: å®Œæˆ
    
    S->>SS: setupOrganization(organization)
    S->>VS: initiateVerification(orgId)
    S->>EB: publish(OrganizationCreatedEvent)
    
    S-->>C: è¿”å›çµ„ç¹”è³‡è¨Š
    C-->>U: 201 Created

# 9. ç”¨æˆ¶èªè­‰èˆ‡æ¬Šé™ç®¡ç†æµç¨‹åœ– âœ…

sequenceDiagram
    participant User as ç”¨æˆ¶
    participant UI as Angular UI
    participant FA as AuthService
    participant AS as AuthService
    participant ACL as ACLService
    participant Router as Angular Router
    participant Component as Angular Component

    User->>UI: è¼¸å…¥ç™»å…¥è³‡æ–™
    UI->>FA: loginWithEmail(credentials)
    FA->>FA: èªè­‰æœå‹™èªè­‰
    FA-->>FA: å–å¾— ID Token
    FA-->>AS: è¿”å› UserProfile + ID Token
    
    AS->>AS: å„²å­˜ token åˆ°æœ¬åœ°å„²å­˜
    AS->>AS: ç®¡ç†èªè­‰ç‹€æ…‹
    AS-->>AS: æä¾›ç”¨æˆ¶è³‡è¨Š
    
    AS->>ACL: setUser(userProfile)
    ACL->>ACL: æ ¹æ“šç”¨æˆ¶è§’è‰²è¨­å®šæ¬Šé™
    ACL->>ACL: æä¾›æ¬Šé™æª¢æŸ¥æ–¹æ³•
    ACL-->>AS: æ¬Šé™è¨­å®šå®Œæˆ
    
    AS-->>UI: ç™»å…¥æˆåŠŸ
    UI->>Router: å°èˆªåˆ°å—ä¿è­·è·¯ç”±
    
    Router->>ACL: ACLGuard.canActivate()
    ACL-->>Router: è·¯ç”±å®ˆè¡›è‡ªå‹•ä¿è­·
    Router-->>Component: è·¯ç”±è‡ªå‹•å—ä¿è­·
    
    Component->>Component: æ¨¡æ¿æ¢ä»¶æ¸²æŸ“ (*appAcl)
    Component->>ACL: å…ƒä»¶æ¬Šé™æª¢æŸ¥
    ACL-->>Component: æ¬Šé™æª¢æŸ¥çµæœ

# 10. çµ„ç¹”åˆ‡æ›èˆ‡æ¬Šé™ç®¡ç†æµç¨‹åœ– âœ…

sequenceDiagram
    participant User as å·²èªè­‰ç”¨æˆ¶
    participant UI as Angular UI
    participant OM as Organization Module
    participant OS as Organization Service
    participant ACL as ACLService
    participant Router as Angular Router
    participant Component as Organization Component

    User->>UI: é¸æ“‡/åˆ‡æ›çµ„ç¹”
    UI->>OM: getOrganizations()
    OM->>OS: fetchUserOrganizations()
    OS-->>OM: è¿”å›çµ„ç¹”åˆ—è¡¨
    
    User->>UI: é¸æ“‡ç‰¹å®šçµ„ç¹”
    UI->>OM: setCurrentOrganization(orgId)
    OM->>ACL: updateOrganizationContext(orgId)
    ACL->>ACL: æ›´æ–°çµ„ç¹”å±¤ç´šæ¬Šé™
    ACL-->>OM: æ¬Šé™æ›´æ–°å®Œæˆ
    
    OM-->>UI: çµ„ç¹”åˆ‡æ›æˆåŠŸ
    UI->>Router: å°èˆªåˆ°çµ„ç¹”ç›¸é—œè·¯ç”±
    
    Router->>ACL: ACLGuard.canActivate()
    ACL->>ACL: æª¢æŸ¥çµ„ç¹”å±¤ç´šæ¬Šé™
    ACL-->>Router: çµ„ç¹”æ¬Šé™é©—è­‰
    Router-->>Component: è·¯ç”±å—çµ„ç¹”æ¬Šé™ä¿è­·
    
    Component->>Component: çµ„ç¹”ç›¸é—œæ¨¡æ¿æ¸²æŸ“
    Component->>ACL: æª¢æŸ¥çµ„ç¹”æ“ä½œæ¬Šé™
    ACL-->>Component: çµ„ç¹”æ¬Šé™æª¢æŸ¥çµæœ

# 11. çµ„ç¹”æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§ âœ…

åŒ…å«ï¼š
çµ„ç¹”ç®¡ç†: å»ºç«‹ã€æ›´æ–°ã€æŸ¥çœ‹ã€åˆªé™¤ã€è¨­å®šã€ç‹€æ…‹ç®¡ç†
æˆå“¡ç®¡ç†: é‚€è«‹ã€æ¥å—ã€æ‹’çµ•ã€æŸ¥çœ‹ã€æ›´æ–°ã€ç§»é™¤ã€ç‹€æ…‹ç®¡ç†
è§’è‰²ç®¡ç†: å®šç¾©ã€åˆ†é…ã€ç¹¼æ‰¿ã€å¯©è¨ˆ
åœ˜éšŠç®¡ç†: å»ºç«‹ã€è¨­å®šã€åˆ†é…ã€å”ä½œã€å ±å‘Š
å°ˆæ¡ˆåˆ†é…: æŒ‡æ´¾ã€æ¬Šé™ã€è³‡æºã€æ™‚ç¨‹ã€å”ä½œã€å ±å‘Š
é€šçŸ¥æºé€š: å³æ™‚é€šçŸ¥ã€åå¥½ã€æ­·å²ã€æ¨¡æ¿ã€å…§éƒ¨è¨Šæ¯ã€è¨è«–å€
å¯©è¨ˆåˆè¦: æ“ä½œè¨˜éŒ„ã€è®Šæ›´è¿½è¹¤ã€æ¬Šé™å¯©è¨ˆã€åˆè¦ç®¡ç†
è³‡æ–™ç®¡ç†: å‚™ä»½ã€æ¢å¾©ã€åŒæ­¥ã€æ¸…ç†ã€å®‰å…¨ã€åŠ å¯†

# 12. å°ˆæ¡ˆæ¶æ§‹åœ– âœ…
graph TB
    subgraph "Project Presentation Layer (å°ˆæ¡ˆå±•ç¤ºå±¤)"
        subgraph "å°ˆæ¡ˆç®¡ç†å…ƒä»¶"
            PCPC[Project Card Component<br/>å°ˆæ¡ˆå¡ç‰‡å…ƒä»¶]
            PCLP[Project List Page<br/>å°ˆæ¡ˆåˆ—è¡¨é é¢]
            PCPS[Project State Service<br/>å°ˆæ¡ˆç‹€æ…‹æœå‹™]
            PCPF[Project Form Component<br/>å°ˆæ¡ˆè¡¨å–®å…ƒä»¶]
            PCLS[Project List Component<br/>å°ˆæ¡ˆåˆ—è¡¨å…ƒä»¶]
            PCDP[Project Detail Page<br/>å°ˆæ¡ˆè©³æƒ…é é¢]
        end
        
        subgraph "ä»»å‹™ç®¡ç†å…ƒä»¶"
            PCTM[Task Management Component<br/>ä»»å‹™ç®¡ç†å…ƒä»¶]
            PCTL[Task List Component<br/>ä»»å‹™åˆ—è¡¨å…ƒä»¶]
            PCTF[Task Form Component<br/>ä»»å‹™è¡¨å–®å…ƒä»¶]
            PCTD[Task Detail Component<br/>ä»»å‹™è©³æƒ…å…ƒä»¶]
        end
        
        subgraph "æ–‡ä»¶ç®¡ç†å…ƒä»¶"
            PCDM[Document Management Component<br/>æ–‡ä»¶ç®¡ç†å…ƒä»¶]
            PCDL[Document List Component<br/>æ–‡ä»¶åˆ—è¡¨å…ƒä»¶]
            PCDU[Document Upload Component<br/>æ–‡ä»¶ä¸Šå‚³å…ƒä»¶]
            PCDV[Document Viewer Component<br/>æ–‡ä»¶æª¢è¦–å…ƒä»¶]
        end
        
        subgraph "æˆæœ¬æ§åˆ¶å…ƒä»¶"
            PCCB[Cost Budget Component<br/>é ç®—å…ƒä»¶]
            PCCAC[Cost Actual Component<br/>å¯¦éš›æˆæœ¬å…ƒä»¶]
            PCCF[Cost Forecast Component<br/>æˆæœ¬é æ¸¬å…ƒä»¶]
            PCCV[Cost Variance Component<br/>æˆæœ¬å·®ç•°å…ƒä»¶]
            PCCBD[Cost Breakdown Component<br/>æˆæœ¬åˆ†è§£å…ƒä»¶]
        end
        
        subgraph "å ±å‘Šèˆ‡åˆ†æå…ƒä»¶"
            PCDR[Daily Report Component<br/>æ—¥å ±å…ƒä»¶]
            PCIR[Inspection Report Component<br/>æŸ¥é©—å ±å‘Šå…ƒä»¶]
            PCAR[Analytics Report Component<br/>åˆ†æå ±å‘Šå…ƒä»¶]
            PCGR[Gantt Chart Component<br/>ç”˜ç‰¹åœ–å…ƒä»¶]
        end
    end
    
    subgraph "Project Application Layer (å°ˆæ¡ˆæ‡‰ç”¨å±¤)"
        subgraph "å°ˆæ¡ˆæ ¸å¿ƒæœå‹™"
            PCAS[Project Application Service<br/>å°ˆæ¡ˆæ‡‰ç”¨æœå‹™]
            PCAC[CreateProject Command<br/>å»ºç«‹å°ˆæ¡ˆå‘½ä»¤]
            PCAQ[GetProject Query<br/>æŸ¥è©¢å°ˆæ¡ˆæŸ¥è©¢]
            PCAH[Project Command Handler<br/>å°ˆæ¡ˆå‘½ä»¤è™•ç†å™¨]
        end
        
        subgraph "ä»»å‹™ç®¡ç†æœå‹™"
            PCTS[Task Management Service<br/>ä»»å‹™ç®¡ç†æœå‹™]
            PCTC[CreateTask Command<br/>å»ºç«‹ä»»å‹™å‘½ä»¤]
            PCTU[UpdateTask Command<br/>æ›´æ–°ä»»å‹™å‘½ä»¤]
        end
        
        subgraph "æ–‡ä»¶ç®¡ç†æœå‹™"
            PCDS[Document Management Service<br/>æ–‡ä»¶ç®¡ç†æœå‹™]
            PCDC[CreateDocument Command<br/>å»ºç«‹æ–‡ä»¶å‘½ä»¤]
        end
        
        subgraph "æˆæœ¬æ§åˆ¶æœå‹™"
            PCCS[Cost Control Service<br/>æˆæœ¬æ§åˆ¶æœå‹™]
            PCCBC[CreateBudget Command<br/>å»ºç«‹é ç®—å‘½ä»¤]
            PCCUC[UpdateCost Command<br/>æ›´æ–°æˆæœ¬å‘½ä»¤]
        end
        
        subgraph "å ±å‘Šæœå‹™"
            PCRS[Report Service<br/>å ±å‘Šæœå‹™]
            PCRDC[CreateDailyReport Command<br/>å»ºç«‹æ—¥å ±å‘½ä»¤]
            PCRIC[CreateInspectionReport Command<br/>å»ºç«‹æŸ¥é©—å ±å‘Šå‘½ä»¤]
            PCRAC[CreateAnalyticsReport Command<br/>å»ºç«‹åˆ†æå ±å‘Šå‘½ä»¤]
        end
        
        subgraph "ç”˜ç‰¹åœ–æœå‹™"
            PCGS[Gantt Chart Service<br/>ç”˜ç‰¹åœ–æœå‹™]
            PCGDC[GenerateGanttData Command<br/>ç”Ÿæˆç”˜ç‰¹åœ–è³‡æ–™å‘½ä»¤]
            PCGQC[QueryGanttData Command<br/>æŸ¥è©¢ç”˜ç‰¹åœ–è³‡æ–™å‘½ä»¤]
        end
    end
    
    subgraph "Project Domain Layer (å°ˆæ¡ˆé ˜åŸŸå±¤)"
        subgraph "å°ˆæ¡ˆèšåˆæ ¹"
            PCDA[Project Aggregate<br/>å°ˆæ¡ˆèšåˆæ ¹]
            PCDE[ProjectCreated Event<br/>å°ˆæ¡ˆå»ºç«‹äº‹ä»¶]
        end
        
        subgraph "å°ˆæ¡ˆå¯¦é«”"
            PCPE[Project Entity<br/>å°ˆæ¡ˆå¯¦é«”]
            PCME[Milestone Entity<br/>é‡Œç¨‹ç¢‘å¯¦é«”]
            PCTE[Task Entity<br/>ä»»å‹™å¯¦é«”]
            PCDE[Document Entity<br/>æ–‡ä»¶å¯¦é«”]
            PCCE[Cost Entity<br/>æˆæœ¬å¯¦é«”]
            PCRE[Report Entity<br/>å ±å‘Šå¯¦é«”]
        end
        
        subgraph "å°ˆæ¡ˆå€¼ç‰©ä»¶"
            PCPV[ProjectInfo Value Object<br/>å°ˆæ¡ˆè³‡è¨Šå€¼ç‰©ä»¶]
            PCMV[MilestoneInfo Value Object<br/>é‡Œç¨‹ç¢‘è³‡è¨Šå€¼ç‰©ä»¶]
            PCTV[TaskInfo Value Object<br/>ä»»å‹™è³‡è¨Šå€¼ç‰©ä»¶]
            PCDV[DocumentInfo Value Object<br/>æ–‡ä»¶è³‡è¨Šå€¼ç‰©ä»¶]
            PCCV[CostInfo Value Object<br/>æˆæœ¬è³‡è¨Šå€¼ç‰©ä»¶]
            PCRV[ReportInfo Value Object<br/>å ±å‘Šè³‡è¨Šå€¼ç‰©ä»¶]
        end
        
        subgraph "å°ˆæ¡ˆé ˜åŸŸæœå‹™"
            PCDS[Project Domain Service<br/>å°ˆæ¡ˆé ˜åŸŸæœå‹™]
            PCMDS[Milestone Domain Service<br/>é‡Œç¨‹ç¢‘é ˜åŸŸæœå‹™]
            PCTDS[Task Domain Service<br/>ä»»å‹™é ˜åŸŸæœå‹™]
            PCCDS[Cost Domain Service<br/>æˆæœ¬é ˜åŸŸæœå‹™]
        end
    end
    
    subgraph "Project Infrastructure Layer (å°ˆæ¡ˆåŸºç¤è¨­æ–½å±¤)"
        subgraph "è³‡æ–™æŒä¹…åŒ–"
            PCIR[Project Repository<br/>å°ˆæ¡ˆå„²å­˜åº«]
            PCITR[Task Repository<br/>ä»»å‹™å„²å­˜åº«]
            PCIDR[Document Repository<br/>æ–‡ä»¶å„²å­˜åº«]
            PCICR[Cost Repository<br/>æˆæœ¬å„²å­˜åº«]
        end
        
        subgraph "äº‹ä»¶è™•ç†"
            PCIEH[Project Event Handler<br/>å°ˆæ¡ˆäº‹ä»¶è™•ç†å™¨]
            PCITEH[Task Event Handler<br/>ä»»å‹™äº‹ä»¶è™•ç†å™¨]
            PCIDEH[Document Event Handler<br/>æ–‡ä»¶äº‹ä»¶è™•ç†å™¨]
            PCICEH[Cost Event Handler<br/>æˆæœ¬äº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "å¤–éƒ¨æœå‹™"
            PCIWS[External Project Service<br/>å¤–éƒ¨å°ˆæ¡ˆæœå‹™]
            PCIIS[Project Infrastructure Service<br/>å°ˆæ¡ˆåŸºç¤è¨­æ–½æœå‹™]
            PCIFS[File Storage Service<br/>æª”æ¡ˆå„²å­˜æœå‹™]
            PCINS[Project Notification Service<br/>å°ˆæ¡ˆé€šçŸ¥æœå‹™]
            PCIA[Project Audit Service<br/>å°ˆæ¡ˆå¯©è¨ˆæœå‹™]
        end
        
        subgraph "æ•´åˆæœå‹™"
            PCIOS[Organization Integration Service<br/>çµ„ç¹”æ•´åˆæœå‹™]
            PCIUS[User Integration Service<br/>ç”¨æˆ¶æ•´åˆæœå‹™]
            PCITS[Team Integration Service<br/>åœ˜éšŠæ•´åˆæœå‹™]
        end
    end
    
    %% å±¤ç´šé–“é€£æ¥ (å¯¦ç·š - Presentation â†’ Application)
    PCPC --> PCAS
    PCLP --> PCAS
    PCPF --> PCAS
    PCLS --> PCAS
    PCDP --> PCAS
    
    PCTM --> PCTS
    PCTL --> PCTS
    PCTF --> PCTS
    PCTD --> PCTS
    
    PCDM --> PCDS
    PCDL --> PCDS
    PCDU --> PCDS
    PCDV --> PCDS
    
    PCCB --> PCCS
    PCCAC --> PCCS
    PCCF --> PCCS
    PCCV --> PCCS
    PCCBD --> PCCS
    
    PCDR --> PCRS
    PCIR --> PCRS
    PCAR --> PCRS
    PCGR --> PCGS
    
    %% å±¤ç´šé–“é€£æ¥ (å¯¦ç·š - Application â†’ Domain)
    PCAS --> PCDA
    PCAS --> PCPE
    
    PCTS --> PCTE
    PCTS --> PCME
    
    PCDS --> PCDE
    PCDS --> PCDV
    
    PCCS --> PCCE
    PCCS --> PCCV
    
    PCRS --> PCRE
    PCRS --> PCRV
    
    PCGS --> PCTE
    PCGS --> PCME
    PCGS --> PCMV
    
    %% å±¤ç´šé–“é€£æ¥ (å¯¦ç·š - Domain â†’ Infrastructure)
    PCDA --> PCIR
    PCPE --> PCIR
    
    PCTE --> PCITR
    PCME --> PCITR
    
    PCDE --> PCIDR
    
    PCCE --> PCICR
    
    PCRE --> PCIR
    
    %% é ˜åŸŸæœå‹™é€£æ¥
    PCDS --> PCPE
    PCMDS --> PCME
    PCTDS --> PCTE
    PCCDS --> PCCE
    
    %% äº‹ä»¶è™•ç†é€£æ¥
    PCIR --> PCIEH
    PCITR --> PCITEH
    PCIDR --> PCIDEH
    PCICR --> PCICEH
    
    %% æ•¸æ“šæµå‘é€£æ¥ (è™›ç·š - è·¨å±¤æ•¸æ“šèšåˆ)
    %% åˆ†æå ±å‘Šçš„æ•¸æ“šä¾†æº
    PCAR -.-> PCTS
    PCAR -.-> PCCS
    PCAR -.-> PCDS
    PCAR -.-> PCIOS
    PCAR -.-> PCIUS
    PCAR -.-> PCITS
    
    %% ç”˜ç‰¹åœ–çš„æ•¸æ“šä¾†æº
    PCGR -.-> PCTS
    PCGR -.-> PCME
    PCGR -.-> PCIOS
    PCGR -.-> PCIUS
    PCGR -.-> PCITS
    
    %% æ—¥å ±çš„æ•¸æ“šä¾†æº
    PCDR -.-> PCTS
    PCDR -.-> PCCS
    PCDR -.-> PCIOS
    PCDR -.-> PCIUS
    
    %% æŸ¥é©—å ±å‘Šçš„æ•¸æ“šä¾†æº
    PCIR -.-> PCTS
    PCIR -.-> PCDS
    PCIR -.-> PCIOS
    PCIR -.-> PCIUS
    
    %% æ•´åˆæœå‹™é€£æ¥ (è™›ç·š - è·¨æ¨¡çµ„æ•´åˆ)
    PCIOS -.-> PCAS
    PCIUS -.-> PCAS
    PCITS -.-> PCTS
    
    PCIOS -.-> PCIEH
    PCIUS -.-> PCIEH
    PCITS -.-> PCITEH

# 13. ç¤¾äº¤æ¨¡çµ„æ¶æ§‹åœ– âœ…

graph TB
    subgraph "Social Presentation Layer (ç¤¾äº¤å±•ç¤ºå±¤)"
        subgraph "è¿½è¹¤åŠŸèƒ½å…ƒä»¶"
            SCFL[Following List Component<br/>è¿½è¹¤åˆ—è¡¨å…ƒä»¶]
            SCFR[Followers List Component<br/>ç²‰çµ²åˆ—è¡¨å…ƒä»¶]
            SCFB[Follow Button Component<br/>è¿½è¹¤æŒ‰éˆ•å…ƒä»¶]
            SCFS[Follow Status Component<br/>è¿½è¹¤ç‹€æ…‹å…ƒä»¶]
        end
        
        subgraph "ç”¨æˆ¶ç™¼ç¾å…ƒä»¶"
            SCUD[User Discovery Component<br/>ç”¨æˆ¶ç™¼ç¾å…ƒä»¶]
            SCUR[User Recommendation Component<br/>ç”¨æˆ¶æ¨è–¦å…ƒä»¶]
            SCUS[User Search Component<br/>ç”¨æˆ¶æœå°‹å…ƒä»¶]
            SCUP[User Profile Card Component<br/>ç”¨æˆ¶æª”æ¡ˆå¡ç‰‡å…ƒä»¶]
        end
        
        subgraph "ç¤¾äº¤çµ±è¨ˆå…ƒä»¶"
            SCST[Social Stats Component<br/>ç¤¾äº¤çµ±è¨ˆå…ƒä»¶]
            SCSC[Social Chart Component<br/>ç¤¾äº¤åœ–è¡¨å…ƒä»¶]
            SCSL[Social Leaderboard Component<br/>ç¤¾äº¤æ’è¡Œæ¦œå…ƒä»¶]
        end
        
        subgraph "äº’å‹•åŠŸèƒ½å…ƒä»¶"
            SCIC[Interaction Component<br/>äº’å‹•å…ƒä»¶]
            SCMC[Mutual Connection Component<br/>å…±åŒé€£çµå…ƒä»¶]
            SCNC[Network Component<br/>ç¶²çµ¡å…ƒä»¶]
        end
        
        subgraph "ç¤¾äº¤ç‹€æ…‹æœå‹™"
            SCSS[Social State Service<br/>ç¤¾äº¤ç‹€æ…‹æœå‹™]
            SCRS[Relationship State Service<br/>é—œä¿‚ç‹€æ…‹æœå‹™]
        end
    end
    
    subgraph "Social Application Layer (ç¤¾äº¤æ‡‰ç”¨å±¤)"
        subgraph "è¿½è¹¤ç®¡ç†æœå‹™"
            SCFAS[Follow Application Service<br/>è¿½è¹¤æ‡‰ç”¨æœå‹™]
            SCFC[FollowUser Command<br/>è¿½è¹¤ç”¨æˆ¶å‘½ä»¤]
            SCUFC[UnfollowUser Command<br/>å–æ¶ˆè¿½è¹¤å‘½ä»¤]
            SCFQ[GetFollowing Query<br/>æŸ¥è©¢è¿½è¹¤æŸ¥è©¢]
            SCRQ[GetFollowers Query<br/>æŸ¥è©¢ç²‰çµ²æŸ¥è©¢]
        end
        
        subgraph "æ¨è–¦ç³»çµ±æœå‹™"
            SCRAS[Recommendation Application Service<br/>æ¨è–¦æ‡‰ç”¨æœå‹™]
            SCRUC[RecommendUsers Command<br/>æ¨è–¦ç”¨æˆ¶å‘½ä»¤]
            SCRQ[GetRecommendations Query<br/>æŸ¥è©¢æ¨è–¦æŸ¥è©¢]
            SCRH[Recommendation Handler<br/>æ¨è–¦è™•ç†å™¨]
        end
        
        subgraph "æœå°‹æœå‹™"
            SCSAS[Search Application Service<br/>æœå°‹æ‡‰ç”¨æœå‹™]
            SCSC[SearchUsers Command<br/>æœå°‹ç”¨æˆ¶å‘½ä»¤]
            SCSQ[SearchUsers Query<br/>æœå°‹ç”¨æˆ¶æŸ¥è©¢]
        end
        
        subgraph "çµ±è¨ˆåˆ†ææœå‹™"
            SCAAS[Analytics Application Service<br/>åˆ†ææ‡‰ç”¨æœå‹™]
            SCGSC[GenerateSocialStats Command<br/>ç”Ÿæˆç¤¾äº¤çµ±è¨ˆå‘½ä»¤]
            SCSSC[SocialStats Query<br/>ç¤¾äº¤çµ±è¨ˆæŸ¥è©¢]
        end
    end
    
    subgraph "Social Domain Layer (ç¤¾äº¤é ˜åŸŸå±¤)"
        subgraph "ç¤¾äº¤èšåˆæ ¹"
            SCSA[SocialRelation Aggregate<br/>ç¤¾äº¤é—œä¿‚èšåˆæ ¹]
            SCFE[UserFollowed Event<br/>ç”¨æˆ¶è¢«è¿½è¹¤äº‹ä»¶]
            SCUE[UserUnfollowed Event<br/>ç”¨æˆ¶å–æ¶ˆè¿½è¹¤äº‹ä»¶]
        end
        
        subgraph "ç¤¾äº¤å¯¦é«”"
            SCRE[Relationship Entity<br/>é—œä¿‚å¯¦é«”]
            SCNE[Network Entity<br/>ç¶²çµ¡å¯¦é«”]
            SCME[Mutual Entity<br/>å…±åŒé—œä¿‚å¯¦é«”]
        end
        
        subgraph "ç¤¾äº¤å€¼ç‰©ä»¶"
            SCRV[RelationshipInfo Value Object<br/>é—œä¿‚è³‡è¨Šå€¼ç‰©ä»¶]
            SCNV[NetworkInfo Value Object<br/>ç¶²çµ¡è³‡è¨Šå€¼ç‰©ä»¶]
            SCSV[SocialStats Value Object<br/>ç¤¾äº¤çµ±è¨ˆå€¼ç‰©ä»¶]
        end
        
        subgraph "ç¤¾äº¤é ˜åŸŸæœå‹™"
            SCRDS[Relationship Domain Service<br/>é—œä¿‚é ˜åŸŸæœå‹™]
            SCNDS[Network Domain Service<br/>ç¶²çµ¡é ˜åŸŸæœå‹™]
            SCRECS[Recommendation Domain Service<br/>æ¨è–¦é ˜åŸŸæœå‹™]
            SCPDS[Privacy Domain Service<br/>éš±ç§é ˜åŸŸæœå‹™]
        end
    end
    
    subgraph "Social Infrastructure Layer (ç¤¾äº¤åŸºç¤è¨­æ–½å±¤)"
        subgraph "è³‡æ–™æŒä¹…åŒ–"
            SCIR[Social Repository<br/>ç¤¾äº¤å„²å­˜åº«]
            SCIRR[Relationship Repository<br/>é—œä¿‚å„²å­˜åº«]
            SCINR[Network Repository<br/>ç¶²çµ¡å„²å­˜åº«]
        end
        
        subgraph "æ¨è–¦å¼•æ“"
            SCRE[Recommendation Engine<br/>æ¨è–¦å¼•æ“]
            SCMLS[ML Service Integration<br/>æ©Ÿå™¨å­¸ç¿’æœå‹™æ•´åˆ]
            SCGA[Graph Analytics Service<br/>åœ–å½¢åˆ†ææœå‹™]
        end
        
        subgraph "äº‹ä»¶è™•ç†"
            SCFEH[Follow Event Handler<br/>è¿½è¹¤äº‹ä»¶è™•ç†å™¨]
            SCREH[Recommendation Event Handler<br/>æ¨è–¦äº‹ä»¶è™•ç†å™¨]
            SCSEH[Social Stats Event Handler<br/>ç¤¾äº¤çµ±è¨ˆäº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "å¤–éƒ¨æœå‹™"
            SCIS[Social Infrastructure Service<br/>ç¤¾äº¤åŸºç¤è¨­æ–½æœå‹™]
            SCCS[Cache Service<br/>å¿«å–æœå‹™]
            SCQS[Queue Service<br/>ä½‡åˆ—æœå‹™]
        end
        
        subgraph "æ•´åˆæœå‹™"
            SCIUS[User Integration Service<br/>ç”¨æˆ¶æ•´åˆæœå‹™]
            SCIOS[Organization Integration Service<br/>çµ„ç¹”æ•´åˆæœå‹™]
            SCIPS[Project Integration Service<br/>å°ˆæ¡ˆæ•´åˆæœå‹™]
        end
    end

# 14. ç¤¾äº¤æ¨¡çµ„ç”¨ä¾‹åœ– âœ…

graph TB
    subgraph "å¤–éƒ¨åƒèˆ‡è€…"
        User[ç”¨æˆ¶]
        Admin[ç®¡ç†å“¡]
        MLSystem[æ©Ÿå™¨å­¸ç¿’ç³»çµ±]
        AnalyticsSystem[åˆ†æç³»çµ±]
    end
    
    subgraph "ç¤¾äº¤æ¨¡çµ„åŠŸèƒ½"
        subgraph "è¿½è¹¤ç®¡ç†"
            UC1[è¿½è¹¤ç”¨æˆ¶]
            UC2[å–æ¶ˆè¿½è¹¤]
            UC3[æŸ¥çœ‹è¿½è¹¤åˆ—è¡¨]
            UC4[æŸ¥çœ‹ç²‰çµ²åˆ—è¡¨]
            UC5[æ‰¹é‡è¿½è¹¤]
            UC6[è¿½è¹¤ç‹€æ…‹ç®¡ç†]
        end
        
        subgraph "ç”¨æˆ¶ç™¼ç¾"
            UC7[æœå°‹ç”¨æˆ¶]
            UC8[æ¨è–¦ç”¨æˆ¶]
            UC9[ç€è¦½ç”¨æˆ¶æª”æ¡ˆ]
            UC10[é™„è¿‘ç”¨æˆ¶]
            UC11[ç†±é–€ç”¨æˆ¶]
            UC12[å°ˆæ¥­ç”¨æˆ¶æ¨è–¦]
        end
        
        subgraph "ç¤¾äº¤ç¶²çµ¡"
            UC13[æŸ¥çœ‹ç¤¾äº¤ç¶²çµ¡]
            UC14[å…±åŒå¥½å‹]
            UC15[é€£çµåº¦åˆ†æ]
            UC16[å½±éŸ¿åŠ›åˆ†æ]
            UC17[ç¤¾ç¾¤åµæ¸¬]
        end
        
        subgraph "éš±ç§æ§åˆ¶"
            UC18[éš±ç§è¨­å®š]
            UC19[å°é–ç”¨æˆ¶]
            UC20[èˆ‰å ±ç”¨æˆ¶]
            UC21[éš±è—å‹•æ…‹]
            UC22[é™åˆ¶è¿½è¹¤]
        end
        
        subgraph "çµ±è¨ˆåˆ†æ"
            UC23[ç¤¾äº¤çµ±è¨ˆ]
            UC24[äº’å‹•åˆ†æ]
            UC25[æˆé•·è¶¨å‹¢]
            UC26[åƒèˆ‡åº¦åˆ†æ]
        end
    end

# 15. æˆå°±æ¨¡çµ„æ¶æ§‹åœ– âœ…

graph TB
    subgraph "Achievement Presentation Layer (æˆå°±å±•ç¤ºå±¤)"
        subgraph "æˆå°±å±•ç¤ºå…ƒä»¶"
            ACAC[Achievement Card Component<br/>æˆå°±å¡ç‰‡å…ƒä»¶]
            ACAL[Achievement List Component<br/>æˆå°±åˆ—è¡¨å…ƒä»¶]
            ACAB[Achievement Badge Component<br/>æˆå°±å¾½ç« å…ƒä»¶]
            ACAP[Achievement Progress Component<br/>æˆå°±é€²åº¦å…ƒä»¶]
        end
        
        subgraph "æ’è¡Œæ¦œå…ƒä»¶"
            ACLB[Leaderboard Component<br/>æ’è¡Œæ¦œå…ƒä»¶]
            ACRC[Ranking Card Component<br/>æ’åå¡ç‰‡å…ƒä»¶]
            ACTS[Top Stats Component<br/>é ‚ç´šçµ±è¨ˆå…ƒä»¶]
        end
        
        subgraph "æˆå°±ç®¡ç†å…ƒä»¶"
            ACAM[Achievement Management Component<br/>æˆå°±ç®¡ç†å…ƒä»¶]
            ACRM[Rule Management Component<br/>è¦å‰‡ç®¡ç†å…ƒä»¶]
            ACCM[Category Management Component<br/>åˆ†é¡ç®¡ç†å…ƒä»¶]
        end
        
        subgraph "çµ±è¨ˆåœ–è¡¨å…ƒä»¶"
            ACSC[Stats Chart Component<br/>çµ±è¨ˆåœ–è¡¨å…ƒä»¶]
            ACPC[Progress Chart Component<br/>é€²åº¦åœ–è¡¨å…ƒä»¶]
            ACAT[Achievement Timeline Component<br/>æˆå°±æ™‚é–“è»¸å…ƒä»¶]
        end
        
        subgraph "æˆå°±ç‹€æ…‹æœå‹™"
            ACSS[Achievement State Service<br/>æˆå°±ç‹€æ…‹æœå‹™]
            ACPS[Progress State Service<br/>é€²åº¦ç‹€æ…‹æœå‹™]
        end
    end
    
    subgraph "Achievement Application Layer (æˆå°±æ‡‰ç”¨å±¤)"
        subgraph "æˆå°±æ ¸å¿ƒæœå‹™"
            ACAAS[Achievement Application Service<br/>æˆå°±æ‡‰ç”¨æœå‹™]
            ACAWC[AwardAchievement Command<br/>é ’ç™¼æˆå°±å‘½ä»¤]
            ACUPC[UpdateProgress Command<br/>æ›´æ–°é€²åº¦å‘½ä»¤]
            ACGAQ[GetAchievements Query<br/>æŸ¥è©¢æˆå°±æŸ¥è©¢]
        end
        
        subgraph "è¦å‰‡å¼•æ“æœå‹™"
            ACRES[Rule Engine Service<br/>è¦å‰‡å¼•æ“æœå‹™]
            ACERC[EvaluateRule Command<br/>è©•ä¼°è¦å‰‡å‘½ä»¤]
            ACCRC[CreateRule Command<br/>å»ºç«‹è¦å‰‡å‘½ä»¤]
            ACREH[Rule Event Handler<br/>è¦å‰‡äº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "çµ±è¨ˆåˆ†ææœå‹™"
            ACSAS[Statistics Application Service<br/>çµ±è¨ˆæ‡‰ç”¨æœå‹™]
            ACGSC[GenerateStats Command<br/>ç”Ÿæˆçµ±è¨ˆå‘½ä»¤]
            ACLBQ[GetLeaderboard Query<br/>æŸ¥è©¢æ’è¡Œæ¦œæŸ¥è©¢]
        end
        
        subgraph "é€šçŸ¥æ•´åˆæœå‹™"
            ACNAS[Notification Application Service<br/>é€šçŸ¥æ‡‰ç”¨æœå‹™]
            ACNAC[NotifyAchievement Command<br/>æˆå°±é€šçŸ¥å‘½ä»¤]
        end
    end
    
    subgraph "Achievement Domain Layer (æˆå°±é ˜åŸŸå±¤)"
        subgraph "æˆå°±èšåˆæ ¹"
            ACAA[Achievement Aggregate<br/>æˆå°±èšåˆæ ¹]
            ACAWE[AchievementAwarded Event<br/>æˆå°±é ’ç™¼äº‹ä»¶]
            ACPE[ProgressUpdated Event<br/>é€²åº¦æ›´æ–°äº‹ä»¶]
        end
        
        subgraph "æˆå°±å¯¦é«”"
            ACAE[Achievement Entity<br/>æˆå°±å¯¦é«”]
            ACRULE[Rule Entity<br/>è¦å‰‡å¯¦é«”]
            ACCAT[Category Entity<br/>åˆ†é¡å¯¦é«”]
            ACPROG[Progress Entity<br/>é€²åº¦å¯¦é«”]
            ACLEAD[Leaderboard Entity<br/>æ’è¡Œæ¦œå¯¦é«”]
        end
        
        subgraph "æˆå°±å€¼ç‰©ä»¶"
            ACAV[AchievementInfo Value Object<br/>æˆå°±è³‡è¨Šå€¼ç‰©ä»¶]
            ACRV[RuleInfo Value Object<br/>è¦å‰‡è³‡è¨Šå€¼ç‰©ä»¶]
            ACCV[Criteria Value Object<br/>æ¢ä»¶å€¼ç‰©ä»¶]
            ACPV[Progress Value Object<br/>é€²åº¦å€¼ç‰©ä»¶]
        end
        
        subgraph "æˆå°±é ˜åŸŸæœå‹™"
            ACADS[Achievement Domain Service<br/>æˆå°±é ˜åŸŸæœå‹™]
            ACRDS[Rule Domain Service<br/>è¦å‰‡é ˜åŸŸæœå‹™]
            ACPDS[Progress Domain Service<br/>é€²åº¦é ˜åŸŸæœå‹™]
            ACSDS[Statistics Domain Service<br/>çµ±è¨ˆé ˜åŸŸæœå‹™]
        end
    end
    
    subgraph "Achievement Infrastructure Layer (æˆå°±åŸºç¤è¨­æ–½å±¤)"
        subgraph "è³‡æ–™æŒä¹…åŒ–"
            ACIR[Achievement Repository<br/>æˆå°±å„²å­˜åº«]
            ACRR[Rule Repository<br/>è¦å‰‡å„²å­˜åº«]
            ACPR[Progress Repository<br/>é€²åº¦å„²å­˜åº«]
            ACLR[Leaderboard Repository<br/>æ’è¡Œæ¦œå„²å­˜åº«]
        end
        
        subgraph "è¦å‰‡å¼•æ“"
            ACRE[Rule Engine<br/>è¦å‰‡å¼•æ“]
            ACCEP[Complex Event Processor<br/>è¤‡é›œäº‹ä»¶è™•ç†å™¨]
            ACSP[Scoring Processor<br/>è¨ˆåˆ†è™•ç†å™¨]
        end
        
        subgraph "äº‹ä»¶è™•ç†"
            ACAEH[Achievement Event Handler<br/>æˆå°±äº‹ä»¶è™•ç†å™¨]
            ACREH[Rule Event Handler<br/>è¦å‰‡äº‹ä»¶è™•ç†å™¨]
            ACPEH[Progress Event Handler<br/>é€²åº¦äº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "å¤–éƒ¨æœå‹™"
            ACIS[Achievement Infrastructure Service<br/>æˆå°±åŸºç¤è¨­æ–½æœå‹™]
            ACCS[Cache Service<br/>å¿«å–æœå‹™]
            ACBS[Batch Service<br/>æ‰¹æ¬¡æœå‹™]
        end
        
        subgraph "æ•´åˆæœå‹™"
            ACIUS[User Integration Service<br/>ç”¨æˆ¶æ•´åˆæœå‹™]
            ACIOS[Organization Integration Service<br/>çµ„ç¹”æ•´åˆæœå‹™]
            ACIPS[Project Integration Service<br/>å°ˆæ¡ˆæ•´åˆæœå‹™]
            ACINS[Notification Integration Service<br/>é€šçŸ¥æ•´åˆæœå‹™]
        end
    end

# 16. æˆå°±æ¨¡çµ„ç”¨ä¾‹åœ– âœ…

graph TB
    subgraph "å¤–éƒ¨åƒèˆ‡è€…"
        User[ç”¨æˆ¶]
        Admin[ç®¡ç†å“¡]
        System[ç³»çµ±]
        RuleEngine[è¦å‰‡å¼•æ“]
    end
    
    subgraph "æˆå°±æ¨¡çµ„åŠŸèƒ½"
        subgraph "æˆå°±ç®¡ç†"
            UC1[ç²å¾—æˆå°±]
            UC2[æŸ¥çœ‹æˆå°±]
            UC3[æˆå°±é€²åº¦è¿½è¹¤]
            UC4[æˆå°±åˆ†äº«]
            UC5[æˆå°±é©—è­‰]
            UC6[æˆå°±æ’¤éŠ·]
        end
        
        subgraph "è¦å‰‡ç³»çµ±"
            UC7[å®šç¾©æˆå°±è¦å‰‡]
            UC8[è¦å‰‡æ¢ä»¶è¨­å®š]
            UC9[è‡ªå‹•è§¸ç™¼æª¢æ¸¬]
            UC10[æ‰‹å‹•è§¸ç™¼æˆå°±]
            UC11[è¦å‰‡å„ªå…ˆç´šç®¡ç†]
            UC12[è¦å‰‡æ¸¬è©¦]
        end
        
        subgraph "åˆ†é¡ç³»çµ±"
            UC13[æˆå°±åˆ†é¡ç®¡ç†]
            UC14[ç­‰ç´šç³»çµ±è¨­å®š]
            UC15[é›£åº¦åˆ†ç´š]
            UC16[å­£ç¯€æ€§æˆå°±]
            UC17[é™æ™‚æˆå°±]
        end
        
        subgraph "çµ±è¨ˆæ’è¡Œ"
            UC18[æ’è¡Œæ¦œæŸ¥çœ‹]
            UC19[çµ±è¨ˆåˆ†æ]
            UC20[æˆå°±çµ±è¨ˆ]
            UC21[ç”¨æˆ¶æ’å]
            UC22[æˆå°±è¶¨å‹¢]
            UC23[ç«¶è³½ç®¡ç†]
        end
        
        subgraph "ç¤¾äº¤åŠŸèƒ½"
            UC24[æˆå°±å±•ç¤º]
            UC25[æˆå°±æ¯”è¼ƒ]
            UC26[æˆå°±æŒ‘æˆ°]
            UC27[æˆå°±è´ˆé€]
            UC28[æˆå°±é»è®š]
        end
    end

# 17. é€šçŸ¥æ¨¡çµ„æ¶æ§‹åœ– âœ…

graph TB
    subgraph "Notification Presentation Layer (é€šçŸ¥å±•ç¤ºå±¤)"
        subgraph "é€šçŸ¥å±•ç¤ºå…ƒä»¶"
            NONC[Notification Center Component<br/>é€šçŸ¥ä¸­å¿ƒå…ƒä»¶]
            NONL[Notification List Component<br/>é€šçŸ¥åˆ—è¡¨å…ƒä»¶]
            NONI[Notification Item Component<br/>é€šçŸ¥é …ç›®å…ƒä»¶]
            NONB[Notification Badge Component<br/>é€šçŸ¥å¾½ç« å…ƒä»¶]
        end
        
        subgraph "é€šçŸ¥è¨­å®šå…ƒä»¶"
            NONS[Notification Settings Component<br/>é€šçŸ¥è¨­å®šå…ƒä»¶]
            NONP[Notification Preferences Component<br/>é€šçŸ¥åå¥½å…ƒä»¶]
            NONT[Notification Templates Component<br/>é€šçŸ¥æ¨¡æ¿å…ƒä»¶]
        end
        
        subgraph "æ¨é€å…ƒä»¶"
            NOPC[Push Component<br/>æ¨é€å…ƒä»¶]
            NOEN[Email Notification Component<br/>éƒµä»¶é€šçŸ¥å…ƒä»¶]
            NOSN[SMS Notification Component<br/>ç°¡è¨Šé€šçŸ¥å…ƒä»¶]
            NOIN[In-App Notification Component<br/>æ‡‰ç”¨å…§é€šçŸ¥å…ƒä»¶]
        end
        
        subgraph "é€šçŸ¥ç‹€æ…‹æœå‹™"
            NOSS[Notification State Service<br/>é€šçŸ¥ç‹€æ…‹æœå‹™]
            NOPS[Preference State Service<br/>åå¥½ç‹€æ…‹æœå‹™]
        end
    end
    
    subgraph "Notification Application Layer (é€šçŸ¥æ‡‰ç”¨å±¤)"
        subgraph "é€šçŸ¥æ ¸å¿ƒæœå‹™"
            NONAS[Notification Application Service<br/>é€šçŸ¥æ‡‰ç”¨æœå‹™]
            NONCC[CreateNotification Command<br/>å»ºç«‹é€šçŸ¥å‘½ä»¤]
            NOMRC[MarkAsRead Command<br/>æ¨™è¨˜å·²è®€å‘½ä»¤]
            NOGNQ[GetNotifications Query<br/>æŸ¥è©¢é€šçŸ¥æŸ¥è©¢]
        end
        
        subgraph "æ¨é€æœå‹™"
            NOPAS[Push Application Service<br/>æ¨é€æ‡‰ç”¨æœå‹™]
            NOSPC[SendPush Command<br/>ç™¼é€æ¨é€å‘½ä»¤]
            NOSEC[SendEmail Command<br/>ç™¼é€éƒµä»¶å‘½ä»¤]
            NOSSC[SendSMS Command<br/>ç™¼é€ç°¡è¨Šå‘½ä»¤]
        end
        
        subgraph "æ¨¡æ¿æœå‹™"
            NOTAS[Template Application Service<br/>æ¨¡æ¿æ‡‰ç”¨æœå‹™]
            NOCTC[CreateTemplate Command<br/>å»ºç«‹æ¨¡æ¿å‘½ä»¤]
            NORTC[RenderTemplate Command<br/>æ¸²æŸ“æ¨¡æ¿å‘½ä»¤]
        end
        
        subgraph "åå¥½ç®¡ç†æœå‹™"
            NOPRAS[Preference Application Service<br/>åå¥½æ‡‰ç”¨æœå‹™]
            NOUPC[UpdatePreferences Command<br/>æ›´æ–°åå¥½å‘½ä»¤]
            NOGPQ[GetPreferences Query<br/>æŸ¥è©¢åå¥½æŸ¥è©¢]
        end
        
        subgraph "æ‰¹æ¬¡è™•ç†æœå‹™"
            NOBAS[Batch Application Service<br/>æ‰¹æ¬¡æ‡‰ç”¨æœå‹™]
            NOBPC[BatchProcess Command<br/>æ‰¹æ¬¡è™•ç†å‘½ä»¤]
            NOSC[Schedule Command<br/>æ’ç¨‹å‘½ä»¤]
        end
    end
    
    subgraph "Notification Domain Layer (é€šçŸ¥é ˜åŸŸå±¤)"
        subgraph "é€šçŸ¥èšåˆæ ¹"
            NONA[Notification Aggregate<br/>é€šçŸ¥èšåˆæ ¹]
            NONCE[NotificationCreated Event<br/>é€šçŸ¥å»ºç«‹äº‹ä»¶]
            NORE[NotificationRead Event<br/>é€šçŸ¥å·²è®€äº‹ä»¶]
            NOSE[NotificationSent Event<br/>é€šçŸ¥ç™¼é€äº‹ä»¶]
        end
        
        subgraph "é€šçŸ¥å¯¦é«”"
            NONE[Notification Entity<br/>é€šçŸ¥å¯¦é«”]
            NOTE[Template Entity<br/>æ¨¡æ¿å¯¦é«”]
            NOPE[Preference Entity<br/>åå¥½å¯¦é«”]
            NOCHE[Channel Entity<br/>é€šé“å¯¦é«”]
            NOQUE[Queue Entity<br/>ä½‡åˆ—å¯¦é«”]
        end
        
        subgraph "é€šçŸ¥å€¼ç‰©ä»¶"
            NONV[NotificationInfo Value Object<br/>é€šçŸ¥è³‡è¨Šå€¼ç‰©ä»¶]
            NOTV[TemplateInfo Value Object<br/>æ¨¡æ¿è³‡è¨Šå€¼ç‰©ä»¶]
            NOPV[PreferenceInfo Value Object<br/>åå¥½è³‡è¨Šå€¼ç‰©ä»¶]
            NOCHV[ChannelInfo Value Object<br/>é€šé“è³‡è¨Šå€¼ç‰©ä»¶]
        end
        
        subgraph "é€šçŸ¥é ˜åŸŸæœå‹™"
            NODS[Notification Domain Service<br/>é€šçŸ¥é ˜åŸŸæœå‹™]
            NOTDS[Template Domain Service<br/>æ¨¡æ¿é ˜åŸŸæœå‹™]
            NOPDS[Preference Domain Service<br/>åå¥½é ˜åŸŸæœå‹™]
            NORDS[Routing Domain Service<br/>è·¯ç”±é ˜åŸŸæœå‹™]
        end
    end
    
    subgraph "Notification Infrastructure Layer (é€šçŸ¥åŸºç¤è¨­æ–½å±¤)"
        subgraph "è³‡æ–™æŒä¹…åŒ–"
            NOIR[Notification Repository<br/>é€šçŸ¥å„²å­˜åº«]
            NOTR[Template Repository<br/>æ¨¡æ¿å„²å­˜åº«]
            NOPR[Preference Repository<br/>åå¥½å„²å­˜åº«]
        end
        
        subgraph "æ¨é€æœå‹™æ•´åˆ"
            NOFCM[Cloud Messaging<br/>é›²ç«¯è¨Šæ¯]
            NOSES[Email Service<br/>éƒµä»¶æœå‹™]
            NOTWS[SMS Service<br/>ç°¡è¨Šæœå‹™]
            NOAPN[Push Notification<br/>æ¨é€é€šçŸ¥]
        end
        
        subgraph "äº‹ä»¶è™•ç†"
            NONEH[Notification Event Handler<br/>é€šçŸ¥äº‹ä»¶è™•ç†å™¨]
            NOTEH[Template Event Handler<br/>æ¨¡æ¿äº‹ä»¶è™•ç†å™¨]
            NOPEH[Preference Event Handler<br/>åå¥½äº‹ä»¶è™•ç†å™¨]
        end
        
        subgraph "ä½‡åˆ—èˆ‡æ’ç¨‹"
            NOQS[Queue Service<br/>ä½‡åˆ—æœå‹™]
            NOSS[Scheduler Service<br/>æ’ç¨‹æœå‹™]
            NOWS[Worker Service<br/>å·¥ä½œæœå‹™]
            NORS[Retry Service<br/>é‡è©¦æœå‹™]
        end
        
        subgraph "ç›£æ§èˆ‡åˆ†æ"
            NOMS[Monitoring Service<br/>ç›£æ§æœå‹™]
            NOAS[Analytics Service<br/>åˆ†ææœå‹™]
            NOLS[Logging Service<br/>æ—¥èªŒæœå‹™]
        end
        
        subgraph "æ•´åˆæœå‹™"
            NOIUS[User Integration Service<br/>ç”¨æˆ¶æ•´åˆæœå‹™]
            NOIOS[Organization Integration Service<br/>çµ„ç¹”æ•´åˆæœå‹™]
            NOIPS[Project Integration Service<br/>å°ˆæ¡ˆæ•´åˆæœå‹™]
            NOIAS[Achievement Integration Service<br/>æˆå°±æ•´åˆæœå‹™]
        end
    end

# 18. é€šçŸ¥æ¨¡çµ„ç”¨ä¾‹åœ– âœ…

graph TB
    subgraph "å¤–éƒ¨åƒèˆ‡è€…"
        User[ç”¨æˆ¶]
        Admin[ç®¡ç†å“¡]
        System[ç³»çµ±]
        ExternalService[å¤–éƒ¨æœå‹™]
    end
    
    subgraph "é€šçŸ¥æ¨¡çµ„åŠŸèƒ½"
        subgraph "é€šçŸ¥ç®¡ç†"
            UC1[æ¥æ”¶é€šçŸ¥]
            UC2[æŸ¥çœ‹é€šçŸ¥]
            UC3[æ¨™è¨˜å·²è®€]
            UC4[åˆªé™¤é€šçŸ¥]
            UC5[é€šçŸ¥æœå°‹]
            UC6[é€šçŸ¥åˆ†é¡]
        end
        
        subgraph "æ¨é€æœå‹™"
            UC7[æ‡‰ç”¨å…§æ¨é€]
            UC8[éƒµä»¶æ¨é€]
            UC9[ç°¡è¨Šæ¨é€]
            UC10[ç€è¦½å™¨æ¨é€]
            UC11[æ‰¹æ¬¡æ¨é€]
            UC12[å®šæ™‚æ¨é€]
        end
        
        subgraph "åå¥½è¨­å®š"
            UC13[é€šçŸ¥åå¥½è¨­å®š]
            UC14[é€šé“åå¥½]
            UC15[é »ç‡æ§åˆ¶]
            UC16[å…æ‰“æ“¾æ™‚é–“]
            UC17[åˆ†é¡è¨‚é–±]
            UC18[ç·Šæ€¥é€šçŸ¥è¨­å®š]
        end
        
        subgraph "æ¨¡æ¿ç®¡ç†"
            UC19[å»ºç«‹é€šçŸ¥æ¨¡æ¿]
            UC20[ç·¨è¼¯æ¨¡æ¿]
            UC21[æ¨¡æ¿é è¦½]
            UC22[å¤šèªè¨€æ¨¡æ¿]
            UC23[å‹•æ…‹å…§å®¹]
            UC24[æ¨¡æ¿ç‰ˆæœ¬æ§åˆ¶]
        end
        
        subgraph "çµ±è¨ˆåˆ†æ"
            UC25[ç™¼é€çµ±è¨ˆ]
            UC26[é–‹å•Ÿç‡åˆ†æ]
            UC27[é»æ“Šç‡åˆ†æ]
            UC28[ç”¨æˆ¶åƒèˆ‡åº¦]
            UC29[é€šçŸ¥æ•ˆæœåˆ†æ]
            UC30[A/Bæ¸¬è©¦]
        end
    end

# 19. æ¨¡çµ„é–“æ•´åˆäº‹ä»¶æµåœ– âœ…

sequenceDiagram
    participant User as ç”¨æˆ¶
    participant Social as Social Module
    participant Achievement as Achievement Module
    participant Notification as Notification Module
    participant UserModule as User Module
    participant ProjectModule as Project Module

    User->>Social: è¿½è¹¤æ–°ç”¨æˆ¶
    Social->>Social: å»ºç«‹è¿½è¹¤é—œä¿‚
    Social->>Achievement: ç™¼é€ UserFollowed äº‹ä»¶
    Social->>Notification: ç™¼é€ UserFollowed äº‹ä»¶
    
    Achievement->>Achievement: æª¢æŸ¥æˆå°±è¦å‰‡
    Achievement->>Achievement: è§¸ç™¼ã€Œç¤¾äº¤é”äººã€æˆå°±
    Achievement->>Notification: ç™¼é€ AchievementAwarded äº‹ä»¶
    Achievement->>Social: ç™¼é€ AchievementAwarded äº‹ä»¶
    
    Notification->>Notification: å»ºç«‹æˆå°±é€šçŸ¥
    Notification->>Notification: å»ºç«‹è¿½è¹¤é€šçŸ¥
    Notification->>User: æ¨é€é€šçŸ¥
    
    Social->>Social: æ›´æ–°ç¤¾äº¤çµ±è¨ˆ
    
    ProjectModule->>Achievement: å°ˆæ¡ˆå®Œæˆäº‹ä»¶
    Achievement->>Achievement: æª¢æŸ¥å°ˆæ¡ˆæˆå°±
    Achievement->>Notification: ç™¼é€å°ˆæ¡ˆæˆå°±é€šçŸ¥

# 20. æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§ç¸½çµ âœ…

## ç¤¾äº¤æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§
åŒ…å«ï¼š
- è¿½è¹¤ç®¡ç†: è¿½è¹¤ã€å–æ¶ˆè¿½è¹¤ã€è¿½è¹¤åˆ—è¡¨ã€ç²‰çµ²åˆ—è¡¨
- ç”¨æˆ¶ç™¼ç¾: æœå°‹ã€æ¨è–¦ã€ç€è¦½ã€é™„è¿‘ç”¨æˆ¶ã€ç†±é–€ç”¨æˆ¶
- ç¤¾äº¤ç¶²çµ¡: ç¤¾äº¤åœ–è­œã€å…±åŒå¥½å‹ã€é€£çµåº¦åˆ†æã€å½±éŸ¿åŠ›åˆ†æ
- éš±ç§æ§åˆ¶: éš±ç§è¨­å®šã€å°é–ã€èˆ‰å ±ã€é™åˆ¶è¿½è¹¤
- çµ±è¨ˆåˆ†æ: ç¤¾äº¤çµ±è¨ˆã€äº’å‹•åˆ†æã€æˆé•·è¶¨å‹¢ã€åƒèˆ‡åº¦åˆ†æ

## æˆå°±æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§
åŒ…å«ï¼š
- æˆå°±ç®¡ç†: ç²å¾—ã€æŸ¥çœ‹ã€é€²åº¦è¿½è¹¤ã€åˆ†äº«ã€é©—è­‰ã€æ’¤éŠ·
- è¦å‰‡ç³»çµ±: è¦å‰‡å®šç¾©ã€æ¢ä»¶è¨­å®šã€è‡ªå‹•è§¸ç™¼ã€æ‰‹å‹•è§¸ç™¼ã€å„ªå…ˆç´šç®¡ç†
- åˆ†é¡ç³»çµ±: åˆ†é¡ç®¡ç†ã€ç­‰ç´šç³»çµ±ã€é›£åº¦åˆ†ç´šã€å­£ç¯€æ€§æˆå°±ã€é™æ™‚æˆå°±
- çµ±è¨ˆæ’è¡Œ: æ’è¡Œæ¦œã€çµ±è¨ˆåˆ†æã€ç”¨æˆ¶æ’åã€æˆå°±è¶¨å‹¢ã€ç«¶è³½ç®¡ç†
- ç¤¾äº¤åŠŸèƒ½: æˆå°±å±•ç¤ºã€æ¯”è¼ƒã€æŒ‘æˆ°ã€è´ˆé€ã€é»è®š

## é€šçŸ¥æ¨¡çµ„åŠŸèƒ½ç‰¹æ€§
åŒ…å«ï¼š
- é€šçŸ¥ç®¡ç†: æ¥æ”¶ã€æŸ¥çœ‹ã€æ¨™è¨˜å·²è®€ã€åˆªé™¤ã€æœå°‹ã€åˆ†é¡
- æ¨é€æœå‹™: æ‡‰ç”¨å…§ã€éƒµä»¶ã€ç°¡è¨Šã€ç€è¦½å™¨ã€æ‰¹æ¬¡ã€å®šæ™‚æ¨é€
- åå¥½è¨­å®š: é€šçŸ¥åå¥½ã€é€šé“åå¥½ã€é »ç‡æ§åˆ¶ã€å…æ‰“æ“¾ã€åˆ†é¡è¨‚é–±
- æ¨¡æ¿ç®¡ç†: å»ºç«‹æ¨¡æ¿ã€ç·¨è¼¯ã€é è¦½ã€å¤šèªè¨€ã€å‹•æ…‹å…§å®¹ã€ç‰ˆæœ¬æ§åˆ¶
- çµ±è¨ˆåˆ†æ: ç™¼é€çµ±è¨ˆã€é–‹å•Ÿç‡ã€é»æ“Šç‡ã€åƒèˆ‡åº¦ã€æ•ˆæœåˆ†æã€A/Bæ¸¬è©¦

## Architecture Overview (æ¶æ§‹ç¸½è¦½)

### System Architecture Summary (ç³»çµ±æ¶æ§‹æ‘˜è¦)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYSTEM OVERVIEW â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Core Modules (å¼·ä¾è³´) â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ USER â”‚â—„â”€â”€â–ºâ”‚ ORGANIZATION â”‚â—„â”€â”€â–ºâ”‚ PROJECT â”‚ â”‚
â”‚ â”‚ Module â”‚ â”‚ Module â”‚ â”‚ Module â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚
â”‚ Cross-Cutting Modules (äº‹ä»¶é©…å‹•) â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ SOCIAL â”‚ â”‚ ACHIEVEMENT â”‚ â”‚ NOTIFICATION â”‚ â”‚
â”‚ â”‚ Module â”‚ â”‚ Module â”‚ â”‚ Module â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚
â”‚ Integration Stack (æŠ€è¡“æ•´åˆ) â”‚
â”‚ Auth Service â†’ Auth Integration â†’ ACL Service â”‚
â”‚ Database â†’ Event Bus â†’ External Services â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Module Interaction Matrix (æ¨¡çµ„äº’å‹•çŸ©é™£)
User Org Proj Social Achv Notif
User Module â— âœ“ âœ“ â—‹ â—‹ â—‹
Organization âœ“ â— âœ“ â—‹ â—‹ â—‹
Project âœ“ âœ“ â— â—‹ â—‹ â—‹
Social âœ“ âœ“ âœ“ â— âœ“ âœ“
Achievement âœ“ âœ“ âœ“ âœ“ â— âœ“
Notification âœ“ âœ“ âœ“ âœ“ âœ“ â—
Legend: â— = Self âœ“ = Strong Dependency â—‹ = Event Integration

### Technology Stack Integration (æŠ€è¡“æ£§æ•´åˆ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TECHNOLOGY STACK â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend Framework â”‚
â”‚ Modern Web Framework + Standalone Components + Signals â”‚
â”‚ â”‚
â”‚ UI Framework â”‚
â”‚ UI Component Library + Theme System + Utilities â”‚
â”‚ â”‚
â”‚ Authentication & Authorization â”‚
â”‚ Auth Service â†’ Auth Integration â†’ ACL Service â”‚
â”‚ â”‚
â”‚ Database & Storage â”‚
â”‚ NoSQL Database + Cloud Storage + Serverless Functions â”‚
â”‚ â”‚
â”‚ Architecture Pattern â”‚
â”‚ DDD + CQRS + Event-Driven + Clean Architecture â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Development Roadmap (é–‹ç™¼è·¯ç·šåœ–)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEVELOPMENT PHASES â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 1: Foundation (3-4 months) â”‚
â”‚ â”œâ”€â”€ User Module (Core Auth + Profile) â”‚
â”‚ â”œâ”€â”€ Organization Module (Basic Management) â”‚
â”‚ â”œâ”€â”€ Authentication Stack Integration â”‚
â”‚ â””â”€â”€ Basic Event Infrastructure â”‚
â”‚ â”‚
â”‚ Phase 2: Core Business (2-3 months) â”‚
â”‚ â”œâ”€â”€ Project Module (Full Implementation) â”‚
â”‚ â”œâ”€â”€ Advanced Organization Features â”‚
â”‚ â”œâ”€â”€ User-Organization-Project Integration â”‚
â”‚ â””â”€â”€ Core Business Logic Testing â”‚
â”‚ â”‚
â”‚ Phase 3: Social Features (2-3 months) â”‚
â”‚ â”œâ”€â”€ Social Module (Following/Recommendations) â”‚
â”‚ â”œâ”€â”€ Notification Module (Multi-channel) â”‚
â”‚ â”œâ”€â”€ Achievement Module (Rules Engine) â”‚
â”‚ â””â”€â”€ Cross-Module Event Integration â”‚
â”‚ â”‚
â”‚ Phase 4: Advanced Features (1-2 months) â”‚
â”‚ â”œâ”€â”€ Advanced Analytics â”‚
â”‚ â”œâ”€â”€ Performance Optimization â”‚
â”‚ â”œâ”€â”€ Security Hardening â”‚
â”‚ â””â”€â”€ Production Deployment â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Key Success Metrics (é—œéµæˆåŠŸæŒ‡æ¨™)
- **Technical Debt**: < 10% (ç¶­æŒä½æŠ€è¡“å‚µå‹™)
- **Test Coverage**: > 80% (é«˜æ¸¬è©¦è¦†è“‹ç‡)
- **Performance**: < 2s é¦–æ¬¡è¼‰å…¥æ™‚é–“
- **Scalability**: æ”¯æ´ 10,000+ ä¸¦ç™¼ç”¨æˆ¶
- **Security**: OWASP Top 10 åˆè¦
- **Maintainability**: æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼æ“´å±•

### Risk Mitigation (é¢¨éšªç·©è§£)
1. **è¤‡é›œåº¦ç®¡ç†**: åˆ†éšæ®µé–‹ç™¼ï¼Œæ¼¸é€²å¼äº¤ä»˜
2. **æŠ€è¡“é¢¨éšª**: ä½¿ç”¨æˆç†ŸæŠ€è¡“æ£§ï¼Œé¿å…å¯¦é©—æ€§æŠ€è¡“
3. **åœ˜éšŠå”ä½œ**: æ¸…æ™°çš„æ¨¡çµ„é‚Šç•Œï¼Œæ¸›å°‘é–‹ç™¼è¡çª
4. **æ•ˆèƒ½é¢¨éšª**: æ—©æœŸæ•ˆèƒ½æ¸¬è©¦ï¼ŒæŒçºŒå„ªåŒ–
5. **å®‰å…¨é¢¨éšª**: å¤šå±¤é˜²è­·ï¼Œå®šæœŸå®‰å…¨å¯©è¨ˆ

## MVP è½åœ°å¯¦ä½œæŒ‡å—ï¼ˆPhase 1 å¯äº¤ä»˜ï¼‰

### 1) ç’°å¢ƒèˆ‡åŸºç¤å»ºç½®
- **ç¾ä»£ Web æ¡†æ¶**ï¼šStandalone + Signalsï¼Œç¾ä»£å»ºç½®å·¥å…·
- **å¥—ä»¶**ï¼šèªè­‰æœå‹™ã€è³‡æ–™åº«æœå‹™ã€UI çµ„ä»¶åº«ã€æ¬Šé™ç®¡ç†
- **è¨­å®š**ï¼š
  - åœ¨ç’°å¢ƒé…ç½®ä¸­æ”¾ç½®æœå‹™åƒæ•¸
  - åˆå§‹åŒ–èªè­‰æœå‹™ã€è³‡æ–™åº«æœå‹™ã€å„²å­˜æœå‹™ã€è¨Šæ¯æœå‹™
  - å•Ÿç”¨ HTTP æ””æˆªå™¨ï¼ˆtoken æ³¨å…¥èˆ‡éŒ¯èª¤è™•ç†ï¼‰

#### Phase 1 ä¾è³´å¥—ä»¶ï¼ˆæœ€å°å¿…è¦ï¼‰

- é‹è¡Œæ™‚ä¾è³´
  - æ ¸å¿ƒæ¡†æ¶
  - é€šç”¨æ¨¡çµ„
  - è·¯ç”±æ¨¡çµ„
  - è¡¨å–®æ¨¡çµ„
  - å¹³å°ç€è¦½å™¨æ¨¡çµ„
  - å‹•ç•«æ¨¡çµ„
  - çµ„ä»¶é–‹ç™¼å¥—ä»¶
  - èªè­‰æœå‹™
  - è³‡æ–™åº«æœå‹™
  - UI çµ„ä»¶åº«
  - ä¸»é¡Œç³»çµ±
  - å·¥å…·åº«
  - æ¬Šé™ç®¡ç†
  - éŸ¿æ‡‰å¼ç¨‹å¼åº«
  - é‹è¡Œæ™‚ç’°å¢ƒ
  - é¡å‹åº«

- é–‹ç™¼ä¾è³´ï¼ˆå»ºç½®å¿…éœ€ï¼‰
  - å‘½ä»¤è¡Œå·¥å…·
  - å»ºç½®å·¥å…·
  - ç·¨è­¯å™¨
  - TypeScript

### 2) èªè­‰èˆ‡æˆæ¬Šï¼ˆå°æ‡‰ #9ï¼‰
- **ç™»å…¥æµç¨‹**ï¼šèªè­‰æœå‹™ç™»å…¥ â†’ å–å¾— ID Token â†’ èªè­‰æ•´åˆæœå‹™å„²å­˜ Tokenï¼ˆæœ¬åœ°å„²å­˜ï¼‰
- **æ¬Šé™åˆå§‹åŒ–**ï¼šç™»å…¥å¾Œæ ¹æ“šã€Œä½¿ç”¨è€…æª”æ¡ˆ + ç•¶å‰çµ„ç¹”IDã€å»ºç«‹æ¬Šé™ç³»çµ±è§’è‰²èˆ‡æ¬Šé™æ¨¹
- **è·¯ç”±å®ˆè¡›**ï¼šå—ä¿è­·è·¯ç”±ä½¿ç”¨æ¬Šé™å®ˆè¡›ï¼›å…ƒä»¶å±¤ä»¥æ¬Šé™æŒ‡ä»¤æ§åˆ¶æŒ‰éˆ•/å€å¡Šé¡¯ç¤º
- **çµ„ç¹”åˆ‡æ›**ï¼ˆå°æ‡‰ #10ï¼‰ï¼šåˆ‡æ›æ™‚é‡å»ºæ¬Šé™æ˜ å°„ï¼ˆè§’è‰²/æ¬Šé™ä¾ç•¶å‰çµ„ç¹”ï¼‰

### 3) è³‡æ–™åº«çµæ§‹èˆ‡è¦å‰‡åŸºç·šï¼ˆå°æ‡‰ æŠ€è¡“æ•´åˆå±¤/è³‡æ–™æŒä¹…åŒ–æ¶æ§‹ï¼‰
- å…ˆè½åœ°é›†åˆï¼š`/users`ã€`/organizations`ã€`/projects`ï¼ˆå« `/tasks`ã€`/documents`ã€`/costs`ï¼‰
- é‡è¦æ¬„ä½ï¼šæ‰€æœ‰æ–‡ä»¶å­˜ `orgId`/`projectId` ä»¥åˆ©è¦å‰‡èˆ‡æŸ¥è©¢
- è¦å‰‡ï¼šåŸºç·šè³‡æ–™åº«å®‰å…¨è¦å‰‡è¦†è“‹æ ¸å¿ƒé›†åˆçš„ CRUD æ¬Šé™

### 4) äº‹ä»¶åŒ¯æµæ’èˆ‡è¦å‰‡å¼•æ“ MVPï¼ˆå°æ‡‰ #19 èˆ‡å„æ¨¡çµ„äº‹ä»¶ï¼‰
- **æœ€å°è½åœ°**ï¼šé›²ç«¯å‡½æ•¸äº‹ä»¶è§¸ç™¼
  - è³‡æ–™åº«è§¸ç™¼å™¨ï¼š`users.onCreate`ã€`organizations.onCreate`ã€`projects.onCreate` ç­‰
  - äº‹ä»¶è™•ç†ï¼šå»ºç«‹æ­¡è¿é€šçŸ¥ã€é è¨­è¨­å®šã€å¯©è¨ˆç´€éŒ„
- **è¦å‰‡å¼•æ“ï¼ˆæˆå°±/é€šçŸ¥ï¼‰**ï¼šä»¥å‡½æ•¸è§¸ç™¼å™¨ + è¦å‰‡è¡¨ï¼ˆè³‡æ–™åº«é›†åˆï¼‰å…ˆè¡Œï¼›å¾ŒçºŒå†æ“´å…… CEP/æ‰¹æ¬¡

### 5) é€šçŸ¥ MVPï¼ˆå°æ‡‰ é€šçŸ¥æ¨¡çµ„ï¼‰
- **In-App**ï¼š`/notifications` é›†åˆï¼ˆç‹€æ…‹ï¼šunread/readï¼Œé¡å‹ï¼šachievement/follow/...ï¼‰
- **Email**ï¼šéƒµä»¶æœå‹™ï¼ˆå‡½æ•¸ HTTP/è§¸ç™¼ï¼‰
- **Web Push**ï¼šé›²ç«¯è¨Šæ¯ï¼ˆService Worker + ä½¿ç”¨è€…æˆæ¬Š + Token ç¶­è­·ï¼‰

### 6) å ±è¡¨/ç”˜ç‰¹åœ–è³‡æ–™ç­–ç•¥ï¼ˆå°æ‡‰ #12 çš„è™›ç·šèšåˆï¼‰
- **é å…ˆå½™ç¸½**ï¼šä»¥å‡½æ•¸ç”¢å½™ç¸½æ–‡ä»¶ï¼ˆä¾‹ï¼šæ¯æ—¥/æ¯å°ˆæ¡ˆçµ±è¨ˆï¼‰ï¼Œå‰ç«¯ç›´æ¥æŸ¥è©¢
- **å³æ™‚è¦–åœ–**ï¼šå°å‹åˆ—è¡¨ç›´æ¥ä»¥è³‡æ–™åº«æŸ¥è©¢ + å®¢ç«¯éæ¿¾ï¼›å¤§å‹å ±è¡¨æ”¹ç”¨å½™ç¸½æ–‡ä»¶
- **ç”˜ç‰¹åœ–è³‡æ–™**ï¼šå°‡ä»»å‹™/é‡Œç¨‹ç¢‘è½‰æ›ç‚ºé©é…å‰ç«¯çš„æ‰å¹³çµæ§‹ï¼ˆå«ä¾è³´/æ™‚é–“çª—ï¼‰

### 7) Phase 1 DoDï¼ˆDefinition of Doneï¼‰
- ä½¿ç”¨è€…ç™»å…¥/ç™»å‡º/é‡è¨­å¯†ç¢¼ï¼Œå¯è¦‹å€‹äººæª”æ¡ˆ
- çµ„ç¹”å»ºç«‹/æŸ¥çœ‹/åˆ‡æ›ï¼Œè·¯ç”±/æŒ‰éˆ•å—æ¬Šé™æ§åˆ¶
- å°ˆæ¡ˆå»ºç«‹/ä»»å‹™å»ºç«‹ï¼ˆæœ€å°å­—æ®µï¼‰ï¼Œæ–‡ä»¶å¯ä¸Šå‚³èˆ‡åˆ—è¡¨
- åŸºæœ¬äº‹ä»¶ï¼šä½¿ç”¨è€…/çµ„ç¹”/å°ˆæ¡ˆå»ºç«‹ â†’ ç”¢ç”Ÿ In-App é€šçŸ¥
- è¦å‰‡ï¼šåŸºç·šè³‡æ–™åº«å®‰å…¨è¦å‰‡è¦†è“‹æ ¸å¿ƒé›†åˆçš„ CRUD æ¬Šé™
- æœ€å°‘ 1 ä»½åˆ†ææˆ–æ—¥å ±ä»¥ã€Œå½™ç¸½æ–‡ä»¶ã€æ–¹å¼å‘ˆç¾

### 8) æŠ€è¡“æ£§å°ç…§ï¼ˆè½åœ°æ˜ å°„ï¼‰
- **èªè­‰æœå‹™**ï¼šAuthï¼ˆEmail/Passwordï¼‰ã€è³‡æ–™åº«ï¼ˆé›†åˆ/å³æ™‚/é›¢ç·šï¼‰ã€Storageã€Messaging
- **èªè­‰æ•´åˆ**ï¼šToken å„²å­˜/åˆ·æ–°ã€HTTP æ””æˆªã€èªè­‰ç‹€æ…‹
- **æ¬Šé™ç®¡ç†**ï¼šè·¯ç”±å®ˆè¡›ã€æŒ‡ä»¤/ç®¡é“ã€å‹•æ…‹æ¬Šé™æ›´æ–°ã€çµ„ç¹”ä¸Šä¸‹æ–‡åˆ‡æ›
- **UI çµ„ä»¶åº«**ï¼šæ¸…å–®/è¡¨å–®/å¡ç‰‡/åœ–è¡¨ç­‰ UI çµ„ä»¶èˆ‡æ¨£æ¿

---

**ç¸½çµ**: é€™æ˜¯ä¸€å€‹åŸºæ–¼ç¾ä»£ Web æŠ€è¡“çš„ä¼æ¥­ç´šå»ºç¯‰å·¥ç¨‹ç®¡ç†å¹³å°ï¼Œæ¡ç”¨ DDD æ¶æ§‹è¨­è¨ˆï¼Œæ”¯æ´ç”¨æˆ¶ç®¡ç†ã€çµ„ç¹”ç®¡ç†ã€å°ˆæ¡ˆç®¡ç†ã€ç¤¾äº¤åŠŸèƒ½ã€æˆå°±ç³»çµ±å’Œé€šçŸ¥ç³»çµ±ã€‚é ä¼°é–‹ç™¼é€±æœŸ 8-12 å€‹æœˆï¼Œé©åˆä¸­å¤§å‹é–‹ç™¼åœ˜éšŠå¯¦æ–½ã€‚
`````

## File: .cursor/rules/isolation_rules/Core/command-execution.mdc
`````
---
description: Command execution guidelines for isolation-focused Graph Bank
globs: command-execution.mdc
alwaysApply: false
---

# COMMAND EXECUTION SYSTEM

> **TL;DR:** This system provides guidelines for efficient command execution, balancing clarity and token optimization through appropriate command chaining, with proper documentation of commands and results.

## ğŸ” COMMAND EFFICIENCY WORKFLOW

```mermaid
graph TD
    Start["Command<br>Planning"] --> Analyze["Analyze Command<br>Requirements"]
    Analyze --> Balance["Balance Clarity<br>vs. Efficiency"]
    Balance --> Complexity{"Command<br>Complexity?"}
    
    Complexity -->|"Simple"| Single["Execute<br>Single Command"]
    Complexity -->|"Moderate"| Chain["Use Efficient<br>Command Chaining"]
    Complexity -->|"Complex"| Group["Group Into<br>Logical Steps"]
    
    Single & Chain & Group --> Verify["Verify<br>Results"]
    Verify --> Document["Document<br>Command & Result"]
    Document --> Next["Next<br>Command"]
```

## ğŸ“‹ COMMAND CHAINING GUIDELINES

```mermaid
graph TD
    Command["Command<br>Execution"] --> ChainApprop{"Is Chaining<br>Appropriate?"}
    
    ChainApprop -->|"Yes"| ChainTypes["Chain<br>Types"]
    ChainApprop -->|"No"| SingleCmd["Use Single<br>Commands"]
    
    ChainTypes --> Sequential["Sequential Operations<br>cmd1 && cmd2"]
    ChainTypes --> Conditional["Conditional Operations<br>cmd1 || cmd2"]
    ChainTypes --> Piping["Piping<br>cmd1 | cmd2"]
    ChainTypes --> Grouping["Command Grouping<br>(cmd1; cmd2)"]
    
    Sequential & Conditional & Piping & Grouping --> Doc["Document<br>Commands & Results"]
```

## ğŸš¦ DIRECTORY VERIFICATION WORKFLOW

```mermaid
graph TD
    Command["Command<br>Execution"] --> DirCheck["Check Current<br>Directory"]
    DirCheck --> ProjectRoot{"In Project<br>Root?"}
    
    ProjectRoot -->|"Yes"| Execute["Execute<br>Command"]
    ProjectRoot -->|"No"| Locate["Locate<br>Project Root"]
    
    Locate --> Found{"Project Root<br>Found?"}
    Found -->|"Yes"| Navigate["Navigate to<br>Project Root"]
    Found -->|"No"| Error["Error: Cannot<br>Find Project Root"]
    
    Navigate --> Execute
    Execute --> Verify["Verify<br>Results"]
```

## ğŸ“‹ DIRECTORY VERIFICATION CHECKLIST

Before executing any npm or build command:

| Step | Windows (PowerShell) | Unix/Linux/Mac | Purpose |
|------|----------------------|----------------|---------|
| **Check package.json** | `Test-Path package.json` | `ls package.json` | Verify current directory is project root |
| **Check for parent directory** | `Test-Path "*/package.json"` | `find . -maxdepth 2 -name package.json` | Find potential project directories |
| **Navigate to project root** | `cd [project-dir]` | `cd [project-dir]` | Move to correct directory before executing commands |

## ğŸ“‹ MODERN ANGULAR COMMAND GUIDELINES

For modern Angular applications, follow these strict guidelines:

| Command | Correct Usage | Incorrect Usage | Notes |
|---------|---------------|----------------|-------|
| **ng serve** | `cd [project-root] && ng serve` | `ng serve` (from parent dir) | Must execute from directory with angular.json |
| **ng build** | `cd [project-root] && ng build --configuration=production` | `ng build` (development build) | Use production config for deployment |
| **ng generate** | `ng generate component --standalone` | `ng generate component` (legacy) | Always use standalone components |
| **ng add** | `ng add @angular/material` | Manual package installation | Use Angular CLI for adding features |

## ğŸ”„ COMMAND CHAINING PATTERNS

Effective command chaining patterns include:

| Pattern | Format | Examples | Use Case |
|---------|--------|----------|----------|
| **Sequential** | `cmd1 && cmd2` | `mkdir dir && cd dir` | Commands that should run in sequence, second only if first succeeds |
| **Conditional** | `cmd1 || cmd2` | `test -f file.txt || touch file.txt` | Fallback commands, second only if first fails |
| **Piping** | `cmd1 \| cmd2` | `grep "pattern" file.txt \| wc -l` | Pass output of first command as input to second |
| **Background** | `cmd &` | `npm start &` | Run command in background |
| **Grouping** | `(cmd1; cmd2)` | `(echo "Start"; npm test; echo "End")` | Group commands to run as a unit |

## ğŸ“‹ COMMAND DOCUMENTATION TEMPLATE

```
## Command Execution: [Purpose]

### Command
```
[actual command or chain]
```

### Result
```
[command output]
```

### Effect
[Brief description of what changed in the system]

### Next Steps
[What needs to be done next]
```

## ğŸ” PLATFORM-SPECIFIC CONSIDERATIONS

```mermaid
graph TD
    Platform["Platform<br>Detection"] --> Windows["Windows<br>Commands"]
    Platform --> Unix["Unix/Linux/Mac<br>Commands"]
    
    Windows --> WinAdapt["Windows Command<br>Adaptations"]
    Unix --> UnixAdapt["Unix Command<br>Adaptations"]
    
    WinAdapt --> WinChain["Windows Chaining:<br>Commands separated by &"]
    UnixAdapt --> UnixChain["Unix Chaining:<br>Commands separated by ;"]
    
    WinChain & UnixChain --> Execute["Execute<br>Platform-Specific<br>Commands"]
```

## ğŸ“‹ COMMAND EFFICIENCY EXAMPLES

Examples of efficient command usage:

| Inefficient | Efficient | Explanation |
|-------------|-----------|-------------|
| `mkdir dir`<br>`cd dir`<br>`npm init -y` | `mkdir dir && cd dir && npm init -y` | Combines related sequential operations |
| `ls`<br>`grep "\.js$"` | `ls \| grep "\.js$"` | Pipes output of first command to second |
| `test -f file.txt`<br>`if not exists, touch file.txt` | `test -f file.txt \|\| touch file.txt` | Creates file only if it doesn't exist |
| `mkdir dir1`<br>`mkdir dir2`<br>`mkdir dir3` | `mkdir dir1 dir2 dir3` | Uses command's built-in multiple argument capability |
| `npm install pkg1`<br>`npm install pkg2` | `npm install pkg1 pkg2` | Installs multiple packages in one command |

## ğŸ“‹ MODERN ANGULAR PROJECT INITIALIZATION STANDARDS

Always use these modern approaches for Angular project creation:

| Approach | Command | Benefits | Avoids |
|----------|---------|----------|--------|
| **Modern Angular CLI** | `ng new my-app --standalone --routing --style=scss` | Standalone components + routing | Legacy NgModule system |
| **Angular w/SSR** | `ng new my-app --ssr --standalone` | Server-side rendering + modern architecture | Complex SSR setups |
| **Angular w/Material** | `ng new my-app --standalone && ng add @angular/material` | Material Design 3 + modern components | Manual Material setup |
| **Angular w/Signals** | `ng new my-app --standalone --routing` | Signals for reactive state management | Legacy RxJS patterns |

## âš ï¸ ERROR HANDLING WORKFLOW

```mermaid
sequenceDiagram
    participant User
    participant AI
    participant System
    
    AI->>System: Execute Command
    System->>AI: Return Result
    
    alt Success
        AI->>AI: Verify Expected Result
        AI->>User: Report Success
    else Error
        AI->>AI: Analyze Error Message
        AI->>AI: Identify Likely Cause
        AI->>User: Explain Error & Cause
        AI->>User: Suggest Corrective Action
        User->>AI: Approve Correction
        AI->>System: Execute Corrected Command
    end
```

## ğŸ“‹ COMMAND RESULT VERIFICATION

After command execution, verify:

```mermaid
graph TD
    Execute["Execute<br>Command"] --> Check{"Check<br>Result"}
    
    Check -->|"Success"| Verify["Verify Expected<br>Outcome"]
    Check -->|"Error"| Analyze["Analyze<br>Error"]
    
    Verify -->|"Expected"| Document["Document<br>Success"]
    Verify -->|"Unexpected"| Investigate["Investigate<br>Unexpected Result"]
    
    Analyze --> Diagnose["Diagnose<br>Error Cause"]
    Diagnose --> Correct["Propose<br>Correction"]
    
    Document & Investigate & Correct --> Next["Next Step<br>in Process"]
```

## ğŸ“ COMMAND EXECUTION CHECKLIST

```
âœ“ COMMAND EXECUTION CHECKLIST
- Command purpose clearly identified? [YES/NO]
- Appropriate balance of clarity vs. efficiency? [YES/NO]
- Platform-specific considerations addressed? [YES/NO]
- Command documented with results? [YES/NO]
- Outcome verified against expectations? [YES/NO]
- Errors properly handled (if any)? [YES/NO/NA]
- For npm/build commands: Executed from project root? [YES/NO/NA]
- For Angular projects: Using Angular CLI? [YES/NO/NA]

â†’ If all YES: Command execution complete
â†’ If any NO: Address missing elements
```

## ğŸš¨ COMMAND EXECUTION WARNINGS

Avoid these common command issues:

```mermaid
graph TD
    Warning["Command<br>Warnings"] --> W1["Excessive<br>Verbosity"]
    Warning --> W2["Insufficient<br>Error Handling"]
    Warning --> W3["Unnecessary<br>Complexity"]
    Warning --> W4["Destructive<br>Operations Without<br>Confirmation"]
    Warning --> W5["Wrong Directory<br>Execution"]
    
    W1 --> S1["Use flags to reduce<br>unnecessary output"]
    W2 --> S2["Include error handling<br>in command chains"]
    W3 --> S3["Prefer built-in<br>command capabilities"]
    W4 --> S4["Show confirmation<br>before destructive actions"]
    W5 --> S5["Verify directory before<br>npm/build commands"]
```
`````

## File: .cursor/rules/isolation_rules/Level3/archive-intermediate.mdc
`````
---
description: 
globs: archive-intermediate.mdc
alwaysApply: false
---

# LEVEL 3 ARCHIVE: INTERMEDIATE FEATURE DOCUMENTATION

> **TL;DR:** This guide outlines the archiving process for a completed Level 3 intermediate feature. The aim is to create a self-contained, easily accessible record of the feature's development lifecycle, including its planning, design decisions, implementation summary, and reflection.

## ğŸš€ Before You Start Archiving (L3 Pre-Archive Checklist)

1.  **Confirm Reflection Complete:** Verify in `graph-bank/tasks.md` that the reflection phase for this feature is marked as complete and `graph-bank/reflection-[feature_id].md` exists and is finalized.
2.  **Gather All Feature-Specific Documents:**
    * The feature plan section from `graph-bank/tasks.md` (or a copy of it).
    * All `graph-bank/creative/creative-[aspect_name].md` documents related to this feature.
    * The `graph-bank/reflection/reflection-[feature_id].md` document.
    * Key diagrams or architectural notes from `graph-bank/progress.md` if not captured elsewhere.
    * A link to the primary commit(s) or feature branch merge for the implemented code.

## ğŸ“¦ Level 3 Archiving Workflow

```mermaid
graph TD
    StartArchive["Start L3 Archiving"] -->
    VerifyReflect["1. Verify Reflection Complete<br>Check `tasks.md` & `reflection-[feature_id].md`"] -->
    GatherDocs["2. Gather All Feature Documents<br>(Plan, Creative outputs, Reflection, Code links)"] -->
    CreateArchiveFile["3. Create Feature Archive File<br>e.g., `graph-bank/archive/feature-[FeatureNameOrID]_YYYYMMDD.md`"] -->
    PopulateArchive["4. Populate Archive File<br>(Using L3 Archive Template below)"] -->
    VerifyLinks["5. Verify All Internal Links<br>in Archive File are Correct"] -->
    FinalUpdateTasks["6. Final Update to `tasks.md`<br>(Mark Feature FULLY COMPLETED & ARCHIVED, link to archive file)"] -->
    UpdateProgressFile["7. Add Final Entry to `progress.md`<br>(Note archiving & link to archive file)"] -->
    ClearActiveCtx["8. Clear `activeContext.md`<br>Reset for Next Task/Project"] -->
    ArchiveDone["L3 Archiving Complete<br>Feature successfully documented and closed."]

    style StartArchive fill:#90a4ae,stroke:#607d8b
    style ArchiveDone fill:#b0bec5,stroke:#90a4ae
````

## ğŸ“ Structure for `graph-bank/archive/feature-[FeatureNameOrID]_YYYYMMDD.md`

  * **Feature Title:** (e.g., "Archive: User Profile Feature - Avatar Upload Enhancement")
  * **Feature ID (from `tasks.md`):**
  * **Date Archived:** YYYY-MM-DD
  * **Status:** COMPLETED & ARCHIVED
  * **1. Feature Overview:**
      * Brief description of the feature and its purpose (can be extracted from `tasks.md` or `projectbrief.md`).
      * Link to the original task entry/plan in `tasks.md` (if `tasks.md` is versioned or kept historically).
  * **2. Key Requirements Met:**
      * List the main functional and non-functional requirements this feature addressed.
  * **3. Design Decisions & Creative Outputs:**
      * Summary of key design choices.
      * Direct links to all relevant `graph-bank/creative/creative-[aspect_name].md` documents.
      * Link to `graph-bank/style-guide.md` version used (if applicable).
  * **4. Implementation Summary:**
      * High-level overview of how the feature was implemented.
      * List of primary new components/modules created.
      * Key technologies or libraries utilized specifically for this feature.
      * Link to the main feature branch merge commit or primary code location/pull request.
  * **5. Testing Overview:**
      * Brief summary of the testing strategy employed for this feature (unit, integration, E2E).
      * Outcome of the testing.
  * **6. Reflection & Lessons Learned:**
      * Direct link to `graph-bank/reflection/reflection-[feature_id].md`.
      * Optionally, copy 1-2 most critical lessons directly into the archive summary.
  * **7. Known Issues or Future Considerations (Optional, if any remaining from reflection):**
      * Any minor known issues deferred.
      * Potential future enhancements related to this feature.

### Key Files and Components Affected (from tasks.md)
[Summary or direct copy of file/component checklists from the original tasks.md for this project. This provides a quick reference to the scope of changes at a component/file level.]

## ğŸ“Œ What to Emphasize in L3 Archiving

  * **Self-Contained Feature Record:** The goal is to have a go-to document in the archive that summarizes the "story" of this feature.
  * **Traceability:** Easy navigation from the archive summary to detailed planning, design, and reflection documents.
  * **Maintainability Focus:** Information that would help a future developer understand, maintain, or build upon this specific feature.
  * **Not a Full System Archive:** Unlike Level 4, this is not about archiving the entire application state, but rather the lifecycle of one significant feature.
`````

## File: .cursor/rules/isolation_rules/Level3/reflection-intermediate.mdc
`````
---
description: 
globs: reflection-intermediate.mdc
alwaysApply: false
---
# LEVEL 3 REFLECTION: INTERMEDIATE FEATURE REVIEW

> **TL;DR:** This guide structures the reflection process for a completed Level 3 intermediate feature. The focus is on a detailed review of the entire feature development lifecycle, from planning and design through implementation and testing, to extract meaningful lessons and identify improvements for future feature work.

## ğŸ” Level 3 Reflection Process

The goal is to create a comprehensive `graph-bank/reflection/reflection-[feature_id].md` document.

```mermaid
graph TD
    StartReflect["Start L3 Reflection"] -->
    ReviewDocs["1. Review All Gathered Documentation"] -->
    AssessOutcome["2. Assess Overall Feature Outcome<br>Did it meet all requirements from tasks.md? Was it successful?"] -->
    AnalyzePlan["3. Analyze Planning Phase Effectiveness<br>Was planning-comprehensive.mdc guidance effective? Was the plan accurate? Scope creep?"] -->
    AnalyzeCreative["4. Analyze Creative Phase(s) Effectiveness<br>Were design decisions sound? Did they translate well to implementation? Issues?"] -->
    AnalyzeImpl["5. Analyze Implementation Phase<br>What went well? Challenges? Bottlenecks? Adherence to design/style guide?"] -->
    AnalyzeTesting["6. Analyze Testing Phase<br>Were tests adequate? Bugs found post-release (if applicable)? Test coverage feel right?"] -->
    IdentifyLessons["7. Identify Key Lessons Learned<br>(Technical, Process, Teamwork, Estimation)"] -->
    ProposeImprovements["8. Propose Actionable Improvements<br>For future L3 feature development"] -->
    DraftReflectionDoc["9. Draft `reflection-[feature_id].md`<br>Using structured template"] -->
    FinalizeReflection["10. Finalize & Save Reflection Document"] -->
    UpdateTasksStatus["11. Update `tasks.md`<br>Mark L3 Reflection Complete"] -->
    ReflectionDone["L3 Reflection Complete<br>Ready for ARCHIVE Mode"]

    style StartReflect fill:#ba68c8,stroke:#9c27b0
    style ReflectionDone fill:#d1c4e9,stroke:#b39ddb
````

## ğŸ“ Structure for `graph-bank/reflection-[feature_id].md`

  * **Feature Name & ID:**
  * **Date of Reflection:**
  * **Brief Feature Summary:** (What was built?)
  * **1. Overall Outcome & Requirements Alignment:**
      * How well did the final feature meet the initial requirements?
      * Were there any deviations from the original scope? If so, why?
      * What is the overall assessment of the feature's success?
  * **2. Planning Phase Review:**
      * How effective was the guidance from `Level3/planning-comprehensive.mdc`?
      * Was the initial plan in `tasks.md` (component breakdown, strategy, risks) accurate and helpful?
      * What could have been planned better? Were estimations (if made) accurate?
  * **3. Creative Phase(s) Review (if applicable):**
      * Were the right aspects flagged for CREATIVE mode?
      * How effective were the design decisions made in `creative-*.md` documents?
      * Did these designs translate well into practical implementation? Any friction points?
      * Was `graph-bank/style-guide.md` clear and sufficient for UI aspects?
  * **4. Implementation Phase Review:**
      * What were the major successes during implementation? (e.g., efficient module development, good use of libraries)
      * What were the biggest challenges or roadblocks? How were they overcome?
      * Were there any unexpected technical difficulties or complexities?
      * How was adherence to the style guide and coding standards?
  * **5. Testing Phase Review:**
      * Was the testing strategy (unit, integration, E2E for the feature) effective?
      * Did testing uncover significant issues early enough?
      * What could improve the testing process for similar features?
  * **6. What Went Well? (Highlight 3-5 key positives across all phases for this feature)**
  * **7. What Could Have Been Done Differently? (Identify 3-5 areas for improvement)**
  * **8. Key Lessons Learned:**
      * **Technical:** New insights about technologies, patterns, or architecture used for this feature.
      * **Process:** Insights about the L3 workflow, communication, task management.
      * **Estimation (if applicable):** Lessons about estimating work for features of this scale.
  * **9. Actionable Improvements for Future L3 Features:** (Specific suggestions)

## ğŸ¯ Focus Areas for L3 Reflection

  * **Feature Scope Management:** Was the scope well-defined and managed?
  * **Integration Complexity:** Challenges or successes in integrating the feature with the existing application.
  * **Design-to-Implementation Fidelity:** How closely did the final product match the designs?
  * **Cross-Component Impact:** Understanding the ripple effects of the feature.
`````

## File: .cursor/rules/isolation_rules/Level3/workflow-level3.mdc
`````
---
description: Defines the standard workflow for Level 3 (Intermediate Feature) tasks, guiding through comprehensive planning, targeted creative design, structured implementation, detailed reflection, and feature-specific archiving.
globs: workflow-level3.mdc
alwaysApply: false
---

# LEVEL 3 WORKFLOW: INTERMEDIATE FEATURE DEVELOPMENT

> **TL;DR:** This document outlines a structured workflow for Level 3 (Intermediate Feature) tasks. These tasks involve developing significant new functionality that may span multiple components, requiring comprehensive planning, often necessitating targeted creative design phases, followed by systematic implementation, in-depth reflection, and feature-specific archiving. This workflow balances detailed process with efficiency for moderately complex features.

## ğŸ” LEVEL 3 WORKFLOW OVERVIEW

Level 3 tasks represent a significant development effort, building a complete feature. The workflow ensures adequate planning, design for key aspects, and methodical execution.

```mermaid
graph LR
    Init["1. INITIALIZATION<br>(VAN Mode Output)"] -->
    DocSetup["2. DOCUMENTATION SETUP"] -->
    Plan["3. FEATURE PLANNING (PLAN Mode)"] -->
    Creative["4. CREATIVE PHASES (CREATIVE Mode)"] -->
    Impl["5. IMPLEMENTATION (IMPLEMENT Mode)"] -->
    Reflect["6. REFLECTION (REFLECT Mode)"] -->
    Archive["7. ARCHIVING (ARCHIVE Mode)"]

    %% Document connections for each phase (conceptual links to mode guidance)
    Init -.-> InitDocs["Core Rules & L3 Confirmation"]
    DocSetup -.-> DocSetupDocs["Graph Bank Setup for L3"]
    Plan -.-> PlanDocs["Comprehensive Feature Plan"]
    Creative -.-> CreativeDocs["Targeted Design Documents"]
    Impl -.-> ImplDocs["Feature Implementation & Testing"]
    Reflect -.-> ReflectDocs["In-depth Feature Reflection"]
    Archive -.-> ArchiveDocs["Feature Archive Package"]

    style Init fill:#a1c4fd,stroke:#669df6
    style DocSetup fill:#b3e5fc,stroke:#81d4fa
    style Plan fill:#c8e6c9,stroke:#a5d6a7
    style Creative fill:#ffd8b2,stroke:#ffcc80
    style Impl fill:#ffcdd2,stroke:#ef9a9a
    style Reflect fill:#d1c4e9,stroke:#b39ddb
    style Archive fill:#cfd8dc,stroke:#b0bec5
````

Level 3 tasks typically involve creating a new, distinct feature or making substantial modifications to an existing one that affects multiple parts of the application.

## ğŸ”„ LEVEL TRANSITION HANDLING (Within Level 3 Workflow)

```mermaid
graph TD
    L3["Level 3 Task In Progress"] --> Assess["Continuous Assessment<br>During PLAN or early IMPLEMENT"]

    Assess --> Up["Upgrade to<br>Level 4?"]
    Assess --> Down["Downgrade to<br>Level 2?"]
    Assess --> MaintainL3["Maintain<br>Level 3"]

    Up --> L4Trigger["Triggers:<br>- Unforeseen system-wide impact<br>- Requires deep architectural changes<br>- Scope significantly larger than planned"]
    Down --> L2Trigger["Triggers:<br>- Feature simpler than anticipated<br>- Very limited component interaction<br>- No complex design decisions emerge"]

    L4Trigger --> L4Switch["Stop L3 Workflow.<br>Re-initialize task as Level 4 (VAN).<br>Preserve existing docs as input."]
    L2Trigger --> L2Switch["Adapt L3 Workflow:<br>Simplify remaining phases,<br>use L2 Reflection/Archive rules."]
    
    style Assess fill:#ffe082,stroke:#ffca28
    style Up fill:#ef9a9a,stroke:#e57373
    style Down fill:#a5d6a7,stroke:#81c784
    style MaintainL3 fill:#b3e5fc,stroke:#81d4fa
```

## ğŸ“‹ WORKFLOW PHASES

### Phase 1: INITIALIZATION (Output from VAN Mode)

This phase is largely completed in VAN mode, which identifies the task as Level 3.

  * **Input:** User request leading to an "Intermediate Feature" classification.
  * **Key Existing Files (from VAN):**
      * `graph-bank/tasks.md`: Entry created, complexity set to Level 3.
      * `graph-bank/activeContext.md`: Initial context set.
      * Relevant Core Rules loaded (e.g., `Core/graph-bank-paths.mdc`, `Core/main-optimized.mdc`).
  * **Steps within this Workflow File (Confirmation):**
    1.  Confirm task is Level 3 by checking `graph-bank/tasks.md`.
    2.  Ensure core Graph Bank structure and paths are known (AI should have internalized from `main` rule).
  * **Milestone Checkpoint:**
    ```
    âœ“ INITIALIZATION CONFIRMED (L3)
    - Task correctly identified as Level 3 in tasks.md? [YES/NO]
    - Core Graph Bank files (tasks.md, activeContext.md) accessible via canonical paths? [YES/NO]

    â†’ If all YES: Proceed to Documentation Setup for L3.
    â†’ If any NO: Revisit VAN mode or core file setup.
    ```

### Phase 2: DOCUMENTATION SETUP (L3 Specific)

Prepare the Graph Bank for a Level 3 feature.

```mermaid
graph TD
    StartDoc["Begin L3 Documentation<br>Setup"] --> LoadL3PlanTrack["Load L3 Planning & Tracking Rules<br>Level3/planning-comprehensive.mdc<br>Level3/task-tracking-intermediate.mdc"]
    LoadL3PlanTrack --> UpdateBrief["Review/Update `projectbrief.md`<br>Ensure feature aligns with overall project goals"]
    UpdateBrief --> UpdateActiveCtx["Update `activeContext.md`<br>Set focus to L3 Feature Planning"]
    UpdateActiveCtx --> PrepTaskFile["Prepare `tasks.md` for<br>Comprehensive Feature Plan sections"]
    PrepTaskFile --> DocSetupComplete["L3 Documentation<br>Setup Complete"]

    style StartDoc fill:#b3e5fc,stroke:#81d4fa
    style DocSetupComplete fill:#81d4fa,stroke:#4fc3f7
```

  * **Steps:**
    1.  Load Level 3 specific planning (`Level3/planning-comprehensive.mdc`) and task tracking (`Level3/task-tracking-intermediate.mdc`) rules.
    2.  Review `graph-bank/projectbrief.md`: Briefly note the new feature if it impacts the overall brief.
    3.  Update `graph-bank/activeContext.md`: Set current focus to "Level 3 Feature Planning: [Feature Name]".
    4.  Ensure `graph-bank/tasks.md` is ready for the detailed planning sections outlined in `Level3/planning-comprehensive.mdc`.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 DOCUMENTATION SETUP CHECKPOINT
    - L3 Planning & Tracking rules loaded? [YES/NO]
    - projectbrief.md reviewed/updated for feature context? [YES/NO]
    - activeContext.md reflects focus on L3 feature planning? [YES/NO]
    - tasks.md prepared for detailed L3 plan? [YES/NO]

    â†’ If all YES: Proceed to Feature Planning.
    â†’ If any NO: Complete documentation setup steps.
    ```

### Phase 3: FEATURE PLANNING (PLAN Mode)

Guided by `visual-maps/plan-mode-map.mdc` and using `Level3/planning-comprehensive.mdc` and `Level3/task-tracking-intermediate.mdc`.

```mermaid
graph TD
    StartPlan["Begin L3 Feature<br>Planning"] --> ReqDef["Define Detailed<br>Requirements (Functional & Non-Functional)"]
    ReqDef --> CompAnalysis["Component Analysis<br>(New & Affected Components, Interactions)"]
    CompAnalysis --> ImplStrategy["Develop Implementation<br>Strategy & High-Level Steps"]
    ImplStrategy --> DepRiskMgmt["Identify Dependencies,<br>Risks, & Mitigations"]
    DepRiskMgmt --> CreativeFlag["Flag Aspects for<br>CREATIVE Mode (UI, Arch, Algo)"]
    CreativeFlag --> UpdateTasks["Update `tasks.md` with<br>Full L3 Feature Plan"]
    UpdateTasks --> PlanComplete["L3 Feature Planning<br>Complete"]

    style StartPlan fill:#c8e6c9,stroke:#a5d6a7
    style PlanComplete fill:#a5d6a7,stroke:#81c784
```

  * **Steps:**
    1.  Define detailed functional and non-functional requirements for the feature.
    2.  Perform component analysis: identify new components to build and existing ones that will be modified. Map their interactions.
    3.  Develop an implementation strategy: outline the main steps or stages for building the feature.
    4.  Identify dependencies (technical, data, other features) and potential risks, along with mitigation ideas.
    5.  **Critical for L3:** Explicitly identify and flag parts of the feature that require CREATIVE mode (e.g., specific UI/UX challenges, new architectural patterns for the feature, complex algorithms).
    6.  Document the complete plan (requirements, components, strategy, dependencies, risks, creative flags) in `graph-bank/tasks.md` under the Level 3 feature task entry.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 FEATURE PLANNING CHECKPOINT
    - Detailed requirements documented in tasks.md? [YES/NO]
    - Component analysis (new/affected, interactions) complete? [YES/NO]
    - Implementation strategy outlined? [YES/NO]
    - Dependencies and risks documented? [YES/NO]
    - Aspects needing CREATIVE mode explicitly flagged in tasks.md? [YES/NO]
    - tasks.md comprehensively updated with the feature plan? [YES/NO]

    â†’ If all YES: Proceed to CREATIVE Phases (if flagged) or IMPLEMENTATION.
    â†’ If any NO: Complete planning steps.
    ```

### Phase 4: CREATIVE PHASES (CREATIVE Mode)

Triggered if aspects were flagged in the PLAN phase. Guided by `visual-maps/creative-mode-map.mdc` and `Phases/CreativePhase/*.mdc` rules.

```mermaid
graph TD
    StartCreative["Begin L3 Creative<br>Phases (If Needed)"] --> SelectAspect["Select Flagged Aspect<br>from `tasks.md`"]
    SelectAspect --> DesignExplore["Explore Design/Arch Options<br>(Use relevant creative-phase-*.mdc rules)"]
    DesignExplore --> DecideDocument["Make & Document Decision<br>in `creative-[aspect_name].md`"]
    DecideDocument --> UpdateTasksCreative["Update `tasks.md` with<br>Decision Summary & Link"]
    UpdateTasksCreative --> MoreAspects{"More Flagged<br>Aspects?"}
    MoreAspects -- Yes --> SelectAspect
    MoreAspects -- No --> CreativeComplete["L3 Creative Phases<br>Complete"]

    style StartCreative fill:#ffd8b2,stroke:#ffcc80
    style CreativeComplete fill:#ffcc80,stroke:#ffb74d
```

  * **Steps:**
    1.  For each aspect flagged in `tasks.md` for creative exploration:
        a.  Load relevant `creative-phase-*.mdc` rule (e.g., UI/UX, architecture).
        b.  Define the problem, explore options, analyze trade-offs.
        c.  Make a design decision and document it with rationale in a new `graph-bank/creative-[aspect_name].md` file.
        d.  Update `tasks.md`: mark the creative sub-task as complete and link to the decision document.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 CREATIVE PHASES CHECKPOINT
    - All flagged aspects from PLAN phase addressed? [YES/NO]
    - Design decisions documented in respective `graph-bank/creative-*.md` files? [YES/NO]
    - Rationale for decisions clearly stated? [YES/NO]
    - tasks.md updated to reflect completion of creative sub-tasks and links to decision docs? [YES/NO]

    â†’ If all YES: Proceed to Implementation.
    â†’ If any NO: Complete creative phase work.
    ```

### Phase 5: IMPLEMENTATION (IMPLEMENT Mode)

Guided by `visual-maps/implement-mode-map.mdc` and `Level3/implementation-L3.mdc`.

```mermaid
graph TD
    StartImpl["Begin L3 Feature<br>Implementation"] --> ReviewPlanDesign["Review Plan (`tasks.md`)<br>& Creative Docs (`creative-*.md`)"]
    ReviewPlanDesign --> SetupDevEnv["Setup Dev Environment<br>(Branch, Dependencies, Tools)"]
    SetupDevEnv --> BuildModules["Implement Feature Modules/Components<br>Iteratively or Sequentially"]
    BuildModules --> UnitIntegrationTests["Conduct Unit & Integration Tests<br>for Each Module/Feature Part"]
    UnitIntegrationTests --> StyleAdherence["Ensure Adherence to<br>`graph-bank/style-guide.md`"]
    StyleAdherence --> UpdateProgressDocs["Regularly Update `tasks.md` (sub-tasks)<br>& `progress.md` (milestones)"]
    UpdateProgressDocs --> E2EFeatureTest["End-to-End Feature Testing<br>Against Requirements"]
    E2EFeatureTest --> ImplComplete["L3 Feature Implementation<br>Complete"]

    style StartImpl fill:#ffcdd2,stroke:#ef9a9a
    style ImplComplete fill:#ef9a9a,stroke:#e57373
```

  * **Steps:**
    1.  Thoroughly review the feature plan in `graph-bank/tasks.md` and all relevant `graph-bank/creative-*.md` decision documents.
    2.  Set up the development environment (new branch, install any new dependencies, configure tools).
    3.  Implement the feature, building out modules/components as planned. Prioritize clean code and adherence to design specifications.
    4.  Perform unit tests for new logic and integration tests as components are assembled.
    5.  Ensure all UI elements strictly follow `graph-bank/style-guide.md`.
    6.  Update `graph-bank/tasks.md` with progress on sub-tasks, and `graph-bank/progress.md` with details of implemented parts, commands used, and any significant findings.
    7.  Conduct end-to-end testing of the completed feature against its requirements.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 IMPLEMENTATION CHECKPOINT
    - Feature fully implemented as per plan and creative designs? [YES/NO]
    - All UI elements adhere to `graph-bank/style-guide.md`? [YES/NO]
    - Unit and integration tests performed and passing? [YES/NO]
    - End-to-end feature testing successful? [YES/NO]
    - `tasks.md` and `progress.md` updated with implementation status? [YES/NO]

    â†’ If all YES: Proceed to Reflection.
    â†’ If any NO: Complete implementation and testing.
    ```

### Phase 6: REFLECTION (REFLECT Mode)

Guided by `visual-maps/reflect-mode-map.mdc` and `Level3/reflection-L3.mdc`.

```mermaid
graph TD
    StartReflect["Begin L3 Feature<br>Reflection"] --> ReviewCompleted["Review Completed Feature<br>(Code, Plan, Design Docs, Test Results)"]
    ReviewCompleted --> AnalyzeProcess["Analyze Development Process<br>(Successes, Challenges, Deviations)"]
    AnalyzeProcess --> DocumentLessons["Document Key Lessons Learned<br>(Technical & Process)"]
    DocumentLessons --> AssessDesignChoices["Assess Effectiveness of<br>Creative Phase Decisions"]
    AssessDesignChoices --> CreateReflectDoc["Create `reflection-[feature_id].md`"]
    CreateReflectDoc --> UpdateTasksReflect["Update `tasks.md` (Reflection Complete)"]
    UpdateTasksReflect --> ReflectComplete["L3 Feature Reflection<br>Complete"]

    style StartReflect fill:#d1c4e9,stroke:#b39ddb
    style ReflectComplete fill:#b39ddb,stroke:#9575cd
```

  * **Steps:**
    1.  Review the entire feature development lifecycle: initial requirements, plan, creative designs, implementation, and testing outcomes.
    2.  Analyze what went well, what was challenging, and any deviations from the original plan or design.
    3.  Document key lessons learned regarding technology, architecture, process, or team collaboration relevant to this feature.
    4.  Specifically assess how effective the creative phase decisions were during actual implementation.
    5.  Create the `graph-bank/reflection-[feature_id].md` document.
    6.  Update `graph-bank/tasks.md` to mark the reflection stage for the feature as complete.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 REFLECTION CHECKPOINT
    - Feature development lifecycle thoroughly reviewed? [YES/NO]
    - Successes, challenges, and lessons learned documented in `reflection-[feature_id].md`? [YES/NO]
    - Effectiveness of creative/design decisions assessed? [YES/NO]
    - `tasks.md` updated to reflect reflection completion? [YES/NO]

    â†’ If all YES: Proceed to Archiving.
    â†’ If any NO: Complete reflection documentation.
    ```

### Phase 7: ARCHIVING (ARCHIVE Mode - Highly Recommended for L3)

Guided by `visual-maps/archive-mode-map.mdc` and `Level3/archive-L3.mdc`.

```mermaid
graph TD
    StartArchive["Begin L3 Feature<br>Archiving"] --> ConsolidateDocs["Consolidate All Feature Docs<br>(Plan, Creative, Reflection, Key Progress Notes)"]
    ConsolidateDocs --> CreateArchiveSummary["Create Archive Summary Document<br>`archive/feature-[feature_id]_YYYYMMDD.md`"]
    CreateArchiveSummary --> LinkDocs["Link to Detailed Docs<br>within Archive Summary"]
    LinkDocs --> FinalUpdateTasks["Final Update to `tasks.md`<br>(Mark Feature COMPLETED & ARCHIVED)"]
    FinalUpdateTasks --> ResetActiveCtx["Clear `activeContext.md`<br>Prepare for Next Task"]
    ResetActiveCtx --> ArchiveComplete["L3 Feature Archiving<br>Complete"]

    style StartArchive fill:#cfd8dc,stroke:#b0bec5
    style ArchiveComplete fill:#b0bec5,stroke:#90a4ae
```

  * **Steps:**
    1.  Consolidate all documentation related to the feature: the plan section from `tasks.md`, all `creative-*.md` files, the `reflection-*.md` file, and relevant summaries from `progress.md`.
    2.  Create a dedicated feature archive summary document in `graph-bank/archive/feature-[feature_id]_YYYYMMDD.md`. This summary should briefly describe the feature, its purpose, key decisions, and link to the more detailed documents.
    3.  Update `graph-bank/tasks.md` to mark the entire Level 3 feature task as "COMPLETED" and "ARCHIVED," providing a link to the new archive summary.
    4.  Update `graph-bank/activeContext.md` to clear information related to the completed feature, preparing for the next task.
  * **Milestone Checkpoint:**
    ```
    âœ“ L3 ARCHIVING CHECKPOINT
    - Feature archive summary created in `graph-bank/archive/`? [YES/NO]
    - Archive summary links to all relevant planning, creative, and reflection docs? [YES/NO]
    - `tasks.md` shows the feature as COMPLETED and ARCHIVED with a link to the archive? [YES/NO]
    - `activeContext.md` cleared and ready for a new task? [YES/NO]

    â†’ If all YES: Level 3 Task Fully Completed. Suggest VAN Mode for next task.
    â†’ If any NO: Complete archiving steps.
    ```

## ğŸš¨ LEVEL 3 GOVERNANCE PRINCIPLE

Remember:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 3 tasks build significant features. Balance   â”‚
â”‚ detailed planning and targeted design with efficientâ”‚
â”‚ execution. Document key decisions and outcomes to   â”‚
â”‚ ensure the feature is understandable and maintainable.â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This ensures that intermediate features are developed with an appropriate level of rigor, bridging the gap between simple enhancements and full-scale system development.

```
```
`````

## File: .cursor/rules/isolation_rules/Level4/archive-comprehensive.mdc
`````
---
description: Comprehensive archiving approach for Level 4 Complex System tasks
globs: "**/level4/**", "**/archive/**"
alwaysApply: false
---

# COMPREHENSIVE ARCHIVING FOR LEVEL 4 TASKS

> **TL;DR:** This document outlines a comprehensive archiving approach for Level 4 (Complex System) tasks, ensuring all system knowledge, decisions, implementation details, and lessons learned are preserved for future reference and reuse.

## ğŸ” COMPREHENSIVE ARCHIVING OVERVIEW

Level 4 Complex System tasks require thorough archiving to preserve system knowledge, design decisions, implementation details, and lessons learned. This systematic archiving process ensures that the organization maintains institutional knowledge and enables future teams to understand, maintain, and extend the system.

```mermaid
flowchart TD
    classDef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Archiving<br>Process]) --> Template[Load Comprehensive<br>Archive Template]
    Template --> RefDoc[Review Reflection<br>Document]
    RefDoc --> SysDoc[Create System<br>Documentation]
    SysDoc --> ArchDoc[Document Architecture<br>and Design]
    ArchDoc --> ImplDoc[Document Implementation<br>Details]
    ImplDoc --> APIDoc[Create API<br>Documentation]
    APIDoc --> DataDoc[Document Data<br>Models and Schemas]
    DataDoc --> SecDoc[Document Security<br>Measures]
    SecDoc --> TestDoc[Document Testing<br>Procedures and Results]
    TestDoc --> DeployDoc[Document Deployment<br>Procedures]
    DeployDoc --> OpDoc[Create Operational<br>Documentation]
    OpDoc --> KnowledgeDoc[Create Knowledge<br>Transfer Documentation]
    KnowledgeDoc --> CrossRef[Create Cross-Reference<br>Documentation]
    CrossRef --> Archive[Archive All<br>Project Materials]
    Archive --> UpdateMB[Update Graph<br>Bank]
    UpdateMB --> Verification{Archiving<br>Verification}
    Verification -->|Pass| Complete([Archiving<br>Complete])
    Verification -->|Fail| Revise[Revise<br>Archiving]
    Revise --> Verification
    
    Template -.-> AT((Archive<br>Template))
    SysDoc -.-> SD((System<br>Documentation))
    ArchDoc -.-> AD((Architecture<br>Documentation))
    ImplDoc -.-> ID((Implementation<br>Documentation))
    APIDoc & DataDoc -.-> IntDoc((Interface<br>Documentation))
    TestDoc & DeployDoc & OpDoc -.-> OpDocs((Operational<br>Documentation))
    
    class Start,Complete milestone
    class Template,RefDoc,SysDoc,ArchDoc,ImplDoc,APIDoc,DataDoc,SecDoc,TestDoc,DeployDoc,OpDoc,KnowledgeDoc,CrossRef,Archive,UpdateMB step
    class Verification verification
    class AT,SD,AD,ID,IntDoc,OpDocs artifact
```

## ğŸ“‹ ARCHIVE TEMPLATE STRUCTURE

### 1. System Overview

```markdown
## System Overview

### System Purpose and Scope
[Comprehensive description of the system purpose, scope, and business context]

### System Architecture
[Summary of the architecture, including diagrams, patterns, and key design decisions]

### Key Components
- Component 1: [Description and purpose]
- Component 2: [Description and purpose]
- Component 3: [Description and purpose]

### Integration Points
[Description of all internal and external integration points]

### Technology Stack
[Comprehensive list of all technologies, frameworks, and tools used]

### Deployment Environment
[Description of the deployment environment, infrastructure, and configuration]
```

### 2. Requirements and Design Documentation

```markdown
## Requirements and Design Documentation

### Business Requirements
[Comprehensive list of business requirements with traceability]

### Functional Requirements
[Detailed functional requirements with implementation mapping]

### Non-Functional Requirements
[Non-functional requirements with implementation approaches]

### Architecture Decision Records
[Collection of all architecture decision records (ADRs)]

### Design Patterns Used
[Catalog of all design patterns with usage examples]

### Design Constraints
[Documentation of all design constraints and their impact]

### Design Alternatives Considered
[Summary of alternatives considered and reasons for final selections]
```

### 3. Implementation Documentation

```markdown
## Implementation Documentation

### Component Implementation Details
- **Component 1**:
  - **Purpose**: [Component purpose]
  - **Implementation approach**: [Implementation details]
  - **Key classes/modules**: [List with descriptions]
  - **Dependencies**: [Internal and external dependencies]
  - **Special considerations**: [Important notes]

- **Component 2**:
  - **Purpose**: [Component purpose]
  - **Implementation approach**: [Implementation details]
  - **Key classes/modules**: [List with descriptions]
  - **Dependencies**: [Internal and external dependencies]
  - **Special considerations**: [Important notes]

### Key Files and Components Affected (from tasks.md)
[Summary or direct copy of file/component checklists from the original tasks.md for this project. This provides a quick reference to the scope of changes at a component/file level.]

### Algorithms and Complex Logic
[Documentation of key algorithms and complex business logic]

### Third-Party Integrations
[Details of all third-party integrations including APIs and libraries]

### Configuration Parameters
[Complete listing of all configuration parameters and their purpose]

### Build and Packaging Details
[Documentation of build process, packaging, and artifacts]
```

### 4. API Documentation

```markdown
## API Documentation

### API Overview
[High-level overview of all APIs (internal and external)]

### API Endpoints
- **Endpoint 1**:
  - **URL/Path**: [Endpoint URL or path]
  - **Method**: [HTTP method]
  - **Purpose**: [Purpose of the endpoint]
  - **Request Format**: [Request format with examples]
  - **Response Format**: [Response format with examples]
  - **Error Codes**: [Possible error codes and meanings]
  - **Security**: [Security considerations]
  - **Rate Limits**: [Any rate limits]
  - **Notes**: [Additional notes]

- **Endpoint 2**:
  - **URL/Path**: [Endpoint URL or path]
  - **Method**: [HTTP method]
  - **Purpose**: [Purpose of the endpoint]
  - **Request Format**: [Request format with examples]
  - **Response Format**: [Response format with examples]
  - **Error Codes**: [Possible error codes and meanings]
  - **Security**: [Security considerations]
  - **Rate Limits**: [Any rate limits]
  - **Notes**: [Additional notes]

### API Authentication
[Authentication methods and implementation details]

### API Versioning Strategy
[Versioning approach and migration strategy]

### SDK or Client Libraries
[Available SDKs or client libraries with usage examples]
```

### 5. Data Model and Schema Documentation

```markdown
## Data Model and Schema Documentation

### Data Model Overview
[High-level overview of the data model with entity relationship diagrams]

### Database Schema
[Detailed database schema with tables, columns, and relationships]

### Data Dictionary
[Comprehensive data dictionary with all entities and attributes]

### Data Validation Rules
[Data validation rules and enforcement mechanisms]

### Data Migration Procedures
[Procedures for data migration and version management]

### Data Archiving Strategy
[Strategy for data archiving and retention]
```

### 6. Security Documentation

```markdown
## Security Documentation

### Security Architecture
[Overview of security architecture and design principles]

### Authentication and Authorization
[Detailed implementation of authentication and authorization]

### Data Protection Measures
[Measures implemented to protect sensitive data]

### Security Controls
[Technical and procedural security controls]

### Vulnerability Management
[Approach to vulnerability management and patching]

### Security Testing Results
[Summary of security testing and assessments]

### Compliance Considerations
[Regulatory and compliance considerations addressed]
```

### 7. Testing Documentation

```markdown
## Testing Documentation

### Test Strategy
[Overall testing strategy and approach]

### Test Cases
[Catalog of test cases with expected results]

### Automated Tests
[Documentation of automated tests and frameworks]

### Performance Test Results
[Results of performance testing with benchmarks]

### Security Test Results
[Results of security testing with findings]

### User Acceptance Testing
[UAT approach, scenarios, and results]

### Known Issues and Limitations
[Documentation of known issues and system limitations]
```

### 8. Deployment Documentation

```markdown
## Deployment Documentation

### Deployment Architecture
[Detailed deployment architecture with diagrams]

### Environment Configuration
[Configuration details for all environments]

### Deployment Procedures
[Step-by-step deployment procedures]

### Configuration Management
[Configuration management approach and tools]

### Release Management
[Release management process and procedures]

### Rollback Procedures
[Procedures for rolling back deployments]

### Monitoring and Alerting
[Monitoring setup, metrics, and alerting configuration]
```

### 9. Operational Documentation

```markdown
## Operational Documentation

### Operating Procedures
[Day-to-day operational procedures]

### Maintenance Tasks
[Routine maintenance tasks and schedules]

### Troubleshooting Guide
[Guide for troubleshooting common issues]

### Backup and Recovery
[Backup and recovery procedures]

### Disaster Recovery
[Disaster recovery plan and procedures]

### Performance Tuning
[Performance tuning guidelines and procedures]

### SLAs and Metrics
[Service level agreements and key performance metrics]
```

### 10. Knowledge Transfer Documentation

```markdown
## Knowledge Transfer Documentation

### System Overview for New Team Members
[Concise system overview for onboarding]

### Key Concepts and Terminology
[Glossary of key concepts and terminology]

### Common Tasks and Procedures
[Guide to common tasks and procedures]

### Frequently Asked Questions
[FAQs for system users and maintainers]

### Training Materials
[Training materials for different roles]

### Support Escalation Process
[Process for escalating support issues]

### Further Reading and Resources
[Additional resources and documentation]
```

### 11. Project History and Learnings

```markdown
## Project History and Learnings

### Project Timeline
[Summary of the project timeline and key milestones]

### Key Decisions and Rationale
[Record of key decisions and their rationale]

### Challenges and Solutions
[Documentation of challenges faced and how they were addressed]

### Lessons Learned
[Key lessons learned that might benefit future projects]

### Performance Against Objectives
[Assessment of performance against original objectives]

### Future Enhancements
[Potential future enhancements and extensions]
```

## ğŸ“‹ ARCHIVING PROCESS

### 1. Preparation

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    Start([Begin Archive<br>Preparation]) --> Template[Load Archive<br>Template]
    Template --> Review[Review Project<br>Documentation]
    Review --> Identify[Identify All<br>Artifacts]
    Identify --> Gather[Gather All<br>Materials]
    Gather --> Organize[Organize<br>Materials]
    Organize --> Plan[Create Archiving<br>Plan]
    Plan --> Resources[Allocate<br>Resources]
    Resources --> Complete([Preparation<br>Complete])
    
    Template -.-> AT((Archive<br>Template))
    Review -.-> ProjDocs((Project<br>Documentation))
    Identify -.-> ArtList((Artifact<br>List))
    Plan -.-> ArchPlan((Archiving<br>Plan))
    
    class Start,Complete milestone
    class Template,Review,Identify,Gather,Organize,Plan,Resources step
    class AT,ProjDocs,ArtList,ArchPlan artifact
```

**Key Preparation Steps:**
1. Load the comprehensive archive template
2. Review all project documentation including reflection document
3. Identify all artifacts to be archived
4. Gather all materials from various sources
5. Organize materials according to the archive structure
6. Create a detailed archiving plan
7. Allocate resources for the archiving process

### 2. Documentation Creation

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    Start([Begin Documentation<br>Creation]) --> System[Create System<br>Documentation]
    System --> Req[Create Requirements<br>and Design Documentation]
    Req --> Impl[Create Implementation<br>Documentation]
    Impl --> API[Create API<br>Documentation]
    API --> Data[Create Data Model<br>Documentation]
    Data --> Security[Create Security<br>Documentation]
    Security --> Test[Create Testing<br>Documentation]
    Test --> Deploy[Create Deployment<br>Documentation]
    Deploy --> Ops[Create Operational<br>Documentation]
    Ops --> Knowledge[Create Knowledge Transfer<br>Documentation]
    Knowledge --> History[Create Project History<br>Documentation]
    History --> Review[Review All<br>Documentation]
    Review --> Complete([Documentation<br>Creation Complete])
    
    System -.-> SysDoc((System<br>Documentation))
    Req -.-> ReqDoc((Requirements<br>Documentation))
    Impl -.-> ImplDoc((Implementation<br>Documentation))
    API -.-> APIDoc((API<br>Documentation))
    Data -.-> DataDoc((Data Model<br>Documentation))
    Security -.-> SecDoc((Security<br>Documentation))
    Test -.-> TestDoc((Testing<br>Documentation))
    Deploy -.-> DeployDoc((Deployment<br>Documentation))
    Ops -.-> OpsDoc((Operational<br>Documentation))
    Knowledge -.-> KnowDoc((Knowledge Transfer<br>Documentation))
    History -.-> HistDoc((Project History<br>Documentation))
    
    class Start,Complete milestone
    class System,Req,Impl,API,Data,Security,Test,Deploy,Ops,Knowledge,History,Review step
    class SysDoc,ReqDoc,ImplDoc,APIDoc,DataDoc,SecDoc,TestDoc,DeployDoc,OpsDoc,KnowDoc,HistDoc artifact
```

**Key Documentation Steps:**
1. Create comprehensive system documentation
2. Document requirements and design decisions
3. Document implementation details for all components
4. Create complete API documentation
5. Document data models and schemas
6. Document security measures and controls
7. Create thorough testing documentation
8. Document deployment procedures
9. Create operational documentation
10. Prepare knowledge transfer documentation
11. Document project history and learnings
12. Review all documentation for completeness and accuracy

### 3. Archiving and Integration

```mermaid
flowchart TD
    classDef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classDef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    Start([Begin Archiving<br>and Integration]) --> Consolidate[Consolidate All<br>Documentation]
    Consolidate --> CrossRef[Create Cross-Reference<br>Index]
    CrossRef --> Version[Version All<br>Documentation]
    Version --> Archive[Archive in<br>Repository]
    Archive --> UpdateMB[Update Graph<br>Bank]
    UpdateMB --> AccessControl[Establish Access<br>Controls]
    AccessControl --> Announce[Announce<br>Availability]
    Announce --> Verification{Archiving<br>Verification}
    Verification -->|Pass| Complete([Archiving<br>Complete])
    Verification -->|Fail| Revise[Revise<br>Archiving]
    Revise --> Verification
    
    Consolidate -.-> AllDocs((Consolidated<br>Documentation))
    CrossRef -.-> Index((Cross-Reference<br>Index))
    Archive -.-> Repo((Archive<br>Repository))
    UpdateMB -.-> MB((Updated Graph<br>Bank))
    
    class Start,Complete milestone
    class Consolidate,CrossRef,Version,Archive,UpdateMB,AccessControl,Announce,Revise step
    class Verification verification
    class AllDocs,Index,Repo,MB artifact
```

**Key Archiving Steps:**
1. Consolidate all documentation into a cohesive package
2. Create a cross-reference index linking all documentation
3. Version all documentation appropriately
4. Archive in the designated repository
5. Update Graph Bank with relevant information
6. Establish appropriate access controls
7. Announce availability to relevant stakeholders
8. Verify archiving completeness and accessibility

## ğŸ“‹ GRAPH BANK INTEGRATION

```mermaid
flowchart TD
    classDef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classDef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    Archiving[Comprehensive<br>Archiving] --> PB[projectbrief.md]
    Archiving --> PC[productContext.md]
    Archiving --> AC[activeContext.md]
    Archiving --> SP[systemPatterns.md]
    Archiving --> TC[techContext.md]
    Archiving --> P[progress.md]
    
    PB & PC & AC & SP & TC & P --> MBI[Graph Bank<br>Integration]
    MBI --> Next[Repository of<br>Knowledge]
    
    class PB,PC,AC,SP,TC,P memfile
    class Archiving,MBI,Next process
```

### Graph Bank Updates

Specific updates to make to Graph Bank files:

1. **projectbrief.md**
   - Update with final system description
   - Document completion status
   - Include links to archived documentation

2. **productContext.md**
   - Update with final business context
   - Document business value delivered
   - Include links to requirements documentation

3. **activeContext.md**
   - Update with system status (completed)
   - Document handover information
   - Include links to operational documentation

4. **systemPatterns.md**
   - Update with final architecture patterns
   - Document successful implementation patterns
   - Include links to architecture documentation

5. **techContext.md**
   - Update with final technology stack
   - Document integration points
   - Include links to technical documentation

6. **progress.md**
   - Update with final project status
   - Document completion metrics
   - Include links to project history documentation

## ğŸ“‹ ARCHIVING VERIFICATION CHECKLIST

```
âœ“ ARCHIVING VERIFICATION CHECKLIST

System Documentation
- System overview complete? [YES/NO]
- Architecture documented with diagrams? [YES/NO]
- Key components documented? [YES/NO]
- Integration points documented? [YES/NO]

Requirements and Design
- Business requirements documented? [YES/NO]
- Functional requirements documented? [YES/NO]
- Architecture decisions documented? [YES/NO]
- Design patterns documented? [YES/NO]

Implementation
- Component implementation details documented? [YES/NO]
- Key algorithms documented? [YES/NO]
- Third-party integrations documented? [YES/NO]
- Configuration parameters documented? [YES/NO]

API Documentation
- API endpoints documented? [YES/NO]
- Request/response formats documented? [YES/NO]
- Authentication documented? [YES/NO]
- Error handling documented? [YES/NO]

Data Documentation
- Data model documented? [YES/NO]
- Database schema documented? [YES/NO]
- Data dictionary provided? [YES/NO]
- Data validation rules documented? [YES/NO]

Security Documentation
- Security architecture documented? [YES/NO]
- Authentication/authorization documented? [YES/NO]
- Data protection measures documented? [YES/NO]
- Security testing results documented? [YES/NO]

Testing Documentation
- Test strategy documented? [YES/NO]
- Test cases documented? [YES/NO]
- Test results documented? [YES/NO]
- Known issues documented? [YES/NO]

Deployment Documentation
- Deployment architecture documented? [YES/NO]
- Environment configurations documented? [YES/NO]
- Deployment procedures documented? [YES/NO]
- Rollback procedures documented? [YES/NO]

Operational Documentation
- Operating procedures documented? [YES/NO]
- Troubleshooting guide provided? [YES/NO]
- Backup and recovery documented? [YES/NO]
- Monitoring configuration documented? [YES/NO]

Knowledge Transfer
- Onboarding overview provided? [YES/NO]
- Key concepts documented? [YES/NO]
- Common tasks documented? [YES/NO]
- FAQs provided? [YES/NO]

Project History
- Project timeline documented? [YES/NO]
- Key decisions documented? [YES/NO]
- Lessons learned documented? [YES/NO]
- Future enhancements suggested? [YES/NO]

Graph Bank Integration
- All Graph Bank files updated? [YES/NO]
- Cross-references created? [YES/NO]
- Documentation properly versioned? [YES/NO]
- Archive repository established? [YES/NO]
```

## ğŸ“‹ MINIMAL MODE ARCHIVING FORMAT

For situations requiring a more compact archiving approach:

```markdown
## Level 4 Task Archive: [System Name]

### System Summary
- **Purpose**: [Brief description of system purpose]
- **Key Components**: [List of key components]
- **Architecture**: [Brief architecture description with diagram]

### Implementation Summary
- **Technology Stack**: [Key technologies used]
- **Key Modules**: [Brief description of important modules]
- **Integration Points**: [List of major integration points]

### Critical Documentation
- **API Documentation**: [Link or brief summary]
- **Data Model**: [Link or brief description]
- **Deployment Configuration**: [Link or brief description]
- **Security Measures**: [Link or brief summary]

### Operational Information
- **Deployment Procedure**: [Link or brief description]
- **Key Configuration Parameters**: [List of important parameters]
- **Monitoring Setup**: [Brief monitoring details]
- **Common Issues**: [List of common issues with solutions]

### Repository Information
- **Code Repository**: [Link to repository]
- **Documentation Repository**: [Link to documentation]
- **Build Artifacts**: [Link to build artifacts]

### Knowledge Transfer Summary
- **Key Contacts**: [List of key people with knowledge]
- **Critical Knowledge Areas**: [Areas requiring special expertise]
- **Training Resources**: [Links to training materials]

### Graph Bank Links
- [Links to updated Graph Bank files]
```

## ğŸš¨ ARCHIVING ENFORCEMENT PRINCIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPREHENSIVE ARCHIVING IS MANDATORY for Level 4     â”‚
â”‚ tasks. No complex system is considered complete      â”‚
â”‚ until comprehensive archiving is finished and        â”‚
â”‚ verified.                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
`````

## File: .cursor/rules/isolation_rules/Modes/creative-mode-detailed.mdc
`````
---
description: Detailed CREATIVE mode instructions for comprehensive design decisions and architecture exploration
globs: "**/creative-mode-detailed*/**"
alwaysApply: false
---

# CREATIVE MODE - è©³ç´°è¨­è¨ˆæ±ºç­–æŒ‡ä»¤

> **TL;DR:** æä¾›è©³ç´°çš„è¨­è¨ˆæ±ºç­–æµç¨‹ï¼ŒåŒ…å«æ¶æ§‹è¨­è¨ˆã€ç®—æ³•è¨­è¨ˆå’Œ UI/UX è¨­è¨ˆçš„å®Œæ•´æ¢ç´¢éç¨‹ã€‚

```mermaid
graph TD
    Start["ğŸš€ START CREATIVE MODE"] --> ReadTasks["ğŸ“š Read tasks.md &<br>implementation-plan.md<br>.cursor/rules/isolation_rules/main.mdc"]
    
    %% Initialization
    ReadTasks --> Identify["ğŸ” Identify Components<br>Requiring Creative Phases<br>.cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc"]
    Identify --> Prioritize["ğŸ“Š Prioritize Components<br>for Creative Work"]
    
    %% Creative Phase Type Determination
    Prioritize --> TypeCheck{"ğŸ¨ Determine<br>Creative Phase<br>Type"}
    TypeCheck -->|"Architecture"| ArchDesign["ğŸ—ï¸ ARCHITECTURE DESIGN<br>.cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc"]
    TypeCheck -->|"Algorithm"| AlgoDesign["âš™ï¸ ALGORITHM DESIGN<br>.cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc"]
    TypeCheck -->|"UI/UX"| UIDesign["ğŸ¨ UI/UX DESIGN<br>.cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc"]
    
    %% Architecture Design Process
    ArchDesign --> ArchRequirements["ğŸ“‹ Define Requirements<br>& Constraints"]
    ArchRequirements --> ArchOptions["ğŸ”„ Generate Multiple<br>Architecture Options"]
    ArchOptions --> ArchAnalysis["âš–ï¸ Analyze Pros/Cons<br>of Each Option"]
    ArchAnalysis --> ArchSelect["âœ… Select & Justify<br>Recommended Approach"]
    ArchSelect --> ArchGuidelines["ğŸ“ Document Implementation<br>Guidelines"]
    ArchGuidelines --> ArchVerify["âœ“ Verify Against<br>Requirements"]
    
    %% Algorithm Design Process
    AlgoDesign --> AlgoRequirements["ğŸ“‹ Define Requirements<br>& Constraints"]
    AlgoRequirements --> AlgoOptions["ğŸ”„ Generate Multiple<br>Algorithm Options"]
    AlgoOptions --> AlgoAnalysis["âš–ï¸ Analyze Pros/Cons<br>& Complexity"]
    AlgoAnalysis --> AlgoSelect["âœ… Select & Justify<br>Recommended Approach"]
    AlgoSelect --> AlgoGuidelines["ğŸ“ Document Implementation<br>Guidelines"]
    AlgoGuidelines --> AlgoVerify["âœ“ Verify Against<br>Requirements"]
    
    %% UI/UX Design Process
    UIDesign --> UIRequirements["ğŸ“‹ Define Requirements<br>& Constraints"]
    UIRequirements --> UIOptions["ğŸ”„ Generate Multiple<br>Design Options"]
    UIOptions --> UIAnalysis["âš–ï¸ Analyze Pros/Cons<br>of Each Option"]
    UIAnalysis --> UISelect["âœ… Select & Justify<br>Recommended Approach"]
    UISelect --> UIGuidelines["ğŸ“ Document Implementation<br>Guidelines"]
    UIGuidelines --> UIVerify["âœ“ Verify Against<br>Requirements"]
    
    %% Verification & Update
    ArchVerify & AlgoVerify & UIVerify --> UpdateMemoryBank["ğŸ“ Update Memory Bank<br>with Design Decisions"]
    
    %% Check for More Components
    UpdateMemoryBank --> MoreComponents{"ğŸ“‹ More<br>Components?"}
    MoreComponents -->|"Yes"| TypeCheck
    MoreComponents -->|"No"| VerifyAll["âœ… Verify All Components<br>Have Completed<br>Creative Phases"]
    
    %% Completion & Transition
    VerifyAll --> UpdateTasks["ğŸ“ Update tasks.md<br>with Status"]
    UpdateTasks --> UpdatePlan["ğŸ“‹ Update Implementation<br>Plan with Decisions"]
    UpdatePlan --> Transition["â­ï¸ NEXT MODE:<br>IMPLEMENT MODE"]
    
    %% Creative Phase Template
    TypeCheck -.-> Template["ğŸ¨ CREATIVE PHASE TEMPLATE:<br>- ğŸ¨ğŸ¨ğŸ¨ ENTERING CREATIVE PHASE<br>- Component Description<br>- Requirements & Constraints<br>- Options Analysis<br>- Recommended Approach<br>- Implementation Guidelines<br>- Verification Checkpoint<br>- ğŸ¨ğŸ¨ğŸ¨ EXITING CREATIVE PHASE"]
    
    %% Validation Options
    Start -.-> Validation["ğŸ” VALIDATION OPTIONS:<br>- Review flagged components<br>- Demonstrate creative process<br>- Create design options<br>- Show verification<br>- Generate guidelines<br>- Show mode transition"]
    
    %% Styling
    style Start fill:#d971ff,stroke:#a33bc2,color:white
    style ReadTasks fill:#e6b3ff,stroke:#d971ff,color:black
    style Identify fill:#80bfff,stroke:#4da6ff,color:black
    style Prioritize fill:#80bfff,stroke:#4da6ff,color:black
    style TypeCheck fill:#d94dbb,stroke:#a3378a,color:white
    style ArchDesign fill:#4da6ff,stroke:#0066cc,color:white
    style AlgoDesign fill:#4dbb5f,stroke:#36873f,color:white
    style UIDesign fill:#ffa64d,stroke:#cc7a30,color:white
    style MoreComponents fill:#d94dbb,stroke:#a3378a,color:white
    style VerifyAll fill:#4dbbbb,stroke:#368787,color:white
    style Transition fill:#5fd94d,stroke:#3da336,color:white
```

## IMPLEMENTATION STEPS

### Step 1: READ TASKS & MAIN RULE
```
read_file({
  target_file: "tasks.md",
  should_read_entire_file: true
})

read_file({
  target_file: "implementation-plan.md",
  should_read_entire_file: true
})

read_file({
  target_file: ".cursor/rules/isolation_rules/main.mdc",
  should_read_entire_file: true
})
```

### Step 2: LOAD CREATIVE MODE MAP
```
read_file({
  target_file: ".cursor/rules/isolation_rules/visual-maps/creative-mode-map.mdc",
  should_read_entire_file: true
})
```

### Step 3: LOAD CREATIVE PHASE REFERENCES
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Core/creative-phase-enforcement.mdc",
  should_read_entire_file: true
})

read_file({
  target_file: ".cursor/rules/isolation_rules/Core/creative-phase-metrics.mdc",
  should_read_entire_file: true
})
```

### Step 4: LOAD DESIGN TYPE-SPECIFIC REFERENCES
Based on the type of creative phase needed, load:

#### For Architecture Design:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Phases/CreativePhase/creative-phase-architecture.mdc",
  should_read_entire_file: true
})
```

#### For Algorithm Design:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Phases/CreativePhase/creative-phase-algorithm.mdc",
  should_read_entire_file: true
})
```

#### For UI/UX Design:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Phases/CreativePhase/creative-phase-uiux.mdc",
  should_read_entire_file: true
})
```

## CREATIVE PHASE APPROACH

Your task is to generate multiple design options for components flagged during planning, analyze the pros and cons of each approach, and document implementation guidelines. Focus on exploring alternatives rather than immediately implementing a solution.

### Architecture Design Process

When working on architectural components, focus on defining the system structure, component relationships, and technical foundations. Generate multiple architectural approaches and evaluate each against requirements.

```mermaid
graph TD
    AD["ğŸ—ï¸ ARCHITECTURE DESIGN"] --> Req["Define requirements & constraints"]
    Req --> Options["Generate 2-4 architecture options"]
    Options --> Pros["Document pros of each option"]
    Options --> Cons["Document cons of each option"]
    Pros & Cons --> Eval["Evaluate options against criteria"]
    Eval --> Select["Select and justify recommendation"]
    Select --> Doc["Document implementation guidelines"]
    
    style AD fill:#4da6ff,stroke:#0066cc,color:white
    style Req fill:#cce6ff,stroke:#80bfff,color:black
    style Options fill:#cce6ff,stroke:#80bfff,color:black
    style Pros fill:#cce6ff,stroke:#80bfff,color:black
    style Cons fill:#cce6ff,stroke:#80bfff,color:black
    style Eval fill:#cce6ff,stroke:#80bfff,color:black
    style Select fill:#cce6ff,stroke:#80bfff,color:black
    style Doc fill:#cce6ff,stroke:#80bfff,color:black
```

### Algorithm Design Process

For algorithm components, focus on efficiency, correctness, and maintainability. Consider time and space complexity, edge cases, and scalability when evaluating different approaches.

```mermaid
graph TD
    ALGO["âš™ï¸ ALGORITHM DESIGN"] --> Req["Define requirements & constraints"]
    Req --> Options["Generate 2-4 algorithm options"]
    Options --> Analysis["Analyze each option:"]
    Analysis --> TC["Time complexity"]
    Analysis --> SC["Space complexity"]
    Analysis --> Edge["Edge case handling"]
    Analysis --> Scale["Scalability"]
    TC & SC & Edge & Scale --> Select["Select and justify recommendation"]
    Select --> Doc["Document implementation guidelines"]
    
    style ALGO fill:#4dbb5f,stroke:#36873f,color:white
    style Req fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Options fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Analysis fill:#d6f5dd,stroke:#a3e0ae,color:black
    style TC fill:#d6f5dd,stroke:#a3e0ae,color:black
    style SC fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Edge fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Scale fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Select fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Doc fill:#d6f5dd,stroke:#a3e0ae,color:black
```

### UI/UX Design Process

For UI/UX components, focus on user experience, accessibility, consistency with design patterns, and visual clarity. Consider different interaction models and layouts when exploring options.

```mermaid
graph TD
    UIUX["ğŸ¨ UI/UX DESIGN"] --> Req["Define requirements & user needs"]
    Req --> Options["Generate 2-4 design options"]
    Options --> Analysis["Analyze each option:"]
    Analysis --> UX["User experience"]
    Analysis --> A11y["Accessibility"]
    Analysis --> Cons["Consistency with patterns"]
    Analysis --> Comp["Component reusability"]
    UX & A11y & Cons & Comp --> Select["Select and justify recommendation"]
    Select --> Doc["Document implementation guidelines"]
    
    style UIUX fill:#ffa64d,stroke:#cc7a30,color:white
    style Req fill:#ffe6cc,stroke:#ffa64d,color:black
    style Options fill:#ffe6cc,stroke:#ffa64d,color:black
    style Analysis fill:#ffe6cc,stroke:#ffa64d,color:black
    style UX fill:#ffe6cc,stroke:#ffa64d,color:black
    style A11y fill:#ffe6cc,stroke:#ffa64d,color:black
    style Cons fill:#ffe6cc,stroke:#ffa64d,color:black
    style Comp fill:#ffe6cc,stroke:#ffa64d,color:black
    style Select fill:#ffe6cc,stroke:#ffa64d,color:black
    style Doc fill:#ffe6cc,stroke:#ffa64d,color:black
```

## CREATIVE PHASE DOCUMENTATION

Document each creative phase with clear entry and exit markers. Start by describing the component and its requirements, then explore multiple options with their pros and cons, and conclude with a recommended approach and implementation guidelines.

```mermaid
graph TD
    CPD["ğŸ¨ CREATIVE PHASE DOCUMENTATION"] --> Entry["ğŸ¨ğŸ¨ğŸ¨ ENTERING CREATIVE PHASE: [TYPE]"]
    Entry --> Desc["Component Description<br>What is this component? What does it do?"]
    Desc --> Req["Requirements & Constraints<br>What must this component satisfy?"]
    Req --> Options["Multiple Options<br>Present 2-4 different approaches"]
    Options --> Analysis["Options Analysis<br>Pros & cons of each option"]
    Analysis --> Recommend["Recommended Approach<br>Selection with justification"]
    Recommend --> Impl["Implementation Guidelines<br>How to implement the solution"]
    Impl --> Verify["Verification<br>Does solution meet requirements?"] 
    Verify --> Exit["ğŸ¨ğŸ¨ğŸ¨ EXITING CREATIVE PHASE"]
    
    style CPD fill:#d971ff,stroke:#a33bc2,color:white
    style Entry fill:#f5d9f0,stroke:#e699d9,color:black
    style Desc fill:#f5d9f0,stroke:#e699d9,color:black
    style Req fill:#f5d9f0,stroke:#e699d9,color:black
    style Options fill:#f5d9f0,stroke:#e699d9,color:black
    style Analysis fill:#f5d9f0,stroke:#e699d9,color:black
    style Recommend fill:#f5d9f0,stroke:#e699d9,color:black
    style Impl fill:#f5d9f0,stroke:#e699d9,color:black
    style Verify fill:#f5d9f0,stroke:#e699d9,color:black
    style Exit fill:#f5d9f0,stroke:#e699d9,color:black
```

## VERIFICATION

```mermaid
graph TD
    V["âœ… VERIFICATION CHECKLIST"] --> C["All flagged components addressed?"]
    V --> O["Multiple options explored for each component?"]
    V --> A["Pros and cons analyzed for each option?"]
    V --> R["Recommendations justified against requirements?"]
    V --> I["Implementation guidelines provided?"]
    V --> D["Design decisions documented in Memory Bank?"]
    
    C & O & A & R & I & D --> Decision{"All Verified?"}
    Decision -->|"Yes"| Complete["Ready for IMPLEMENT mode"]
    Decision -->|"No"| Fix["Complete missing items"]
    
    style V fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#ffa64d,stroke:#cc7a30,color:white
    style Complete fill:#5fd94d,stroke:#3da336,color:white
    style Fix fill:#ff5555,stroke:#cc0000,color:white
```

Before completing the creative phase, verify that all flagged components have been addressed with multiple options explored, pros and cons analyzed, recommendations justified, and implementation guidelines provided. Update tasks.md with the design decisions and prepare for the implementation phase.
`````

## File: .cursor/rules/isolation_rules/Modes/implement-mode-detailed.mdc
`````
---
description: Detailed IMPLEMENT mode instructions for comprehensive code implementation and build processes
globs: "**/implement-mode-detailed*/**"
alwaysApply: false
---

# IMPLEMENT MODE - è©³ç´°ä»£ç¢¼å¯¦æ–½æŒ‡ä»¤

> **TL;DR:** æä¾›è©³ç´°çš„ä»£ç¢¼å¯¦æ–½æµç¨‹ï¼ŒåŒ…å«åˆ†éšæ®µå¯¦æ–½ã€å‘½ä»¤åŸ·è¡Œå’Œæ¸¬è©¦é©—è­‰çš„å®Œæ•´éç¨‹ã€‚

```mermaid
graph TD
    Start["ğŸš€ START BUILD MODE"] --> ReadDocs["ğŸ“š Read Reference Documents<br>.cursor/rules/isolation_rules/Core/command-execution.mdc"]
    
    %% Initialization
    ReadDocs --> CheckLevel{"ğŸ§© Determine<br>Complexity Level<br>from tasks.md"}
    
    %% Level 1 Implementation
    CheckLevel -->|"Level 1<br>Quick Bug Fix"| L1Process["ğŸ”§ LEVEL 1 PROCESS<br>.cursor/rules/isolation_rules/visual-maps/implement-mode-map.mdc"]
    L1Process --> L1Review["ğŸ” Review Bug<br>Report"]
    L1Review --> L1Examine["ğŸ‘ï¸ Examine<br>Relevant Code"]
    L1Examine --> L1Fix["âš’ï¸ Implement<br>Targeted Fix"]
    L1Fix --> L1Test["âœ… Test<br>Fix"]
    L1Test --> L1Update["ğŸ“ Update<br>tasks.md"]
    
    %% Level 2 Implementation
    CheckLevel -->|"Level 2<br>Simple Enhancement"| L2Process["ğŸ”¨ LEVEL 2 PROCESS<br>.cursor/rules/isolation_rules/visual-maps/implement-mode-map.mdc"]
    L2Process --> L2Review["ğŸ” Review Build<br>Plan"]
    L2Review --> L2Examine["ğŸ‘ï¸ Examine Relevant<br>Code Areas"]
    L2Examine --> L2Implement["âš’ï¸ Implement Changes<br>Sequentially"]
    L2Implement --> L2Test["âœ… Test<br>Changes"]
    L2Test --> L2Update["ğŸ“ Update<br>tasks.md"]
    
    %% Level 3-4 Implementation
    CheckLevel -->|"Level 3-4<br>Feature/System"| L34Process["ğŸ—ï¸ LEVEL 3-4 PROCESS<br>.cursor/rules/isolation_rules/visual-maps/implement-mode-map.mdc"]
    L34Process --> L34Review["ğŸ” Review Plan &<br>Creative Decisions"]
    L34Review --> L34Phase{"ğŸ“‹ Select<br>Build<br>Phase"}
    
    %% Implementation Phases
    L34Phase --> L34Phase1["âš’ï¸ Phase 1<br>Build"]
    L34Phase1 --> L34Test1["âœ… Test<br>Phase 1"]
    L34Test1 --> L34Document1["ğŸ“ Document<br>Phase 1"]
    L34Document1 --> L34Next1{"ğŸ“‹ Next<br>Phase?"}
    L34Next1 -->|"Yes"| L34Phase
    
    L34Next1 -->|"No"| L34Integration["ğŸ”„ Integration<br>Testing"]
    L34Integration --> L34Document["ğŸ“ Document<br>Integration Points"]
    L34Document --> L34Update["ğŸ“ Update<br>tasks.md"]
    
    %% Command Execution
    L1Fix & L2Implement & L34Phase1 --> CommandExec["âš™ï¸ COMMAND EXECUTION<br>.cursor/rules/isolation_rules/Core/command-execution.mdc"]
    CommandExec --> DocCommands["ğŸ“ Document Commands<br>& Results"]
    
    %% Implementation Documentation
    DocCommands -.-> DocTemplate["ğŸ“‹ BUILD DOC:<br>- Code Changes<br>- Commands Executed<br>- Results/Observations<br>- Status"]
    
    %% Verification & Completion
    L1Update & L2Update & L34Update --> VerifyImpl["âœ… Verify Implementation<br>Completeness"]
    VerifyImpl --> UpdateProgress["ğŸ“ˆ Update progress.md<br>with Implementation Status"]
    UpdateProgress --> Transition["â­ï¸ NEXT MODE:<br>REFLECT MODE"]
    
    %% Error Handling
    Error["âš ï¸ ERROR<br>DETECTION"] -->|"Build Error"| DebugBuild["ğŸ” Debug Build<br>Issues"]
    Error -->|"Test Failure"| DebugTest["ğŸ” Debug Test<br>Failures"]
    Error -->|"Integration Issue"| DebugIntegration["ğŸ” Debug Integration<br>Problems"]
    
    DebugBuild --> RetryBuild["ğŸ”„ Retry Build<br>Process"]
    DebugTest --> RetryTest["ğŸ”„ Retry Test<br>Process"]
    DebugIntegration --> RetryIntegration["ğŸ”„ Retry Integration<br>Process"]
    
    RetryBuild & RetryTest & RetryIntegration --> CommandExec
    
    %% Styling
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ReadDocs fill:#80bfff,stroke:#4da6ff,color:black
    style CheckLevel fill:#d94dbb,stroke:#a3378a,color:white
    style L1Process fill:#4dbb5f,stroke:#36873f,color:white
    style L2Process fill:#ffa64d,stroke:#cc7a30,color:white
    style L34Process fill:#ff5555,stroke:#cc0000,color:white
    style CommandExec fill:#4dbbbb,stroke:#368787,color:white
    style VerifyImpl fill:#d971ff,stroke:#a33bc2,color:white
    style Transition fill:#5fd94d,stroke:#3da336,color:white
    style Error fill:#ff5555,stroke:#cc0000,color:white
```

## IMPLEMENTATION STEPS

### Step 1: READ REFERENCE DOCUMENTS
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Core/command-execution.mdc",
  should_read_entire_file: true
})

read_file({
  target_file: "tasks.md",
  should_read_entire_file: true
})
```

### Step 2: LOAD IMPLEMENT MODE MAP
```
read_file({
  target_file: ".cursor/rules/isolation_rules/visual-maps/implement-mode-map.mdc",
  should_read_entire_file: true
})
```

### Step 3: LOAD COMPLEXITY-SPECIFIC IMPLEMENTATION REFERENCES
Based on complexity level determined from tasks.md, load one of:

#### For Level 1:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level1/workflow-level1.mdc",
  should_read_entire_file: true
})
```

#### For Level 2:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level2/workflow-level2.mdc",
  should_read_entire_file: true
})
```

#### For Level 3:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level3/workflow-level3.mdc",
  should_read_entire_file: true
})
```

#### For Level 4:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level4/workflow-level4.mdc",
  should_read_entire_file: true
})
```

## IMPLEMENTATION APPROACH

Your task is to build the planned changes following the implementation plan and creative phase decisions. Focus on systematic implementation, proper testing, and comprehensive documentation.

### Level 1: Quick Bug Fix Implementation

For Level 1 tasks, focus on targeted fixes with minimal impact. Review the bug report, examine relevant code, implement the fix, and test thoroughly.

```mermaid
graph TD
    L1["ğŸ”§ LEVEL 1 IMPLEMENTATION"] --> Review["Review bug report"]
    Review --> Examine["Examine relevant code"]
    Examine --> Fix["Implement targeted fix"]
    Fix --> Test["Test fix thoroughly"]
    Test --> Update["Update tasks.md"]
    
    style L1 fill:#4dbb5f,stroke:#36873f,color:white
    style Review fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Examine fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Fix fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Test fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Update fill:#d6f5dd,stroke:#a3e0ae,color:black
```

### Level 2: Simple Enhancement Implementation

For Level 2 tasks, implement changes sequentially following the build plan. Review the plan, examine relevant code areas, implement changes, and test thoroughly.

```mermaid
graph TD
    L2["ğŸ”¨ LEVEL 2 IMPLEMENTATION"] --> Review["Review build plan"]
    Review --> Examine["Examine relevant code areas"]
    Examine --> Implement["Implement changes sequentially"]
    Implement --> Test["Test changes"]
    Test --> Update["Update tasks.md"]
    
    style L2 fill:#ffa64d,stroke:#cc7a30,color:white
    style Review fill:#ffe6cc,stroke:#ffa64d,color:black
    style Examine fill:#ffe6cc,stroke:#ffa64d,color:black
    style Implement fill:#ffe6cc,stroke:#ffa64d,color:black
    style Test fill:#ffe6cc,stroke:#ffa64d,color:black
    style Update fill:#ffe6cc,stroke:#ffa64d,color:black
```

### Level 3-4: Feature/System Implementation

For Level 3-4 tasks, implement in phases following the comprehensive plan and creative decisions. Review the plan and creative decisions, select build phases, implement each phase, test, and document.

```mermaid
graph TD
    L34["ğŸ—ï¸ LEVEL 3-4 IMPLEMENTATION"] --> Review["Review plan & creative decisions"]
    Review --> Select["Select build phase"]
    Select --> Implement["Implement phase"]
    Implement --> Test["Test phase"]
    Test --> Document["Document phase"]
    Document --> Next{"Next phase?"}
    Next -->|"Yes"| Select
    Next -->|"No"| Integration["Integration testing"]
    Integration --> Final["Update tasks.md"]
    
    style L34 fill:#ff5555,stroke:#cc0000,color:white
    style Review fill:#ffcccc,stroke:#ffaaaa,color:black
    style Select fill:#ffcccc,stroke:#ffaaaa,color:black
    style Implement fill:#ffcccc,stroke:#ffaaaa,color:black
    style Test fill:#ffcccc,stroke:#ffaaaa,color:black
    style Document fill:#ffcccc,stroke:#ffaaaa,color:black
    style Next fill:#ffcccc,stroke:#ffaaaa,color:black
    style Integration fill:#ffcccc,stroke:#ffaaaa,color:black
    style Final fill:#ffcccc,stroke:#ffaaaa,color:black
```

## COMMAND EXECUTION GUIDELINES

Follow the command execution guidelines from the Core rules:

### Command Documentation Template
```
## Command Execution: [Purpose]

### Command
```
[actual command or chain]
```

### Result
```
[command output]
```

### Effect
[Brief description of what changed in the system]

### Next Steps
[What needs to be done next]
```

### Platform-Specific Considerations
- **Windows**: Use PowerShell commands and path separators
- **Unix/Linux/Mac**: Use bash commands and forward slashes
- **Cross-platform**: Use appropriate command chaining

## IMPLEMENTATION DOCUMENTATION

Document each implementation phase with:

### Build Documentation Template
```
# BUILD DOCUMENTATION: [Phase Name]

## Code Changes
- [List of files modified]
- [Summary of changes made]
- [Key implementation details]

## Commands Executed
- [List of commands run]
- [Command results and outputs]
- [Any errors encountered]

## Results/Observations
- [What worked well]
- [Issues encountered]
- [Performance observations]

## Status
- [Current implementation status]
- [Next steps required]
- [Dependencies for next phase]
```

## VERIFICATION

```mermaid
graph TD
    V["âœ… VERIFICATION CHECKLIST"] --> C["All planned changes implemented?"]
    V --> T["All tests passing?"]
    V --> D["Implementation documented?"]
    V --> S["Status updated in tasks.md?"]
    
    C & T & D & S --> Decision{"All Verified?"}
    Decision -->|"Yes"| Complete["Ready for REFLECT mode"]
    Decision -->|"No"| Fix["Complete missing items"]
    
    style V fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#ffa64d,stroke:#cc7a30,color:white
    style Complete fill:#5fd94d,stroke:#3da336,color:white
    style Fix fill:#ff5555,stroke:#cc0000,color:white
```

Before completing the implementation phase, verify that all planned changes have been implemented, tests are passing, implementation is documented, and status is updated in tasks.md. Prepare for the reflection phase.
`````

## File: .cursor/rules/isolation_rules/Modes/plan-mode-detailed.mdc
`````
---
description: Detailed PLAN mode instructions for comprehensive task planning and implementation strategy
globs: "**/plan-mode-detailed*/**"
alwaysApply: false
---

# PLAN MODE - è©³ç´°ä»»å‹™è¦åŠƒæŒ‡ä»¤

> **TL;DR:** æä¾›è©³ç´°çš„ä»»å‹™è¦åŠƒæµç¨‹ï¼ŒåŒ…å«è¤‡é›œåº¦åˆ†æã€å¯¦æ–½è¨ˆåŠƒå»ºç«‹å’Œå‰µæ„éšæ®µè­˜åˆ¥ã€‚

```mermaid
graph TD
    Start["ğŸš€ START PLANNING"] --> ReadTasks["ğŸ“š Read tasks.md<br>.cursor/rules/isolation_rules/main.mdc"]
    
    %% Complexity Level Determination
    ReadTasks --> CheckLevel{"ğŸ§© Determine<br>Complexity Level"}
    CheckLevel -->|"Level 2"| Level2["ğŸ“ LEVEL 2 PLANNING<br>.cursor/rules/isolation_rules/visual-maps/plan-mode-map.mdc"]
    CheckLevel -->|"Level 3"| Level3["ğŸ“‹ LEVEL 3 PLANNING<br>.cursor/rules/isolation_rules/visual-maps/plan-mode-map.mdc"]
    CheckLevel -->|"Level 4"| Level4["ğŸ“Š LEVEL 4 PLANNING<br>.cursor/rules/isolation_rules/visual-maps/plan-mode-map.mdc"]
    
    %% Level 2 Planning
    Level2 --> L2Review["ğŸ” Review Code<br>Structure"]
    L2Review --> L2Document["ğŸ“„ Document<br>Planned Changes"]
    L2Document --> L2Challenges["âš ï¸ Identify<br>Challenges"]
    L2Challenges --> L2Checklist["âœ… Create Task<br>Checklist"]
    L2Checklist --> L2Update["ğŸ“ Update tasks.md<br>with Plan"]
    L2Update --> L2Verify["âœ“ Verify Plan<br>Completeness"]
    
    %% Level 3 Planning
    Level3 --> L3Review["ğŸ” Review Codebase<br>Structure"]
    L3Review --> L3Requirements["ğŸ“‹ Document Detailed<br>Requirements"]
    L3Requirements --> L3Components["ğŸ§© Identify Affected<br>Components"]
    L3Components --> L3Plan["ğŸ“ Create Comprehensive<br>Implementation Plan"]
    L3Plan --> L3Challenges["âš ï¸ Document Challenges<br>& Solutions"]
    L3Challenges --> L3Update["ğŸ“ Update tasks.md<br>with Plan"]
    L3Update --> L3Flag["ğŸ¨ Flag Components<br>Requiring Creative"]
    L3Flag --> L3Verify["âœ“ Verify Plan<br>Completeness"]
    
    %% Level 4 Planning
    Level4 --> L4Analysis["ğŸ” Codebase Structure<br>Analysis"]
    L4Analysis --> L4Requirements["ğŸ“‹ Document Comprehensive<br>Requirements"]
    L4Requirements --> L4Diagrams["ğŸ“Š Create Architectural<br>Diagrams"]
    L4Diagrams --> L4Subsystems["ğŸ§© Identify Affected<br>Subsystems"]
    L4Subsystems --> L4Dependencies["ğŸ”„ Document Dependencies<br>& Integration Points"]
    L4Dependencies --> L4Plan["ğŸ“ Create Phased<br>Implementation Plan"]
    L4Plan --> L4Update["ğŸ“ Update tasks.md<br>with Plan"]
    L4Update --> L4Flag["ğŸ¨ Flag Components<br>Requiring Creative"]
    L4Flag --> L4Verify["âœ“ Verify Plan<br>Completeness"]
    
    %% Verification & Completion
    L2Verify & L3Verify & L4Verify --> CheckCreative{"ğŸ¨ Creative<br>Phases<br>Required?"}
    
    %% Mode Transition
    CheckCreative -->|"Yes"| RecCreative["â­ï¸ NEXT MODE:<br>CREATIVE MODE"]
    CheckCreative -->|"No"| RecImplement["â­ï¸ NEXT MODE:<br>IMPLEMENT MODE"]
    
    %% Template Selection
    L2Update -.- Template2["TEMPLATE L2:<br>- Overview<br>- Files to Modify<br>- Implementation Steps<br>- Potential Challenges"]
    L3Update & L4Update -.- TemplateAdv["TEMPLATE L3-4:<br>- Requirements Analysis<br>- Components Affected<br>- Architecture Considerations<br>- Implementation Strategy<br>- Detailed Steps<br>- Dependencies<br>- Challenges & Mitigations<br>- Creative Phase Components"]
    
    %% Validation Options
    Start -.-> Validation["ğŸ” VALIDATION OPTIONS:<br>- Review complexity level<br>- Create planning templates<br>- Identify creative needs<br>- Generate plan documents<br>- Show mode transition"]

    %% Styling
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ReadTasks fill:#80bfff,stroke:#4da6ff,color:black
    style CheckLevel fill:#d94dbb,stroke:#a3378a,color:white
    style Level2 fill:#4dbb5f,stroke:#36873f,color:white
    style Level3 fill:#ffa64d,stroke:#cc7a30,color:white
    style Level4 fill:#ff5555,stroke:#cc0000,color:white
    style CheckCreative fill:#d971ff,stroke:#a33bc2,color:white
    style RecCreative fill:#ffa64d,stroke:#cc7a30,color:black
    style RecImplement fill:#4dbb5f,stroke:#36873f,color:black
```

## IMPLEMENTATION STEPS

### Step 1: READ MAIN RULE & TASKS
```
read_file({
  target_file: ".cursor/rules/isolation_rules/main.mdc",
  should_read_entire_file: true
})

read_file({
  target_file: "tasks.md",
  should_read_entire_file: true
})
```

### Step 2: LOAD PLAN MODE MAP
```
read_file({
  target_file: ".cursor/rules/isolation_rules/visual-maps/plan-mode-map.mdc",
  should_read_entire_file: true
})
```

### Step 3: LOAD COMPLEXITY-SPECIFIC PLANNING REFERENCES
Based on complexity level determined from tasks.md, load one of:

#### For Level 2:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level2/task-tracking-basic.mdc",
  should_read_entire_file: true
})
```

#### For Level 3:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level3/task-tracking-intermediate.mdc",
  should_read_entire_file: true
})

read_file({
  target_file: ".cursor/rules/isolation_rules/Level3/planning-comprehensive.mdc",
  should_read_entire_file: true
})
```

#### For Level 4:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level4/task-tracking-advanced.mdc",
  should_read_entire_file: true
})

read_file({
  target_file: ".cursor/rules/isolation_rules/Level4/architectural-planning.mdc",
  should_read_entire_file: true
})
```

## PLANNING APPROACH

Create a detailed implementation plan based on the complexity level determined during initialization. Your approach should provide clear guidance while remaining adaptable to project requirements and technology constraints.

### Level 2: Simple Enhancement Planning

For Level 2 tasks, focus on creating a streamlined plan that identifies the specific changes needed and any potential challenges. Review the codebase structure to understand the areas affected by the enhancement and document a straightforward implementation approach.

```mermaid
graph TD
    L2["ğŸ“ LEVEL 2 PLANNING"] --> Doc["Document plan with these components:"]
    Doc --> OV["ğŸ“‹ Overview of changes"]
    Doc --> FM["ğŸ“ Files to modify"]
    Doc --> IS["ğŸ”„ Implementation steps"]
    Doc --> PC["âš ï¸ Potential challenges"]
    Doc --> TS["âœ… Testing strategy"]
    
    style L2 fill:#4dbb5f,stroke:#36873f,color:white
    style Doc fill:#80bfff,stroke:#4da6ff,color:black
    style OV fill:#cce6ff,stroke:#80bfff,color:black
    style FM fill:#cce6ff,stroke:#80bfff,color:black
    style IS fill:#cce6ff,stroke:#80bfff,color:black
    style PC fill:#cce6ff,stroke:#80bfff,color:black
    style TS fill:#cce6ff,stroke:#80bfff,color:black
```

### Level 3-4: Comprehensive Planning

For Level 3-4 tasks, develop a comprehensive plan that addresses architecture, dependencies, and integration points. Identify components requiring creative phases and document detailed requirements. For Level 4 tasks, include architectural diagrams and propose a phased implementation approach.

```mermaid
graph TD
    L34["ğŸ“Š LEVEL 3-4 PLANNING"] --> Doc["Document plan with these components:"]
    Doc --> RA["ğŸ“‹ Requirements analysis"]
    Doc --> CA["ğŸ§© Components affected"]
    Doc --> AC["ğŸ—ï¸ Architecture considerations"]
    Doc --> IS["ğŸ“ Implementation strategy"]
    Doc --> DS["ğŸ”¢ Detailed steps"]
    Doc --> DP["ğŸ”„ Dependencies"]
    Doc --> CM["âš ï¸ Challenges & mitigations"]
    Doc --> CP["ğŸ¨ Creative phase components"]
    
    style L34 fill:#ffa64d,stroke:#cc7a30,color:white
    style Doc fill:#80bfff,stroke:#4da6ff,color:black
    style RA fill:#ffe6cc,stroke:#ffa64d,color:black
    style CA fill:#ffe6cc,stroke:#ffa64d,color:black
    style AC fill:#ffe6cc,stroke:#ffa64d,color:black
    style IS fill:#ffe6cc,stroke:#ffa64d,color:black
    style DS fill:#ffe6cc,stroke:#ffa64d,color:black
    style DP fill:#ffe6cc,stroke:#ffa64d,color:black
    style CM fill:#ffe6cc,stroke:#ffa64d,color:black
    style CP fill:#ffe6cc,stroke:#ffa64d,color:black
```

## CREATIVE PHASE IDENTIFICATION

```mermaid
graph TD
    CPI["ğŸ¨ CREATIVE PHASE IDENTIFICATION"] --> Question{"Does the component require<br>design decisions?"}
    Question -->|"Yes"| Identify["Flag for Creative Phase"]
    Question -->|"No"| Skip["Proceed to Implementation"]
    
    Identify --> Types["Identify Creative Phase Type:"]
    Types --> A["ğŸ—ï¸ Architecture Design"]
    Types --> B["âš™ï¸ Algorithm Design"]
    Types --> C["ğŸ¨ UI/UX Design"]
    
    style CPI fill:#d971ff,stroke:#a33bc2,color:white
    style Question fill:#80bfff,stroke:#4da6ff,color:black
    style Identify fill:#ffa64d,stroke:#cc7a30,color:black
    style Skip fill:#4dbb5f,stroke:#36873f,color:black
    style Types fill:#ffe6cc,stroke:#ffa64d,color:black
```

Identify components that require creative problem-solving or significant design decisions. For these components, flag them for the CREATIVE mode. Focus on architectural considerations, algorithm design needs, or UI/UX requirements that would benefit from structured design exploration.

## VERIFICATION

```mermaid
graph TD
    V["âœ… VERIFICATION CHECKLIST"] --> P["Plan addresses all requirements?"]
    V --> C["Components requiring creative phases identified?"]
    V --> S["Implementation steps clearly defined?"]
    V --> D["Dependencies and challenges documented?"]
    
    P & C & S & D --> Decision{"All Verified?"}
    Decision -->|"Yes"| Complete["Ready for next mode"]
    Decision -->|"No"| Fix["Complete missing items"]
    
    style V fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#ffa64d,stroke:#cc7a30,color:white
    style Complete fill:#5fd94d,stroke:#3da336,color:white
    style Fix fill:#ff5555,stroke:#cc0000,color:white
```

Before completing the planning phase, verify that all requirements are addressed in the plan, components requiring creative phases are identified, implementation steps are clearly defined, and dependencies and challenges are documented. Update tasks.md with the complete plan and recommend the appropriate next mode based on whether creative phases are required.
`````

## File: .cursor/rules/isolation_rules/Modes/reflect-archive-mode-detailed.mdc
`````
---
description: Detailed REFLECT+ARCHIVE mode instructions for comprehensive task reflection and documentation archiving
globs: "**/reflect-archive-mode-detailed*/**"
alwaysApply: false
---

# REFLECT+ARCHIVE MODE - è©³ç´°å¯©æŸ¥+æ­¸æª”æŒ‡ä»¤

> **TL;DR:** æä¾›è©³ç´°çš„ä»»å‹™å¯©æŸ¥å’Œæ­¸æª”æµç¨‹ï¼ŒåŒ…å«åæ€éç¨‹ã€ç¶“é©—ç¸½çµå’ŒçŸ¥è­˜æ­¸æª”çš„å®Œæ•´éç¨‹ã€‚

```mermaid
graph TD
    Start["ğŸš€ START REFLECT+ARCHIVE MODE"] --> ReadDocs["ğŸ“š Read tasks.md, progress.md<br>.cursor/rules/isolation_rules/main.mdc"]
    
    %% Initialization & Default Behavior (Reflection)
    ReadDocs --> VerifyImplement{"âœ… Verify Implementation<br>Complete in tasks.md?"}
    VerifyImplement -->|"No"| ReturnImplement["â›” ERROR:<br>Return to IMPLEMENT Mode"]
    VerifyImplement -->|"Yes"| LoadReflectMap["ğŸ—ºï¸ Load Reflect Map<br>.cursor/rules/isolation_rules/visual-maps/reflect-mode-map.mdc"]
    LoadReflectMap --> AssessLevelReflect{"ğŸ§© Determine Complexity Level"}
    AssessLevelReflect --> LoadLevelReflectRules["ğŸ“š Load Level-Specific<br>Reflection Rules"]
    LoadLevelReflectRules --> ReflectProcess["ğŸ¤” EXECUTE REFLECTION PROCESS"]
    ReflectProcess --> ReviewImpl["ğŸ” Review Implementation<br>& Compare to Plan"]
    ReviewImpl --> DocSuccess["ğŸ‘ Document Successes"]
    DocSuccess --> DocChallenges["ğŸ‘ Document Challenges"]
    DocChallenges --> DocLessons["ğŸ’¡ Document Lessons Learned"]
    DocLessons --> DocImprovements["ğŸ“ˆ Document Process/<br>Technical Improvements"]
    DocImprovements --> UpdateTasksReflect["ğŸ“ Update tasks.md<br>with Reflection Status"]
    UpdateTasksReflect --> CreateReflectDoc["ğŸ“„ Create reflection.md"]
    CreateReflectDoc --> ReflectComplete["ğŸ REFLECTION COMPLETE"]
    
    %% Transition Point
    ReflectComplete --> PromptArchive["ğŸ’¬ Prompt User:<br>Type 'ARCHIVE NOW' to proceed"]
    PromptArchive --> UserCommand{"âŒ¨ï¸ User Command?"}
    
    %% Triggered Behavior (Archiving)
    UserCommand -- "ARCHIVE NOW" --> LoadArchiveMap["ğŸ—ºï¸ Load Archive Map<br>.cursor/rules/isolation_rules/visual-maps/archive-mode-map.mdc"]
    LoadArchiveMap --> VerifyReflectComplete{"âœ… Verify reflection.md<br>Exists & Complete?"}
    VerifyReflectComplete -->|"No"| ErrorReflect["â›” ERROR:<br>Complete Reflection First"]
    VerifyReflectComplete -->|"Yes"| AssessLevelArchive{"ğŸ§© Determine Complexity Level"}
    AssessLevelArchive --> LoadLevelArchiveRules["ğŸ“š Load Level-Specific<br>Archive Rules"]
    LoadLevelArchiveRules --> ArchiveProcess["ğŸ“¦ EXECUTE ARCHIVING PROCESS"]
    ArchiveProcess --> CreateArchiveDoc["ğŸ“„ Create Archive Document<br>in docs/archive/"]
    CreateArchiveDoc --> UpdateTasksArchive["ğŸ“ Update tasks.md<br>Marking Task COMPLETE"]
    UpdateTasksArchive --> UpdateProgressArchive["ğŸ“ˆ Update progress.md<br>with Archive Link"]
    UpdateTasksArchive --> UpdateActiveContext["ğŸ”„ Update activeContext.md<br>Reset for Next Task"]
    UpdateActiveContext --> ArchiveComplete["ğŸ ARCHIVING COMPLETE"]
    
    %% Exit
    ArchiveComplete --> SuggestNext["âœ… Task Fully Completed<br>Suggest VAN Mode for Next Task"]
    
    %% Styling
    style Start fill:#d9b3ff,stroke:#b366ff,color:black
    style ReadDocs fill:#e6ccff,stroke:#d9b3ff,color:black
    style VerifyImplement fill:#ffa64d,stroke:#cc7a30,color:white
    style LoadReflectMap fill:#4da6ff,stroke:#0066cc,color:white
    style AssessLevelReflect fill:#d94dbb,stroke:#a3378a,color:white
    style ReflectProcess fill:#4dbb5f,stroke:#36873f,color:white
    style ReflectComplete fill:#4dbbbb,stroke:#368787,color:white
    style PromptArchive fill:#d971ff,stroke:#a33bc2,color:white
    style UserCommand fill:#ffa64d,stroke:#cc7a30,color:white
    style LoadArchiveMap fill:#ff5555,stroke:#cc0000,color:white
    style ArchiveProcess fill:#ffa64d,stroke:#cc7a30,color:white
    style ArchiveComplete fill:#5fd94d,stroke:#3da336,color:white
    style SuggestNext fill:#4dbb5f,stroke:#36873f,color:white
```

## IMPLEMENTATION STEPS

### Step 1: READ REFERENCE DOCUMENTS
```
read_file({
  target_file: "tasks.md",
  should_read_entire_file: true
})

read_file({
  target_file: "progress.md",
  should_read_entire_file: true
})

read_file({
  target_file: ".cursor/rules/isolation_rules/main.mdc",
  should_read_entire_file: true
})
```

### Step 2: LOAD REFLECT MODE MAP
```
read_file({
  target_file: ".cursor/rules/isolation_rules/visual-maps/reflect-mode-map.mdc",
  should_read_entire_file: true
})
```

### Step 3: LOAD LEVEL-SPECIFIC REFLECTION RULES
Based on complexity level determined from tasks.md, load one of:

#### For Level 1-2:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level2/reflection-basic.mdc",
  should_read_entire_file: true
})
```

#### For Level 3:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level3/reflection-intermediate.mdc",
  should_read_entire_file: true
})
```

#### For Level 4:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level4/reflection-comprehensive.mdc",
  should_read_entire_file: true
})
```

### Step 4: LOAD ARCHIVE MODE MAP (When ARCHIVE NOW is triggered)
```
read_file({
  target_file: ".cursor/rules/isolation_rules/visual-maps/archive-mode-map.mdc",
  should_read_entire_file: true
})
```

### Step 5: LOAD LEVEL-SPECIFIC ARCHIVE RULES
Based on complexity level, load one of:

#### For Level 1-2:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level2/archive-basic.mdc",
  should_read_entire_file: true
})
```

#### For Level 3:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level3/archive-intermediate.mdc",
  should_read_entire_file: true
})
```

#### For Level 4:
```
read_file({
  target_file: ".cursor/rules/isolation_rules/Level4/archive-comprehensive.mdc",
  should_read_entire_file: true
})
```

## REFLECTION PROCESS

Your task is to facilitate comprehensive reflection on the completed task and then archive the relevant documentation. Start by guiding the reflection process based on the completed implementation.

### Reflection Approach

Focus on analyzing what worked well, what challenges were encountered, and what lessons were learned. Compare the actual implementation against the original plan and creative decisions.

```mermaid
graph TD
    Reflect["ğŸ¤” REFLECTION PROCESS"] --> Review["Review implementation"]
    Review --> Compare["Compare to plan"]
    Compare --> Success["Document successes"]
    Success --> Challenges["Document challenges"]
    Challenges --> Lessons["Document lessons learned"]
    Lessons --> Improvements["Document improvements"]
    Improvements --> Create["Create reflection.md"]
    
    style Reflect fill:#4dbb5f,stroke:#36873f,color:white
    style Review fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Compare fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Success fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Challenges fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Lessons fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Improvements fill:#d6f5dd,stroke:#a3e0ae,color:black
    style Create fill:#d6f5dd,stroke:#a3e0ae,color:black
```

### Reflection Documentation Template

```
# REFLECTION: [Task Name]

## Implementation Review
- [Summary of what was implemented]
- [Key components and features delivered]
- [Technical approach taken]

## Successes
- [What worked well]
- [Positive outcomes]
- [Unexpected benefits]

## Challenges
- [Issues encountered]
- [Difficulties overcome]
- [Areas that were problematic]

## Lessons Learned
- [Key insights gained]
- [Technical learnings]
- [Process improvements identified]

## Process Improvements
- [What could be done better next time]
- [Process optimizations]
- [Tool or methodology improvements]

## Technical Improvements
- [Code quality improvements]
- [Architecture refinements]
- [Performance optimizations]

## Next Steps
- [Follow-up actions needed]
- [Future enhancements]
- [Knowledge transfer items]
```

## ARCHIVING PROCESS

When the user types "ARCHIVE NOW", execute the archiving process to create comprehensive documentation and update the Memory Bank.

### Archiving Approach

Create a comprehensive archive document that captures all aspects of the completed task, including the original plan, implementation details, reflection insights, and lessons learned.

```mermaid
graph TD
    Archive["ğŸ“¦ ARCHIVING PROCESS"] --> Create["Create archive document"]
    Create --> Update["Update tasks.md"]
    Update --> Progress["Update progress.md"]
    Progress --> Context["Update activeContext.md"]
    Context --> Complete["Mark task complete"]
    
    style Archive fill:#ffa64d,stroke:#cc7a30,color:white
    style Create fill:#ffe6cc,stroke:#ffa64d,color:black
    style Update fill:#ffe6cc,stroke:#ffa64d,color:black
    style Progress fill:#ffe6cc,stroke:#ffa64d,color:black
    style Context fill:#ffe6cc,stroke:#ffa64d,color:black
    style Complete fill:#ffe6cc,stroke:#ffa64d,color:black
```

### Archive Documentation Template

```
# ARCHIVE: [Task Name] - [Date]

## Task Overview
- [Task description and objectives]
- [Complexity level and approach]
- [Timeline and milestones]

## Implementation Summary
- [What was built]
- [Key features and components]
- [Technical decisions made]

## Reflection Summary
- [Key successes and challenges]
- [Lessons learned]
- [Process improvements]

## Knowledge Base Updates
- [Documentation created]
- [Code repositories updated]
- [Knowledge transfer completed]

## Future Considerations
- [Follow-up tasks]
- [Potential enhancements]
- [Related projects]

## Archive Metadata
- [Task ID]
- [Completion date]
- [Team members involved]
- [Related documentation links]
```

## VERIFICATION

### Reflection Verification
```mermaid
graph TD
    VR["âœ… REFLECTION VERIFICATION"] --> R["Implementation reviewed?"]
    VR --> S["Successes documented?"]
    VR --> C["Challenges documented?"]
    VR --> L["Lessons learned captured?"]
    VR --> I["Improvements identified?"]
    
    R & S & C & L & I --> Decision{"All Verified?"}
    Decision -->|"Yes"| Complete["Ready for archiving"]
    Decision -->|"No"| Fix["Complete missing items"]
    
    style VR fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#ffa64d,stroke:#cc7a30,color:white
    style Complete fill:#5fd94d,stroke:#3da336,color:white
    style Fix fill:#ff5555,stroke:#cc0000,color:white
```

### Archive Verification
```mermaid
graph TD
    AR["âœ… ARCHIVE VERIFICATION"] --> D["Archive document created?"]
    AR --> T["Tasks.md updated?"]
    AR --> P["Progress.md updated?"]
    AR --> A["ActiveContext.md reset?"]
    AR --> K["Knowledge base updated?"]
    
    D & T & P & A & K --> Decision{"All Verified?"}
    Decision -->|"Yes"| Complete["Task fully completed"]
    Decision -->|"No"| Fix["Complete missing items"]
    
    style AR fill:#4dbbbb,stroke:#368787,color:white
    style Decision fill:#ffa64d,stroke:#cc7a30,color:white
    style Complete fill:#5fd94d,stroke:#3da336,color:white
    style Fix fill:#ff5555,stroke:#cc0000,color:white
```

Before completing the reflection phase, verify that the implementation has been thoroughly reviewed, successes and challenges documented, lessons learned captured, and improvements identified. After archiving, verify that all documentation has been created and updated, and the task is marked as complete.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van_mode_split/van-mode-map.mdc
`````
---
description: Visual process map for VAN mode (Index/Entry Point)
globs: van-mode-map.mdc
alwaysApply: false
---
# VAN MODE: INITIALIZATION PROCESS MAP

ğŸš¨ MANDATORY FIRST STEP: GRAPH BANK CREATION ğŸš¨
NO OPERATION CAN PROCEED WITHOUT GRAPH BANK STRUCTURE

> **TL;DR:** This visual map defines the VAN mode process for project initialization, task analysis, and technical validation. It guides users through platform detection, file verification, complexity determination, and technical validation to ensure proper setup before implementation.

## ğŸ§­ VAN MODE PROCESS FLOW

```mermaid
graph TD
    Start["START VAN MODE"] --> PlatformDetect["PLATFORM DETECTION"]
    PlatformDetect --> DetectOS["Detect Operating System"]
    DetectOS --> CheckPath["Check Path Separator Format"]
    CheckPath --> AdaptCmds["Adapt Commands if Needed"]
    AdaptCmds --> PlatformCP["â›” PLATFORM CHECKPOINT"]
    
    %% Add Critical Graph Bank Checkpoint
    PlatformCP --> GraphBankCheck{"Graph Bank<br>Exists?"}
    GraphBankCheck -->|"No"| CreateGraphBank["CREATE GRAPH BANK<br>[CRITICAL STEP]"]
    GraphBankCheck -->|"Yes"| BasicFileVerify["BASIC FILE VERIFICATION"]
    CreateGraphBank --> GraphBankCP["â›” GRAPH BANK VERIFICATION [REQUIRED]"]
    GraphBankCP --> BasicFileVerify
    
    %% Basic File Verification with checkpoint
    BasicFileVerify --> BatchCheck["Batch Check Essential Components"]
    BatchCheck --> BatchCreate["Batch Create Essential Structure"]
    BatchCreate --> BasicFileCP["â›” BASIC FILE CHECKPOINT"]
    
    %% Early Complexity Determination
    BasicFileCP --> EarlyComplexity["EARLY COMPLEXITY DETERMINATION"]
    EarlyComplexity --> AnalyzeTask["Analyze Task Requirements"]
    AnalyzeTask --> EarlyLevelCheck{"Complexity Level?"}
    
    %% Level handling paths
    EarlyLevelCheck -->|"Level 1"| ComplexityCP["â›” COMPLEXITY CHECKPOINT"]
    EarlyLevelCheck -->|"Level 2-4"| CRITICALGATE["ğŸš« CRITICAL GATE: FORCE MODE SWITCH"]
    CRITICALGATE --> ForceExit["Exit to PLAN mode"]
    
    %% Level 1 continues normally
    ComplexityCP --> InitSystem["INITIALIZE GRAPH BANK"]
    InitSystem --> Complete1["LEVEL 1 INITIALIZATION COMPLETE"]
    
    %% For Level 2+ tasks after PLAN and CREATIVE modes
    ForceExit -.-> OtherModes["PLAN â†’ CREATIVE modes"]
    OtherModes -.-> VANQA["VAN QA MODE"]
    VANQA --> QAProcess["Technical Validation Process"]
    QAProcess --> QACheck{"All Checks Pass?"}
    QACheck -->|"Yes"| BUILD["To BUILD MODE"]
    QACheck -->|"No"| FixIssues["Fix Technical Issues"]
    FixIssues --> QAProcess
    
    %% Style nodes
    style PlatformCP fill:#f55,stroke:#d44,color:white
    style GraphBankCP fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style GraphBankCheck fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style CreateGraphBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style BasicFileCP fill:#f55,stroke:#d44,color:white
    style ComplexityCP fill:#f55,stroke:#d44,color:white
    style CRITICALGATE fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style ForceExit fill:#ff0000,stroke:#990000,color:white,stroke-width:2px
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white,stroke-width:3px
    style QAProcess fill:#4da6ff,stroke:#0066cc,color:white
    style QACheck fill:#4da6ff,stroke:#0066cc,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸŒ PLATFORM DETECTION PROCESS

```mermaid
graph TD
    PD["Platform Detection"] --> CheckOS["Detect Operating System"]
    CheckOS --> Win["Windows"]
    CheckOS --> Mac["macOS"]
    CheckOS --> Lin["Linux"]
    
    Win & Mac & Lin --> Adapt["Adapt Commands<br>for Platform"]
    
    Win --> WinPath["Path: Backslash (\\)"]
    Mac --> MacPath["Path: Forward Slash (/)"]
    Lin --> LinPath["Path: Forward Slash (/)"]
    
    Win --> WinCmd["Command Adaptations:<br>dir, icacls, etc."]
    Mac --> MacCmd["Command Adaptations:<br>ls, chmod, etc."]
    Lin --> LinCmd["Command Adaptations:<br>ls, chmod, etc."]
    
    WinPath & MacPath & LinPath --> PathCP["Path Separator<br>Checkpoint"]
    WinCmd & MacCmd & LinCmd --> CmdCP["Command<br>Checkpoint"]
    
    PathCP & CmdCP --> PlatformComplete["Platform Detection<br>Complete"]
    
    style PD fill:#4da6ff,stroke:#0066cc,color:white
    style PlatformComplete fill:#10b981,stroke:#059669,color:white
```

## ğŸ“ FILE VERIFICATION PROCESS

```mermaid
graph TD
    FV["File Verification"] --> CheckFiles["Check Essential Files"]
    CheckFiles --> CheckMB["Check Graph Bank<br>Structure"]
    CheckMB --> MBExists{"Graph Bank<br>Exists?"}
    
    MBExists -->|"Yes"| VerifyMB["Verify Graph Bank<br>Contents"]
    MBExists -->|"No"| CreateMB["Create Graph Bank<br>Structure"]
    
    CheckFiles --> CheckDocs["Check Documentation<br>Files"]
    CheckDocs --> DocsExist{"Docs<br>Exist?"}
    
    DocsExist -->|"Yes"| VerifyDocs["Verify Documentation<br>Structure"]
    DocsExist -->|"No"| CreateDocs["Create Documentation<br>Structure"]
    
    VerifyMB & CreateMB --> MBCP["Graph Bank<br>Checkpoint"]
    VerifyDocs & CreateDocs --> DocsCP["Documentation<br>Checkpoint"]
    
    MBCP & DocsCP --> FileComplete["File Verification<br>Complete"]
    
    style FV fill:#4da6ff,stroke:#0066cc,color:white
    style FileComplete fill:#10b981,stroke:#059669,color:white
    style MBCP fill:#f6546a,stroke:#c30052,color:white
    style DocsCP fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ§© COMPLEXITY DETERMINATION PROCESS

```mermaid
graph TD
    CD["Complexity<br>Determination"] --> AnalyzeTask["Analyze Task<br>Requirements"]
    
    AnalyzeTask --> CheckKeywords["Check Task<br>Keywords"]
    CheckKeywords --> ScopeCheck["Assess<br>Scope Impact"]
    ScopeCheck --> RiskCheck["Evaluate<br>Risk Level"]
    RiskCheck --> EffortCheck["Estimate<br>Implementation Effort"]
    
    EffortCheck --> DetermineLevel{"Determine<br>Complexity Level"}
    DetermineLevel -->|"Level 1"| L1["Level 1:<br>Quick Bug Fix"]
    DetermineLevel -->|"Level 2"| L2["Level 2:<br>Simple Enhancement"]
    DetermineLevel -->|"Level 3"| L3["Level 3:<br>Intermediate Feature"]
    DetermineLevel -->|"Level 4"| L4["Level 4:<br>Complex System"]
    
    L1 --> CDComplete["Complexity Determination<br>Complete"]
    L2 & L3 & L4 --> ModeSwitch["Force Mode Switch<br>to PLAN"]
    
    style CD fill:#4da6ff,stroke:#0066cc,color:white
    style CDComplete fill:#10b981,stroke:#059669,color:white
    style ModeSwitch fill:#ff0000,stroke:#990000,color:white
    style DetermineLevel fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ”„ COMPLETE WORKFLOW WITH QA VALIDATION

The full workflow includes technical validation before implementation:

```mermaid
flowchart LR
    VAN1["VAN MODE 
    (Initial Analysis)"] --> PLAN["PLAN MODE
    (Task Planning)"]
    PLAN --> CREATIVE["CREATIVE MODE
    (Design Decisions)"]
    CREATIVE --> VANQA["VAN QA MODE
    (Technical Validation)"] 
    VANQA --> BUILD["BUILD MODE
    (Implementation)"]
```

## ğŸ” TECHNICAL VALIDATION OVERVIEW

The VAN QA technical validation process consists of four key validation points:

```mermaid
graph TD
    VANQA["VAN QA MODE"] --> FourChecks["FOUR-POINT VALIDATION"]
    
    FourChecks --> DepCheck["1ï¸âƒ£ DEPENDENCY VERIFICATION<br>Check all required packages"]
    DepCheck --> ConfigCheck["2ï¸âƒ£ CONFIGURATION VALIDATION<br>Verify format & compatibility"]
    ConfigCheck --> EnvCheck["3ï¸âƒ£ ENVIRONMENT VALIDATION<br>Check build environment"]
    EnvCheck --> MinBuildCheck["4ï¸âƒ£ MINIMAL BUILD TEST<br>Test core functionality"]
    
    MinBuildCheck --> ValidationResults{"All Checks<br>Passed?"}
    ValidationResults -->|"Yes"| SuccessReport["GENERATE SUCCESS REPORT"]
    ValidationResults -->|"No"| FailureReport["GENERATE FAILURE REPORT"]
    
    SuccessReport --> BUILD["Proceed to BUILD MODE"]
    FailureReport --> FixIssues["Fix Technical Issues"]
    FixIssues --> ReValidate["Re-validate"]
    ReValidate --> ValidationResults
    
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white
    style FourChecks fill:#f6546a,stroke:#c30052,color:white
    style ValidationResults fill:#f6546a,stroke:#c30052,color:white
    style BUILD fill:#10b981,stroke:#059669,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“ VALIDATION STATUS FORMAT

The QA Validation step includes clear status indicators:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION STATUS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚ âœ“ Design Decisions   â”‚ Verified as implementable          â”‚
â”‚ âœ“ Dependencies       â”‚ All required packages installed    â”‚
â”‚ âœ“ Configurations     â”‚ Format verified for platform       â”‚
â”‚ âœ“ Environment        â”‚ Suitable for implementation        â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VERIFIED - Clear to proceed to BUILD mode
```

## ğŸš¨ MODE TRANSITION TRIGGERS

### VAN to PLAN Transition
For complexity levels 2-4:
```
ğŸš« LEVEL [2-4] TASK DETECTED
Implementation in VAN mode is BLOCKED
This task REQUIRES PLAN mode
You MUST switch to PLAN mode for proper documentation and planning
Type 'PLAN' to switch to planning mode
```

### CREATIVE to VAN QA Transition
After completing the CREATIVE mode:
```
â­ï¸ NEXT MODE: VAN QA
To validate technical requirements before implementation, please type 'VAN QA'
```

### VAN QA to BUILD Transition
After successful validation:
```
âœ… TECHNICAL VALIDATION COMPLETE
All prerequisites verified successfully
You may now proceed to BUILD mode
Type 'BUILD' to begin implementation
```

## ğŸ”’ BUILD MODE PREVENTION MECHANISM

The system prevents moving to BUILD mode without passing QA validation:

```mermaid
graph TD
    Start["User Types: BUILD"] --> CheckQA{"QA Validation<br>Completed?"}
    CheckQA -->|"Yes and Passed"| AllowBuild["Allow BUILD Mode"]
    CheckQA -->|"No or Failed"| BlockBuild["BLOCK BUILD MODE"]
    BlockBuild --> Message["Display:<br>âš ï¸ QA VALIDATION REQUIRED"]
    Message --> ReturnToVANQA["Prompt: Type VAN QA"]
    
    style CheckQA fill:#f6546a,stroke:#c30052,color:white
    style BlockBuild fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style Message fill:#ff5555,stroke:#dd3333,color:white
    style ReturnToVANQA fill:#4da6ff,stroke:#0066cc,color:white
```

## ğŸ”„ QA COMMAND PRECEDENCE

QA validation can be called at any point in the process flow, and takes immediate precedence over any other current steps, including forced mode switches:

```mermaid
graph TD
    UserQA["User Types: QA"] --> HighPriority["âš ï¸ HIGH PRIORITY COMMAND"]
    HighPriority --> CurrentTask["Pause Current Task/Process"]
    CurrentTask --> LoadQA["Load QA Mode Map"]
    LoadQA --> RunQA["Execute QA Validation Process"]
    RunQA --> QAResults{"QA Results"}
    
    QAResults -->|"PASS"| ResumeFlow["Resume Prior Process Flow"]
    QAResults -->|"FAIL"| FixIssues["Fix Identified Issues"]
    FixIssues --> ReRunQA["Re-run QA Validation"]
    ReRunQA --> QAResults
    
    style UserQA fill:#f8d486,stroke:#e8b84d,color:black
    style HighPriority fill:#ff0000,stroke:#cc0000,color:white,stroke-width:3px
    style LoadQA fill:#4da6ff,stroke:#0066cc,color:white
    style RunQA fill:#4da6ff,stroke:#0066cc,color:white
    style QAResults fill:#f6546a,stroke:#c30052,color:white
```

### QA Interruption Rules

When a user types **QA** at any point:

1. **The QA command MUST take immediate precedence** over any current operation, including the "FORCE MODE SWITCH" triggered by complexity assessment.
2. The system MUST:
   - Immediately load the QA mode map
   - Execute the full QA validation process
   - Address any failures before continuing
3. **Required remediation steps take priority** over any pending mode switches or complexity rules
4. After QA validation is complete and passes:
   - Resume the previously determined process flow
   - Continue with any required mode switches

```
âš ï¸ QA OVERRIDE ACTIVATED
All other processes paused
QA validation checks now running...
Any issues found MUST be remediated before continuing with normal process flow
```

## ğŸ“‹ CHECKPOINT VERIFICATION TEMPLATE

Each major checkpoint in VAN mode uses this format:

```
âœ“ SECTION CHECKPOINT: [SECTION NAME]
- Requirement 1? [YES/NO]
- Requirement 2? [YES/NO]
- Requirement 3? [YES/NO]

â†’ If all YES: Ready for next section
â†’ If any NO: Fix missing items before proceeding
```

## ğŸš€ VAN MODE ACTIVATION

When the user types "VAN", respond with a confirmation and start the process:

```
User: VAN

Response: OK VAN - Beginning Initialization Process
```

After completing CREATIVE mode, when the user types "VAN QA", respond:

```
User: VAN QA

Response: OK VAN QA - Beginning Technical Validation
```

This ensures clear communication about which phase of VAN mode is active. 

## ğŸ” DETAILED QA VALIDATION PROCESS

### 1ï¸âƒ£ DEPENDENCY VERIFICATION

This step verifies that all required packages are installed and compatible:

```mermaid
graph TD
    Start["Dependency Verification"] --> ReadDeps["Read Required Dependencies<br>from Creative Phase"]
    ReadDeps --> CheckInstalled["Check if Dependencies<br>are Installed"]
    CheckInstalled --> DepStatus{"All Dependencies<br>Installed?"}
    
    DepStatus -->|"Yes"| VerifyVersions["Verify Versions<br>and Compatibility"]
    DepStatus -->|"No"| InstallMissing["Install Missing<br>Dependencies"]
    InstallMissing --> VerifyVersions
    
    VerifyVersions --> VersionStatus{"Versions<br>Compatible?"}
    VersionStatus -->|"Yes"| DepSuccess["Dependencies Verified<br>âœ… PASS"]
    VersionStatus -->|"No"| UpgradeVersions["Upgrade/Downgrade<br>as Needed"]
    UpgradeVersions --> RetryVerify["Retry Verification"]
    RetryVerify --> VersionStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style DepSuccess fill:#10b981,stroke:#059669,color:white
    style DepStatus fill:#f6546a,stroke:#c30052,color:white
    style VersionStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Windows (PowerShell) Implementation:
```powershell
# Example: Verify Node.js dependencies for an Angular project
function Verify-Dependencies {
    $requiredDeps = @{
        "node" = ">=14.0.0"
        "npm" = ">=6.0.0"
    }
    
    $missingDeps = @()
    $incompatibleDeps = @()
    
    # Check Node.js version
    $nodeVersion = $null
    try {
        $nodeVersion = node -v
        if ($nodeVersion -match "v(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 14) {
                $incompatibleDeps += "node (found $nodeVersion, required >=14.0.0)"
            }
        }
    } catch {
        $missingDeps += "node"
    }
    
    # Check npm version
    $npmVersion = $null
    try {
        $npmVersion = npm -v
        if ($npmVersion -match "(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 6) {
                $incompatibleDeps += "npm (found $npmVersion, required >=6.0.0)"
            }
        }
    } catch {
        $missingDeps += "npm"
    }
    
    # Display results
    if ($missingDeps.Count -eq 0 -and $incompatibleDeps.Count -eq 0) {
        Write-Output "âœ… All dependencies verified and compatible"
        return $true
    } else {
        if ($missingDeps.Count -gt 0) {
            Write-Output "âŒ Missing dependencies: $($missingDeps -join ', ')"
        }
        if ($incompatibleDeps.Count -gt 0) {
            Write-Output "âŒ Incompatible versions: $($incompatibleDeps -join ', ')"
        }
        return $false
    }
}
```

#### Mac/Linux (Bash) Implementation:
```bash
#!/bin/bash

# Example: Verify Node.js dependencies for an Angular project
verify_dependencies() {
    local missing_deps=()
    local incompatible_deps=()
    
    # Check Node.js version
    if command -v node &> /dev/null; then
        local node_version=$(node -v)
        if [[ $node_version =~ v([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 14 )); then
                incompatible_deps+=("node (found $node_version, required >=14.0.0)")
            fi
        fi
    else
        missing_deps+=("node")
    fi
    
    # Check npm version
    if command -v npm &> /dev/null; then
        local npm_version=$(npm -v)
        if [[ $npm_version =~ ([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 6 )); then
                incompatible_deps+=("npm (found $npm_version, required >=6.0.0)")
            fi
        fi
    else
        missing_deps+=("npm")
    fi
    
    # Display results
    if [ ${#missing_deps[@]} -eq 0 ] && [ ${#incompatible_deps[@]} -eq 0 ]; then
        echo "âœ… All dependencies verified and compatible"
        return 0
    else
        if [ ${#missing_deps[@]} -gt 0 ]; then
            echo "âŒ Missing dependencies: ${missing_deps[*]}"
        fi
        if [ ${#incompatible_deps[@]} -gt 0 ]; then
            echo "âŒ Incompatible versions: ${incompatible_deps[*]}"
        fi
        return 1
    fi
}
```

### 2ï¸âƒ£ CONFIGURATION VALIDATION

This step validates configuration files format and compatibility:

```mermaid
graph TD
    Start["Configuration Validation"] --> IdentifyConfigs["Identify Configuration<br>Files"]
    IdentifyConfigs --> ReadConfigs["Read Configuration<br>Files"]
    ReadConfigs --> ValidateSyntax["Validate Syntax<br>and Format"]
    ValidateSyntax --> SyntaxStatus{"Syntax<br>Valid?"}
    
    SyntaxStatus -->|"Yes"| CheckCompatibility["Check Compatibility<br>with Platform"]
    SyntaxStatus -->|"No"| FixSyntax["Fix Syntax<br>Errors"]
    FixSyntax --> RetryValidate["Retry Validation"]
    RetryValidate --> SyntaxStatus
    
    CheckCompatibility --> CompatStatus{"Compatible with<br>Platform?"}
    CompatStatus -->|"Yes"| ConfigSuccess["Configurations Validated<br>âœ… PASS"]
    CompatStatus -->|"No"| AdaptConfigs["Adapt Configurations<br>for Platform"]
    AdaptConfigs --> RetryCompat["Retry Compatibility<br>Check"]
    RetryCompat --> CompatStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ConfigSuccess fill:#10b981,stroke:#059669,color:white
    style SyntaxStatus fill:#f6546a,stroke:#c30052,color:white
    style CompatStatus fill:#f6546a,stroke:#c30052,color:white
``` 

#### Configuration Validation Implementation:
```powershell
# Example: Validate configuration files for a web project
function Validate-Configurations {
    $configFiles = @(
        "package.json",
        "tsconfig.json",
        "vite.config.js"
    )
    
    $invalidConfigs = @()
    $incompatibleConfigs = @()
    
    foreach ($configFile in $configFiles) {
        if (Test-Path $configFile) {
            # Check JSON syntax for JSON files
            if ($configFile -match "\.json$") {
                try {
                    Get-Content $configFile -Raw | ConvertFrom-Json | Out-Null
                } catch {
                    $invalidConfigs += "$configFile (JSON syntax error: $($_.Exception.Message))"
                    continue
                }
            }
            
            # Specific configuration compatibility checks
            if ($configFile -eq "vite.config.js") {
                $content = Get-Content $configFile -Raw
                # Check for Angular CLI configuration
                if ($content -notmatch "angular") {
                    $incompatibleConfigs += "$configFile (Missing Angular configuration)"
                }
            }
        } else {
            $invalidConfigs += "$configFile (file not found)"
        }
    }
    
    # Display results
    if ($invalidConfigs.Count -eq 0 -and $incompatibleConfigs.Count -eq 0) {
        Write-Output "âœ… All configurations validated and compatible"
        return $true
    } else {
        if ($invalidConfigs.Count -gt 0) {
            Write-Output "âŒ Invalid configurations: $($invalidConfigs -join ', ')"
        }
        if ($incompatibleConfigs.Count -gt 0) {
            Write-Output "âŒ Incompatible configurations: $($incompatibleConfigs -join ', ')"
        }
        return $false
    }
}
```

### 3ï¸âƒ£ ENVIRONMENT VALIDATION

This step checks if the environment is properly set up for the implementation:

```mermaid
graph TD
    Start["Environment Validation"] --> CheckEnv["Check Build Environment"]
    CheckEnv --> VerifyBuildTools["Verify Build Tools"]
    VerifyBuildTools --> ToolsStatus{"Build Tools<br>Available?"}
    
    ToolsStatus -->|"Yes"| CheckPerms["Check Permissions<br>and Access"]
    ToolsStatus -->|"No"| InstallTools["Install Required<br>Build Tools"]
    InstallTools --> RetryTools["Retry Verification"]
    RetryTools --> ToolsStatus
    
    CheckPerms --> PermsStatus{"Permissions<br>Sufficient?"}
    PermsStatus -->|"Yes"| EnvSuccess["Environment Validated<br>âœ… PASS"]
    PermsStatus -->|"No"| FixPerms["Fix Permission<br>Issues"]
    FixPerms --> RetryPerms["Retry Permission<br>Check"]
    RetryPerms --> PermsStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style EnvSuccess fill:#10b981,stroke:#059669,color:white
    style ToolsStatus fill:#f6546a,stroke:#c30052,color:white
    style PermsStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Environment Validation Implementation:
```powershell
# Example: Validate environment for a web project
function Validate-Environment {
    $requiredTools = @(
        @{Name = "git"; Command = "git --version"},
        @{Name = "node"; Command = "node --version"},
        @{Name = "npm"; Command = "npm --version"}
    )
    
    $missingTools = @()
    $permissionIssues = @()
    
    # Check build tools
    foreach ($tool in $requiredTools) {
        try {
            Invoke-Expression $tool.Command | Out-Null
        } catch {
            $missingTools += $tool.Name
        }
    }
    
    # Check write permissions in project directory
    try {
        $testFile = ".__permission_test"
        New-Item -Path $testFile -ItemType File -Force | Out-Null
        Remove-Item -Path $testFile -Force
    } catch {
        $permissionIssues += "Current directory (write permission denied)"
    }
    
    # Check if port 3000 is available (commonly used for dev servers)
    try {
        $listener = New-Object System.Net.Sockets.TcpListener([System.Net.IPAddress]::Loopback, 3000)
        $listener.Start()
        $listener.Stop()
    } catch {
        $permissionIssues += "Port 3000 (already in use or access denied)"
    }
    
    # Display results
    if ($missingTools.Count -eq 0 -and $permissionIssues.Count -eq 0) {
        Write-Output "âœ… Environment validated successfully"
        return $true
    } else {
        if ($missingTools.Count -gt 0) {
            Write-Output "âŒ Missing tools: $($missingTools -join ', ')"
        }
        if ($permissionIssues.Count -gt 0) {
            Write-Output "âŒ Permission issues: $($permissionIssues -join ', ')"
        }
        return $false
    }
}
```

### 4ï¸âƒ£ MINIMAL BUILD TEST

This step performs a minimal build test to ensure core functionality:

```mermaid
graph TD
    Start["Minimal Build Test"] --> CreateTest["Create Minimal<br>Test Project"]
    CreateTest --> BuildTest["Attempt<br>Build"]
    BuildTest --> BuildStatus{"Build<br>Successful?"}
    
    BuildStatus -->|"Yes"| RunTest["Run Basic<br>Functionality Test"]
    BuildStatus -->|"No"| FixBuild["Fix Build<br>Issues"]
    FixBuild --> RetryBuild["Retry Build"]
    RetryBuild --> BuildStatus
    
    RunTest --> TestStatus{"Test<br>Passed?"}
    TestStatus -->|"Yes"| TestSuccess["Minimal Build Test<br>âœ… PASS"]
    TestStatus -->|"No"| FixTest["Fix Test<br>Issues"]
    FixTest --> RetryTest["Retry Test"]
    RetryTest --> TestStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style TestSuccess fill:#10b981,stroke:#059669,color:white
    style BuildStatus fill:#f6546a,stroke:#c30052,color:white
    style TestStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Minimal Build Test Implementation:
```powershell
# Example: Perform minimal build test for an Angular project
function Perform-MinimalBuildTest {
    $buildSuccess = $false
    $testSuccess = $false
    
    # Create minimal test project
    $testDir = ".__build_test"
    if (Test-Path $testDir) {
        Remove-Item -Path $testDir -Recurse -Force
    }
    
    try {
        # Create minimal test directory
        New-Item -Path $testDir -ItemType Directory | Out-Null
        Push-Location $testDir
        
        # Initialize minimal package.json
        @"
{
  "name": "build-test",
  "version": "1.0.0",
  "description": "Minimal build test",
  "main": "index.js",
  "scripts": {
    "build": "echo Build test successful"
  }
}
"@ | Set-Content -Path "package.json"
        
        # Attempt build
        npm run build | Out-Null
        $buildSuccess = $true
        
        # Create minimal test file
        @"
console.log('Test successful');
"@ | Set-Content -Path "index.js"
        
        # Run basic test
        node index.js | Out-Null
        $testSuccess = $true
        
    } catch {
        Write-Output "âŒ Build test failed: $($_.Exception.Message)"
    } finally {
        Pop-Location
        if (Test-Path $testDir) {
            Remove-Item -Path $testDir -Recurse -Force
        }
    }
    
    # Display results
    if ($buildSuccess -and $testSuccess) {
        Write-Output "âœ… Minimal build test passed successfully"
        return $true
    } else {
        if (-not $buildSuccess) {
            Write-Output "âŒ Build process failed"
        }
        if (-not $testSuccess) {
            Write-Output "âŒ Basic functionality test failed"
        }
        return $false
    }
}
```

## ğŸ“‹ COMPREHENSIVE QA REPORT FORMAT

After running all validation steps, a comprehensive report is generated:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚                                                                     â”‚
â”‚  PROJECT: [Project Name]                                            â”‚
â”‚  TIMESTAMP: [Current Date/Time]                                     â”‚
â”‚                                                                     â”‚
â”‚  1ï¸âƒ£ DEPENDENCY VERIFICATION                                         â”‚
â”‚  âœ“ Required: [List of required dependencies]                        â”‚
â”‚  âœ“ Installed: [List of installed dependencies]                      â”‚
â”‚  âœ“ Compatible: [Yes/No]                                            â”‚
â”‚                                                                     â”‚
â”‚  2ï¸âƒ£ CONFIGURATION VALIDATION                                        â”‚
â”‚  âœ“ Config Files: [List of configuration files]                      â”‚
â”‚  âœ“ Syntax Valid: [Yes/No]                                          â”‚
â”‚  âœ“ Platform Compatible: [Yes/No]                                   â”‚
â”‚                                                                     â”‚
â”‚  3ï¸âƒ£ ENVIRONMENT VALIDATION                                          â”‚
â”‚  âœ“ Build Tools: [Available/Missing]                                â”‚
â”‚  âœ“ Permissions: [Sufficient/Insufficient]                          â”‚
â”‚  âœ“ Environment Ready: [Yes/No]                                     â”‚
â”‚                                                                     â”‚
â”‚  4ï¸âƒ£ MINIMAL BUILD TEST                                              â”‚
â”‚  âœ“ Build Process: [Successful/Failed]                              â”‚
â”‚  âœ“ Functionality Test: [Passed/Failed]                             â”‚
â”‚  âœ“ Build Ready: [Yes/No]                                           â”‚
â”‚                                                                     â”‚
â”‚  ğŸš¨ FINAL VERDICT: [PASS/FAIL]                                      â”‚
â”‚  â¡ï¸ [Success message or error details]                              â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## âŒ FAILURE REPORT FORMAT

If any validation step fails, a detailed failure report is generated:

```
âš ï¸âš ï¸âš ï¸ QA VALIDATION FAILED âš ï¸âš ï¸âš ï¸

The following issues must be resolved before proceeding to BUILD mode:

1ï¸âƒ£ DEPENDENCY ISSUES:
- [Detailed description of dependency issues]
- [Recommended fix]

2ï¸âƒ£ CONFIGURATION ISSUES:
- [Detailed description of configuration issues]
- [Recommended fix]

3ï¸âƒ£ ENVIRONMENT ISSUES:
- [Detailed description of environment issues]
- [Recommended fix]

4ï¸âƒ£ BUILD TEST ISSUES:
- [Detailed description of build test issues]
- [Recommended fix]

âš ï¸ BUILD MODE IS BLOCKED until these issues are resolved.
Type 'VAN QA' after fixing the issues to re-validate.
```

## ğŸ”„ INTEGRATION WITH DESIGN DECISIONS

The VAN QA mode reads and validates design decisions from the CREATIVE phase:

```mermaid
graph TD
    Start["Read Design Decisions"] --> ReadCreative["Parse Creative Phase<br>Documentation"]
    ReadCreative --> ExtractTech["Extract Technology<br>Choices"]
    ExtractTech --> ExtractDeps["Extract Required<br>Dependencies"]
    ExtractDeps --> BuildValidationPlan["Build Validation<br>Plan"]
    BuildValidationPlan --> StartValidation["Start Four-Point<br>Validation Process"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ExtractTech fill:#f6546a,stroke:#c30052,color:white
    style BuildValidationPlan fill:#10b981,stroke:#059669,color:white
    style StartValidation fill:#f6546a,stroke:#c30052,color:white
```

### Technology Extraction Process:
```powershell
# Example: Extract technology choices from creative phase documentation
function Extract-TechnologyChoices {
    $techChoices = @{}
    
    # Read from systemPatterns.md
    if (Test-Path "graph-bank\systemPatterns.md") {
        $content = Get-Content "graph-bank\systemPatterns.md" -Raw
        
        # Extract framework choice
        if ($content -match "Framework:\s*(\w+)") {
            $techChoices["framework"] = $Matches[1]
        }
        
        # Extract UI library choice
        if ($content -match "UI Library:\s*(\w+)") {
            $techChoices["ui_library"] = $Matches[1]
        }
        
        # Extract state management choice
        if ($content -match "State Management:\s*([^\\n]+)") {
            $techChoices["state_management"] = $Matches[1].Trim()
        }
    }
    
    return $techChoices
}
```

## ğŸš¨ IMPLEMENTATION PREVENTION MECHANISM

If QA validation fails, the system prevents moving to BUILD mode:

```powershell
# Example: Enforce QA validation before allowing BUILD mode
function Check-QAValidationStatus {
    $qaStatusFile = "graph-bank\.qa_validation_status"
    
    if (Test-Path $qaStatusFile) {
        $status = Get-Content $qaStatusFile -Raw
        if ($status -match "PASS") {
            return $true
        }
    }
    
    # Display block message
    Write-Output "`n`n"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    Write-Output "â›”ï¸ BUILD MODE BLOCKED: QA VALIDATION REQUIRED"
    Write-Output "â›”ï¸ You must complete QA validation before proceeding to BUILD mode"
    Write-Output "`n"
    Write-Output "Type 'VAN QA' to perform technical validation"
    Write-Output "`n"
    Write-Output "ğŸš« NO IMPLEMENTATION CAN PROCEED WITHOUT VALIDATION ğŸš«"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    
    return $false
}
```

## ğŸ§ª COMMON QA VALIDATION FIXES

Here are common fixes for issues encountered during QA validation:

### Dependency Issues:
- **Missing Node.js**: Install Node.js from https://nodejs.org/
- **Outdated npm**: Run `npm install -g npm@latest` to update
- **Missing packages**: Run `npm install` or `npm install [package-name]`

### Configuration Issues:
- **Invalid JSON**: Use a JSON validator to check syntax
- **Missing Angular CLI**: Install Angular CLI globally: `npm install -g @angular/cli`
- **Incompatible TypeScript config**: Update `tsconfig.json` with correct Angular settings

### Environment Issues:
- **Permission denied**: Run terminal as administrator (Windows) or use sudo (Mac/Linux)
- **Port already in use**: Kill process using the port or change the port in configuration
- **Missing build tools**: Install required command-line tools

### Build Test Issues:
- **Build fails**: Check console for specific error messages
- **Test fails**: Verify minimal configuration is correct
- **Path issues**: Ensure paths use correct separators for the platform

## ğŸ”’ FINAL QA VALIDATION CHECKPOINT

```
âœ“ SECTION CHECKPOINT: QA VALIDATION
- Dependency Verification Passed? [YES/NO]
- Configuration Validation Passed? [YES/NO]
- Environment Validation Passed? [YES/NO]
- Minimal Build Test Passed? [YES/NO]

â†’ If all YES: Ready for BUILD mode
â†’ If any NO: Fix identified issues before proceeding
```
`````

## File: .cursor/rules/isolation_rules/visual-maps/archive-mode-map.mdc
`````
---
description: Visual process map for ARCHIVE mode (Task Documentation)
globs: "**/archive*/**", "**/document*/**", "**/complete*/**"
alwaysApply: false
---

# ARCHIVE MODE: TASK DOCUMENTATION PROCESS MAP

> **TL;DR:** This visual map guides the ARCHIVE mode process, focusing on creating comprehensive documentation of the completed task, archiving relevant files, and updating the Graph Bank for future reference.

## ğŸ§­ ARCHIVE MODE PROCESS FLOW

```mermaid
graph TD
    Start["START ARCHIVE MODE"] --> ReadTasks["Read tasks.md<br>reflection.md and<br>progress.md"]
    
    %% Initial Assessment
    ReadTasks --> VerifyReflect{"Reflection<br>Complete?"}
    VerifyReflect -->|"No"| ReturnReflect["Return to<br>REFLECT Mode"]
    VerifyReflect -->|"Yes"| AssessLevel{"Determine<br>Complexity Level"}
    
    %% Level-Based Archiving
    AssessLevel -->|"Level 1"| L1Archive["LEVEL 1 ARCHIVING"]
    AssessLevel -->|"Level 2"| L2Archive["LEVEL 2 ARCHIVING<br>Level2/archive-basic.mdc"]
    AssessLevel -->|"Level 3"| L3Archive["LEVEL 3 ARCHIVING<br>Level3/archive-intermediate.mdc"]
    AssessLevel -->|"Level 4"| L4Archive["LEVEL 4 ARCHIVING<br>Level4/archive-comprehensive.mdc"]
    
    %% Level 1 Archiving (Minimal)
    L1Archive --> L1Summary["Create Quick<br>Summary"]
    L1Summary --> L1Task["Update<br>tasks.md"]
    L1Task --> L1Complete["Mark Task<br>Complete"]
    
    %% Level 2 Archiving (Basic)
    L2Archive --> L2Summary["Create Basic<br>Archive Document"]
    L2Summary --> L2Doc["Document<br>Changes"]
    L2Doc --> L2Task["Update<br>tasks.md"]
    L2Task --> L2Progress["Update<br>progress.md"]
    L2Progress --> L2Complete["Mark Task<br>Complete"]
    
    %% Level 3-4 Archiving (Comprehensive)
    L3Archive & L4Archive --> L34Summary["Create Comprehensive<br>Archive Document"]
    L34Summary --> L34Doc["Document<br>Implementation"]
    L34Doc --> L34Creative["Archive Creative<br>Phase Documents"]
    L34Creative --> L34Code["Document Code<br>Changes"]
    L34Code --> L34Test["Document<br>Testing"]
    L34Test --> L34Lessons["Summarize<br>Lessons Learned"]
    L34Lessons --> L34Task["Update<br>tasks.md"]
    L34Task --> L34Progress["Update<br>progress.md"]
    L34Progress --> L34System["Update System<br>Documentation"]
    L34System --> L34Complete["Mark Task<br>Complete"]
    
    %% Completion
    L1Complete & L2Complete & L34Complete --> CreateArchive["Create Archive<br>Document in<br>docs/archive/"]
    CreateArchive --> UpdateActive["Update<br>activeContext.md"]
    UpdateActive --> Reset["Reset for<br>Next Task"]
```

## ğŸ“‹ ARCHIVE DOCUMENT STRUCTURE

The archive document should follow this structured format:

```mermaid
graph TD
    subgraph "Archive Document Structure"
        Header["# TASK ARCHIVE: [Task Name]"]
        Meta["## METADATA<br>Task info, dates, complexity"]
        Summary["## SUMMARY<br>Brief overview of the task"]
        Requirements["## REQUIREMENTS<br>What the task needed to accomplish"]
        Implementation["## IMPLEMENTATION<br>How the task was implemented"]
        Testing["## TESTING<br>How the solution was verified"]
        Lessons["## LESSONS LEARNED<br>Key takeaways from the task"]
        Refs["## REFERENCES<br>Links to related documents"]
    end
    
    Header --> Meta --> Summary --> Requirements --> Implementation --> Testing --> Lessons --> Refs
```

## ğŸ“Š REQUIRED FILE STATE VERIFICATION

Before archiving can begin, verify file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md has<br>reflection<br>complete?"}
    
    CheckTasks -->|"No"| ErrorReflect["ERROR:<br>Return to REFLECT Mode"]
    CheckTasks -->|"Yes"| CheckReflection{"reflection.md<br>exists?"}
    
    CheckReflection -->|"No"| ErrorCreate["ERROR:<br>Create reflection.md first"]
    CheckReflection -->|"Yes"| CheckProgress{"progress.md<br>updated?"}
    
    CheckProgress -->|"No"| ErrorProgress["ERROR:<br>Update progress.md first"]
    CheckProgress -->|"Yes"| ReadyArchive["Ready for<br>Archiving"]
```

## ğŸ” ARCHIVE TYPES BY COMPLEXITY

```mermaid
graph TD
    subgraph "Level 1: Minimal Archive"
        L1A["Basic Bug<br>Description"]
        L1B["Solution<br>Summary"]
        L1C["Affected<br>Files"]
    end
    
    subgraph "Level 2: Basic Archive"
        L2A["Enhancement<br>Description"]
        L2B["Implementation<br>Summary"]
        L2C["Testing<br>Results"]
        L2D["Lessons<br>Learned"]
    end
    
    subgraph "Level 3-4: Comprehensive Archive"
        L3A["Detailed<br>Requirements"]
        L3B["Architecture/<br>Design Decisions"]
        L3C["Implementation<br>Details"]
        L3D["Testing<br>Strategy"]
        L3E["Performance<br>Considerations"]
        L3F["Future<br>Enhancements"]
        L3G["Cross-References<br>to Other Systems"]
    end
    
    L1A --> L1B --> L1C
    
    L2A --> L2B --> L2C --> L2D
    
    L3A --> L3B --> L3C --> L3D --> L3E --> L3F --> L3G
```

## ğŸ“ ARCHIVE DOCUMENT TEMPLATES

### Level 1 (Minimal) Archive
```
# Bug Fix Archive: [Bug Name]

## Date
[Date of fix]

## Summary
[Brief description of the bug and solution]

## Implementation
[Description of the fix implemented]

## Files Changed
- [File 1]
- [File 2]
```

### Levels 2-4 (Comprehensive) Archive
```
# Task Archive: [Task Name]

## Metadata
- **Complexity**: Level [2/3/4]
- **Type**: [Enhancement/Feature/System]
- **Date Completed**: [Date]
- **Related Tasks**: [Related task references]

## Summary
[Comprehensive summary of the task]

## Requirements
- [Requirement 1]
- [Requirement 2]
- [Requirement 3]

## Implementation
### Approach
[Description of implementation approach]

### Key Components
- [Component 1]: [Description]
- [Component 2]: [Description]

### Files Changed
- [File 1]: [Description of changes]
- [File 2]: [Description of changes]

## Testing
- [Test 1]: [Result]
- [Test 2]: [Result]

## Lessons Learned
- [Lesson 1]
- [Lesson 2]
- [Lesson 3]

## Future Considerations
- [Future enhancement 1]
- [Future enhancement 2]

## References
- [Link to reflection document]
- [Link to creative phase documents]
- [Other relevant references]
```

## ğŸ“‹ ARCHIVE LOCATION AND NAMING

Archive documents should be organized following this pattern:

```mermaid
graph TD
    subgraph "Archive Structure"
        Root["docs/archive/"]
        Tasks["tasks/"]
        Features["features/"]
        Systems["systems/"]
        
        Root --> Tasks
        Root --> Features
        Root --> Systems
        
        Tasks --> Bug["bug-fix-name-YYYYMMDD.md"]
        Tasks --> Enhancement["enhancement-name-YYYYMMDD.md"]
        Features --> Feature["feature-name-YYYYMMDD.md"]
        Systems --> System["system-name-YYYYMMDD.md"]
    end
```

## ğŸ“Š TASKS.MD FINAL UPDATE

When archiving is complete, update tasks.md with:

```
## Status
- [x] Initialization complete
- [x] Planning complete
[For Level 3-4:]
- [x] Creative phases complete
- [x] Implementation complete
- [x] Reflection complete
- [x] Archiving complete

## Archive
- **Date**: [Completion date]
- **Archive Document**: [Link to archive document]
- **Status**: COMPLETED
```

## ğŸ“‹ ARCHIVE VERIFICATION CHECKLIST

```
âœ“ ARCHIVE VERIFICATION
- Reflection document reviewed? [YES/NO]
- Archive document created with all sections? [YES/NO]
- Archive document placed in correct location? [YES/NO]
- tasks.md marked as completed? [YES/NO]
- progress.md updated with archive reference? [YES/NO]
- activeContext.md updated for next task? [YES/NO]
- Creative phase documents archived (Level 3-4)? [YES/NO/NA]

â†’ If all YES: Archiving complete - Graph Bank reset for next task
â†’ If any NO: Complete missing archive elements
```

## ğŸ”„ TASK COMPLETION NOTIFICATION

When archiving is complete, notify user with:

```
## TASK ARCHIVED

âœ… Archive document created in docs/archive/
âœ… All task documentation preserved
âœ… Graph Bank updated with references
âœ… Task marked as COMPLETED

â†’ Graph Bank is ready for the next task
â†’ To start a new task, use VAN MODE
```
`````

## File: .cursor/rules/isolation_rules/visual-maps/qa-mode-map.mdc
`````
---
description: QA Mode
globs: qa-mode-map.mdc
alwaysApply: false
---


> **TL;DR:** This enhanced QA mode provides comprehensive validation at any stage of development. It automatically detects the current phase, validates Graph Bank consistency, verifies task tracking, and performs phase-specific technical validation to ensure project quality throughout the development lifecycle.

## ğŸ” ENHANCED QA MODE PROCESS FLOW

```mermaid
graph TD
    Start["ğŸš€ START QA MODE"] --> DetectPhase["ğŸ§­ PHASE DETECTION<br>Determine current project phase"]
    
    %% Phase detection decision path
    DetectPhase --> PhaseDetermination{"Current Phase?"}
    PhaseDetermination -->|"VAN"| VANChecks["VAN Phase Validation"]
    PhaseDetermination -->|"PLAN"| PLANChecks["PLAN Phase Validation"]
    PhaseDetermination -->|"CREATIVE"| CREATIVEChecks["CREATIVE Phase Validation"] 
    PhaseDetermination -->|"IMPLEMENT"| IMPLEMENTChecks["IMPLEMENT Phase Validation"]
    
    %% Universal checks that apply to all phases
    DetectPhase --> UniversalChecks["ğŸ” UNIVERSAL VALIDATION"]
    UniversalChecks --> GraphBankCheck["1ï¸âƒ£ GRAPH BANK VERIFICATION<br>Check consistency & updates"]
    GraphBankCheck --> TaskTrackingCheck["2ï¸âƒ£ TASK TRACKING VERIFICATION<br>Validate tasks.md as source of truth"]
    TaskTrackingCheck --> ReferenceCheck["3ï¸âƒ£ REFERENCE VALIDATION<br>Verify cross-references between docs"]
    
    %% Phase-specific validations feed into comprehensive report
    VANChecks & PLANChecks & CREATIVEChecks & IMPLEMENTChecks --> PhaseSpecificResults["Phase-Specific Results"]
    ReferenceCheck & PhaseSpecificResults --> ValidationResults{"âœ… All Checks<br>Passed?"}
    
    %% Results Processing
    ValidationResults -->|"Yes"| SuccessReport["ğŸ“ GENERATE SUCCESS REPORT<br>All validations passed"]
    ValidationResults -->|"No"| FailureReport["âš ï¸ GENERATE FAILURE REPORT<br>With specific fix instructions"]
    
    %% Success Path
    SuccessReport --> UpdateMB["ğŸ“š Update Graph Bank<br>Record successful validation"]
    UpdateMB --> ContinueProcess["ğŸš¦ CONTINUE: Phase processes<br>can proceed"]
    
    %% Failure Path
    FailureReport --> IdentifyFixes["ğŸ”§ IDENTIFY REQUIRED FIXES"]
    IdentifyFixes --> ApplyFixes["ğŸ› ï¸ APPLY FIXES"]
    ApplyFixes --> Revalidate["ğŸ”„ Re-run validation"]
    Revalidate --> ValidationResults
    
    %% Style nodes for clarity
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style DetectPhase fill:#f6ad55,stroke:#c27022,color:white
    style UniversalChecks fill:#f6546a,stroke:#c30052,color:white
    style GraphBankCheck fill:#10b981,stroke:#059669,color:white
    style TaskTrackingCheck fill:#10b981,stroke:#059669,color:white
    style ReferenceCheck fill:#10b981,stroke:#059669,color:white
    style ValidationResults fill:#f6546a,stroke:#c30052,color:white
    style SuccessReport fill:#10b981,stroke:#059669,color:white
    style FailureReport fill:#f6ad55,stroke:#c27022,color:white
    style ContinueProcess fill:#10b981,stroke:#059669,color:white,stroke-width:2px
    style IdentifyFixes fill:#f6ad55,stroke:#c27022,color:white
```

## ğŸ§­ PHASE DETECTION PROCESS

The enhanced QA mode first determines which phase the project is currently in:

```mermaid
graph TD
    PD["Phase Detection"] --> CheckMB["Analyze Graph Bank Files"]
    CheckMB --> CheckActive["Check activeContext.md<br>for current phase"]
    CheckActive --> CheckProgress["Check progress.md<br>for recent activities"]
    CheckProgress --> CheckTasks["Check tasks.md<br>for task status"]
    
    CheckTasks --> PhaseResult{"Determine<br>Current Phase"}
    PhaseResult -->|"VAN"| VAN["VAN Phase<br>Initialization"]
    PhaseResult -->|"PLAN"| PLAN["PLAN Phase<br>Task Planning"]
    PhaseResult -->|"CREATIVE"| CREATIVE["CREATIVE Phase<br>Design Decisions"]
    PhaseResult -->|"IMPLEMENT"| IMPLEMENT["IMPLEMENT Phase<br>Implementation"]
    
    VAN & PLAN & CREATIVE & IMPLEMENT --> LoadChecks["Load Phase-Specific<br>Validation Checks"]
    
    style PD fill:#4da6ff,stroke:#0066cc,color:white
    style PhaseResult fill:#f6546a,stroke:#c30052,color:white
    style LoadChecks fill:#10b981,stroke:#059669,color:white
```

## ğŸ“ UNIVERSAL GRAPH BANK VERIFICATION

This process ensures Graph Bank files are consistent and up-to-date regardless of phase:

```mermaid
graph TD
    MBVS["Graph Bank<br>Verification"] --> CoreCheck["Check Core Files Exist"]
    CoreCheck --> CoreFiles["Verify Required Files:<br>projectbrief.md<br>activeContext.md<br>tasks.md<br>progress.md"]
    
    CoreFiles --> ContentCheck["Verify Content<br>Consistency"]
    ContentCheck --> LastModified["Check Last Modified<br>Timestamps"]
    LastModified --> CrossRef["Validate Cross-<br>References"]
    
    CrossRef --> ConsistencyCheck{"All Files<br>Consistent?"}
    ConsistencyCheck -->|"Yes"| PassMB["âœ… Graph Bank<br>Verification Passed"]
    ConsistencyCheck -->|"No"| FailMB["âŒ Graph Bank<br>Inconsistencies Found"]
    
    FailMB --> FixSuggestions["Generate Fix<br>Suggestions"]
    
    style MBVS fill:#4da6ff,stroke:#0066cc,color:white
    style ConsistencyCheck fill:#f6546a,stroke:#c30052,color:white
    style PassMB fill:#10b981,stroke:#059669,color:white
    style FailMB fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“‹ TASK TRACKING VERIFICATION

This process validates tasks.md as the single source of truth:

```mermaid
graph TD
    TTV["Task Tracking<br>Verification"] --> CheckTasksFile["Check tasks.md<br>Existence & Format"]
    CheckTasksFile --> VerifyReferences["Verify Task References<br>in Other Documents"]
    VerifyReferences --> ProgressCheck["Check Consistency with<br>progress.md"]
    ProgressCheck --> StatusCheck["Verify Task Status<br>Accuracy"]
    
    StatusCheck --> TaskConsistency{"Tasks Properly<br>Tracked?"}
    TaskConsistency -->|"Yes"| PassTasks["âœ… Task Tracking<br>Verification Passed"]
    TaskConsistency -->|"No"| FailTasks["âŒ Task Tracking<br>Issues Found"]
    
    FailTasks --> TaskFixSuggestions["Generate Task Tracking<br>Fix Suggestions"]
    
    style TTV fill:#4da6ff,stroke:#0066cc,color:white
    style TaskConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassTasks fill:#10b981,stroke:#059669,color:white
    style FailTasks fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ”„ REFERENCE VALIDATION PROCESS

This process ensures proper cross-referencing between documents:

```mermaid
graph TD
    RV["Reference<br>Validation"] --> FindRefs["Find Cross-References<br>in Documents"]
    FindRefs --> VerifyRefs["Verify Reference<br>Accuracy"]
    VerifyRefs --> CheckBackRefs["Check Bidirectional<br>References"]
    
    CheckBackRefs --> RefConsistency{"References<br>Consistent?"}
    RefConsistency -->|"Yes"| PassRefs["âœ… Reference Validation<br>Passed"]
    RefConsistency -->|"No"| FailRefs["âŒ Reference<br>Issues Found"]
    
    FailRefs --> RefFixSuggestions["Generate Reference<br>Fix Suggestions"]
    
    style RV fill:#4da6ff,stroke:#0066cc,color:white
    style RefConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassRefs fill:#10b981,stroke:#059669,color:white
    style FailRefs fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸš¨ PHASE-SPECIFIC VALIDATION PROCESSES

### VAN Phase Validation

```mermaid
graph TD
    VAN["VAN Phase<br>Validation"] --> InitCheck["Check Initialization<br>Completeness"]
    InitCheck --> PlatformCheck["Verify Platform<br>Detection"]
    PlatformCheck --> ComplexityCheck["Validate Complexity<br>Determination"]
    
    ComplexityCheck --> VANConsistency{"VAN Phase<br>Complete?"}
    VANConsistency -->|"Yes"| PassVAN["âœ… VAN Phase<br>Validation Passed"]
    VANConsistency -->|"No"| FailVAN["âŒ VAN Phase<br>Issues Found"]
    
    style VAN fill:#4da6ff,stroke:#0066cc,color:white
    style VANConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassVAN fill:#10b981,stroke:#059669,color:white
    style FailVAN fill:#ff5555,stroke:#dd3333,color:white
```

### PLAN Phase Validation

```mermaid
graph TD
    PLAN["PLAN Phase<br>Validation"] --> PlanCheck["Check Planning<br>Documentation"]
    PlanCheck --> TaskBreakdown["Verify Task<br>Breakdown"]
    TaskBreakdown --> ScopeCheck["Validate Scope<br>Definition"]
    
    ScopeCheck --> PLANConsistency{"PLAN Phase<br>Complete?"}
    PLANConsistency -->|"Yes"| PassPLAN["âœ… PLAN Phase<br>Validation Passed"]
    PLANConsistency -->|"No"| FailPLAN["âŒ PLAN Phase<br>Issues Found"]
    
    style PLAN fill:#4da6ff,stroke:#0066cc,color:white
    style PLANConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassPLAN fill:#10b981,stroke:#059669,color:white
    style FailPLAN fill:#ff5555,stroke:#dd3333,color:white
```

### CREATIVE Phase Validation

```mermaid
graph TD
    CREATIVE["CREATIVE Phase<br>Validation"] --> DesignCheck["Check Design<br>Documents"]
    DesignCheck --> ArchCheck["Verify Architectural<br>Decisions"]
    ArchCheck --> PatternCheck["Validate Design<br>Patterns"]
    
    PatternCheck --> CREATIVEConsistency{"CREATIVE Phase<br>Complete?"}
    CREATIVEConsistency -->|"Yes"| PassCREATIVE["âœ… CREATIVE Phase<br>Validation Passed"]
    CREATIVEConsistency -->|"No"| FailCREATIVE["âŒ CREATIVE Phase<br>Issues Found"]
    
    style CREATIVE fill:#4da6ff,stroke:#0066cc,color:white
    style CREATIVEConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassCREATIVE fill:#10b981,stroke:#059669,color:white
    style FailCREATIVE fill:#ff5555,stroke:#dd3333,color:white
```

### IMPLEMENT Phase Technical Validation

This retains the original QA validation from the previous version:

```mermaid
graph TD
    IMPLEMENT["IMPLEMENT Phase<br>Validation"] --> ReadDesign["Read Design Decisions"]
    ReadDesign --> FourChecks["Four-Point Technical<br>Validation"]
    
    FourChecks --> DepCheck["1ï¸âƒ£ Dependency<br>Verification"]
    DepCheck --> ConfigCheck["2ï¸âƒ£ Configuration<br>Validation"]
    ConfigCheck --> EnvCheck["3ï¸âƒ£ Environment<br>Validation"]
    EnvCheck --> MinBuildCheck["4ï¸âƒ£ Minimal Build<br>Test"]
    
    MinBuildCheck --> IMPLEMENTConsistency{"Technical<br>Prerequisites Met?"}
    IMPLEMENTConsistency -->|"Yes"| PassIMPLEMENT["âœ… IMPLEMENT Phase<br>Validation Passed"]
    IMPLEMENTConsistency -->|"No"| FailIMPLEMENT["âŒ IMPLEMENT Phase<br>Issues Found"]
    
    style IMPLEMENT fill:#4da6ff,stroke:#0066cc,color:white
    style FourChecks fill:#f6546a,stroke:#c30052,color:white
    style IMPLEMENTConsistency fill:#f6546a,stroke:#c30052,color:white
    style PassIMPLEMENT fill:#10b981,stroke:#059669,color:white
    style FailIMPLEMENT fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“‹ UNIVERSAL VALIDATION COMMAND EXECUTION

### Graph Bank Verification Commands:

```bash
# Check Graph Bank file existence and recency
ls -la graph-bank/
find graph-bank/ -type f -mtime -7 | sort

# Check for consistency between files
grep -r "task" graph-bank/
grep -r "requirement" graph-bank/
```

### Task Tracking Verification Commands:

```bash
# Verify tasks.md as source of truth
test -f tasks.md && echo "âœ… tasks.md exists" || echo "âŒ tasks.md missing"

# Check references to tasks in other files
grep -r "Task" --include="*.md" .
grep -r "task" --include="*.md" . | grep -v "tasks.md" | wc -l

# Verify task status consistency
grep -i "completed\|done\|finished" tasks.md
grep -i "in progress\|started" tasks.md
```

### Reference Validation Commands:

```bash
# Find cross-references between files
grep -r "see\|refer\|reference" --include="*.md" .

# Check for broken references
for file in $(grep -l "see\|refer\|reference" --include="*.md" .); do
  for ref in $(grep -o '[a-zA-Z0-9_-]*\.md' $file); do
    test -f $ref || echo "âŒ Broken reference: $ref in $file"
  done
done
```

## ğŸ“‹ 1ï¸âƒ£ DEPENDENCY VERIFICATION PROCESS (Original)

This validation point ensures all required packages are correctly installed.

### Command Execution:

```bash
# Check if packages are installed
npm list @angular/core @angular/cli @angular/material @angular/cdk

# Verify package versions match requirements
npm list | grep -E "angular|material|signals"

# Check for peer dependency warnings
npm ls --depth=0
```

### Validation Criteria:
- All required packages must be installed
- Versions must be compatible with requirements
- No critical peer dependency warnings
- Required dev dependencies must be present

### Common Fixes:
- `npm install [missing-package]` - Install missing packages
- `npm install [package]@[version]` - Fix version mismatches
- `npm install --save-dev [dev-dependency]` - Add development dependencies

## ğŸ“ 2ï¸âƒ£ CONFIGURATION VALIDATION PROCESS (Original)

This validation point ensures configuration files are in the correct format for the project.

### Command Execution:

```bash
# Check package.json for module type
grep "\"type\":" package.json

# Verify configuration file extensions match module type
find . -name "*.config.*" | grep -E "\.(js|cjs|mjs)$"

# Test configuration syntax
node -c *.config.js || node -c *.config.cjs || node -c *.config.mjs
```

### Validation Criteria:
- Configuration file extensions must match module type in package.json
- File syntax must be valid
- Configuration must reference installed packages

### Common Fixes:
- Rename `.js` to `.cjs` for CommonJS in ES module projects
- Fix syntax errors in configuration files
- Adjust configuration to reference installed packages

## ğŸŒ 3ï¸âƒ£ ENVIRONMENT VALIDATION PROCESS (Original)

This validation point ensures the development environment is correctly set up.

### Command Execution:

```bash
# Check build tools 
npm run --help

# Verify node version compatibility
node -v

# Check for environment variables
printenv | grep -E "NODE_|PATH|HOME"

# Verify access permissions
ls -la .
```

### Validation Criteria:
- Node.js version must be compatible with requirements
- Build commands must be defined in package.json
- Environment must have necessary access permissions
- Required environment variables must be set

### Common Fixes:
- Update Node.js version
- Add missing scripts to package.json
- Fix file permissions with chmod/icacls
- Set required environment variables

## ğŸ”¥ 4ï¸âƒ£ MINIMAL BUILD TEST PROCESS (Original)

This validation point tests a minimal build to ensure basic functionality works.

### Command Execution:

```bash
# Run a minimal build
npm run build -- --dry-run || npm run dev -- --dry-run

# Test entry point file existence
find src -name "main.*" -o -name "index.*"

# Validate HTML entry point
grep -i "script.*src=" index.html
```

### Validation Criteria:
- Build process must complete without errors
- Entry point files must exist and be correctly referenced
- HTML must reference the correct JavaScript entry point
- Basic rendering must work in a test environment

### Common Fixes:
- Fix entry point references in HTML
- Correct import paths in JavaScript
- Fix build configuration errors
- Update incorrect paths or references

## ğŸ“Š ENHANCED COMPREHENSIVE QA REPORT FORMAT

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” ENHANCED QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚                                                                               â”‚
â”‚ Project: [Project Name]               Date: [Current Date]                    â”‚
â”‚ Platform: [OS Platform]               Detected Phase: [Current Phase]         â”‚
â”‚                                                                               â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” UNIVERSAL VALIDATION RESULTS â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                               â”‚
â”‚ 1ï¸âƒ£ GRAPH BANK VERIFICATION                                                   â”‚
â”‚    âœ“ Core Files: [Status]                                                     â”‚
â”‚    âœ“ Content Consistency: [Status]                                            â”‚
â”‚    âœ“ Last Modified: [Status]                                                  â”‚
â”‚                                                                               â”‚
â”‚ 2ï¸âƒ£ TASK TRACKING VERIFICATION                                                 â”‚
â”‚    âœ“ tasks.md Status: [Status]                                                â”‚
â”‚    âœ“ Task References: [Status]                                                â”‚
â”‚    âœ“ Status Consistency: [Status]                                             â”‚
â”‚                                                                               â”‚
â”‚ 3ï¸âƒ£ REFERENCE VALIDATION                                                       â”‚
â”‚    âœ“ Cross-References: [Status]                                               â”‚
â”‚    âœ“ Reference Accuracy: [Status]                                             â”‚
â”‚                                                                               â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” PHASE-SPECIFIC VALIDATION â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                               â”‚
â”‚ [VAN/PLAN/CREATIVE/IMPLEMENT] PHASE VALIDATION                                â”‚
â”‚    âœ“ [Phase-specific check 1]: [Status]                                       â”‚
â”‚    âœ“ [Phase-specific check 2]: [Status]                                       â”‚
â”‚    âœ“ [Phase-specific check 3]: [Status]                                       â”‚
â”‚                                                                               â”‚
â”‚ [Technical validation section shown only for IMPLEMENT phase]                  â”‚
â”‚                                                                               â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” OVERALL STATUS â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                               â”‚
â”‚ âœ… VALIDATION PASSED - Project quality verified for current phase              â”‚
â”‚                                                                               â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸš« ENHANCED FAILURE REPORT FORMAT

If validation fails, a detailed failure report is generated:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• âš ï¸ QA VALIDATION FAILURES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚                                                                                 â”‚
â”‚ Project: [Project Name]               Date: [Current Date]                      â”‚
â”‚ Platform: [OS Platform]               Detected Phase: [Current Phase]           â”‚
â”‚                                                                                 â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” FAILED CHECKS â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                                 â”‚
â”‚ âŒ GRAPH BANK ISSUES                                                           â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚                                                                                 â”‚
â”‚ âŒ TASK TRACKING ISSUES                                                         â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚                                                                                 â”‚
â”‚ âŒ REFERENCE ISSUES                                                             â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚                                                                                 â”‚
â”‚ âŒ [PHASE]-SPECIFIC ISSUES                                                      â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚    â€¢ [Specific issue details]                                                   â”‚
â”‚                                                                                 â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” REQUIRED FIXES â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                                 â”‚
â”‚ 1. [Specific fix instruction with command]                                      â”‚
â”‚ 2. [Specific fix instruction with command]                                      â”‚
â”‚ 3. [Specific fix instruction with command]                                      â”‚
â”‚                                                                                 â”‚
â”‚ âš ï¸ VALIDATION FAILED - Please resolve issues before proceeding                  â”‚
â”‚                                                                                 â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ”„ QA-ANYTIME ACTIVATION PROTOCOL

The enhanced QA mode can be activated at any time in the development process:

```mermaid
graph TD
    Start["User Types: QA"] --> DetectContext["Detect Current Context"]
    DetectContext --> RunQA["Run QA with Context-Aware Checks"]
    RunQA --> GenerateReport["Generate Appropriate QA Report"]
    GenerateReport --> UserResponse["Present Report to User"]
    
    UserResponse --> FixNeeded{"Fixes<br>Needed?"}
    FixNeeded -->|"Yes"| SuggestFixes["Display Fix Instructions"]
    FixNeeded -->|"No"| ContinueWork["Continue Current Phase Work"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style FixNeeded fill:#f6546a,stroke:#c30052,color:white
    style SuggestFixes fill:#ff5555,stroke:#dd3333,color:white
    style ContinueWork fill:#10b981,stroke:#059669,color:white
```

This enhanced QA mode serves as a "quality guardian" throughout the development process, ensuring documentation is consistently maintained and all phase requirements are met before proceeding to the next phase.
`````

## File: .cursor/rules/isolation_rules/visual-maps/van-mode-map.mdc
`````
---
description: Visual process map for VAN mode (Initialization)
globs: van-mode-map.mdc
alwaysApply: false
---
# VAN MODE: INITIALIZATION PROCESS MAP

> **TL;DR:** This visual map defines the VAN mode process for project initialization, task analysis, and technical validation. It guides users through platform detection, file verification, complexity determination, and technical validation to ensure proper setup before implementation.

## ğŸ§­ VAN MODE PROCESS FLOW

```mermaid
graph TD
    Start["START VAN MODE"] --> PlatformDetect["PLATFORM DETECTION"]
    PlatformDetect --> DetectOS["Detect Operating System"]
    DetectOS --> CheckPath["Check Path Separator Format"]
    CheckPath --> AdaptCmds["Adapt Commands if Needed"]
    AdaptCmds --> PlatformCP["â›” PLATFORM CHECKPOINT"]
    
    %% Basic File Verification with checkpoint
    PlatformCP --> BasicFileVerify["BASIC FILE VERIFICATION"]
    BasicFileVerify --> BatchCheck["Batch Check Essential Components"]
    BatchCheck --> BatchCreate["Batch Create Essential Structure"]
    BatchCreate --> BasicFileCP["â›” BASIC FILE CHECKPOINT"]
    
    %% Early Complexity Determination
    BasicFileCP --> EarlyComplexity["EARLY COMPLEXITY DETERMINATION"]
    EarlyComplexity --> AnalyzeTask["Analyze Task Requirements"]
    AnalyzeTask --> EarlyLevelCheck{"Complexity Level?"}
    
    %% Level handling paths
    EarlyLevelCheck -->|"Level 1"| ComplexityCP["â›” COMPLEXITY CHECKPOINT"]
    EarlyLevelCheck -->|"Level 2-4"| CRITICALGATE["ğŸš« CRITICAL GATE: FORCE MODE SWITCH"]
    CRITICALGATE --> ForceExit["Exit to PLAN mode"]
    
    %% Level 1 continues normally
    ComplexityCP --> InitSystem["INITIALIZE GRAPH BANK"]
    InitSystem --> Complete1["LEVEL 1 INITIALIZATION COMPLETE"]
    
    %% For Level 2+ tasks after PLAN and CREATIVE modes
    ForceExit -.-> OtherModes["PLAN â†’ CREATIVE modes"]
    OtherModes -.-> VANQA["VAN QA MODE"]
    VANQA --> QAProcess["Technical Validation Process"]
    QAProcess --> QACheck{"All Checks Pass?"}
    QACheck -->|"Yes"| BUILD["To BUILD MODE"]
    QACheck -->|"No"| FixIssues["Fix Technical Issues"]
    FixIssues --> QAProcess
    
    %% Style nodes
    style PlatformCP fill:#f55,stroke:#d44,color:white
    style BasicFileCP fill:#f55,stroke:#d44,color:white
    style ComplexityCP fill:#f55,stroke:#d44,color:white
    style CRITICALGATE fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style ForceExit fill:#ff0000,stroke:#990000,color:white,stroke-width:2px
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white,stroke-width:3px
    style QAProcess fill:#4da6ff,stroke:#0066cc,color:white
    style QACheck fill:#4da6ff,stroke:#0066cc,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸŒ PLATFORM DETECTION PROCESS

```mermaid
graph TD
    PD["Platform Detection"] --> CheckOS["Detect Operating System"]
    CheckOS --> Win["Windows"]
    CheckOS --> Mac["macOS"]
    CheckOS --> Lin["Linux"]
    
    Win & Mac & Lin --> Adapt["Adapt Commands<br>for Platform"]
    
    Win --> WinPath["Path: Backslash (\\)"]
    Mac --> MacPath["Path: Forward Slash (/)"]
    Lin --> LinPath["Path: Forward Slash (/)"]
    
    Win --> WinCmd["Command Adaptations:<br>dir, icacls, etc."]
    Mac --> MacCmd["Command Adaptations:<br>ls, chmod, etc."]
    Lin --> LinCmd["Command Adaptations:<br>ls, chmod, etc."]
    
    WinPath & MacPath & LinPath --> PathCP["Path Separator<br>Checkpoint"]
    WinCmd & MacCmd & LinCmd --> CmdCP["Command<br>Checkpoint"]
    
    PathCP & CmdCP --> PlatformComplete["Platform Detection<br>Complete"]
    
    style PD fill:#4da6ff,stroke:#0066cc,color:white
    style PlatformComplete fill:#10b981,stroke:#059669,color:white
```

## ğŸ“ FILE VERIFICATION PROCESS

```mermaid
graph TD
    FV["File Verification"] --> CheckFiles["Check Essential Files"]
    CheckFiles --> CheckMB["Check Graph Bank<br>Structure"]
    CheckMB --> MBExists{"Graph Bank<br>Exists?"}
    
    MBExists -->|"Yes"| VerifyMB["Verify Graph Bank<br>Contents"]
    MBExists -->|"No"| CreateMB["Create Graph Bank<br>Structure"]
    
    CheckFiles --> CheckDocs["Check Documentation<br>Files"]
    CheckDocs --> DocsExist{"Docs<br>Exist?"}
    
    DocsExist -->|"Yes"| VerifyDocs["Verify Documentation<br>Structure"]
    DocsExist -->|"No"| CreateDocs["Create Documentation<br>Structure"]
    
    VerifyMB & CreateMB --> MBCP["Graph Bank<br>Checkpoint"]
    VerifyDocs & CreateDocs --> DocsCP["Documentation<br>Checkpoint"]
    
    MBCP & DocsCP --> FileComplete["File Verification<br>Complete"]
    
    style FV fill:#4da6ff,stroke:#0066cc,color:white
    style FileComplete fill:#10b981,stroke:#059669,color:white
    style MBCP fill:#f6546a,stroke:#c30052,color:white
    style DocsCP fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ§© COMPLEXITY DETERMINATION PROCESS

```mermaid
graph TD
    CD["Complexity<br>Determination"] --> AnalyzeTask["Analyze Task<br>Requirements"]
    
    AnalyzeTask --> CheckKeywords["Check Task<br>Keywords"]
    CheckKeywords --> ScopeCheck["Assess<br>Scope Impact"]
    ScopeCheck --> RiskCheck["Evaluate<br>Risk Level"]
    RiskCheck --> EffortCheck["Estimate<br>Implementation Effort"]
    
    EffortCheck --> DetermineLevel{"Determine<br>Complexity Level"}
    DetermineLevel -->|"Level 1"| L1["Level 1:<br>Quick Bug Fix"]
    DetermineLevel -->|"Level 2"| L2["Level 2:<br>Simple Enhancement"]
    DetermineLevel -->|"Level 3"| L3["Level 3:<br>Intermediate Feature"]
    DetermineLevel -->|"Level 4"| L4["Level 4:<br>Complex System"]
    
    L1 --> CDComplete["Complexity Determination<br>Complete"]
    L2 & L3 & L4 --> ModeSwitch["Force Mode Switch<br>to PLAN"]
    
    style CD fill:#4da6ff,stroke:#0066cc,color:white
    style CDComplete fill:#10b981,stroke:#059669,color:white
    style ModeSwitch fill:#ff0000,stroke:#990000,color:white
    style DetermineLevel fill:#f6546a,stroke:#c30052,color:white
```

## ğŸ”„ COMPLETE WORKFLOW WITH QA VALIDATION

The full workflow includes technical validation before implementation:

```mermaid
flowchart LR
    VAN1["VAN MODE 
    (Initial Analysis)"] --> PLAN["PLAN MODE
    (Task Planning)"]
    PLAN --> CREATIVE["CREATIVE MODE
    (Design Decisions)"]
    CREATIVE --> VANQA["VAN QA MODE
    (Technical Validation)"] 
    VANQA --> BUILD["BUILD MODE
    (Implementation)"]
```

## ğŸ” TECHNICAL VALIDATION OVERVIEW

The VAN QA technical validation process consists of four key validation points:

```mermaid
graph TD
    VANQA["VAN QA MODE"] --> FourChecks["FOUR-POINT VALIDATION"]
    
    FourChecks --> DepCheck["1ï¸âƒ£ DEPENDENCY VERIFICATION<br>Check all required packages"]
    DepCheck --> ConfigCheck["2ï¸âƒ£ CONFIGURATION VALIDATION<br>Verify format & compatibility"]
    ConfigCheck --> EnvCheck["3ï¸âƒ£ ENVIRONMENT VALIDATION<br>Check build environment"]
    EnvCheck --> MinBuildCheck["4ï¸âƒ£ MINIMAL BUILD TEST<br>Test core functionality"]
    
    MinBuildCheck --> ValidationResults{"All Checks<br>Passed?"}
    ValidationResults -->|"Yes"| SuccessReport["GENERATE SUCCESS REPORT"]
    ValidationResults -->|"No"| FailureReport["GENERATE FAILURE REPORT"]
    
    SuccessReport --> BUILD["Proceed to BUILD MODE"]
    FailureReport --> FixIssues["Fix Technical Issues"]
    FixIssues --> ReValidate["Re-validate"]
    ReValidate --> ValidationResults
    
    style VANQA fill:#4da6ff,stroke:#0066cc,color:white
    style FourChecks fill:#f6546a,stroke:#c30052,color:white
    style ValidationResults fill:#f6546a,stroke:#c30052,color:white
    style BUILD fill:#10b981,stroke:#059669,color:white
    style FixIssues fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“ VALIDATION STATUS FORMAT

The QA Validation step includes clear status indicators:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION STATUS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚ âœ“ Design Decisions   â”‚ Verified as implementable          â”‚
â”‚ âœ“ Dependencies       â”‚ All required packages installed    â”‚
â”‚ âœ“ Configurations     â”‚ Format verified for platform       â”‚
â”‚ âœ“ Environment        â”‚ Suitable for implementation        â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VERIFIED - Clear to proceed to BUILD mode
```

## ğŸš¨ MODE TRANSITION TRIGGERS

### VAN to PLAN Transition
For complexity levels 2-4:
```
ğŸš« LEVEL [2-4] TASK DETECTED
Implementation in VAN mode is BLOCKED
This task REQUIRES PLAN mode
You MUST switch to PLAN mode for proper documentation and planning
Type 'PLAN' to switch to planning mode
```

### CREATIVE to VAN QA Transition
After completing the CREATIVE mode:
```
â­ï¸ NEXT MODE: VAN QA
To validate technical requirements before implementation, please type 'VAN QA'
```

### VAN QA to BUILD Transition
After successful validation:
```
âœ… TECHNICAL VALIDATION COMPLETE
All prerequisites verified successfully
You may now proceed to BUILD mode
Type 'BUILD' to begin implementation
```

## ğŸ”’ BUILD MODE PREVENTION MECHANISM

The system prevents moving to BUILD mode without passing QA validation:

```mermaid
graph TD
    Start["User Types: BUILD"] --> CheckQA{"QA Validation<br>Completed?"}
    CheckQA -->|"Yes and Passed"| AllowBuild["Allow BUILD Mode"]
    CheckQA -->|"No or Failed"| BlockBuild["BLOCK BUILD MODE"]
    BlockBuild --> Message["Display:<br>âš ï¸ QA VALIDATION REQUIRED"]
    Message --> ReturnToVANQA["Prompt: Type VAN QA"]
    
    style CheckQA fill:#f6546a,stroke:#c30052,color:white
    style BlockBuild fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style Message fill:#ff5555,stroke:#dd3333,color:white
    style ReturnToVANQA fill:#4da6ff,stroke:#0066cc,color:white
```

## ğŸ”„ QA COMMAND PRECEDENCE

QA validation can be called at any point in the process flow, and takes immediate precedence over any other current steps, including forced mode switches:

```mermaid
graph TD
    UserQA["User Types: QA"] --> HighPriority["âš ï¸ HIGH PRIORITY COMMAND"]
    HighPriority --> CurrentTask["Pause Current Task/Process"]
    CurrentTask --> LoadQA["Load QA Mode Map"]
    LoadQA --> RunQA["Execute QA Validation Process"]
    RunQA --> QAResults{"QA Results"}
    
    QAResults -->|"PASS"| ResumeFlow["Resume Prior Process Flow"]
    QAResults -->|"FAIL"| FixIssues["Fix Identified Issues"]
    FixIssues --> ReRunQA["Re-run QA Validation"]
    ReRunQA --> QAResults
    
    style UserQA fill:#f8d486,stroke:#e8b84d,color:black
    style HighPriority fill:#ff0000,stroke:#cc0000,color:white,stroke-width:3px
    style LoadQA fill:#4da6ff,stroke:#0066cc,color:white
    style RunQA fill:#4da6ff,stroke:#0066cc,color:white
    style QAResults fill:#f6546a,stroke:#c30052,color:white
```

### QA Interruption Rules

When a user types **QA** at any point:

1. **The QA command MUST take immediate precedence** over any current operation, including the "FORCE MODE SWITCH" triggered by complexity assessment.
2. The system MUST:
   - Immediately load the QA mode map
   - Execute the full QA validation process
   - Address any failures before continuing
3. **Required remediation steps take priority** over any pending mode switches or complexity rules
4. After QA validation is complete and passes:
   - Resume the previously determined process flow
   - Continue with any required mode switches

```
âš ï¸ QA OVERRIDE ACTIVATED
All other processes paused
QA validation checks now running...
Any issues found MUST be remediated before continuing with normal process flow
```

## ğŸ“‹ CHECKPOINT VERIFICATION TEMPLATE

Each major checkpoint in VAN mode uses this format:

```
âœ“ SECTION CHECKPOINT: [SECTION NAME]
- Requirement 1? [YES/NO]
- Requirement 2? [YES/NO]
- Requirement 3? [YES/NO]

â†’ If all YES: Ready for next section
â†’ If any NO: Fix missing items before proceeding
```

## ğŸš€ VAN MODE ACTIVATION

When the user types "VAN", respond with a confirmation and start the process:

```
User: VAN

Response: OK VAN - Beginning Initialization Process
```

After completing CREATIVE mode, when the user types "VAN QA", respond:

```
User: VAN QA

Response: OK VAN QA - Beginning Technical Validation
```

This ensures clear communication about which phase of VAN mode is active. 

## ğŸ” DETAILED QA VALIDATION PROCESS

### 1ï¸âƒ£ DEPENDENCY VERIFICATION

This step verifies that all required packages are installed and compatible:

```mermaid
graph TD
    Start["Dependency Verification"] --> ReadDeps["Read Required Dependencies<br>from Creative Phase"]
    ReadDeps --> CheckInstalled["Check if Dependencies<br>are Installed"]
    CheckInstalled --> DepStatus{"All Dependencies<br>Installed?"}
    
    DepStatus -->|"Yes"| VerifyVersions["Verify Versions<br>and Compatibility"]
    DepStatus -->|"No"| InstallMissing["Install Missing<br>Dependencies"]
    InstallMissing --> VerifyVersions
    
    VerifyVersions --> VersionStatus{"Versions<br>Compatible?"}
    VersionStatus -->|"Yes"| DepSuccess["Dependencies Verified<br>âœ… PASS"]
    VersionStatus -->|"No"| UpgradeVersions["Upgrade/Downgrade<br>as Needed"]
    UpgradeVersions --> RetryVerify["Retry Verification"]
    RetryVerify --> VersionStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style DepSuccess fill:#10b981,stroke:#059669,color:white
    style DepStatus fill:#f6546a,stroke:#c30052,color:white
    style VersionStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Windows (PowerShell) Implementation:
```powershell
# Example: Verify Node.js dependencies for an Angular project
function Verify-Dependencies {
    $requiredDeps = @{
        "node" = ">=14.0.0"
        "npm" = ">=6.0.0"
    }
    
    $missingDeps = @()
    $incompatibleDeps = @()
    
    # Check Node.js version
    $nodeVersion = $null
    try {
        $nodeVersion = node -v
        if ($nodeVersion -match "v(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 14) {
                $incompatibleDeps += "node (found $nodeVersion, required >=14.0.0)"
            }
        }
    } catch {
        $missingDeps += "node"
    }
    
    # Check npm version
    $npmVersion = $null
    try {
        $npmVersion = npm -v
        if ($npmVersion -match "(\d+)\.(\d+)\.(\d+)") {
            $major = [int]$Matches[1]
            if ($major -lt 6) {
                $incompatibleDeps += "npm (found $npmVersion, required >=6.0.0)"
            }
        }
    } catch {
        $missingDeps += "npm"
    }
    
    # Display results
    if ($missingDeps.Count -eq 0 -and $incompatibleDeps.Count -eq 0) {
        Write-Output "âœ… All dependencies verified and compatible"
        return $true
    } else {
        if ($missingDeps.Count -gt 0) {
            Write-Output "âŒ Missing dependencies: $($missingDeps -join ', ')"
        }
        if ($incompatibleDeps.Count -gt 0) {
            Write-Output "âŒ Incompatible versions: $($incompatibleDeps -join ', ')"
        }
        return $false
    }
}
```

#### Mac/Linux (Bash) Implementation:
```bash
#!/bin/bash

# Example: Verify Node.js dependencies for an Angular project
verify_dependencies() {
    local missing_deps=()
    local incompatible_deps=()
    
    # Check Node.js version
    if command -v node &> /dev/null; then
        local node_version=$(node -v)
        if [[ $node_version =~ v([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 14 )); then
                incompatible_deps+=("node (found $node_version, required >=14.0.0)")
            fi
        fi
    else
        missing_deps+=("node")
    fi
    
    # Check npm version
    if command -v npm &> /dev/null; then
        local npm_version=$(npm -v)
        if [[ $npm_version =~ ([0-9]+)\.([0-9]+)\.([0-9]+) ]]; then
            local major=${BASH_REMATCH[1]}
            if (( major < 6 )); then
                incompatible_deps+=("npm (found $npm_version, required >=6.0.0)")
            fi
        fi
    else
        missing_deps+=("npm")
    fi
    
    # Display results
    if [ ${#missing_deps[@]} -eq 0 ] && [ ${#incompatible_deps[@]} -eq 0 ]; then
        echo "âœ… All dependencies verified and compatible"
        return 0
    else
        if [ ${#missing_deps[@]} -gt 0 ]; then
            echo "âŒ Missing dependencies: ${missing_deps[*]}"
        fi
        if [ ${#incompatible_deps[@]} -gt 0 ]; then
            echo "âŒ Incompatible versions: ${incompatible_deps[*]}"
        fi
        return 1
    fi
}
```

### 2ï¸âƒ£ CONFIGURATION VALIDATION

This step validates configuration files format and compatibility:

```mermaid
graph TD
    Start["Configuration Validation"] --> IdentifyConfigs["Identify Configuration<br>Files"]
    IdentifyConfigs --> ReadConfigs["Read Configuration<br>Files"]
    ReadConfigs --> ValidateSyntax["Validate Syntax<br>and Format"]
    ValidateSyntax --> SyntaxStatus{"Syntax<br>Valid?"}
    
    SyntaxStatus -->|"Yes"| CheckCompatibility["Check Compatibility<br>with Platform"]
    SyntaxStatus -->|"No"| FixSyntax["Fix Syntax<br>Errors"]
    FixSyntax --> RetryValidate["Retry Validation"]
    RetryValidate --> SyntaxStatus
    
    CheckCompatibility --> CompatStatus{"Compatible with<br>Platform?"}
    CompatStatus -->|"Yes"| ConfigSuccess["Configurations Validated<br>âœ… PASS"]
    CompatStatus -->|"No"| AdaptConfigs["Adapt Configurations<br>for Platform"]
    AdaptConfigs --> RetryCompat["Retry Compatibility<br>Check"]
    RetryCompat --> CompatStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ConfigSuccess fill:#10b981,stroke:#059669,color:white
    style SyntaxStatus fill:#f6546a,stroke:#c30052,color:white
    style CompatStatus fill:#f6546a,stroke:#c30052,color:white
``` 

#### Configuration Validation Implementation:
```powershell
# Example: Validate configuration files for a web project
function Validate-Configurations {
    $configFiles = @(
        "package.json",
        "tsconfig.json",
        "vite.config.js"
    )
    
    $invalidConfigs = @()
    $incompatibleConfigs = @()
    
    foreach ($configFile in $configFiles) {
        if (Test-Path $configFile) {
            # Check JSON syntax for JSON files
            if ($configFile -match "\.json$") {
                try {
                    Get-Content $configFile -Raw | ConvertFrom-Json | Out-Null
                } catch {
                    $invalidConfigs += "$configFile (JSON syntax error: $($_.Exception.Message))"
                    continue
                }
            }
            
            # Specific configuration compatibility checks
            if ($configFile -eq "vite.config.js") {
                $content = Get-Content $configFile -Raw
                # Check for Angular CLI configuration
                if ($content -notmatch "angular") {
                    $incompatibleConfigs += "$configFile (Missing Angular configuration)"
                }
            }
        } else {
            $invalidConfigs += "$configFile (file not found)"
        }
    }
    
    # Display results
    if ($invalidConfigs.Count -eq 0 -and $incompatibleConfigs.Count -eq 0) {
        Write-Output "âœ… All configurations validated and compatible"
        return $true
    } else {
        if ($invalidConfigs.Count -gt 0) {
            Write-Output "âŒ Invalid configurations: $($invalidConfigs -join ', ')"
        }
        if ($incompatibleConfigs.Count -gt 0) {
            Write-Output "âŒ Incompatible configurations: $($incompatibleConfigs -join ', ')"
        }
        return $false
    }
}
```

### 3ï¸âƒ£ ENVIRONMENT VALIDATION

This step checks if the environment is properly set up for the implementation:

```mermaid
graph TD
    Start["Environment Validation"] --> CheckEnv["Check Build Environment"]
    CheckEnv --> VerifyBuildTools["Verify Build Tools"]
    VerifyBuildTools --> ToolsStatus{"Build Tools<br>Available?"}
    
    ToolsStatus -->|"Yes"| CheckPerms["Check Permissions<br>and Access"]
    ToolsStatus -->|"No"| InstallTools["Install Required<br>Build Tools"]
    InstallTools --> RetryTools["Retry Verification"]
    RetryTools --> ToolsStatus
    
    CheckPerms --> PermsStatus{"Permissions<br>Sufficient?"}
    PermsStatus -->|"Yes"| EnvSuccess["Environment Validated<br>âœ… PASS"]
    PermsStatus -->|"No"| FixPerms["Fix Permission<br>Issues"]
    FixPerms --> RetryPerms["Retry Permission<br>Check"]
    RetryPerms --> PermsStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style EnvSuccess fill:#10b981,stroke:#059669,color:white
    style ToolsStatus fill:#f6546a,stroke:#c30052,color:white
    style PermsStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Environment Validation Implementation:
```powershell
# Example: Validate environment for a web project
function Validate-Environment {
    $requiredTools = @(
        @{Name = "git"; Command = "git --version"},
        @{Name = "node"; Command = "node --version"},
        @{Name = "npm"; Command = "npm --version"}
    )
    
    $missingTools = @()
    $permissionIssues = @()
    
    # Check build tools
    foreach ($tool in $requiredTools) {
        try {
            Invoke-Expression $tool.Command | Out-Null
        } catch {
            $missingTools += $tool.Name
        }
    }
    
    # Check write permissions in project directory
    try {
        $testFile = ".__permission_test"
        New-Item -Path $testFile -ItemType File -Force | Out-Null
        Remove-Item -Path $testFile -Force
    } catch {
        $permissionIssues += "Current directory (write permission denied)"
    }
    
    # Check if port 3000 is available (commonly used for dev servers)
    try {
        $listener = New-Object System.Net.Sockets.TcpListener([System.Net.IPAddress]::Loopback, 3000)
        $listener.Start()
        $listener.Stop()
    } catch {
        $permissionIssues += "Port 3000 (already in use or access denied)"
    }
    
    # Display results
    if ($missingTools.Count -eq 0 -and $permissionIssues.Count -eq 0) {
        Write-Output "âœ… Environment validated successfully"
        return $true
    } else {
        if ($missingTools.Count -gt 0) {
            Write-Output "âŒ Missing tools: $($missingTools -join ', ')"
        }
        if ($permissionIssues.Count -gt 0) {
            Write-Output "âŒ Permission issues: $($permissionIssues -join ', ')"
        }
        return $false
    }
}
```

### 4ï¸âƒ£ MINIMAL BUILD TEST

This step performs a minimal build test to ensure core functionality:

```mermaid
graph TD
    Start["Minimal Build Test"] --> CreateTest["Create Minimal<br>Test Project"]
    CreateTest --> BuildTest["Attempt<br>Build"]
    BuildTest --> BuildStatus{"Build<br>Successful?"}
    
    BuildStatus -->|"Yes"| RunTest["Run Basic<br>Functionality Test"]
    BuildStatus -->|"No"| FixBuild["Fix Build<br>Issues"]
    FixBuild --> RetryBuild["Retry Build"]
    RetryBuild --> BuildStatus
    
    RunTest --> TestStatus{"Test<br>Passed?"}
    TestStatus -->|"Yes"| TestSuccess["Minimal Build Test<br>âœ… PASS"]
    TestStatus -->|"No"| FixTest["Fix Test<br>Issues"]
    FixTest --> RetryTest["Retry Test"]
    RetryTest --> TestStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style TestSuccess fill:#10b981,stroke:#059669,color:white
    style BuildStatus fill:#f6546a,stroke:#c30052,color:white
    style TestStatus fill:#f6546a,stroke:#c30052,color:white
```

#### Minimal Build Test Implementation:
```powershell
# Example: Perform minimal build test for an Angular project
function Perform-MinimalBuildTest {
    $buildSuccess = $false
    $testSuccess = $false
    
    # Create minimal test project
    $testDir = ".__build_test"
    if (Test-Path $testDir) {
        Remove-Item -Path $testDir -Recurse -Force
    }
    
    try {
        # Create minimal test directory
        New-Item -Path $testDir -ItemType Directory | Out-Null
        Push-Location $testDir
        
        # Initialize minimal package.json
        @"
{
  "name": "build-test",
  "version": "1.0.0",
  "description": "Minimal build test",
  "main": "index.js",
  "scripts": {
    "build": "echo Build test successful"
  }
}
"@ | Set-Content -Path "package.json"
        
        # Attempt build
        npm run build | Out-Null
        $buildSuccess = $true
        
        # Create minimal test file
        @"
console.log('Test successful');
"@ | Set-Content -Path "index.js"
        
        # Run basic test
        node index.js | Out-Null
        $testSuccess = $true
        
    } catch {
        Write-Output "âŒ Build test failed: $($_.Exception.Message)"
    } finally {
        Pop-Location
        if (Test-Path $testDir) {
            Remove-Item -Path $testDir -Recurse -Force
        }
    }
    
    # Display results
    if ($buildSuccess -and $testSuccess) {
        Write-Output "âœ… Minimal build test passed successfully"
        return $true
    } else {
        if (-not $buildSuccess) {
            Write-Output "âŒ Build process failed"
        }
        if (-not $testSuccess) {
            Write-Output "âŒ Basic functionality test failed"
        }
        return $false
    }
}
```

## ğŸ“‹ COMPREHENSIVE QA REPORT FORMAT

After running all validation steps, a comprehensive report is generated:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸ” QA VALIDATION REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚                                                                     â”‚
â”‚  PROJECT: [Project Name]                                            â”‚
â”‚  TIMESTAMP: [Current Date/Time]                                     â”‚
â”‚                                                                     â”‚
â”‚  1ï¸âƒ£ DEPENDENCY VERIFICATION                                         â”‚
â”‚  âœ“ Required: [List of required dependencies]                        â”‚
â”‚  âœ“ Installed: [List of installed dependencies]                      â”‚
â”‚  âœ“ Compatible: [Yes/No]                                            â”‚
â”‚                                                                     â”‚
â”‚  2ï¸âƒ£ CONFIGURATION VALIDATION                                        â”‚
â”‚  âœ“ Config Files: [List of configuration files]                      â”‚
â”‚  âœ“ Syntax Valid: [Yes/No]                                          â”‚
â”‚  âœ“ Platform Compatible: [Yes/No]                                   â”‚
â”‚                                                                     â”‚
â”‚  3ï¸âƒ£ ENVIRONMENT VALIDATION                                          â”‚
â”‚  âœ“ Build Tools: [Available/Missing]                                â”‚
â”‚  âœ“ Permissions: [Sufficient/Insufficient]                          â”‚
â”‚  âœ“ Environment Ready: [Yes/No]                                     â”‚
â”‚                                                                     â”‚
â”‚  4ï¸âƒ£ MINIMAL BUILD TEST                                              â”‚
â”‚  âœ“ Build Process: [Successful/Failed]                              â”‚
â”‚  âœ“ Functionality Test: [Passed/Failed]                             â”‚
â”‚  âœ“ Build Ready: [Yes/No]                                           â”‚
â”‚                                                                     â”‚
â”‚  ğŸš¨ FINAL VERDICT: [PASS/FAIL]                                      â”‚
â”‚  â¡ï¸ [Success message or error details]                              â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## âŒ FAILURE REPORT FORMAT

If any validation step fails, a detailed failure report is generated:

```
âš ï¸âš ï¸âš ï¸ QA VALIDATION FAILED âš ï¸âš ï¸âš ï¸

The following issues must be resolved before proceeding to BUILD mode:

1ï¸âƒ£ DEPENDENCY ISSUES:
- [Detailed description of dependency issues]
- [Recommended fix]

2ï¸âƒ£ CONFIGURATION ISSUES:
- [Detailed description of configuration issues]
- [Recommended fix]

3ï¸âƒ£ ENVIRONMENT ISSUES:
- [Detailed description of environment issues]
- [Recommended fix]

4ï¸âƒ£ BUILD TEST ISSUES:
- [Detailed description of build test issues]
- [Recommended fix]

âš ï¸ BUILD MODE IS BLOCKED until these issues are resolved.
Type 'VAN QA' after fixing the issues to re-validate.
```

## ğŸ”„ INTEGRATION WITH DESIGN DECISIONS

The VAN QA mode reads and validates design decisions from the CREATIVE phase:

```mermaid
graph TD
    Start["Read Design Decisions"] --> ReadCreative["Parse Creative Phase<br>Documentation"]
    ReadCreative --> ExtractTech["Extract Technology<br>Choices"]
    ExtractTech --> ExtractDeps["Extract Required<br>Dependencies"]
    ExtractDeps --> BuildValidationPlan["Build Validation<br>Plan"]
    BuildValidationPlan --> StartValidation["Start Four-Point<br>Validation Process"]
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style ExtractTech fill:#f6546a,stroke:#c30052,color:white
    style BuildValidationPlan fill:#10b981,stroke:#059669,color:white
    style StartValidation fill:#f6546a,stroke:#c30052,color:white
```

### Technology Extraction Process:
```powershell
# Example: Extract technology choices from creative phase documentation
function Extract-TechnologyChoices {
    $techChoices = @{}
    
    # Read from systemPatterns.md
    if (Test-Path "graph-bank\systemPatterns.md") {
        $content = Get-Content "graph-bank\systemPatterns.md" -Raw
        
        # Extract framework choice
        if ($content -match "Framework:\s*(\w+)") {
            $techChoices["framework"] = $Matches[1]
        }
        
        # Extract UI library choice
        if ($content -match "UI Library:\s*(\w+)") {
            $techChoices["ui_library"] = $Matches[1]
        }
        
        # Extract state management choice
        if ($content -match "State Management:\s*([^\\n]+)") {
            $techChoices["state_management"] = $Matches[1].Trim()
        }
    }
    
    return $techChoices
}
```

## ğŸš¨ IMPLEMENTATION PREVENTION MECHANISM

If QA validation fails, the system prevents moving to BUILD mode:

```powershell
# Example: Enforce QA validation before allowing BUILD mode
function Check-QAValidationStatus {
    $qaStatusFile = "graph-bank\.qa_validation_status"
    
    if (Test-Path $qaStatusFile) {
        $status = Get-Content $qaStatusFile -Raw
        if ($status -match "PASS") {
            return $true
        }
    }
    
    # Display block message
    Write-Output "`n`n"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    Write-Output "â›”ï¸ BUILD MODE BLOCKED: QA VALIDATION REQUIRED"
    Write-Output "â›”ï¸ You must complete QA validation before proceeding to BUILD mode"
    Write-Output "`n"
    Write-Output "Type 'VAN QA' to perform technical validation"
    Write-Output "`n"
    Write-Output "ğŸš« NO IMPLEMENTATION CAN PROCEED WITHOUT VALIDATION ğŸš«"
    Write-Output "ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«"
    
    return $false
}
```

## ğŸ§ª COMMON QA VALIDATION FIXES

Here are common fixes for issues encountered during QA validation:

### Dependency Issues:
- **Missing Node.js**: Install Node.js from https://nodejs.org/
- **Outdated npm**: Run `npm install -g npm@latest` to update
- **Missing packages**: Run `npm install` or `npm install [package-name]`

### Configuration Issues:
- **Invalid JSON**: Use a JSON validator to check syntax
- **Missing Angular CLI**: Install Angular CLI globally: `npm install -g @angular/cli`
- **Incompatible TypeScript config**: Update `tsconfig.json` with correct Angular settings

### Environment Issues:
- **Permission denied**: Run terminal as administrator (Windows) or use sudo (Mac/Linux)
- **Port already in use**: Kill process using the port or change the port in configuration
- **Missing build tools**: Install required command-line tools

### Build Test Issues:
- **Build fails**: Check console for specific error messages
- **Test fails**: Verify minimal configuration is correct
- **Path issues**: Ensure paths use correct separators for the platform

## ğŸ”’ FINAL QA VALIDATION CHECKPOINT

```
âœ“ SECTION CHECKPOINT: QA VALIDATION
- Dependency Verification Passed? [YES/NO]
- Configuration Validation Passed? [YES/NO]
- Environment Validation Passed? [YES/NO]
- Minimal Build Test Passed? [YES/NO]

â†’ If all YES: Ready for BUILD mode
â†’ If any NO: Fix identified issues before proceeding
```
`````

## File: angular/src/app/core/models/auth.model.ts
`````typescript
// src/app/core/models/auth.model.ts
â‹®----
import { signal, computed, Signal } from '@angular/core';
â‹®----
// Account åŸºç¤ä»‹é¢ - GitHub çš„æ ¸å¿ƒæ¦‚å¿µ
export interface Account {
  id: string;
  type: 'user' | 'organization';  // ä½¿ç”¨ type å€åˆ†ç”¨æˆ¶å’Œçµ„ç¹”
  login: string;                   // GitHub çš„å”¯ä¸€è­˜åˆ¥ç¢¼ (username/org-slug)
  profile: ProfileVO;              // ä½¿ç”¨ Value Object å°è£æª”æ¡ˆè³‡è¨Š
  permissions: PermissionVO;        // ä½¿ç”¨ Value Object å°è£æ¬Šé™è³‡è¨Š
  settings: SettingsVO;            // ä½¿ç”¨ Value Object å°è£è¨­å®šè³‡è¨Š
  projectsOwned: string[];          // æ“æœ‰çš„å°ˆæ¡ˆåˆ—è¡¨
  createdAt: Date;
  updatedAt: Date;
}
â‹®----
type: 'user' | 'organization';  // ä½¿ç”¨ type å€åˆ†ç”¨æˆ¶å’Œçµ„ç¹”
login: string;                   // GitHub çš„å”¯ä¸€è­˜åˆ¥ç¢¼ (username/org-slug)
profile: ProfileVO;              // ä½¿ç”¨ Value Object å°è£æª”æ¡ˆè³‡è¨Š
permissions: PermissionVO;        // ä½¿ç”¨ Value Object å°è£æ¬Šé™è³‡è¨Š
settings: SettingsVO;            // ä½¿ç”¨ Value Object å°è£è¨­å®šè³‡è¨Š
projectsOwned: string[];          // æ“æœ‰çš„å°ˆæ¡ˆåˆ—è¡¨
â‹®----
// ç¾ä»£åŒ–çš„ Account ç‹€æ…‹ç®¡ç†
export class AccountState
â‹®----
// åªè®€ Signals
â‹®----
// Computed Signals
â‹®----
// æ›´æ–°æ–¹æ³•
setAccount(account: Account | null)
â‹®----
setLoading(loading: boolean)
â‹®----
setError(error: string | null)
â‹®----
clearError()
â‹®----
// User ç¹¼æ‰¿ Account
export interface User extends Account {
  type: 'user';
  uid: string;  // Firebase Auth UID
  displayName: string;
  photoURL?: string;
  certificates?: CertificateVO[];        // ç”¨æˆ¶è­‰æ›¸
  socialRelations?: SocialRelationVO;   // ç¤¾äº¤é—œä¿‚
  organizationMemberships?: { [orgId: string]: string }; // orgId â†’ role
}
â‹®----
uid: string;  // Firebase Auth UID
â‹®----
certificates?: CertificateVO[];        // ç”¨æˆ¶è­‰æ›¸
socialRelations?: SocialRelationVO;   // ç¤¾äº¤é—œä¿‚
organizationMemberships?: { [orgId: string]: string }; // orgId â†’ role
â‹®----
// Organization ç¹¼æ‰¿ Account
export interface Organization extends Account {
  type: 'organization';
  description?: string;
  ownerId: string; // çµ„ç¹”æ“æœ‰è€…
  businessLicense?: BusinessLicenseVO;   // å•†æ¥­è¨±å¯è­‰
  // ç§»é™¤ members å’Œ teams çš„ Map å®šç¾©ï¼Œé€™äº›æ‡‰è©²é€šéå­é›†åˆæŸ¥è©¢ç²å–
  // ç§»é™¤é‡è¤‡çš„ settings æ¬„ä½ï¼Œä½¿ç”¨ç¹¼æ‰¿çš„ SettingsVO
}
â‹®----
ownerId: string; // çµ„ç¹”æ“æœ‰è€…
businessLicense?: BusinessLicenseVO;   // å•†æ¥­è¨±å¯è­‰
// ç§»é™¤ members å’Œ teams çš„ Map å®šç¾©ï¼Œé€™äº›æ‡‰è©²é€šéå­é›†åˆæŸ¥è©¢ç²å–
// ç§»é™¤é‡è¤‡çš„ settings æ¬„ä½ï¼Œä½¿ç”¨ç¹¼æ‰¿çš„ SettingsVO
â‹®----
// Repository ä»‹é¢ - GitHub çš„æ ¸å¿ƒæ¦‚å¿µ
export interface Repository {
  id: string;
  name: string;
  fullName: string; // owner/repo
  description?: string;
  private: boolean;
  ownerId: string; // Account ID (å¯ä»¥æ˜¯ User æˆ– Organization)
  ownerType: 'user' | 'organization';
  createdAt: Date;
  updatedAt: Date;
  defaultBranch: string;
  topics: string[];
}
â‹®----
fullName: string; // owner/repo
â‹®----
ownerId: string; // Account ID (å¯ä»¥æ˜¯ User æˆ– Organization)
â‹®----
// Repository Collaborator - å€‹äººå”ä½œè€…
export interface RepositoryCollaborator {
  id: string;
  repositoryId: string;
  userId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
  roleName: string;
  invitedBy?: string;
  invitedAt: Date;
}
â‹®----
// Repository Team Access - åœ˜éšŠè¨ªå•æ¬Šé™
export interface RepositoryTeamAccess {
  id: string;
  repositoryId: string;
  teamId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
  roleName: string;
  grantedBy?: string;
  grantedAt: Date;
}
â‹®----
// çµ„ç¹”å±¤ç´šè§’è‰²
export enum OrgRole {
  OWNER = 'owner',           // æ“æœ‰è€… - å®Œæ•´æ§åˆ¶æ¬Š
  ADMIN = 'admin',           // ç®¡ç†å“¡ - å¯ç®¡ç†æˆå“¡å’Œè¨­å®š
  MEMBER = 'member',         // æˆå“¡ - åŸºæœ¬æ¬Šé™
  BILLING = 'billing',       // å¸³å‹™ç®¡ç†å“¡
  OUTSIDE_COLLABORATOR = 'outside_collaborator' // å¤–éƒ¨å”ä½œè€…
}
â‹®----
OWNER = 'owner',           // æ“æœ‰è€… - å®Œæ•´æ§åˆ¶æ¬Š
ADMIN = 'admin',           // ç®¡ç†å“¡ - å¯ç®¡ç†æˆå“¡å’Œè¨­å®š
MEMBER = 'member',         // æˆå“¡ - åŸºæœ¬æ¬Šé™
BILLING = 'billing',       // å¸³å‹™ç®¡ç†å“¡
OUTSIDE_COLLABORATOR = 'outside_collaborator' // å¤–éƒ¨å”ä½œè€…
â‹®----
// åœ˜éšŠå±¤ç´šè§’è‰²
export enum TeamRole {
  MAINTAINER = 'maintainer', // ç¶­è­·è€…
  MEMBER = 'member'          // æˆå“¡
}
â‹®----
MAINTAINER = 'maintainer', // ç¶­è­·è€…
MEMBER = 'member'          // æˆå“¡
â‹®----
// ç´°ç²’åº¦æ¬Šé™
export interface TeamPermissions {
  repository: {
    read: boolean;
    write: boolean;
    admin: boolean;
  };
  issues: {
    read: boolean;
    write: boolean;
    delete: boolean;
  };
  pullRequests: {
    read: boolean;
    write: boolean;
    merge: boolean;
  };
}
â‹®----
// ACL èƒ½åŠ›å®šç¾©
export interface ACLAbility {
  action: string;      // 'read', 'write', 'delete', 'admin'
  resource: string;    // 'organization', 'team', 'repository', 'member'
}
â‹®----
action: string;      // 'read', 'write', 'delete', 'admin'
resource: string;    // 'organization', 'team', 'repository', 'member'
â‹®----
// Value Objects - é ˜åŸŸé©…å‹•è¨­è¨ˆçš„å„ªé»æ•´åˆ
export interface ProfileVO {
  name: string;
  email: string;
  avatar?: string;
  bio?: string;
  location?: string;
  website?: string;
}
â‹®----
export interface PermissionVO {
  roles: string[];
  abilities: ACLAbility[];
}
â‹®----
export interface SettingsVO {
  language: string;
  theme: 'light' | 'dark';
  notifications: {
    email: boolean;
    push: boolean;
    sms: boolean;
  };
  privacy: {
    profilePublic: boolean;
    showEmail: boolean;
  };
  // çµ„ç¹”ç‰¹å®šè¨­å®š
  organization?: {
    defaultMemberRole: OrgRole;
    visibility: 'public' | 'private';
  };
}
â‹®----
// çµ„ç¹”ç‰¹å®šè¨­å®š
â‹®----
// é¡å¤–çš„ Value Objects
export interface CertificateVO {
  id: string;
  name: string;
  issuer: string;
  issuedAt: Date;
  expiresAt?: Date;
}
â‹®----
export interface SocialRelationVO {
  followers: string[];
  following: string[];
  connections: string[];
}
â‹®----
export interface BusinessLicenseVO {
  licenseNumber: string;
  companyName: string;
  issuedBy: string;
  issuedAt: Date;
  expiresAt: Date;
}
â‹®----
export interface MemberVO {
  userId: string;
  role: OrgRole;
  joinedAt: Date;
  invitedBy?: string;
}
â‹®----
export interface TeamVO {
  id: string;
  name: string;
  slug: string;
  description?: string;
  permissions: TeamPermissions;
  assignedProjects: string[];
}
â‹®----
export interface Team {
  id: string;
  organizationId: string;
  name: string;
  slug: string;
  description?: string;
  createdAt: Date;
  updatedAt: Date;
  permissions: TeamPermissions;
}
â‹®----
export interface OrganizationMember {
  id: string;
  organizationId: string;
  userId: string;
  role: OrgRole;
  joinedAt: Date;
  invitedBy?: string;
}
â‹®----
export interface TeamMember {
  id: string;
  teamId: string;
  userId: string;
  role: TeamRole;
  joinedAt: Date;
  addedBy?: string;
}
â‹®----
// é©—è­‰å·¥å…·å‡½æ•¸
export class ValidationUtils
â‹®----
static validateEmail(email: string): boolean
â‹®----
static validateProfile(profile: ProfileVO): string[]
â‹®----
static validatePermission(permission: PermissionVO): string[]
`````

## File: angular/src/app/features/user/profile/profile-management.component.ts
`````typescript
import { Component, inject, OnInit, signal } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule, ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';
import { MatCardModule } from '@angular/material/card';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatDividerModule } from '@angular/material/divider';
import { MatTabsModule } from '@angular/material/tabs';
import { MatChipsModule } from '@angular/material/chips';
import { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatSelectModule } from '@angular/material/select';
â‹®----
import { UserService } from '../user.service';
import { User, SocialAccount, Certificate, NotificationPreferences, PrivacySettings } from '../user.model';
import { AvatarUtils } from '../../../core/utils/avatar.utils';
â‹®----
/**
 * å€‹äººè³‡æ–™ç®¡ç†çµ„ä»¶ - å°é½Š GitHub Account è¨­è¨ˆ
 * å¯¦ä½œå®Œæ•´çš„å€‹äººè³‡æ–™ç®¡ç†åŠŸèƒ½
 */
â‹®----
export class ProfileManagementComponent implements OnInit
â‹®----
// Signals
â‹®----
// Forms
â‹®----
ngOnInit()
â‹®----
private initializeForms()
â‹®----
private loadUserData()
â‹®----
// ä½¿ç”¨ Firebase æ•´åˆçš„ UserService
â‹®----
// æ›´æ–°è¡¨å–®
â‹®----
// Event handlers
onUpdateProfile()
â‹®----
onResetProfile()
â‹®----
onAddSocialAccount()
â‹®----
// TODO: å¯¦ä½œæ–°å¢ç¤¾äº¤å¸³æˆ¶
â‹®----
onRemoveSocialAccount(account: SocialAccount)
â‹®----
// TODO: å¯¦ä½œç§»é™¤ç¤¾äº¤å¸³æˆ¶
â‹®----
onUpdateNotifications()
â‹®----
// TODO: å¯¦ä½œæ›´æ–°é€šçŸ¥è¨­å®š
â‹®----
onAvatarUpload()
â‹®----
// å‰µå»ºæ–‡ä»¶è¼¸å…¥å…ƒç´ 
â‹®----
// æ›´æ–°ç”¨æˆ¶é ­åƒ URL
â‹®----
// Utility methods
getProviderIcon(provider: string): string
â‹®----
getProviderName(provider: string): string
â‹®----
getAvatarUrl(avatar: string | undefined): string
`````

## File: angular/src/styles.scss
`````scss
/* You can add global styles to this file, and also import other style files */

html, body { height: 100%; }
body { margin: 0; font-family: Roboto, "Helvetica Neue", sans-serif; }


body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  background-color: #f3f4f6;
}
`````

## File: docs/account.md
`````markdown
# Angular v20 + Signals + Firebase å¯¦ç¾ GitHub å¼æ¬Šé™ç³»çµ±

ä½¿ç”¨ Angular v20 ç¾ä»£åŒ–ç‰¹æ€§ï¼ˆSignalsã€Control Flowã€Standalone Componentsï¼‰å¯¦ç¾çš„ GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±æ¶æ§‹ã€‚

## ğŸ“‹ é–‹ç™¼é †åºæŒ‡å—

æœ¬æ–‡ä»¶æŒ‰ç…§å¯¦éš›é–‹ç™¼é †åºçµ„ç¹”ï¼Œé–‹ç™¼è€…å¯ä»¥ä¾åºå¯¦ç¾ï¼š

1. **ç’°å¢ƒé…ç½®** â†’ 2. **è³‡æ–™æ¨¡å‹** â†’ 3. **è³‡æ–™åº«è¨­è¨ˆ** â†’ 4. **æ ¸å¿ƒæœå‹™** â†’ 5. **æ¥­å‹™æœå‹™** â†’ 6. **æ¬Šé™ç³»çµ±** â†’ 7. **è·¯ç”±é…ç½®** â†’ 8. **è·¯ç”±å®ˆè¡›** â†’ 9. **UI å…ƒä»¶** â†’ 10. **å®‰å…¨è¦å‰‡** â†’ 11. **ä½¿ç”¨ç¯„ä¾‹** â†’ 12. **æ¸¬è©¦ç­–ç•¥**

---

## ä¸€ã€ç¾ä»£åŒ–æ‡‰ç”¨ç¨‹å¼é…ç½® (Standalone API)

### 1.1 æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•é…ç½®

```typescript
// main.ts
import { bootstrapApplication } from '@angular/platform-browser';
import { provideRouter } from '@angular/router';
import { provideHttpClient } from '@angular/common/http';
import { provideAnimations } from '@angular/platform-browser/animations';
import { initializeApp, provideFirebaseApp } from '@angular/fire/app';
import { getAuth, provideAuth } from '@angular/fire/auth';
import { getFirestore, provideFirestore } from '@angular/fire/firestore';
import { getAnalytics, provideAnalytics } from '@angular/fire/analytics';
import { AppComponent } from './app/app.component';
import { routes } from './app/routes/routes';
import { environment } from './environments/environment';

bootstrapApplication(AppComponent, {
  providers: [
    // Angular æ ¸å¿ƒæä¾›è€…
    provideRouter(routes),
    provideHttpClient(),
    provideAnimations(),
    
    // Firebase æä¾›è€…
    provideFirebaseApp(() => initializeApp(environment.firebase)),
    provideAuth(() => getAuth()),
    provideFirestore(() => getFirestore()),
    provideAnalytics(() => getAnalytics()),
    
    // è‡ªå®šç¾©æœå‹™æä¾›è€…
    // ... å…¶ä»–æœå‹™
  ],
}).catch(err => console.error(err));
```

### 1.2 ç’°å¢ƒé…ç½®

```typescript
// environments/environment.ts
export const environment = {
  production: false,
  firebase: {
    apiKey: "your-api-key",
    authDomain: "your-project.firebaseapp.com",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "your-app-id",
    measurementId: "your-measurement-id"
  }
};
```

---

## äºŒã€è³‡æ–™çµæ§‹è¨­è¨ˆ (TypeScript ä»‹é¢)

### 2.1 æ ¸å¿ƒè³‡æ–™æ¨¡å‹

```typescript
// src/app/core/models/auth.model.ts

import { signal, computed, Signal } from '@angular/core';

// Account åŸºç¤ä»‹é¢ - GitHub çš„æ ¸å¿ƒæ¦‚å¿µ
export interface Account {
  id: string;
  type: 'user' | 'organization';  // ä½¿ç”¨ type å€åˆ†ç”¨æˆ¶å’Œçµ„ç¹”
  login: string;                   // GitHub çš„å”¯ä¸€è­˜åˆ¥ç¢¼ (username/org-slug)
  profile: ProfileVO;              // ä½¿ç”¨ Value Object å°è£æª”æ¡ˆè³‡è¨Š
  permissions: PermissionVO;        // ä½¿ç”¨ Value Object å°è£æ¬Šé™è³‡è¨Š
  settings: SettingsVO;            // ä½¿ç”¨ Value Object å°è£è¨­å®šè³‡è¨Š
  projectsOwned: string[];          // æ“æœ‰çš„å°ˆæ¡ˆåˆ—è¡¨
  createdAt: Date;
  updatedAt: Date;
}

// ç¾ä»£åŒ–çš„ Account ç‹€æ…‹ç®¡ç†
export class AccountState {
  private _currentAccount = signal<Account | null>(null);
  private _isLoading = signal(false);
  private _error = signal<string | null>(null);

  // åªè®€ Signals
  readonly currentAccount: Signal<Account | null> = this._currentAccount.asReadonly();
  readonly isLoading: Signal<boolean> = this._isLoading.asReadonly();
  readonly error: Signal<string | null> = this._error.asReadonly();

  // Computed Signals
  readonly isAuthenticated = computed(() => this._currentAccount() !== null);
  readonly isUser = computed(() => this._currentAccount()?.type === 'user');
  readonly isOrganization = computed(() => this._currentAccount()?.type === 'organization');
  readonly userPermissions = computed(() => this._currentAccount()?.permissions || null);

  // æ›´æ–°æ–¹æ³•
  setAccount(account: Account | null) {
    this._currentAccount.set(account);
  }

  setLoading(loading: boolean) {
    this._isLoading.set(loading);
  }

  setError(error: string | null) {
    this._error.set(error);
  }

  clearError() {
    this._error.set(null);
  }
}

// User ç¹¼æ‰¿ Account
export interface User extends Account {
  type: 'user';
  uid: string;  // Firebase Auth UID
  displayName: string;
  photoURL?: string;
  certificates?: CertificateVO[];        // ç”¨æˆ¶è­‰æ›¸
  socialRelations?: SocialRelationVO;   // ç¤¾äº¤é—œä¿‚
  organizationMemberships?: Map<string, string>; // orgId â†’ role
}

// Organization ç¹¼æ‰¿ Account
export interface Organization extends Account {
  type: 'organization';
  description?: string;
  ownerId: string; // çµ„ç¹”æ“æœ‰è€…
  businessLicense?: BusinessLicenseVO;   // å•†æ¥­è¨±å¯è­‰
  // ç§»é™¤ members å’Œ teams çš„ Map å®šç¾©ï¼Œé€™äº›æ‡‰è©²é€šéå­é›†åˆæŸ¥è©¢ç²å–
  // ç§»é™¤é‡è¤‡çš„ settings æ¬„ä½ï¼Œä½¿ç”¨ç¹¼æ‰¿çš„ SettingsVO
}

// Repository ä»‹é¢ - GitHub çš„æ ¸å¿ƒæ¦‚å¿µ
export interface Repository {
  id: string;
  name: string;
  fullName: string; // owner/repo
  description?: string;
  private: boolean;
  ownerId: string; // Account ID (å¯ä»¥æ˜¯ User æˆ– Organization)
  ownerType: 'user' | 'organization';
  createdAt: Date;
  updatedAt: Date;
  defaultBranch: string;
  topics: string[];
}

// Repository Collaborator - å€‹äººå”ä½œè€…
export interface RepositoryCollaborator {
  id: string;
  repositoryId: string;
  userId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
  roleName: string;
  invitedBy?: string;
  invitedAt: Date;
}

// Repository Team Access - åœ˜éšŠè¨ªå•æ¬Šé™
export interface RepositoryTeamAccess {
  id: string;
  repositoryId: string;
  teamId: string;
  permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin';
  roleName: string;
  grantedBy?: string;
  grantedAt: Date;
}

// çµ„ç¹”å±¤ç´šè§’è‰²
export enum OrgRole {
  OWNER = 'owner',           // æ“æœ‰è€… - å®Œæ•´æ§åˆ¶æ¬Š
  ADMIN = 'admin',           // ç®¡ç†å“¡ - å¯ç®¡ç†æˆå“¡å’Œè¨­å®š
  MEMBER = 'member',         // æˆå“¡ - åŸºæœ¬æ¬Šé™
  BILLING = 'billing',       // å¸³å‹™ç®¡ç†å“¡
  OUTSIDE_COLLABORATOR = 'outside_collaborator' // å¤–éƒ¨å”ä½œè€…
}

// åœ˜éšŠå±¤ç´šè§’è‰²
export enum TeamRole {
  MAINTAINER = 'maintainer', // ç¶­è­·è€…
  MEMBER = 'member'          // æˆå“¡
}

// ç´°ç²’åº¦æ¬Šé™
export interface TeamPermissions {
  repository: {
    read: boolean;
    write: boolean;
    admin: boolean;
  };
  issues: {
    read: boolean;
    write: boolean;
    delete: boolean;
  };
  pullRequests: {
    read: boolean;
    write: boolean;
    merge: boolean;
  };
}

// ACL èƒ½åŠ›å®šç¾©
export interface ACLAbility {
  action: string;      // 'read', 'write', 'delete', 'admin'
  resource: string;    // 'organization', 'team', 'repository', 'member'
}

// Value Objects - é ˜åŸŸé©…å‹•è¨­è¨ˆçš„å„ªé»æ•´åˆ
export interface ProfileVO {
  name: string;
  email: string;
  avatar?: string;
  bio?: string;
  location?: string;
  website?: string;
}

export interface PermissionVO {
  roles: string[];
  abilities: ACLAbility[];
}

export interface SettingsVO {
  language: string;
  theme: 'light' | 'dark';
  notifications: {
    email: boolean;
    push: boolean;
    sms: boolean;
  };
  privacy: {
    profilePublic: boolean;
    showEmail: boolean;
  };
  // çµ„ç¹”ç‰¹å®šè¨­å®š
  organization?: {
    defaultMemberRole: OrgRole;
    visibility: 'public' | 'private';
  };
}

// é¡å¤–çš„ Value Objects
export interface CertificateVO {
  id: string;
  name: string;
  issuer: string;
  issuedAt: Date;
  expiresAt?: Date;
}

export interface SocialRelationVO {
  followers: string[];
  following: string[];
  connections: string[];
}

export interface BusinessLicenseVO {
  licenseNumber: string;
  companyName: string;
  issuedBy: string;
  issuedAt: Date;
  expiresAt: Date;
}

export interface MemberVO {
  userId: string;
  role: OrgRole;
  joinedAt: Date;
  invitedBy?: string;
}

export interface TeamVO {
  id: string;
  name: string;
  slug: string;
  description?: string;
  permissions: TeamPermissions;
  assignedProjects: string[];
}

export interface Team {
  id: string;
  organizationId: string;
  name: string;
  slug: string;
  description?: string;
  createdAt: Date;
  updatedAt: Date;
  permissions: TeamPermissions;
}

export interface OrganizationMember {
  id: string;
  organizationId: string;
  userId: string;
  role: OrgRole;
  joinedAt: Date;
  invitedBy?: string;
}

export interface TeamMember {
  id: string;
  teamId: string;
  userId: string;
  role: TeamRole;
  joinedAt: Date;
  addedBy?: string;
}

// é©—è­‰å·¥å…·å‡½æ•¸
export class ValidationUtils {
  static validateEmail(email: string): boolean {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  static validateProfile(profile: ProfileVO): string[] {
    const errors: string[] = [];
    
    if (!profile.name || profile.name.trim().length === 0) {
      errors.push('Profile name cannot be empty');
    }
    
    if (!profile.email || !this.validateEmail(profile.email)) {
      errors.push('Invalid email format');
    }
    
    return errors;
  }

  static validatePermission(permission: PermissionVO): string[] {
    const errors: string[] = [];
    
    if (!permission.roles || permission.roles.length === 0) {
      errors.push('At least one role is required');
    }
    
    if (!permission.abilities || permission.abilities.length === 0) {
      errors.push('At least one ability is required');
    }
    
    return errors;
  }
}
```

---

## ä¸‰ã€Firestore é›†åˆçµæ§‹è¨­è¨ˆ

### 3.1 è³‡æ–™åº«æ¶æ§‹

```
/accounts/{accountId}
  - id: string
  - type: 'user' | 'organization'
  - login: string (å”¯ä¸€)
  - profile: ProfileVO
  - permissions: PermissionVO
  - settings: SettingsVO
  - projectsOwned: string[]
  - createdAt: Date
  - updatedAt: Date
  
  // User ç‰¹å®šæ¬„ä½ (ç•¶ type === 'user')
  - uid?: string
  - displayName?: string
  - photoURL?: string
  - certificates?: CertificateVO[]
  - socialRelations?: SocialRelationVO
  - organizationMemberships?: {}
  
  // Organization ç‰¹å®šæ¬„ä½ (ç•¶ type === 'organization')
  - description?: string
  - ownerId?: string
  - businessLicense?: BusinessLicenseVO
  
  // Organization å­é›†åˆ
  /members/{userId}
    - id: string
    - organizationId: string
    - userId: string
    - role: OrgRole
    - joinedAt: Date
    - invitedBy?: string
  
  /teams/{teamId}
    - id: string
    - organizationId: string
    - name: string
    - slug: string
    - description?: string
    - permissions: TeamPermissions
    - createdAt: Date
    - updatedAt: Date
    
    /members/{userId}
      - id: string
      - teamId: string
      - userId: string
      - role: TeamRole
      - joinedAt: Date
      - addedBy?: string

/repositories/{repositoryId}
  - id: string
  - name: string
  - fullName: string
  - description?: string
  - private: boolean
  - ownerId: string
  - ownerType: 'user' | 'organization'
  - createdAt: Date
  - updatedAt: Date
  - defaultBranch: string
  - topics: string[]
  
  // Repository å”ä½œè€…å­é›†åˆ
  /collaborators/{userId}
    - id: string
    - repositoryId: string
    - userId: string
    - permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin'
    - roleName: string
    - invitedBy?: string
    - invitedAt: Date
  
  // Repository åœ˜éšŠè¨ªå•å­é›†åˆ
  /teamAccess/{teamId}
    - id: string
    - repositoryId: string
    - teamId: string
    - permission: 'read' | 'triage' | 'write' | 'maintain' | 'admin'
    - roleName: string
    - grantedBy?: string
    - grantedAt: Date
```

---

## å››ã€ç¾ä»£åŒ– Auth Service å¯¦ç¾ (Signals + inject)

### 4.1 èªè­‰æœå‹™æ ¸å¿ƒ

```typescript
// src/app/core/services/auth.service.ts

import { Injectable, inject, signal, computed, effect } from '@angular/core';
import { 
  Auth, 
  authState, 
  signInWithPopup, 
  signOut,
  GoogleAuthProvider,
  User as FirebaseUser
} from '@angular/fire/auth';
import {
  Firestore,
  doc,
  docData,
  collection,
  collectionData,
  query,
  where,
  setDoc,
  DocumentData
} from '@angular/fire/firestore';
import { Observable, of, switchMap, map, combineLatest } from 'rxjs';
import { User, Organization, Account, AccountState } from '../models/auth.model';

@Injectable({ providedIn: 'root' })
export class AuthService {
  private auth = inject(Auth);
  private firestore = inject(Firestore);
  
  // ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
  private accountState = new AccountState();
  
  // å…¬é–‹çš„ Signals
  readonly currentAccount = this.accountState.currentAccount;
  readonly isLoading = this.accountState.isLoading;
  readonly error = this.accountState.error;
  readonly isAuthenticated = this.accountState.isAuthenticated;
  readonly isUser = this.accountState.isUser;
  readonly isOrganization = this.accountState.isOrganization;
  readonly userPermissions = this.accountState.userPermissions;

  // Computed Signals for organizations
  readonly userOrganizations = computed(() => {
    const account = this.currentAccount();
    if (!account || account.type !== 'user') return [];
    
    // é€™è£¡æ‡‰è©²å¯¦ç¾çµ„ç¹”æŸ¥è©¢é‚è¼¯
    // ç‚ºäº†ç°¡åŒ–ï¼Œè¿”å›ç©ºæ•¸çµ„
    return [];
  });

  constructor() {
    // ç›£è½ Firebase Auth ç‹€æ…‹è®ŠåŒ–
    effect(() => {
      authState(this.auth).subscribe(firebaseUser => {
        if (firebaseUser) {
          this.loadUserAccount(firebaseUser.uid);
        } else {
          this.accountState.setAccount(null);
        }
      });
    });
  }

  async signInWithGoogle() {
    try {
      this.accountState.setLoading(true);
      this.accountState.clearError();
      
      const provider = new GoogleAuthProvider();
      const credential = await signInWithPopup(this.auth, provider);
      await this.syncUserProfile(credential.user);
      
      return credential;
    } catch (error) {
      this.accountState.setError(`ç™»å…¥å¤±æ•—: ${error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤'}`);
      throw error;
    } finally {
      this.accountState.setLoading(false);
    }
  }

  async signOut() {
    try {
      this.accountState.setLoading(true);
      await signOut(this.auth);
    } catch (error) {
      this.accountState.setError(`ç™»å‡ºå¤±æ•—: ${error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤'}`);
      throw error;
    } finally {
      this.accountState.setLoading(false);
    }
  }

  private async loadUserAccount(uid: string) {
    try {
      this.accountState.setLoading(true);
      
      const userDoc = doc(this.firestore, `accounts/${uid}`);
      const userData = await docData(userDoc, { idField: 'id' }).pipe(
        map(data => {
          if (data && data['type'] === 'user') {
            return data as User;
          }
          return null;
        })
      ).toPromise();
      
      this.accountState.setAccount(userData);
    } catch (error) {
      this.accountState.setError(`è¼‰å…¥ç”¨æˆ¶è³‡æ–™å¤±æ•—: ${error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤'}`);
    } finally {
      this.accountState.setLoading(false);
    }
  }

  private async syncUserProfile(firebaseUser: FirebaseUser) {
    try {
      const userRef = doc(this.firestore, `accounts/${firebaseUser.uid}`);
      const login = firebaseUser.email?.split('@')[0] || firebaseUser.uid;
      
      // å»ºç«‹ ProfileVO
      const profile: ProfileVO = {
        name: firebaseUser.displayName || login,
        email: firebaseUser.email || '',
        avatar: firebaseUser.photoURL || undefined,
        bio: undefined,
        location: undefined,
        website: undefined
      };
      
      // é©—è­‰ Profile
      const profileErrors = ValidationUtils.validateProfile(profile);
      if (profileErrors.length > 0) {
        throw new Error(`Profile validation failed: ${profileErrors.join(', ')}`);
      }
      
      // å»ºç«‹ PermissionVO
      const permissions: PermissionVO = {
        roles: ['user'],
        abilities: [
          { action: 'read', resource: 'organization' },
          { action: 'read', resource: 'team' },
          { action: 'read', resource: 'member' }
        ]
      };
      
      // å»ºç«‹ SettingsVO
      const settings: SettingsVO = {
        language: 'zh-TW',
        theme: 'light',
        notifications: { email: true, push: true, sms: false },
        privacy: { profilePublic: true, showEmail: false }
      };
      
      await setDoc(userRef, {
        id: firebaseUser.uid,
        type: 'user',
        login: login,
        profile: profile,
        permissions: permissions,
        settings: settings,
        projectsOwned: [],
        uid: firebaseUser.uid,
        displayName: firebaseUser.displayName || login,
        photoURL: firebaseUser.photoURL,
        certificates: [],
        socialRelations: {
          followers: [],
          following: [],
          connections: []
        },
        organizationMemberships: {},
        createdAt: new Date(),
        updatedAt: new Date()
      }, { merge: true });
      
    } catch (error) {
      console.error('Failed to sync user profile:', error);
      throw new Error(`User profile sync failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
  }

  // æ¬Šé™æª¢æŸ¥æ–¹æ³•
  can(action: string, resource: string): boolean {
    const permissions = this.userPermissions();
    if (!permissions) return false;
    
    return permissions.abilities.some(ability => 
      ability.action === action && ability.resource === resource
    );
  }

  // è§’è‰²æª¢æŸ¥æ–¹æ³•
  hasRole(role: string): boolean {
    const permissions = this.userPermissions();
    if (!permissions) return false;
    
    return permissions.roles.includes(role);
  }
}
```

---

## äº”ã€Organization Service (çµ„ç¹”ç®¡ç†æœå‹™)

### 5.1 çµ„ç¹”æ¥­å‹™é‚è¼¯

```typescript
// src/app/core/services/organization.service.ts

import { Injectable, inject } from '@angular/core';
import {
  Firestore,
  doc,
  docData,
  collection,
  collectionData,
  query,
  where,
  addDoc,
  setDoc,
  updateDoc,
  deleteDoc,
  getDoc,
  DocumentData
} from '@angular/fire/firestore';
import { Observable, map, switchMap, combineLatest, from, of } from 'rxjs';
import { 
  Organization, 
  OrganizationMember, 
  Team,
  TeamMember,
  OrgRole,
  TeamRole 
} from '../models/auth.model';

@Injectable({ providedIn: 'root' })
export class OrganizationService {
  private firestore = inject(Firestore);

  // å»ºç«‹çµ„ç¹”
  async createOrganization(
    name: string, 
    login: string, 
    ownerId: string,
    email?: string,
    description?: string
  ): Promise<string> {
    try {
      const orgId = doc(collection(this.firestore, 'accounts')).id;
      
      // å»ºç«‹ ProfileVO
      const profile: ProfileVO = {
        name: name,
        email: email || '',
        avatar: undefined,
        bio: description,
        location: undefined,
        website: undefined
      };
      
      // é©—è­‰ Profile
      const profileErrors = ValidationUtils.validateProfile(profile);
      if (profileErrors.length > 0) {
        throw new Error(`Organization profile validation failed: ${profileErrors.join(', ')}`);
      }
      
      // å»ºç«‹ PermissionVO
      const permissions: PermissionVO = {
        roles: ['organization'],
        abilities: [
          { action: 'admin', resource: 'organization' },
          { action: 'admin', resource: 'team' },
          { action: 'admin', resource: 'member' }
        ]
      };
      
      // å»ºç«‹ SettingsVO
      const settings: SettingsVO = {
        language: 'zh-TW',
        theme: 'light',
        notifications: { email: true, push: true, sms: false },
        privacy: { profilePublic: true, showEmail: false },
        organization: {
          defaultMemberRole: OrgRole.MEMBER,
          visibility: 'private'
        }
      };
      
      await setDoc(doc(this.firestore, `accounts/${orgId}`), {
        id: orgId,
        type: 'organization',
        login: login,
        profile: profile,
        permissions: permissions,
        settings: settings,
        projectsOwned: [],
        description: description,
        ownerId: ownerId,
        businessLicense: undefined,
        createdAt: new Date(),
        updatedAt: new Date()
      });

      // è‡ªå‹•åŠ å…¥æ“æœ‰è€…ç‚ºæˆå“¡
      await this.addOrganizationMember(orgId, ownerId, OrgRole.OWNER);
      
      return orgId;
      
    } catch (error) {
      console.error('Failed to create organization:', error);
      throw new Error(`Organization creation failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
  }

  // å–å¾—çµ„ç¹”è©³æƒ…
  getOrganization(orgId: string): Observable<Organization | undefined> {
    const orgDoc = doc(this.firestore, `accounts/${orgId}`);
    return docData(orgDoc, { idField: 'id' }).pipe(
      map(data => {
        if (data && data['type'] === 'organization') {
          return data as Organization;
        }
        return undefined;
      })
    );
  }

  // å–å¾—çµ„ç¹”æˆå“¡åˆ—è¡¨
  getOrganizationMembers(orgId: string): Observable<OrganizationMember[]> {
    const membersCol = collection(this.firestore, `accounts/${orgId}/members`);
    return collectionData(membersCol, { idField: 'id' }) as Observable<OrganizationMember[]>;
  }

  // æ–°å¢çµ„ç¹”æˆå“¡
  async addOrganizationMember(
    orgId: string, 
    userId: string, 
    role: OrgRole,
    invitedBy?: string
  ): Promise<void> {
    const memberRef = doc(this.firestore, `accounts/${orgId}/members/${userId}`);
    await setDoc(memberRef, {
      id: userId,
      organizationId: orgId,
      userId,
      role,
      joinedAt: new Date(),
      invitedBy
    });
  }

  // æ›´æ–°æˆå“¡è§’è‰²
  async updateMemberRole(
    orgId: string, 
    userId: string, 
    newRole: OrgRole
  ): Promise<void> {
    const memberRef = doc(this.firestore, `accounts/${orgId}/members/${userId}`);
    await updateDoc(memberRef, { role: newRole });
  }

  // ç§»é™¤çµ„ç¹”æˆå“¡
  async removeOrganizationMember(orgId: string, userId: string): Promise<void> {
    const memberRef = doc(this.firestore, `accounts/${orgId}/members/${userId}`);
    await deleteDoc(memberRef);
  }

  // å»ºç«‹åœ˜éšŠ
  async createTeam(
    orgId: string,
    name: string,
    slug: string,
    description?: string
  ): Promise<string> {
    const teamRef = await addDoc(
      collection(this.firestore, `accounts/${orgId}/teams`),
      {
        organizationId: orgId,
        name,
        slug,
        description,
        createdAt: new Date(),
        updatedAt: new Date(),
        permissions: {
          repository: { read: true, write: false, admin: false },
          issues: { read: true, write: false, delete: false },
          pullRequests: { read: true, write: false, merge: false }
        }
      }
    );
    return teamRef.id;
  }

  // å–å¾—çµ„ç¹”çš„æ‰€æœ‰åœ˜éšŠ
  getOrganizationTeams(orgId: string): Observable<Team[]> {
    const teamsCol = collection(this.firestore, `accounts/${orgId}/teams`);
    return collectionData(teamsCol, { idField: 'id' }) as Observable<Team[]>;
  }

  // å–å¾—åœ˜éšŠæˆå“¡
  getTeamMembers(orgId: string, teamId: string): Observable<TeamMember[]> {
    const membersCol = collection(
      this.firestore, 
      `accounts/${orgId}/teams/${teamId}/members`
    );
    return collectionData(membersCol, { idField: 'id' }) as Observable<TeamMember[]>;
  }

  // æ–°å¢åœ˜éšŠæˆå“¡
  async addTeamMember(
    orgId: string,
    teamId: string,
    userId: string,
    role: TeamRole,
    addedBy?: string
  ): Promise<void> {
    const memberRef = doc(
      this.firestore,
      `accounts/${orgId}/teams/${teamId}/members/${userId}`
    );
    await setDoc(memberRef, {
      id: userId,
      teamId,
      userId,
      role,
      joinedAt: new Date(),
      addedBy
    });
  }

  // ç§»é™¤åœ˜éšŠæˆå“¡
  async removeTeamMember(
    orgId: string,
    teamId: string,
    userId: string
  ): Promise<void> {
    const memberRef = doc(
      this.firestore,
      `accounts/${orgId}/teams/${teamId}/members/${userId}`
    );
    await deleteDoc(memberRef);
  }

  // æª¢æŸ¥ç”¨æˆ¶åœ¨çµ„ç¹”ä¸­çš„è§’è‰²
  async getUserOrgRole(orgId: string, userId: string): Promise<OrgRole | null> {
    const memberRef = doc(this.firestore, `accounts/${orgId}/members/${userId}`);
    const memberSnap = await getDoc(memberRef);
    
    if (!memberSnap.exists()) return null;
    
    const data = memberSnap.data() as OrganizationMember;
    return data.role;
  }

  // æª¢æŸ¥ç”¨æˆ¶æ‰€å±¬çš„åœ˜éšŠ
  getUserTeams(orgId: string, userId: string): Observable<Team[]> {
    return this.getOrganizationTeams(orgId).pipe(
      switchMap(teams => {
        if (teams.length === 0) return of([]);
        
        const teamObservables = teams.map(team =>
          this.getTeamMembers(orgId, team.id).pipe(
            map(members => ({
              team,
              isMember: members.some(m => m.userId === userId)
            }))
          )
        );
        return combineLatest(teamObservables);
      }),
      map(results => results.filter(r => r.isMember).map(r => r.team))
    );
  }
}
```

---

## å…­ã€ç¾ä»£åŒ–æ¬Šé™ç®¡ç†ç³»çµ± (Signals + Computed)

### 6.1 æ¬Šé™æœå‹™æ ¸å¿ƒ

```typescript
// src/app/core/services/permission.service.ts

import { Injectable, inject, signal, computed } from '@angular/core';
import { Firestore, doc, docData, collection, collectionData } from '@angular/fire/firestore';
import { AuthService } from './auth.service';
import { OrganizationService } from './organization.service';
import { OrgRole, TeamRole, ACLAbility } from '../models/auth.model';

@Injectable({ providedIn: 'root' })
export class PermissionService {
  private firestore = inject(Firestore);
  private authService = inject(AuthService);
  private orgService = inject(OrganizationService);

  // ç•¶å‰çµ„ç¹” ID Signal
  private _currentOrgId = signal<string | null>(null);
  readonly currentOrgId = this._currentOrgId.asReadonly();

  // çµ„ç¹”æˆå“¡è³‡æ ¼ Signal
  private _orgMembership = signal<{
    isMember: boolean;
    role: OrgRole | null;
    isOwner: boolean;
  }>({ isMember: false, role: null, isOwner: false });

  readonly orgMembership = this._orgMembership.asReadonly();

  // Computed Signals for permissions
  readonly canManageOrganization = computed(() => {
    const membership = this._orgMembership();
    return membership.isOwner || membership.role === OrgRole.ADMIN;
  });

  readonly canManageMembers = computed(() => {
    const membership = this._orgMembership();
    return membership.isOwner || membership.role === OrgRole.ADMIN;
  });

  readonly canManageTeams = computed(() => {
    const membership = this._orgMembership();
    return membership.isOwner || membership.role === OrgRole.ADMIN;
  });

  readonly canCreateRepositories = computed(() => {
    const membership = this._orgMembership();
    return membership.isMember;
  });

  // è¨­ç½®ç•¶å‰çµ„ç¹”
  async setCurrentOrganization(orgId: string) {
    this._currentOrgId.set(orgId);
    await this.loadOrganizationMembership(orgId);
  }

  // è¼‰å…¥çµ„ç¹”æˆå“¡è³‡æ ¼
  private async loadOrganizationMembership(orgId: string) {
    const currentUser = this.authService.currentAccount();
    if (!currentUser || currentUser.type !== 'user') {
      this._orgMembership.set({ isMember: false, role: null, isOwner: false });
      return;
    }

    try {
      const memberDoc = doc(this.firestore, `accounts/${orgId}/members/${currentUser.id}`);
      const memberData = await docData(memberDoc).pipe(
        map(data => data as { role: OrgRole } | null)
      ).toPromise();

      if (memberData) {
        const org = await this.orgService.getOrganization(orgId).toPromise();
        const isOwner = org?.ownerId === currentUser.id;
        
        this._orgMembership.set({
          isMember: true,
          role: memberData.role,
          isOwner
        });
      } else {
        this._orgMembership.set({ isMember: false, role: null, isOwner: false });
      }
    } catch (error) {
      console.error('Failed to load organization membership:', error);
      this._orgMembership.set({ isMember: false, role: null, isOwner: false });
    }
  }

  // æ¬Šé™æª¢æŸ¥æ–¹æ³•
  can(action: string, resource: string): boolean {
    const account = this.authService.currentAccount();
    if (!account) return false;

    // åŸºæœ¬æ¬Šé™æª¢æŸ¥
    const hasBasicPermission = account.permissions.abilities.some(ability => 
      ability.action === action && ability.resource === resource
    );

    if (hasBasicPermission) return true;

    // çµ„ç¹”ç‰¹å®šæ¬Šé™æª¢æŸ¥
    const membership = this._orgMembership();
    if (!membership.isMember) return false;

    switch (action) {
      case 'read':
        return true; // æ‰€æœ‰æˆå“¡éƒ½å¯ä»¥è®€å–
      
      case 'write':
        return membership.role === OrgRole.ADMIN || membership.isOwner;
      
      case 'admin':
        return membership.role === OrgRole.ADMIN || membership.isOwner;
      
      case 'delete':
        return membership.isOwner;
      
      default:
        return false;
    }
  }

  // åœ˜éšŠæ¬Šé™æª¢æŸ¥
  async canManageTeam(teamId: string): Promise<boolean> {
    const membership = this._orgMembership();
    if (!membership.isMember) return false;

    // çµ„ç¹”ç®¡ç†å“¡å’Œæ“æœ‰è€…å¯ä»¥ç®¡ç†æ‰€æœ‰åœ˜éšŠ
    if (membership.role === OrgRole.ADMIN || membership.isOwner) {
      return true;
    }

    // æª¢æŸ¥æ˜¯å¦ç‚ºåœ˜éšŠç¶­è­·è€…
    const currentUser = this.authService.currentAccount();
    if (!currentUser) return false;

    try {
      const teamMemberDoc = doc(
        this.firestore, 
        `accounts/${this._currentOrgId()}/teams/${teamId}/members/${currentUser.id}`
      );
      const teamMemberData = await docData(teamMemberDoc).pipe(
        map(data => data as { role: TeamRole } | null)
      ).toPromise();

      return teamMemberData?.role === TeamRole.MAINTAINER;
    } catch (error) {
      console.error('Failed to check team permissions:', error);
      return false;
    }
  }

  // Repository æ¬Šé™æª¢æŸ¥
  async canAccessRepository(repositoryId: string): Promise<boolean> {
    const account = this.authService.currentAccount();
    if (!account) return false;

    try {
      const repoDoc = doc(this.firestore, `repositories/${repositoryId}`);
      const repoData = await docData(repoDoc).pipe(
        map(data => data as { ownerId: string; ownerType: string; private: boolean } | null)
      ).toPromise();

      if (!repoData) return false;

      // å¦‚æœæ˜¯å…¬é–‹ Repositoryï¼Œä»»ä½•äººéƒ½å¯ä»¥è®€å–
      if (!repoData.private) return true;

      // æª¢æŸ¥æ˜¯å¦ç‚ºæ“æœ‰è€…
      if (repoData.ownerId === account.id) return true;

      // æª¢æŸ¥æ˜¯å¦ç‚ºå”ä½œè€…
      const collaboratorDoc = doc(
        this.firestore, 
        `repositories/${repositoryId}/collaborators/${account.id}`
      );
      const collaboratorData = await docData(collaboratorDoc).pipe(
        map(data => !!data)
      ).toPromise();

      return collaboratorData;
    } catch (error) {
      console.error('Failed to check repository permissions:', error);
      return false;
    }
  }
}
```

---

## ä¸ƒã€è·¯ç”±é…ç½® (æ‡‰ç”¨ç¨‹å¼è·¯ç”±)

### 7.1 è·¯ç”±è¨­å®š

```typescript
// src/app/routes/routes.ts

import { Routes } from '@angular/router';
import { permissionGuard } from '@core/guards/permission.guard';
import { authGuard } from '@core/guards/auth.guard';

export const routes: Routes = [
  {
    path: 'organizations/:orgId',
    canActivate: [authGuard],
    children: [
      {
        path: '',
        loadComponent: () => import('./organization-detail/organization-detail.component')
      },
      {
        path: 'settings',
        canActivate: [permissionGuard],
        data: { permission: { action: 'write', resource: 'organization' } },
        loadComponent: () => import('./organization-settings/organization-settings.component')
      },
      {
        path: 'members',
        canActivate: [permissionGuard],
        data: { permission: { action: 'read', resource: 'member' } },
        loadComponent: () => import('./members-list/members-list.component')
      },
      {
        path: 'teams',
        children: [
          {
            path: '',
            canActivate: [permissionGuard],
            data: { permission: { action: 'read', resource: 'team' } },
            loadComponent: () => import('./teams-list/teams-list.component')
          },
          {
            path: 'new',
            canActivate: [permissionGuard],
            data: { permission: { action: 'admin', resource: 'team' } },
            loadComponent: () => import('./team-create/team-create.component')
          }
        ]
      }
    ]
  }
];
```

---

## å…«ã€è·¯ç”±å®ˆè¡› (æ¬Šé™ä¿è­·)

### 8.1 èªè­‰å®ˆè¡›

```typescript
// src/app/core/guards/auth.guard.ts

import { inject } from '@angular/core';
import { Router, CanActivateFn } from '@angular/router';
import { AuthService } from '../services/auth.service';

export const authGuard: CanActivateFn = () => {
  const authService = inject(AuthService);
  const router = inject(Router);

  if (!authService.isAuthenticated()) {
    router.navigate(['/login']);
    return false;
  }

  return true;
};
```

### 8.2 æ¬Šé™å®ˆè¡›

```typescript
// src/app/core/guards/permission.guard.ts

import { inject } from '@angular/core';
import { Router, CanActivateFn, ActivatedRouteSnapshot } from '@angular/router';
import { PermissionService } from '../services/permission.service';
import { NzMessageService } from 'ng-zorro-antd/message';

export const permissionGuard: CanActivateFn = (route: ActivatedRouteSnapshot) => {
  const permissionService = inject(PermissionService);
  const router = inject(Router);
  const message = inject(NzMessageService);

  const requiredPermission = route.data['permission'] as { action: string; resource: string };
  const orgId = route.paramMap.get('orgId');

  if (!orgId) {
    message.error('ç„¡æ•ˆçš„çµ„ç¹” ID');
    router.navigate(['/organizations']);
    return false;
  }

  // è¨­ç½®ç•¶å‰çµ„ç¹”ä¸¦æª¢æŸ¥æ¬Šé™
  permissionService.setCurrentOrganization(orgId).then(() => {
    const hasPermission = permissionService.can(
      requiredPermission.action,
      requiredPermission.resource
    );

    if (!hasPermission) {
      message.error('æ‚¨æ²’æœ‰æ¬Šé™åŸ·è¡Œæ­¤æ“ä½œ');
      router.navigate([`/organizations/${orgId}`]);
    }
  });

  return true;
};
```

---

## ä¹ã€ç¾ä»£åŒ– UI å…ƒä»¶ç¯„ä¾‹ (Control Flow + Signals)

### 9.1 æˆå“¡ç®¡ç†å…ƒä»¶

```typescript
// src/app/routes/members-list/members-list.component.ts

import { Component, inject, OnInit, signal, computed } from '@angular/core';
import { ActivatedRoute } from '@angular/router';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { NzTableModule } from 'ng-zorro-antd/table';
import { NzButtonModule } from 'ng-zorro-antd/button';
import { NzSelectModule } from 'ng-zorro-antd/select';
import { NzPopconfirmModule } from 'ng-zorro-antd/popconfirm';
import { NzMessageService } from 'ng-zorro-antd/message';
import { Observable } from 'rxjs';
import { OrganizationService } from '@core/services/organization.service';
import { PermissionService } from '@core/services/permission.service';
import { OrganizationMember, OrgRole } from '@core/models/auth.model';

@Component({
  selector: 'app-members-list',
  standalone: true,
  imports: [
    CommonModule,
    FormsModule,
    NzTableModule,
    NzButtonModule,
    NzSelectModule,
    NzPopconfirmModule
  ],
  template: `
    @if (isLoading()) {
      <nz-spin nzSize="large" />
    } @else if (error()) {
      <nz-alert 
        nzType="error" 
        [nzMessage]="error()" 
        nzShowIcon />
    } @else {
      <nz-table 
        #memberTable 
        [nzData]="members()" 
        [nzLoading]="isLoading()">
        <thead>
          <tr>
            <th>æˆå“¡</th>
            <th>è§’è‰²</th>
            <th>åŠ å…¥æ™‚é–“</th>
            @if (canManageMembers()) {
              <th>æ“ä½œ</th>
            }
          </tr>
        </thead>
        <tbody>
          @for (member of memberTable.data; track member.id) {
            <tr>
              <td>{{ member.userId }}</td>
              <td>
                @if (canManageMembers()) {
                  <nz-select 
                    [(ngModel)]="member.role"
                    (ngModelChange)="updateRole(member, $event)"
                    style="width: 150px">
                    @for (role of availableRoles; track role.value) {
                      <nz-option 
                        [nzValue]="role.value" 
                        [nzLabel]="role.label">
                      </nz-option>
                    }
                  </nz-select>
                } @else {
                  <span>{{ getRoleLabel(member.role) }}</span>
                }
              </td>
              <td>{{ member.joinedAt | date: 'yyyy-MM-dd' }}</td>
              @if (canManageMembers()) {
                <td>
                  <button 
                    nz-button 
                    nzType="link" 
                    nzDanger
                    nz-popconfirm
                    nzPopconfirmTitle="ç¢ºå®šè¦ç§»é™¤æ­¤æˆå“¡å—?"
                    (nzOnConfirm)="removeMember(member)">
                    ç§»é™¤
                  </button>
                </td>
              }
            </tr>
          }
        </tbody>
      </nz-table>
    }
  `
})
export class MembersListComponent implements OnInit {
  private route = inject(ActivatedRoute);
  private orgService = inject(OrganizationService);
  private permissionService = inject(PermissionService);
  private message = inject(NzMessageService);

  // Signals for state management
  private _members = signal<OrganizationMember[]>([]);
  private _isLoading = signal(false);
  private _error = signal<string | null>(null);

  // Readonly signals
  readonly members = this._members.asReadonly();
  readonly isLoading = this._isLoading.asReadonly();
  readonly error = this._error.asReadonly();

  // Computed signals
  readonly canManageMembers = computed(() => 
    this.permissionService.canManageMembers()
  );

  orgId!: string;

  availableRoles = [
    { value: OrgRole.OWNER, label: 'æ“æœ‰è€…' },
    { value: OrgRole.ADMIN, label: 'ç®¡ç†å“¡' },
    { value: OrgRole.MEMBER, label: 'æˆå“¡' },
    { value: OrgRole.BILLING, label: 'å¸³å‹™ç®¡ç†å“¡' },
    { value: OrgRole.OUTSIDE_COLLABORATOR, label: 'å¤–éƒ¨å”ä½œè€…' }
  ];

  async ngOnInit() {
    this.orgId = this.route.snapshot.paramMap.get('orgId')!;
    
    // è¨­ç½®ç•¶å‰çµ„ç¹”åˆ°æ¬Šé™æœå‹™
    await this.permissionService.setCurrentOrganization(this.orgId);
    
    // è¼‰å…¥æˆå“¡åˆ—è¡¨
    await this.loadMembers();
  }

  private async loadMembers() {
    try {
      this._isLoading.set(true);
      this._error.set(null);
      
      const members = await this.orgService.getOrganizationMembers(this.orgId).toPromise();
      this._members.set(members || []);
    } catch (error) {
      this._error.set(`è¼‰å…¥æˆå“¡åˆ—è¡¨å¤±æ•—: ${error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤'}`);
    } finally {
      this._isLoading.set(false);
    }
  }

  async updateRole(member: OrganizationMember, newRole: OrgRole) {
    try {
      await this.orgService.updateMemberRole(this.orgId, member.userId, newRole);
      this.message.success('è§’è‰²å·²æ›´æ–°');
      
      // æ›´æ–°æœ¬åœ°ç‹€æ…‹
      this._members.update(members => 
        members.map(m => m.id === member.id ? { ...m, role: newRole } : m)
      );
    } catch (error) {
      this.message.error('æ›´æ–°å¤±æ•—');
    }
  }

  async removeMember(member: OrganizationMember) {
    try {
      await this.orgService.removeOrganizationMember(this.orgId, member.userId);
      this.message.success('æˆå“¡å·²ç§»é™¤');
      
      // æ›´æ–°æœ¬åœ°ç‹€æ…‹
      this._members.update(members => 
        members.filter(m => m.id !== member.id)
      );
    } catch (error) {
      this.message.error('ç§»é™¤å¤±æ•—');
    }
  }

  getRoleLabel(role: OrgRole): string {
    return this.availableRoles.find(r => r.value === role)?.label || role;
  }
}
```

---

## åã€Firestore å®‰å…¨è¦å‰‡

### 10.1 è³‡æ–™åº«å®‰å…¨é…ç½®

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // çµ±ä¸€çš„ accounts é›†åˆ
    match /accounts/{accountId} {
      // è®€å–ï¼šç”¨æˆ¶å¯ä»¥è®€å–è‡ªå·±ï¼Œæˆ–è®€å–è‡ªå·±æ‰€å±¬çµ„ç¹”
      allow read: if request.auth != null && (
        request.auth.uid == accountId ||
        (resource.data.type == 'organization' && isOrganizationMember(accountId))
      );
      
      // å‰µå»ºç”¨æˆ¶ account
      allow create: if request.auth != null && 
                      request.resource.data.type == 'user' &&
                      request.auth.uid == accountId;
      
      // å‰µå»ºçµ„ç¹” account
      allow create: if request.auth != null && 
                      request.resource.data.type == 'organization';
      
      // æ›´æ–°ï¼šç”¨æˆ¶æ›´æ–°è‡ªå·± or çµ„ç¹”ç®¡ç†å“¡æ›´æ–°çµ„ç¹”
      allow update: if request.auth != null && (
        (request.auth.uid == accountId && resource.data.type == 'user') ||
        (resource.data.type == 'organization' && hasOrgPermission(accountId, 'write'))
      );
      
      // åˆªé™¤ï¼šåªæœ‰çµ„ç¹”æ“æœ‰è€…å¯ä»¥åˆªé™¤çµ„ç¹”
      allow delete: if request.auth != null &&
                       resource.data.type == 'organization' && 
                       isOrganizationOwner(accountId);
      
      // çµ„ç¹”æˆå“¡
      match /members/{memberId} {
        allow read: if request.auth != null && isOrganizationMember(accountId);
        allow write: if request.auth != null && hasOrgPermission(accountId, 'admin');
      }
      
      // åœ˜éšŠ
      match /teams/{teamId} {
        allow read: if request.auth != null && isOrganizationMember(accountId);
        allow create: if request.auth != null && hasOrgPermission(accountId, 'admin');
        allow update: if request.auth != null && (
          hasOrgPermission(accountId, 'admin') || 
          isTeamMaintainer(accountId, teamId)
        );
        allow delete: if request.auth != null && hasOrgPermission(accountId, 'admin');
        
        // åœ˜éšŠæˆå“¡
        match /members/{memberId} {
          allow read: if request.auth != null && isOrganizationMember(accountId);
          allow write: if request.auth != null && (
            hasOrgPermission(accountId, 'admin') || 
            isTeamMaintainer(accountId, teamId)
          );
        }
      }
    }
    
    // Repository é›†åˆ
    match /repositories/{repositoryId} {
      allow read: if request.auth != null && (
        !resource.data.private ||
        resource.data.ownerId == request.auth.uid ||
        isRepositoryCollaborator(repositoryId)
      );
      
      allow write: if request.auth != null && (
        resource.data.ownerId == request.auth.uid ||
        isRepositoryCollaborator(repositoryId)
      );
      
      // Repository å”ä½œè€…
      match /collaborators/{userId} {
        allow read: if request.auth != null && (
          resource.data.repositoryId == repositoryId &&
          (isRepositoryOwner(repositoryId) || request.auth.uid == userId)
        );
        allow write: if request.auth != null && isRepositoryOwner(repositoryId);
      }
      
      // Repository åœ˜éšŠè¨ªå•
      match /teamAccess/{teamId} {
        allow read: if request.auth != null && (
          resource.data.repositoryId == repositoryId &&
          isRepositoryOwner(repositoryId)
        );
        allow write: if request.auth != null && isRepositoryOwner(repositoryId);
      }
    }
    
    // è¼”åŠ©å‡½æ•¸
    function isOrganizationMember(accountId) {
      return exists(/databases/$(database)/documents/accounts/$(accountId)/members/$(request.auth.uid));
    }
    
    function isOrganizationOwner(accountId) {
      return get(/databases/$(database)/documents/accounts/$(accountId)).data.ownerId == request.auth.uid;
    }
    
    function hasOrgPermission(accountId, level) {
      let member = get(/databases/$(database)/documents/accounts/$(accountId)/members/$(request.auth.uid));
      return member.data.role == 'owner' || member.data.role == 'admin' || 
             (level == 'write' && member.data.role == 'admin');
    }
    
    function isTeamMaintainer(accountId, teamId) {
      let teamMember = get(/databases/$(database)/documents/accounts/$(accountId)/teams/$(teamId)/members/$(request.auth.uid));
      return teamMember.data.role == 'maintainer';
    }
    
    function isRepositoryOwner(repositoryId) {
      return get(/databases/$(database)/documents/repositories/$(repositoryId)).data.ownerId == request.auth.uid;
    }
    
    function isRepositoryCollaborator(repositoryId) {
      return exists(/databases/$(database)/documents/repositories/$(repositoryId)/collaborators/$(request.auth.uid));
    }
  }
}
```

---

## åä¸€ã€ä½¿ç”¨ç¯„ä¾‹èˆ‡æœ€ä½³å¯¦è¸

### 11.1 åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ Control Flow + Signals

```html
<!-- ä½¿ç”¨ @if æ›¿ä»£ *ngIf -->
@if (permissionService.canManageTeams()) {
  <button 
    nz-button 
    (click)="createTeam()">
    å»ºç«‹åœ˜éšŠ
  </button>
}

<!-- ä½¿ç”¨ @if é€²è¡Œæ¢ä»¶æ¸²æŸ“ -->
@if (permissionService.canManageMembers()) {
  <nz-select [(ngModel)]="selectedRole">
    <nz-option nzValue="admin" nzLabel="ç®¡ç†å“¡"></nz-option>
    <nz-option nzValue="member" nzLabel="æˆå“¡"></nz-option>
  </nz-select>
}

<!-- ä½¿ç”¨ @if/@else é€²è¡Œæ¢ä»¶é¡¯ç¤º -->
@if (permissionService.canManageOrganization()) {
  <button nz-button (click)="editSettings()">ç·¨è¼¯è¨­å®š</button>
} @else {
  <span>å”¯è®€æ¨¡å¼</span>
}
```

### 11.2 åœ¨ç¨‹å¼ç¢¼ä¸­æª¢æŸ¥æ¬Šé™

```typescript
import { Component, inject, OnInit } from '@angular/core';
import { PermissionService } from '@core/services/permission.service';

@Component({
  selector: 'app-organization-settings',
  template: `...`
})
export class OrganizationSettingsComponent implements OnInit {
  private permissionService = inject(PermissionService);
  
  canEditSettings = false;
  canManageMembers = false;
  isOwner = false;

  ngOnInit() {
    // æª¢æŸ¥å„ç¨®æ¬Šé™
    this.canEditSettings = this.permissionService.can('write', 'organization');
    this.canManageMembers = this.permissionService.can('admin', 'member');
    this.isOwner = this.permissionService.can('delete', 'organization');
  }

  async deleteOrganization() {
    if (!this.isOwner) {
      console.error('åªæœ‰æ“æœ‰è€…å¯ä»¥åˆªé™¤çµ„ç¹”');
      return;
    }
    // åŸ·è¡Œåˆªé™¤
  }

  async inviteMember() {
    if (!this.canManageMembers) {
      console.error('æ²’æœ‰æ¬Šé™é‚€è«‹æˆå“¡');
      return;
    }
    // åŸ·è¡Œé‚€è«‹
  }
}
```

### 11.3 çµ„ç¹”ç®¡ç†å®Œæ•´ç¯„ä¾‹

```typescript
// src/app/routes/organization-dashboard/organization-dashboard.component.ts

import { Component, inject, OnInit } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';
import { CommonModule } from '@angular/common';
import { NzCardModule } from 'ng-zorro-antd/card';
import { NzButtonModule } from 'ng-zorro-antd/button';
import { NzStatisticModule } from 'ng-zorro-antd/statistic';
import { NzGridModule } from 'ng-zorro-antd/grid';
import { Observable, combineLatest, map } from 'rxjs';
import { OrganizationService } from '@core/services/organization.service';
import { PermissionService } from '@core/services/permission.service';
import { AuthService } from '@core/services/auth.service';
import { Organization, Team, OrganizationMember } from '@core/models/auth.model';

@Component({
  selector: 'app-organization-dashboard',
  standalone: true,
  imports: [
    CommonModule,
    NzCardModule,
    NzButtonModule,
    NzStatisticModule,
    NzGridModule
  ],
  template: `
    @if (dashboardData$ | async; as data) {
      <div nz-row [nzGutter]="16">
        <!-- çµ„ç¹”è³‡è¨Š -->
        <div nz-col [nzSpan]="24">
          <nz-card [nzTitle]="data.org.name">
            <p>{{ data.org.description || 'æš«ç„¡æè¿°' }}</p>
            <div class="actions">
              @if (permissionService.canManageOrganization()) {
                <button 
                  nz-button 
                  nzType="primary"
                  (click)="editOrganization()">
                  ç·¨è¼¯çµ„ç¹”
                </button>
              }
              @if (permissionService.can('delete', 'organization')) {
                <button 
                  nz-button 
                  nzDanger
                  (click)="deleteOrganization()">
                  åˆªé™¤çµ„ç¹”
                </button>
              }
            </div>
          </nz-card>
        </div>

        <!-- çµ±è¨ˆè³‡è¨Š -->
        <div nz-col [nzSpan]="8">
          <nz-card>
            <nz-statistic 
              [nzValue]="data.memberCount" 
              nzTitle="æˆå“¡æ•¸é‡">
            </nz-statistic>
            @if (permissionService.canManageMembers()) {
              <button 
                nz-button 
                nzBlock
                (click)="goToMembers()">
                ç®¡ç†æˆå“¡
              </button>
            }
          </nz-card>
        </div>

        <div nz-col [nzSpan]="8">
          <nz-card>
            <nz-statistic 
              [nzValue]="data.teamCount" 
              nzTitle="åœ˜éšŠæ•¸é‡">
            </nz-statistic>
            @if (permissionService.can('read', 'team')) {
              <button 
                nz-button 
                nzBlock
                (click)="goToTeams()">
                æŸ¥çœ‹åœ˜éšŠ
              </button>
            }
          </nz-card>
        </div>

        <div nz-col [nzSpan]="8">
          <nz-card>
            <nz-statistic 
              [nzValue]="data.userTeamCount" 
              nzTitle="æˆ‘çš„åœ˜éšŠ">
            </nz-statistic>
            @if (permissionService.canManageTeams()) {
              <button 
                nz-button 
                nzBlock
                (click)="createTeam()">
                å»ºç«‹åœ˜éšŠ
              </button>
            }
          </nz-card>
        </div>

        <!-- æœ€è¿‘æ´»å‹• -->
        <div nz-col [nzSpan]="24">
          <nz-card nzTitle="æœ€è¿‘åœ˜éšŠ">
            @if (data.teams.length > 0) {
              <div class="team-list">
                @for (team of data.teams; track team.id) {
                  <div class="team-item">
                    <h4>{{ team.name }}</h4>
                    <p>{{ team.description || 'æš«ç„¡æè¿°' }}</p>
                    <button 
                      nz-button 
                      nzSize="small"
                      (click)="viewTeam(team.id)">
                      æŸ¥çœ‹
                    </button>
                  </div>
                }
              </div>
            } @else {
              <p>å°šæœªå»ºç«‹ä»»ä½•åœ˜éšŠ</p>
            }
          </nz-card>
        </div>
      </div>
    }
  `,
  styles: [`
    .actions {
      margin-top: 16px;
      display: flex;
      gap: 8px;
    }
    .team-list {
      display: grid;
      gap: 16px;
    }
    .team-item {
      padding: 16px;
      border: 1px solid #f0f0f0;
      border-radius: 4px;
    }
    .team-item h4 {
      margin: 0 0 8px 0;
    }
  `]
})
export class OrganizationDashboardComponent implements OnInit {
  private route = inject(ActivatedRoute);
  private router = inject(Router);
  private orgService = inject(OrganizationService);
  private permissionService = inject(PermissionService);
  private authService = inject(AuthService);

  orgId!: string;
  dashboardData$!: Observable<{
    org: Organization;
    memberCount: number;
    teamCount: number;
    userTeamCount: number;
    teams: Team[];
  }>;

  ngOnInit() {
    this.orgId = this.route.snapshot.paramMap.get('orgId')!;
    
    this.dashboardData$ = combineLatest([
      this.orgService.getOrganization(this.orgId),
      this.orgService.getOrganizationMembers(this.orgId),
      this.orgService.getOrganizationTeams(this.orgId),
      this.authService.currentAccount
    ]).pipe(
      map(([org, members, teams, user]) => {
        if (!org || !user) {
          throw new Error('çµ„ç¹”æˆ–ç”¨æˆ¶ä¸å­˜åœ¨');
        }

        // è¨ˆç®—ç”¨æˆ¶åƒèˆ‡çš„åœ˜éšŠæ•¸é‡
        // é€™è£¡ç°¡åŒ–è™•ç†ï¼Œå¯¦éš›æ‡‰è©²æŸ¥è©¢ç”¨æˆ¶åœ¨å„åœ˜éšŠçš„æˆå“¡è³‡æ ¼
        const userTeamCount = 0; // TODO: å¯¦ä½œç”¨æˆ¶åœ˜éšŠè¨ˆæ•¸

        return {
          org,
          memberCount: members.length,
          teamCount: teams.length,
          userTeamCount,
          teams: teams.slice(0, 5) // åªé¡¯ç¤ºå‰ 5 å€‹åœ˜éšŠ
        };
      })
    );
  }

  editOrganization() {
    this.router.navigate(['settings'], { relativeTo: this.route });
  }

  deleteOrganization() {
    // å¯¦ä½œåˆªé™¤çµ„ç¹”é‚è¼¯
    console.log('åˆªé™¤çµ„ç¹”:', this.orgId);
  }

  goToMembers() {
    this.router.navigate(['members'], { relativeTo: this.route });
  }

  goToTeams() {
    this.router.navigate(['teams'], { relativeTo: this.route });
  }

  createTeam() {
    this.router.navigate(['teams', 'new'], { relativeTo: this.route });
  }

  viewTeam(teamId: string) {
    this.router.navigate(['teams', teamId], { relativeTo: this.route });
  }
}
```

---

## åäºŒã€æ¸¬è©¦ç­–ç•¥

### 12.1 å–®å…ƒæ¸¬è©¦ç¯„ä¾‹

```typescript
// src/app/core/models/auth.model.spec.ts
import { ValidationUtils, ProfileVO, PermissionVO } from './auth.model';

describe('ValidationUtils', () => {
  describe('validateEmail', () => {
    it('should validate correct email formats', () => {
      expect(ValidationUtils.validateEmail('test@example.com')).toBe(true);
      expect(ValidationUtils.validateEmail('user.name@domain.co.uk')).toBe(true);
    });

    it('should reject invalid email formats', () => {
      expect(ValidationUtils.validateEmail('invalid-email')).toBe(false);
      expect(ValidationUtils.validateEmail('test@')).toBe(false);
      expect(ValidationUtils.validateEmail('@example.com')).toBe(false);
    });
  });

  describe('validateProfile', () => {
    it('should validate correct profile', () => {
      const profile: ProfileVO = {
        name: 'John Doe',
        email: 'john@example.com',
        avatar: 'https://example.com/avatar.jpg',
        bio: 'Software Developer',
        location: 'Taipei',
        website: 'https://johndoe.com'
      };

      const errors = ValidationUtils.validateProfile(profile);
      expect(errors).toHaveLength(0);
    });

    it('should reject empty name', () => {
      const profile: ProfileVO = {
        name: '',
        email: 'john@example.com'
      };

      const errors = ValidationUtils.validateProfile(profile);
      expect(errors).toContain('Profile name cannot be empty');
    });

    it('should reject invalid email', () => {
      const profile: ProfileVO = {
        name: 'John Doe',
        email: 'invalid-email'
      };

      const errors = ValidationUtils.validateProfile(profile);
      expect(errors).toContain('Invalid email format');
    });
  });

  describe('validatePermission', () => {
    it('should validate correct permission', () => {
      const permission: PermissionVO = {
        roles: ['user', 'admin'],
        abilities: [
          { action: 'read', resource: 'organization' },
          { action: 'write', resource: 'team' }
        ]
      };

      const errors = ValidationUtils.validatePermission(permission);
      expect(errors).toHaveLength(0);
    });

    it('should reject empty roles', () => {
      const permission: PermissionVO = {
        roles: [],
        abilities: [{ action: 'read', resource: 'organization' }]
      };

      const errors = ValidationUtils.validatePermission(permission);
      expect(errors).toContain('At least one role is required');
    });
  });
});
```

### 12.2 æ•´åˆæ¸¬è©¦ç¯„ä¾‹

```typescript
// src/app/core/services/auth.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { AuthService } from './auth.service';
import { Firestore } from '@angular/fire/firestore';
import { Auth } from '@angular/fire/auth';

describe('AuthService', () => {
  let service: AuthService;
  let mockFirestore: jasmine.SpyObj<Firestore>;
  let mockAuth: jasmine.SpyObj<Auth>;

  beforeEach(() => {
    const firestoreSpy = jasmine.createSpyObj('Firestore', ['doc', 'collection']);
    const authSpy = jasmine.createSpyObj('Auth', ['signInWithPopup', 'signOut']);

    TestBed.configureTestingModule({
      providers: [
        AuthService,
        { provide: Firestore, useValue: firestoreSpy },
        { provide: Auth, useValue: authSpy }
      ]
    });

    service = TestBed.inject(AuthService);
    mockFirestore = TestBed.inject(Firestore) as jasmine.SpyObj<Firestore>;
    mockAuth = TestBed.inject(Auth) as jasmine.SpyObj<Auth>;
  });

  it('should be created', () => {
    expect(service).toBeTruthy();
  });

  describe('signInWithGoogle', () => {
    it('should handle successful sign in', async () => {
      const mockCredential = {
        user: {
          uid: 'test-uid',
          email: 'test@example.com',
          displayName: 'Test User',
          photoURL: 'https://example.com/photo.jpg'
        }
      };

      mockAuth.signInWithPopup.and.returnValue(Promise.resolve(mockCredential));
      
      const result = await service.signInWithGoogle();
      
      expect(result).toEqual(mockCredential);
      expect(mockAuth.signInWithPopup).toHaveBeenCalled();
    });

    it('should handle sign in error', async () => {
      const error = new Error('Sign in failed');
      mockAuth.signInWithPopup.and.returnValue(Promise.reject(error));

      await expectAsync(service.signInWithGoogle()).toBeRejectedWith(error);
    });
  });
});
```

### 12.3 E2E æ¸¬è©¦ç¯„ä¾‹

```typescript
// e2e/src/auth.e2e-spec.ts
import { browser, by, element } from 'protractor';

describe('Authentication Flow', () => {
  beforeEach(() => {
    browser.get('/');
  });

  it('should display login button when not authenticated', () => {
    expect(element(by.css('[data-testid="login-button"]')).isDisplayed()).toBeTruthy();
  });

  it('should redirect to dashboard after successful login', async () => {
    element(by.css('[data-testid="login-button"]')).click();
    
    // ç­‰å¾… Google ç™»å…¥å½ˆçª—ä¸¦å®Œæˆç™»å…¥æµç¨‹
    await browser.sleep(2000);
    
    expect(browser.getCurrentUrl()).toContain('/dashboard');
  });

  it('should display user profile after login', () => {
    element(by.css('[data-testid="user-profile"]')).isDisplayed().then(displayed => {
      expect(displayed).toBeTruthy();
    });
  });
});
```

---

## åä¸‰ã€ä¸»è¦ç‰¹é»ç¸½çµ

### 13.1 GitHub å¼è¨­è¨ˆ
- âœ… ä½¿ç”¨ `Account` çµ±ä¸€æ¨¡å‹ï¼Œé€šé `type` å€åˆ†ç”¨æˆ¶å’Œçµ„ç¹”
- âœ… ä½¿ç”¨ `login` ä½œç‚ºå”¯ä¸€è­˜åˆ¥ç¢¼
- âœ… çµ±ä¸€çš„ `/accounts` é›†åˆè·¯å¾‘
- âœ… Repository æ“æœ‰è€…æ”¯æ´ï¼ˆå€‹äºº/çµ„ç¹”ï¼‰
- âœ… å®Œæ•´çš„å”ä½œè€…ç³»çµ±

### 13.2 Angular v20 ç¾ä»£åŒ–ç‰¹æ€§
- âœ… **Signals**ï¼šéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
- âœ… **Control Flow**ï¼š@if, @for, @switch
- âœ… **Standalone Components**ï¼šç„¡éœ€ NgModule
- âœ… **inject() å‡½æ•¸**ï¼šç¾ä»£åŒ–ä¾è³´æ³¨å…¥
- âœ… **Computed Signals**ï¼šè‡ªå‹•è¨ˆç®—è¡ç”Ÿç‹€æ…‹

### 13.3 å¤šå±¤ç´šæ¬Šé™ç³»çµ±
- âœ… å€‹äºº â†’ çµ„ç¹” â†’ åœ˜éšŠ â†’ è³‡æº
- âœ… 5 ç¨®çµ„ç¹”è§’è‰²ï¼šOwner, Admin, Member, Billing, Outside Collaborator
- âœ… 2 ç¨®åœ˜éšŠè§’è‰²ï¼šMaintainer, Member
- âœ… Repository æ¬Šé™ï¼šread, triage, write, maintain, admin

### 13.4 è§’è‰²ç¹¼æ‰¿èˆ‡æ¬Šé™ç®¡ç†
- âœ… çµ„ç¹”è§’è‰²æ±ºå®šåŸºæœ¬æ¬Šé™
- âœ… åœ˜éšŠè§’è‰²æä¾›ç´°ç²’åº¦æ§åˆ¶
- âœ… æ¬Šé™å¯ç–ŠåŠ å’Œè¦†å¯«
- âœ… Signals åŸºç¤çš„å³æ™‚æ¬Šé™æª¢æŸ¥

### 13.5 å®‰å…¨æ€§
- âœ… Firestore å®‰å…¨è¦å‰‡å±¤ç´šæª¢æŸ¥
- âœ… å‰ç«¯è·¯ç”±å®ˆè¡›ä¿è­·
- âœ… å¾Œç«¯æ¬Šé™é›™é‡é©—è­‰
- âœ… å®Œæ•´çš„è¼¸å…¥é©—è­‰å’ŒéŒ¯èª¤è™•ç†

### 13.6 æ“´å±•æ€§
- âœ… æ˜“æ–¼æ·»åŠ æ–°çš„è³‡æºé¡å‹
- âœ… æ˜“æ–¼æ·»åŠ æ–°çš„æ¬Šé™è¦å‰‡
- âœ… æ”¯æ´è‡ªå®šç¾©æ¬Šé™é‚è¼¯
- âœ… æ¨¡çµ„åŒ–çš„ Value Objects è¨­è¨ˆ

### 13.7 é–‹ç™¼é«”é©—
- âœ… TypeScript é¡å‹å®‰å…¨
- âœ… å®Œæ•´çš„éŒ¯èª¤è¨Šæ¯å’Œæ—¥èªŒ
- âœ… æ¸…æ™°çš„ API è¨­è¨ˆ
- âœ… è©³ç´°çš„æ–‡æª”å’Œç¯„ä¾‹
- âœ… ç¾ä»£åŒ–çš„é–‹ç™¼å·¥å…·éˆ

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

1. **ç’°å¢ƒé…ç½®**ï¼šæŒ‰ç…§ç¬¬ä¸€ç« é…ç½® Firebase å’Œ Angular
2. **è³‡æ–™æ¨¡å‹**ï¼šå¯¦ç¾ç¬¬äºŒç« çš„ TypeScript ä»‹é¢
3. **è³‡æ–™åº«è¨­è¨ˆ**ï¼šæŒ‰ç…§ç¬¬ä¸‰ç« è¨­è¨ˆ Firestore çµæ§‹
4. **æ ¸å¿ƒæœå‹™**ï¼šå¯¦ç¾ç¬¬å››ç« çš„ Auth Service
5. **æ¥­å‹™æœå‹™**ï¼šå¯¦ç¾ç¬¬äº”ç« çš„ Organization Service
6. **æ¬Šé™ç³»çµ±**ï¼šå¯¦ç¾ç¬¬å…­ç« çš„ Permission Service
7. **è·¯ç”±é…ç½®**ï¼šæŒ‰ç…§ç¬¬ä¸ƒç« é…ç½®æ‡‰ç”¨ç¨‹å¼è·¯ç”±
8. **è·¯ç”±å®ˆè¡›**ï¼šå¯¦ç¾ç¬¬å…«ç« çš„æ¬Šé™ä¿è­·
9. **UI å…ƒä»¶**ï¼šæŒ‰ç…§ç¬¬ä¹ç« å¯¦ç¾ç”¨æˆ¶ä»‹é¢
10. **å®‰å…¨è¦å‰‡**ï¼šæŒ‰ç…§ç¬¬åç« é…ç½® Firestore å®‰å…¨è¦å‰‡
11. **ä½¿ç”¨ç¯„ä¾‹**ï¼šåƒè€ƒç¬¬åä¸€ç« çš„å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹
12. **æ¸¬è©¦ç­–ç•¥**ï¼šæŒ‰ç…§ç¬¬åäºŒç« é€²è¡Œæ¸¬è©¦

é€™å€‹æ¶æ§‹å®Œå…¨ç¬¦åˆ GitHub çš„è¨­è¨ˆæ¨¡å¼ï¼Œä¸¦å……åˆ†åˆ©ç”¨äº† Angular v20 çš„æœ€æ–°ç‰¹æ€§ï¼Œç‚ºé–‹ç™¼è€…æä¾›äº†æ›´å¥½çš„é–‹ç™¼é«”é©—å’Œæ›´é«˜çš„æ‡‰ç”¨æ€§èƒ½ã€‚
`````

## File: .cursor/rules/isolation_rules/Level3/implementation-intermediate.mdc
`````
---
description: 
globs: implementation-intermediate.mdc
alwaysApply: false
---
# LEVEL 3 IMPLEMENTATION: BUILDING INTERMEDIATE FEATURES

> **TL;DR:** This guide focuses on the systematic implementation of a planned and designed Level 3 feature. It emphasizes modular development, strict adherence to creative decisions and the style guide, integration with existing systems, and thorough feature-specific testing.

## ğŸ› ï¸ Level 3 Feature Implementation Workflow

This workflow outlines the typical steps for building an intermediate feature.

```mermaid
graph TD
    StartImpl["Start L3 Implementation"] -->
    ReviewDocs["1. Review All Relevant Docs<br>(Tasks, Creative Docs, Style Guide)"] -->
    SetupEnv["2. Setup/Verify Dev Environment<br>(Branch, Tools, Dependencies)"] -->
    ModuleBreakdown["3. Break Down Feature into Modules/Major Components<br>(Based on plan in `tasks.md`)"] -->
    BuildIterate["4. Implement Modules/Components Iteratively"]

    BuildIterate --> ImplementModule["4a. Select Next Module/Component"]
    ImplementModule --> CodeModule["4b. Code Module<br>(Adhere to design, style guide, coding standards)"]
    CodeModule --> UnitTests["4c. Write & Pass Unit Tests"]
    UnitTests --> SelfReview["4d. Self-Review/Code Linting"]
    SelfReview --> MoreModules{"4e. More Modules<br>for this Feature?"}
    MoreModules -- Yes --> ImplementModule

    MoreModules -- No --> IntegrateModules["5. Integrate All Feature Modules/Components"]
    IntegrateModules --> IntegrationTesting["6. Perform Integration Testing<br>(Feature modules + existing system parts)"]
    IntegrationTesting --> E2EFeatureTesting["7. End-to-End Feature Testing<br>(Validate against user stories & requirements)"]
    E2EFeatureTesting --> AccessibilityCheck["8. Accessibility & Responsiveness Check<br>(If UI is involved)"]
    AccessibilityCheck --> CodeCleanup["9. Code Cleanup & Refinement"]
    CodeCleanup --> UpdateMB["10. Update Graph Bank<br>(`tasks.md` sub-tasks, `progress.md` details)"]
    UpdateMB --> FinalFeatureReview["11. Final Feature Review (Conceptual Peer Review if possible)"]
    FinalFeatureReview --> ImplementationDone["L3 Implementation Complete<br>Ready for REFLECT Mode"]

    style StartImpl fill:#e57373,stroke:#f44336
    style BuildIterate fill:#ffcdd2,stroke:#ef9a9a
    style ImplementationDone fill:#ef9a9a,stroke:#e57373
````

## ğŸ”‘ Key Considerations for Level 3 Implementation

  * **Modularity & Encapsulation:** Design and build the feature in well-defined, reusable, and loosely coupled modules or components.
  * **Adherence to Design:** Strictly follow the decisions documented in `graph-bank/creative-*.md` files and the `graph-bank/style-guide.md`. Deviations must be justified and documented.
  * **State Management:** If the feature introduces or significantly interacts with complex application state, ensure the state management strategy (potentially defined in CREATIVE mode) is correctly implemented and tested.
  * **API Interactions:**
      * If consuming new or existing APIs, ensure requests and responses are handled correctly, including error states.
      * If exposing new API endpoints as part of the feature, ensure they are robust, secure, and documented.
  * **Error Handling:** Implement user-friendly error messages and robust error handling within the feature's scope.
  * **Performance:** Be mindful of performance implications. Avoid common pitfalls like N+1 database queries, inefficient algorithms, or large asset loading without optimization, especially if identified as a concern in the PLAN or CREATIVE phase.
  * **Security:** Implement with security best practices in mind, particularly for features handling user input, authentication, or sensitive data. Refer to any security design decisions from CREATIVE mode.

## ğŸ§ª Testing Focus for Level 3 Features

  * **Unit Tests:** Each new function, method, or logical unit within the feature's components should have corresponding unit tests. Aim for good coverage of core logic and edge cases.
  * **Component Tests (for UI features):** Test UI components in isolation, verifying rendering, props handling, and event emissions.
  * **Integration Tests:** Crucial for L3. Test how the different modules/components of the new feature work together. Also, test how the completed feature integrates with existing parts of the application it interacts with.
  * **User Scenario / Acceptance Tests (Feature-Specific):** Validate that the feature fulfills its defined requirements and user stories from the user's perspective. This can be manual or automated.

## ğŸ“ Documentation During Implementation

  * **`graph-bank/tasks.md`:** Update the status of sub-tasks related to the feature as they are completed. Note any blockers or changes in estimates.
  * **`graph-bank/progress.md`:** Make regular entries detailing:
      * Modules/components completed.
      * Key decisions made during implementation (if minor and not warranting a full CREATIVE cycle).
      * Files significantly modified
      * Test results for major integration points.
      * Any deviations from the plan or creative designs, with rationale.
  * **Code Comments:** Write clear, concise comments explaining complex logic, assumptions, or TODOs.
  * **READMEs (if applicable):** If the feature introduces new modules or libraries that require specific setup or usage notes, consider adding or updating relevant README files.
`````

## File: .cursor/rules/isolation_rules/Modes/init-mode-detailed.mdc
`````
---
description: Detailed INIT mode instructions for comprehensive system initialization and health checks
globs: "**/init-mode-detailed*/**"
alwaysApply: false
---

# INIT MODE - è©³ç´°ç³»çµ±åˆå§‹åŒ–æŒ‡ä»¤

> **TL;DR:** æä¾›çµ±ä¸€çš„ç³»çµ±åˆå§‹åŒ–ã€å¥åº·æª¢æŸ¥å’Œç’°å¢ƒé©—è­‰æµç¨‹ï¼Œç¢ºä¿æ‰€æœ‰çµ„ä»¶æº–å‚™å°±ç·’å¾Œæ‰é–‹å§‹å¾ŒçºŒæ¨¡å¼ã€‚

```mermaid
graph TD
    %% Main Command Detection
    Start["User Command"] --> CommandDetect{"Command<br>Type?"}
    
    CommandDetect -->|"INIT"| INIT["INIT Mode"]
    CommandDetect -->|"VAN"| VAN["VAN Mode"]
    CommandDetect -->|"PLAN"| Plan["PLAN Mode"]
    CommandDetect -->|"CREATIVE"| Creative["CREATIVE Mode"]
    CommandDetect -->|"IMPLEMENT"| Implement["IMPLEMENT Mode"]
    CommandDetect -->|"QA"| QA["QA Mode"]
    
    %% Immediate Response Node
    INIT --> InitResp["Respond: OK INIT"]
    VAN --> VanResp["Respond: OK VAN"]
    Plan --> PlanResp["Respond: OK PLAN"]
    Creative --> CreativeResp["Respond: OK CREATIVE"]
    Implement --> ImplResp["Respond: OK IMPLEMENT"]
    QA --> QAResp["Respond: OK QA"]
    
    %% System Health Check
    InitResp --> HealthCheck["System Health Check"]
    HealthCheck --> MCPCheck["MCP Memory Server<br>Status Check"]
    MCPCheck --> GraphCheck["Graph Bank<br>Structure Check"]
    GraphCheck --> EnvCheck["Environment<br>Validation"]
    EnvCheck --> ProjCheck["Project Structure<br>Check"]
    
    %% Initialization Process
    ProjCheck --> InitMCP["Initialize MCP<br>Memory Server"]
    InitMCP --> InitGraph["Initialize Graph Bank<br>Files"]
    InitGraph --> InitContext["Establish Base<br>Context"]
    InitContext --> StatusReport["Generate Status<br>Report"]
    
    %% Verification
    StatusReport --> VerifyInit{"System<br>Ready?"}
    VerifyInit -->|"Yes"| CompleteInit["INIT Process<br>Complete"]
    VerifyInit -->|"No"| FixIssues["Fix Identified<br>Issues"]
    FixIssues --> HealthCheck
    
    %% Mode Transitions
    CompleteInit -->|"Ready for VAN"| TransToVan["â†’ VAN Mode"]
    CompleteInit -->|"Ready for PLAN"| TransToPlan["â†’ PLAN Mode"]
    CompleteInit -->|"Ready for IMPLEMENT"| TransToImpl["â†’ IMPLEMENT Mode"]
    
    %% Other modes continue with Graph Bank Check
    VanResp --> CheckGB_Van["Check Graph Bank<br>& tasks.md Status"]
    PlanResp --> CheckGB_Plan["Check Graph Bank<br>& tasks.md Status"]
    CreativeResp --> CheckGB_Creative["Check Graph Bank<br>& tasks.md Status"]
    ImplResp --> CheckGB_Impl["Check Graph Bank<br>& tasks.md Status"]
    QAResp --> CheckGB_QA["Check Graph Bank<br>& tasks.md Status"]
    
    %% Rule Loading for other modes
    CheckGB_Van --> LoadVan["Load Rule:<br>isolation_rules/visual-maps/van_mode_split/van-mode-map"]
    CheckGB_Plan --> LoadPlan["Load Rule:<br>isolation_rules/visual-maps/plan-mode-map"]
    CheckGB_Creative --> LoadCreative["Load Rule:<br>isolation_rules/visual-maps/creative-mode-map"]
    CheckGB_Impl --> LoadImpl["Load Rule:<br>isolation_rules/visual-maps/implement-mode-map"]
    CheckGB_QA --> LoadQA["Load Rule:<br>isolation_rules/visual-maps/qa-mode-map"]
    
    %% Rule Execution
    LoadVan --> ExecVan["Execute Process<br>in Rule"]
    LoadPlan --> ExecPlan["Execute Process<br>in Rule"]
    LoadCreative --> ExecCreative["Execute Process<br>in Rule"]
    LoadImpl --> ExecImpl["Execute Process<br>in Rule"]
    LoadQA --> ExecQA["Execute Process<br>in Rule"]
    
    %% Graph Bank Updates
    ExecVan --> UpdateGB_Van["Update Graph Bank<br>& tasks.md"]
    ExecPlan --> UpdateGB_Plan["Update Graph Bank<br>& tasks.md"]
    ExecCreative --> UpdateGB_Creative["Update Graph Bank<br>& tasks.md"]
    ExecImpl --> UpdateGB_Impl["Update Graph Bank<br>& tasks.md"]
    ExecQA --> UpdateGB_QA["Update Graph Bank<br>& tasks.md"]
    
    %% Completion
    UpdateGB_Van --> CompleteVan["VAN Process<br>Complete"]
    UpdateGB_Plan --> CompletePlan["PLAN Process<br>Complete"]
    UpdateGB_Creative --> CompleteCreative["CREATIVE Process<br>Complete"]
    UpdateGB_Impl --> CompleteImpl["IMPLEMENT Process<br>Complete"]
    UpdateGB_QA --> CompleteQA["QA Process<br>Complete"]
    
    %% Styling
    style INIT fill:#4da6ff,stroke:#0066cc,color:white
    style HealthCheck fill:#ffa64d,stroke:#cc7a30,color:white
    style MCPCheck fill:#4dbb5f,stroke:#36873f,color:white
    style GraphCheck fill:#d94dbb,stroke:#a3378a,color:white
    style EnvCheck fill:#4dbbbb,stroke:#368787,color:white
    style ProjCheck fill:#d971ff,stroke:#a33bc2,color:white
    style CompleteInit fill:#71c2ff,stroke:#3b8ac2,color:white
```

## ğŸš€ INIT æ¨¡å¼æ ¸å¿ƒåŠŸèƒ½

### ğŸ“‹ ç³»çµ±å¥åº·æª¢æŸ¥

#### 1. MCP Memory Server ç‹€æ…‹æª¢æŸ¥
```markdown
## MCP Memory Server é©—è­‰
- [ ] memory.json æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
- [ ] MCP Memory Server é€£æ¥ç‹€æ…‹æ­£å¸¸
- [ ] è¨˜æ†¶é«”æ•¸æ“šå®Œæ•´æ€§æª¢æŸ¥
- [ ] èªç¾©æœç´¢åŠŸèƒ½å¯ç”¨æ€§æ¸¬è©¦
```

#### 2. Graph Bank çµæ§‹æª¢æŸ¥
```markdown
## Graph Bank æ–‡ä»¶é©—è­‰
- [ ] graph-bank/ ç›®éŒ„å­˜åœ¨
- [ ] tasks.md æ–‡ä»¶å¯è®€å¯«
- [ ] activeContext.md æ–‡ä»¶å¯è®€å¯«
- [ ] progress.md æ–‡ä»¶å¯è®€å¯«
- [ ] å…¶ä»–å¿…è¦æ–‡ä»¶å®Œæ•´æ€§æª¢æŸ¥
```

#### 3. ç’°å¢ƒé©—è­‰
```markdown
## é–‹ç™¼ç’°å¢ƒæª¢æŸ¥
- [ ] Node.js ç‰ˆæœ¬ç¬¦åˆè¦æ±‚
- [ ] yarn åŒ…ç®¡ç†å™¨å¯ç”¨
- [ ] Cursor IDE ç‰ˆæœ¬æª¢æŸ¥
- [ ] æ–‡ä»¶ç³»çµ±æ¬Šé™é©—è­‰
- [ ] ç¶²è·¯é€£æ¥ç‹€æ…‹æª¢æŸ¥
```

#### 4. å°ˆæ¡ˆçµæ§‹æª¢æŸ¥
```markdown
## å°ˆæ¡ˆçµæ§‹é©—è­‰
- [ ] package.json æ–‡ä»¶å­˜åœ¨
- [ ] å°ˆæ¡ˆç›®éŒ„çµæ§‹å®Œæ•´
- [ ] é—œéµé…ç½®æ–‡ä»¶å­˜åœ¨
- [ ] æºç¢¼ç›®éŒ„å¯è¨ªå•
```

### ğŸ”§ åˆå§‹åŒ–æµç¨‹

#### 1. MCP Memory Server åˆå§‹åŒ–
```markdown
## MCP Memory Server è¨­ç½®
1. æª¢æŸ¥ memory.json ç‹€æ…‹
2. è¼‰å…¥ç¾æœ‰è¨˜æ†¶é«”ä¸Šä¸‹æ–‡
3. é©—è­‰è¨˜æ†¶é«”ç³»çµ±åŠŸèƒ½
4. å»ºç«‹è¨˜æ†¶é«”é€£æ¥
5. æ¸¬è©¦èªç¾©æœç´¢åŠŸèƒ½
```

#### 2. Graph Bank æ–‡ä»¶åˆå§‹åŒ–
```markdown
## Graph Bank æ–‡ä»¶è¨­ç½®
1. æª¢æŸ¥ graph-bank/ ç›®éŒ„çµæ§‹
2. é©—è­‰ tasks.md æ–‡ä»¶ç‹€æ…‹
3. åˆå§‹åŒ– activeContext.md
4. è¨­ç½® progress.md è¿½è¹¤
5. å»ºç«‹å¿…è¦çš„å­ç›®éŒ„
```

#### 3. åŸºç¤ä¸Šä¸‹æ–‡å»ºç«‹
```markdown
## ç³»çµ±ä¸Šä¸‹æ–‡è¨­ç½®
1. è¼‰å…¥å°ˆæ¡ˆé…ç½®ä¿¡æ¯
2. å»ºç«‹ç”¨æˆ¶åå¥½è¨­å®š
3. åˆå§‹åŒ–ç³»çµ±ç‹€æ…‹
4. è¨­ç½®å·¥ä½œç’°å¢ƒè®Šæ•¸
5. å»ºç«‹æœƒè©±åŸºç·š
```

### ğŸ“Š ç‹€æ…‹å ±å‘Šç”Ÿæˆ

#### ç³»çµ±ç‹€æ…‹æ¦‚è¦½
```markdown
## INIT å®Œæˆå ±å‘Š
### âœ… ç³»çµ±çµ„ä»¶ç‹€æ…‹
- MCP Memory Server: [READY/ERROR]
- Graph Bank: [READY/ERROR]
- é–‹ç™¼ç’°å¢ƒ: [READY/ERROR]
- å°ˆæ¡ˆçµæ§‹: [READY/ERROR]

### ğŸ“‹ ä¸‹ä¸€æ­¥å»ºè­°
- Level 1 ä»»å‹™: â†’ VAN â†’ IMPLEMENT
- Level 2 ä»»å‹™: â†’ VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECT
- Level 3-4 ä»»å‹™: â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE

### âš ï¸ æ³¨æ„äº‹é …
- ä»»ä½•çµ„ä»¶ç‹€æ…‹ç‚º ERROR æ™‚ï¼Œè«‹å…ˆä¿®å¾©å•é¡Œ
- ç¢ºä¿æ‰€æœ‰æª¢æŸ¥é …ç›®éƒ½é€šéå¾Œå†é€²è¡Œå¾ŒçºŒæ¨¡å¼
```

## ğŸ”„ èˆ‡å…¶ä»–æ¨¡å¼çš„æ•´åˆ

### VAN æ¨¡å¼æ•´åˆ
```markdown
## VAN æ¨¡å¼æº–å‚™
INIT å®Œæˆå¾Œï¼ŒVAN æ¨¡å¼å¯ä»¥å°ˆæ³¨æ–¼ï¼š
- å°ˆæ¡ˆçµæ§‹åˆ†æ
- è¤‡é›œåº¦ç¢ºå®š
- æŠ€è¡“æ£§è­˜åˆ¥
- ä»»å‹™ç´šåˆ¥è©•ä¼°

ä¸å†éœ€è¦é‡è¤‡é€²è¡Œç³»çµ±åˆå§‹åŒ–æª¢æŸ¥
```

### å…¶ä»–æ¨¡å¼æ•´åˆ
```markdown
## æ¨¡å¼é–“å”ä½œ
- PLAN æ¨¡å¼: å°ˆæ³¨æ–¼ä»»å‹™è¦åŠƒå’Œåˆ†è§£
- CREATIVE æ¨¡å¼: å°ˆæ³¨æ–¼è¨­è¨ˆæ±ºç­–å’Œæ¶æ§‹æ¢ç´¢
- IMPLEMENT æ¨¡å¼: å°ˆæ³¨æ–¼ä»£ç¢¼å¯¦æ–½å’Œæ§‹å»º
- REFLECT æ¨¡å¼: å°ˆæ³¨æ–¼ä»£ç¢¼å¯©æŸ¥å’Œå­¸ç¿’
- ARCHIVE æ¨¡å¼: å°ˆæ³¨æ–¼æ–‡ä»¶æ­¸æª”å’ŒçŸ¥è­˜ç®¡ç†
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### ä½•æ™‚ä½¿ç”¨ INIT æ¨¡å¼
- é–‹å§‹æ–°å°ˆæ¡ˆæ™‚
- ç³»çµ±ç’°å¢ƒç™¼ç”Ÿè®ŠåŒ–æ™‚
- é•·æ™‚é–“æœªä½¿ç”¨ç³»çµ±å¾Œé‡æ–°å•Ÿå‹•æ™‚
- é‡åˆ°ç³»çµ±éŒ¯èª¤éœ€è¦é‡æ–°åˆå§‹åŒ–æ™‚
- å‡ç´šç³»çµ±çµ„ä»¶å¾Œéœ€è¦é©—è­‰æ™‚

### INIT æ¨¡å¼æª¢æŸ¥æ¸…å–®
```markdown
## INIT æ¨¡å¼åŸ·è¡Œæ¸…å–®
- [ ] åŸ·è¡Œç³»çµ±å¥åº·æª¢æŸ¥
- [ ] é©—è­‰ MCP Memory Server ç‹€æ…‹
- [ ] æª¢æŸ¥ Graph Bank æ–‡ä»¶çµæ§‹
- [ ] é©—è­‰é–‹ç™¼ç’°å¢ƒé…ç½®
- [ ] æª¢æŸ¥å°ˆæ¡ˆçµæ§‹å®Œæ•´æ€§
- [ ] åˆå§‹åŒ–ç³»çµ±çµ„ä»¶
- [ ] å»ºç«‹åŸºç¤ä¸Šä¸‹æ–‡
- [ ] ç”Ÿæˆç‹€æ…‹å ±å‘Š
- [ ] ç¢ºèªç³»çµ±æº–å‚™å°±ç·’
- [ ] æä¾›ä¸‹ä¸€æ­¥å»ºè­°
```

## ğŸ¯ æˆåŠŸæ¨™æº–

### INIT æ¨¡å¼æˆåŠŸå®Œæˆæ¨™èªŒ
- æ‰€æœ‰ç³»çµ±çµ„ä»¶ç‹€æ…‹ç‚º READY
- MCP Memory Server é€£æ¥æ­£å¸¸
- Graph Bank æ–‡ä»¶çµæ§‹å®Œæ•´
- é–‹ç™¼ç’°å¢ƒé…ç½®æ­£ç¢º
- å°ˆæ¡ˆçµæ§‹å®Œæ•´å¯ç”¨
- ç³»çµ±ä¸Šä¸‹æ–‡å»ºç«‹å®Œæˆ
- ç‹€æ…‹å ±å‘Šç”ŸæˆæˆåŠŸ

### éŒ¯èª¤è™•ç†
```markdown
## å¸¸è¦‹å•é¡Œè§£æ±º
- MCP Memory Server é€£æ¥å¤±æ•—: æª¢æŸ¥ memory.json æ–‡ä»¶
- Graph Bank æ–‡ä»¶ç¼ºå¤±: é‡æ–°å‰µå»ºå¿…è¦æ–‡ä»¶
- ç’°å¢ƒé…ç½®éŒ¯èª¤: æª¢æŸ¥ Node.js å’Œ yarn å®‰è£
- å°ˆæ¡ˆçµæ§‹å•é¡Œ: æª¢æŸ¥ç›®éŒ„çµæ§‹å’Œé…ç½®æ–‡ä»¶
- æ¬Šé™å•é¡Œ: æª¢æŸ¥æ–‡ä»¶ç³»çµ±æ¬Šé™è¨­ç½®
```

## ğŸ”„ æŒçºŒæ”¹é€²

### ç›£æ§å’Œå„ªåŒ–
- å®šæœŸæª¢æŸ¥ç³»çµ±å¥åº·ç‹€æ…‹
- å„ªåŒ–åˆå§‹åŒ–æµç¨‹æ•ˆç‡
- æ”¹é€²éŒ¯èª¤æª¢æ¸¬å’Œè™•ç†
- å¢å¼·ç‹€æ…‹å ±å‘Šè©³ç´°åº¦
- å®Œå–„èˆ‡å…¶ä»–æ¨¡å¼çš„æ•´åˆ

### ç‰ˆæœ¬æ›´æ–°
- è·Ÿéš¨ MCP Memory Server æ›´æ–°
- é©é… Graph Bank çµæ§‹è®ŠåŒ–
- æ”¯æŒæ–°çš„é–‹ç™¼ç’°å¢ƒè¦æ±‚
- é©é…å°ˆæ¡ˆçµæ§‹è®ŠåŒ–
`````

## File: .cursor/rules/isolation_rules/Modes/van-mode-detailed.mdc
`````
---
description: Detailed VAN mode instructions for comprehensive project analysis and complexity determination
globs: "**/van-mode-detailed*/**"
alwaysApply: false
---

# VAN MODE - è©³ç´°å°ˆæ¡ˆåˆ†ææŒ‡ä»¤

> **TL;DR:** æä¾›è©³ç´°çš„å°ˆæ¡ˆåˆ†æã€è¤‡é›œåº¦ç¢ºå®šå’ŒæŠ€è¡“è©•ä¼°æµç¨‹ï¼Œå°ˆæ³¨æ–¼å°ˆæ¡ˆçµæ§‹åˆ†æè€Œä¸åŒ…å«ç³»çµ±åˆå§‹åŒ–ã€‚

```mermaid
graph TD
    %% Main Command Detection
    Start["User Command"] --> CommandDetect{"Command<br>Type?"}
    
    CommandDetect -->|"VAN"| VAN["VAN Mode"]
    CommandDetect -->|"PLAN"| Plan["PLAN Mode"]
    CommandDetect -->|"CREATIVE"| Creative["CREATIVE Mode"]
    CommandDetect -->|"IMPLEMENT"| Implement["IMPLEMENT Mode"]
    CommandDetect -->|"QA"| QA["QA Mode"]
    
    %% Immediate Response Node
    VAN --> VanResp["Respond: OK VAN"]
    Plan --> PlanResp["Respond: OK PLAN"]
    Creative --> CreativeResp["Respond: OK CREATIVE"]
    Implement --> ImplResp["Respond: OK IMPLEMENT"]
    QA --> QAResp["Respond: OK QA"]
    
    %% Project Analysis (VAN specific)
    VanResp --> ProjectAnalysis["Project Structure<br>Analysis"]
    ProjectAnalysis --> TechStack["Technology Stack<br>Identification"]
    TechStack --> Complexity["Complexity<br>Determination"]
    Complexity --> TaskLevel["Task Level<br>Assessment"]
    TaskLevel --> ContextSetup["Project Context<br>Setup"]
    
    %% Graph Bank Updates
    ContextSetup --> UpdateGB_Van["Update Graph Bank<br>& tasks.md"]
    
    %% Rule Loading for other modes
    PlanResp --> CheckGB_Plan["Check Graph Bank<br>& tasks.md Status"]
    CreativeResp --> CheckGB_Creative["Check Graph Bank<br>& tasks.md Status"]
    ImplResp --> CheckGB_Impl["Check Graph Bank<br>& tasks.md Status"]
    QAResp --> CheckGB_QA["Check Graph Bank<br>& tasks.md Status"]
    
    CheckGB_Plan --> LoadPlan["Load Rule:<br>isolation_rules/visual-maps/plan-mode-map"]
    CheckGB_Creative --> LoadCreative["Load Rule:<br>isolation_rules/visual-maps/creative-mode-map"]
    CheckGB_Impl --> LoadImpl["Load Rule:<br>isolation_rules/visual-maps/implement-mode-map"]
    CheckGB_QA --> LoadQA["Load Rule:<br>isolation_rules/visual-maps/qa-mode-map"]
    
    %% Rule Execution
    LoadPlan --> ExecPlan["Execute Process<br>in Rule"]
    LoadCreative --> ExecCreative["Execute Process<br>in Rule"]
    LoadImpl --> ExecImpl["Execute Process<br>in Rule"]
    LoadQA --> ExecQA["Execute Process<br>in Rule"]
    
    %% Graph Bank Updates
    ExecPlan --> UpdateGB_Plan["Update Graph Bank<br>& tasks.md"]
    ExecCreative --> UpdateGB_Creative["Update Graph Bank<br>& tasks.md"]
    ExecImpl --> UpdateGB_Impl["Update Graph Bank<br>& tasks.md"]
    ExecQA --> UpdateGB_QA["Update Graph Bank<br>& tasks.md"]
    
    %% Verification
    UpdateGB_Van --> VerifyVan{"Analysis<br>Complete?"}
    UpdateGB_Plan --> VerifyPlan{"Process<br>Complete?"}
    UpdateGB_Creative --> VerifyCreative{"Process<br>Complete?"}
    UpdateGB_Impl --> VerifyImpl{"Process<br>Complete?"}
    UpdateGB_QA --> VerifyQA{"Process<br>Complete?"}
    
    %% Outcomes
    VerifyVan -->|"Yes"| CompleteVan["VAN Analysis<br>Complete"]
    VerifyVan -->|"No"| RetryVan["Resume<br>VAN Analysis"]
    RetryVan --> ProjectAnalysis
    
    VerifyPlan -->|"Yes"| CompletePlan["PLAN Process<br>Complete"]
    VerifyPlan -->|"No"| RetryPlan["Resume<br>PLAN Process"]
    RetryPlan --> ExecPlan
    
    VerifyCreative -->|"Yes"| CompleteCreative["CREATIVE Process<br>Complete"]
    VerifyCreative -->|"No"| RetryCreative["Resume<br>CREATIVE Process"]
    RetryCreative --> ExecCreative
    
    VerifyImpl -->|"Yes"| CompleteImpl["IMPLEMENT Process<br>Complete"]
    VerifyImpl -->|"No"| RetryImpl["Resume<br>IMPLEMENT Process"]
    RetryImpl --> ExecImpl
    
    VerifyQA -->|"Yes"| CompleteQA["QA Process<br>Complete"]
    VerifyQA -->|"No"| RetryQA["Resume<br>QA Process"]
    RetryQA --> ExecQA
    
    %% Mode Transitions
    CompleteVan -->|"Level 1"| TransToImpl["â†’ IMPLEMENT Mode"]
    CompleteVan -->|"Level 2-4"| TransToPlan["â†’ PLAN Mode"]
    CompletePlan --> TransToCreative["â†’ CREATIVE Mode"]
    CompleteCreative --> TransToImpl["â†’ IMPLEMENT Mode"]
    CompleteImpl --> TransToReflect["â†’ REFLECT Mode"]
    CompleteQA --> TransToNext["â†’ Next Mode"]
    
    %% Styling
    style VAN fill:#4da6ff,stroke:#0066cc,color:white
    style ProjectAnalysis fill:#ffa64d,stroke:#cc7a30,color:white
    style TechStack fill:#4dbb5f,stroke:#36873f,color:white
    style Complexity fill:#d94dbb,stroke:#a3378a,color:white
    style TaskLevel fill:#4dbbbb,stroke:#368787,color:white
    style CompleteVan fill:#71c2ff,stroke:#3b8ac2,color:white
```

## ğŸ” VAN æ¨¡å¼æ ¸å¿ƒåŠŸèƒ½

### ğŸ“‹ å°ˆæ¡ˆçµæ§‹åˆ†æ

#### 1. ç›®éŒ„çµæ§‹æƒæ
```markdown
## å°ˆæ¡ˆç›®éŒ„åˆ†æ
- [ ] æƒæå°ˆæ¡ˆæ ¹ç›®éŒ„çµæ§‹
- [ ] è­˜åˆ¥ä¸»è¦æ–‡ä»¶å’Œç›®éŒ„
- [ ] åˆ†ææ–‡ä»¶çµ„ç¹”æ¨¡å¼
- [ ] æª¢æŸ¥é…ç½®æ–‡ä»¶å­˜åœ¨æ€§
- [ ] è©•ä¼°å°ˆæ¡ˆè¦æ¨¡
```

#### 2. æŠ€è¡“æ£§è­˜åˆ¥
```markdown
## æŠ€è¡“æ£§åˆ†æ
- [ ] è­˜åˆ¥å‰ç«¯æ¡†æ¶ (Angular, React, Vue ç­‰)
- [ ] æª¢æŸ¥å¾Œç«¯æŠ€è¡“ (Node.js, Python, Java ç­‰)
- [ ] åˆ†ææ•¸æ“šåº«æŠ€è¡“ (MongoDB, PostgreSQL ç­‰)
- [ ] è­˜åˆ¥æ§‹å»ºå·¥å…· (Webpack, Vite, Angular CLI ç­‰)
- [ ] æª¢æŸ¥æ¸¬è©¦æ¡†æ¶ (Jest, Karma, Jasmine ç­‰)
```

#### 3. ä¾è³´é—œä¿‚åˆ†æ
```markdown
## ä¾è³´é—œä¿‚è©•ä¼°
- [ ] åˆ†æ package.json ä¾è³´
- [ ] è­˜åˆ¥æ ¸å¿ƒä¾è³´å’Œé–‹ç™¼ä¾è³´
- [ ] æª¢æŸ¥ä¾è³´ç‰ˆæœ¬å…¼å®¹æ€§
- [ ] è©•ä¼°ä¾è³´è¤‡é›œåº¦
- [ ] è­˜åˆ¥æ½›åœ¨è¡çª
```

### ğŸ¯ è¤‡é›œåº¦ç¢ºå®š

#### 1. ä»£ç¢¼è¤‡é›œåº¦è©•ä¼°
```markdown
## ä»£ç¢¼è¤‡é›œåº¦åˆ†æ
- [ ] è¨ˆç®—æ–‡ä»¶æ•¸é‡å’Œä»£ç¢¼è¡Œæ•¸
- [ ] åˆ†æçµ„ä»¶è¤‡é›œåº¦
- [ ] è©•ä¼°æ¶æ§‹è¤‡é›œåº¦
- [ ] æª¢æŸ¥ä»£ç¢¼è³ªé‡æŒ‡æ¨™
- [ ] è­˜åˆ¥æŠ€è¡“å‚µå‹™
```

#### 2. ä»»å‹™ç´šåˆ¥åˆ†é¡
```markdown
## ä»»å‹™ç´šåˆ¥è©•ä¼°
### Level 1 - å¿«é€Ÿä¿®å¾©
- ç°¡å–®çš„ bug ä¿®å¾©
- å°çš„æ¨£å¼èª¿æ•´
- é…ç½®è®Šæ›´
- æ–‡æª”æ›´æ–°

### Level 2 - ç°¡å–®å¢å¼·
- æ–°åŠŸèƒ½æ·»åŠ 
- çµ„ä»¶ä¿®æ”¹
- æœå‹™æ•´åˆ
- æ¸¬è©¦æ·»åŠ 

### Level 3 - ä¸­ç´šåŠŸèƒ½
- è¤‡é›œåŠŸèƒ½é–‹ç™¼
- æ¶æ§‹é‡æ§‹
- å¤šçµ„ä»¶æ•´åˆ
- æ€§èƒ½å„ªåŒ–

### Level 4 - è¤‡é›œç³»çµ±
- å¤§å‹åŠŸèƒ½é–‹ç™¼
- ç³»çµ±æ¶æ§‹è¨­è¨ˆ
- å¤šæ¨¡å¡Šæ•´åˆ
- ä¼æ¥­ç´šè§£æ±ºæ–¹æ¡ˆ
```

### ğŸ“Š å°ˆæ¡ˆä¸Šä¸‹æ–‡å»ºç«‹

#### 1. å°ˆæ¡ˆèƒŒæ™¯åˆ†æ
```markdown
## å°ˆæ¡ˆèƒŒæ™¯è©•ä¼°
- [ ] è­˜åˆ¥å°ˆæ¡ˆé¡å‹ (Web æ‡‰ç”¨ã€ç§»å‹•æ‡‰ç”¨ã€æ¡Œé¢æ‡‰ç”¨ç­‰)
- [ ] åˆ†æç›®æ¨™ç”¨æˆ¶ç¾¤é«”
- [ ] è©•ä¼°æ¥­å‹™éœ€æ±‚è¤‡é›œåº¦
- [ ] æª¢æŸ¥å°ˆæ¡ˆæˆç†Ÿåº¦
- [ ] è­˜åˆ¥é—œéµåŠŸèƒ½æ¨¡å¡Š
```

#### 2. æŠ€è¡“ç’°å¢ƒè©•ä¼°
```markdown
## æŠ€è¡“ç’°å¢ƒåˆ†æ
- [ ] è©•ä¼°é–‹ç™¼ç’°å¢ƒé…ç½®
- [ ] æª¢æŸ¥éƒ¨ç½²ç’°å¢ƒè¦æ±‚
- [ ] åˆ†ææ€§èƒ½éœ€æ±‚
- [ ] è©•ä¼°å®‰å…¨è¦æ±‚
- [ ] è­˜åˆ¥æ•´åˆéœ€æ±‚
```

## ğŸ”„ èˆ‡å…¶ä»–æ¨¡å¼çš„æ•´åˆ

### INIT æ¨¡å¼æ•´åˆ
```markdown
## ç³»çµ±åˆå§‹åŒ–æº–å‚™
VAN æ¨¡å¼å‡è¨­ INIT æ¨¡å¼å·²å®Œæˆï¼š
- ç³»çµ±å¥åº·æª¢æŸ¥é€šé
- MCP Memory Server æ­£å¸¸é‹è¡Œ
- Graph Bank æ–‡ä»¶çµæ§‹å®Œæ•´
- é–‹ç™¼ç’°å¢ƒé…ç½®æ­£ç¢º

VAN æ¨¡å¼å°ˆæ³¨æ–¼å°ˆæ¡ˆåˆ†æï¼Œä¸å†é‡è¤‡ç³»çµ±æª¢æŸ¥
```

### å¾ŒçºŒæ¨¡å¼æº–å‚™
```markdown
## æ¨¡å¼è½‰æ›æº–å‚™
- Level 1 ä»»å‹™: â†’ IMPLEMENT æ¨¡å¼
- Level 2 ä»»å‹™: â†’ PLAN æ¨¡å¼
- Level 3-4 ä»»å‹™: â†’ PLAN æ¨¡å¼

VAN æ¨¡å¼ç‚ºå¾ŒçºŒæ¨¡å¼æä¾›ï¼š
- å°ˆæ¡ˆçµæ§‹ç†è§£
- æŠ€è¡“æ£§è­˜åˆ¥
- è¤‡é›œåº¦è©•ä¼°
- ä»»å‹™ç´šåˆ¥ç¢ºå®š
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### ä½•æ™‚ä½¿ç”¨ VAN æ¨¡å¼
- é–‹å§‹æ–°å°ˆæ¡ˆåˆ†ææ™‚
- éœ€è¦é‡æ–°è©•ä¼°å°ˆæ¡ˆç‹€æ…‹æ™‚
- å°ˆæ¡ˆçµæ§‹ç™¼ç”Ÿé‡å¤§è®ŠåŒ–æ™‚
- éœ€è¦ç¢ºå®šä»»å‹™è¤‡é›œåº¦æ™‚
- æº–å‚™é€²å…¥å…¶ä»–é–‹ç™¼æ¨¡å¼æ™‚

### VAN æ¨¡å¼åˆ†ææ¸…å–®
```markdown
## VAN æ¨¡å¼åŸ·è¡Œæ¸…å–®
- [ ] åŸ·è¡Œå°ˆæ¡ˆçµæ§‹åˆ†æ
- [ ] è­˜åˆ¥æŠ€è¡“æ£§å’Œæ¡†æ¶
- [ ] åˆ†æä¾è³´é—œä¿‚
- [ ] è©•ä¼°ä»£ç¢¼è¤‡é›œåº¦
- [ ] ç¢ºå®šä»»å‹™ç´šåˆ¥
- [ ] å»ºç«‹å°ˆæ¡ˆä¸Šä¸‹æ–‡
- [ ] æ›´æ–° Graph Bank æ–‡ä»¶
- [ ] ç”Ÿæˆåˆ†æå ±å‘Š
- [ ] æä¾›æ¨¡å¼è½‰æ›å»ºè­°
```

## ğŸ¯ æˆåŠŸæ¨™æº–

### VAN æ¨¡å¼æˆåŠŸå®Œæˆæ¨™èªŒ
- å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ
- æŠ€è¡“æ£§è­˜åˆ¥æº–ç¢º
- è¤‡é›œåº¦è©•ä¼°æ­£ç¢º
- ä»»å‹™ç´šåˆ¥ç¢ºå®š
- å°ˆæ¡ˆä¸Šä¸‹æ–‡å»ºç«‹
- Graph Bank æ–‡ä»¶æ›´æ–°
- åˆ†æå ±å‘Šç”Ÿæˆ
- æ¨¡å¼è½‰æ›å»ºè­°æä¾›

### è¼¸å‡ºæˆæœ
```markdown
## VAN æ¨¡å¼è¼¸å‡º
- å°ˆæ¡ˆçµæ§‹åœ–
- æŠ€è¡“æ£§æ¸…å–®
- è¤‡é›œåº¦è©•ä¼°å ±å‘Š
- ä»»å‹™ç´šåˆ¥å»ºè­°
- å°ˆæ¡ˆä¸Šä¸‹æ–‡æ–‡æª”
- Graph Bank æ›´æ–°è¨˜éŒ„
- ä¸‹ä¸€æ­¥æ¨¡å¼å»ºè­°
```

## ğŸ”„ æŒçºŒæ”¹é€²

### åˆ†æå„ªåŒ–
- æ”¹é€²å°ˆæ¡ˆçµæ§‹è­˜åˆ¥ç®—æ³•
- å¢å¼·æŠ€è¡“æ£§æª¢æ¸¬æº–ç¢ºæ€§
- å„ªåŒ–è¤‡é›œåº¦è©•ä¼°æ¨¡å‹
- å®Œå–„ä»»å‹™ç´šåˆ¥åˆ†é¡æ¨™æº–
- æå‡åˆ†æå ±å‘Šè³ªé‡

### æ•´åˆå„ªåŒ–
- æ”¹å–„èˆ‡ INIT æ¨¡å¼çš„å”ä½œ
- å„ªåŒ–èˆ‡å¾ŒçºŒæ¨¡å¼çš„è½‰æ›
- å¢å¼· Graph Bank æ•´åˆ
- å®Œå–„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- æå‡ç”¨æˆ¶é«”é©—
`````

## File: .cursor/rules/isolation_rules/Phases/CreativePhase/creative-phase-uiux.mdc
`````
---
description: UI/UX Design Guidelines and Process for the Creative Phase
globs: creative-phase-uiux.mdc
alwaysApply: false
---
Okay, I've updated the style guide location to `graph-bank/style-guide.md` and will provide the entire content for the new `creative-phase-uiux.md` file within a single markdown code block for easy copying. I've also reviewed the Mermaid diagrams to ensure they are correctly formatted.

# Creative Phase: UI/UX Design Guidelines

**Document Purpose:** This document outlines the structured approach for UI/UX design decisions during the Creative Phase. It ensures user-centric designs, exploration of multiple options, adherence to a style guide (if available or created), and clear documentation of UI/UX choices, aligning with modern Angular/Material Design 3 best practices.

## ğŸ¨ UI/UX Design Philosophy

* **User-Centricity**: Designs must prioritize the user's needs, goals, and context.
* **Clarity & Simplicity**: Interfaces should be intuitive and easy to understand.
* **Consistency**: Maintain consistency with established design patterns, project-specific styles, and platform conventions.
* **Accessibility (A11y)**: Adhere to WCAG guidelines to ensure usability for people with disabilities.
* **Efficiency**: Enable users to accomplish tasks with minimal effort.
* **Feedback**: Provide clear and timely feedback for user actions.
* **Visual Cohesion**: Ensure new UI elements align with the existing or defined project style guide.

## ğŸŒŠ UI/UX Design Workflow

This workflow guides the UI/UX design process within the Creative Phase, incorporating a crucial style guide check.

```mermaid
graph TD
    Start["UI/UX Design Start"] --> StyleGuideCheck["0. Style Guide Check<br>Attempt to locate 'graph-bank/style-guide.md' or user-provided path."]
    StyleGuideCheck --> HasStyleGuide{"Style Guide<br>Available/Loaded?"}

    HasStyleGuide -- "Yes" --> Understand["Understand User & Task<br>(Personas, User Stories, Requirements)"]
    HasStyleGuide -- "No" --> PromptCreateStyleGuide["Prompt User: Create/Link Style Guide?"]

    PromptCreateStyleGuide --> UserResponse{"User Opts to Create/Link?"}
    UserResponse -- "Yes, Create" --> DefineStyleGuideSubProcess["SUB-PROCESS:Define Basic Style Guide"]
    UserResponse -- "Yes, Link" --> LinkStyleGuide["User provides path/URL.<br>Load Style Guide."]
    UserResponse -- "No" --> Understand_NoGuide["Understand User & Task<br>(Proceeding without Style Guide - WARN user of inconsistencies)"]

    DefineStyleGuideSubProcess --> StyleGuideCreated["Basic 'graph-bank/style-guide.md' Created/Defined"]
    StyleGuideCreated --> Understand
    LinkStyleGuide --> Understand
    Understand_NoGuide --> InfoArch_NoGuide["Information Architecture"]

    Understand --> InfoArch["Information Architecture<br>(Structure, Navigation, Content Hierarchy)"]
    InfoArch --> Interaction["Interaction Design<br>(User Flows, Wireframes, Prototypes - Conceptual)"]
    Interaction --> VisualDesign["Visual Design<br>(APPLY STYLE GUIDE, Leverage Angular Material 3, Standalone Components, Mockups - Conceptual)"]
    VisualDesign --> Options["Explore UI/UX Options<br>(Generate 2-3 distinct solutions)"]
    Options --> Evaluate["Evaluate Options<br>(Usability, Feasibility, A11y, Aesthetics, <b>Style Guide Alignment</b>)"]
    Evaluate --> Decision["Make & Document UI/UX Decision<br>(Use Optimized Creative Template)"]
    Decision --> Validate["Validate Against Requirements, Principles & <b>Style Guide</b>"]
    Validate --> UIUX_Complete["UI/UX Design Complete for Component"]

    InfoArch_NoGuide --> Interaction_NoGuide["Interaction Design"]
    Interaction_NoGuide --> VisualDesign_NoGuide["Visual Design<br>(Leverage Angular Material 3, Standalone Components, Aim for Internal Consistency)"]
    VisualDesign_NoGuide --> Options_NoGuide["Explore UI/UX Options"]
    Options_NoGuide --> Evaluate_NoGuide["Evaluate Options<br>(Usability, Feasibility, A11y, Aesthetics)"]
    Evaluate_NoGuide --> Decision_NoGuide["Make & Document UI/UX Decision"]
    Decision_NoGuide --> Validate_NoGuide["Validate Against Requirements & Principles"]
    Validate_NoGuide --> UIUX_Complete

    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style StyleGuideCheck fill:#ab87ff,stroke:#7d5bbe,color:white
    style HasStyleGuide fill:#ab87ff,stroke:#7d5bbe,color:white
    style PromptCreateStyleGuide fill:#ffcb6b,stroke:#f9a825,color:black
    style UserResponse fill:#ffcb6b,stroke:#f9a825,color:black
    style DefineStyleGuideSubProcess fill:#c3e88d,stroke:#82a75c,color:black
    style LinkStyleGuide fill:#c3e88d,stroke:#82a75c,color:black
    style StyleGuideCreated fill:#c3e88d,stroke:#82a75c,color:black
    style VisualDesign fill:#4dbbbb,stroke:#368787,color:white
    style Evaluate fill:#d971ff,stroke:#a33bc2,color:white
    style Validate fill:#71c2ff,stroke:#3b8aa3,color:white
    style Understand_NoGuide fill:#ff8a80,stroke:#c85a54,color:black
    style UIUX_Complete fill:#5fd94d,stroke:#3da336,color:white
```

## ğŸ“– Style Guide Integration

A consistent visual style is paramount for good UI/UX. This section details how to reference an existing style guide or prompt for its creation. **The primary location for the style guide in this system will be `graph-bank/style-guide.md`.**

### Step 0: Style Guide Check & Handling

**A. Checking for an Existing Style Guide:**
1.  **Primary Location Check**: The system **MUST** first look for the style guide at this specific path:
    * `graph-bank/style-guide.md`
2.  **Secondary Check (User Prompt)**: If `graph-bank/style-guide.md` is not found, the system **MUST** prompt the user:
    ```
    "I could not find 'graph-bank/style-guide.md'.
    Is there an existing style guide at a different location, or a URL I should reference?
    If yes, please provide the full path or URL.
    Otherwise, we can create a basic 'graph-bank/style-guide.md' now, or you can opt to proceed without one (though this is not recommended for new UI development)."
    ```

**B. Using an Existing Style Guide:**
* If `graph-bank/style-guide.md` is found or an alternative path/URL is provided by the user:
    * Load its content into context.
    * **CRITICAL**: All subsequent UI/UX design proposals (colors, typography, spacing, component appearance) **MUST** adhere strictly to this guide.
    * When evaluating options (Step 6 of the workflow), "Adherence to Style Guide" **MUST** be a key evaluation criterion.

**C. If No Style Guide Exists or is Provided (User Interaction):**
* If no style guide is found or linked by the user, the system **MUST** strongly recommend creating one:
    ```
    "No style guide has been referenced. For optimal UI consistency and development efficiency, creating 'graph-bank/style-guide.md' is highly recommended."

    "Would you like to:"
    "1. Create a basic 'graph-bank/style-guide.md' now? (I can help you define core elements like colors, typography, and spacing based on observations or your input.)"
    "2. Proceed with UI/UX design without a style guide? (WARNING: This may lead to visual inconsistencies and is strongly discouraged for new features or significant UI changes.)"
    "Please choose 1 or 2."
    ```
    (If the user previously chose to link one but it failed, this prompt should adapt).

**D. Assisting in Style Guide Creation (If user opts-in for option 1):**
This initiates a sub-process to define and document a basic style guide, which will be saved as `graph-bank/style-guide.md`.

```mermaid
graph TD
    StartCreate["User Opts to Create Style Guide"] --> GatherInspiration["Gather Inspiration<br>(e.g., Analyze user-provided image, existing UI, or direct user input)"]
    GatherInspiration --> DefineColors["Define Core Color Palette<br>(Primary, Secondary, Accent, Neutrals, Status Colors - with hex codes)"]
    DefineColors --> DefineTypography["Define Typography<br>(Font Families, Sizes, Weights for Headings, Body, Links)"]
    DefineTypography --> DefineSpacing["Define Spacing System<br>(Base unit, margins, paddings, Tailwind scale usage)"]
    DefineSpacing --> DefineComponents["Define Key Component Styles (Conceptual)<br>(Buttons, Inputs, Cards - using Tailwind utility classes if applicable)"]
    DefineComponents --> DefineTone["Define Tone of Voice & Imagery Style (Optional)"]
    DefineTone --> GenerateDoc["Generate content for 'graph-bank/style-guide.md'<br>(Populate with defined elements)"]
    GenerateDoc --> SaveFile["Save the generated content to 'graph-bank/style-guide.md'"]
    SaveFile --> Confirm["Confirm 'graph-bank/style-guide.md' creation & Proceed with UI/UX Design"]

    style StartCreate fill:#c3e88d,stroke:#82a75c,color:black
    style GatherInspiration fill:#e0f2f1,stroke:#a7c4c0,color:black
    style SaveFile fill:#89cff0,stroke:#50a6c2,color:black
```
* **Process**:
    1.  **Inspiration**: Analyze user-provided examples (like the dashboard image `original-a5959a2926d1e7ede16dbe1d27593a59.webp`) or ask for user preferences.
        * `AI: "To create a style guide, do you have an existing design, screenshot, or website I can analyze for styles? Or would you like to define them from scratch?"`
    2.  **Define Elements**: Guide the user through defining colors, typography, spacing, and key component styles (as detailed in the previous response regarding the sample based on the image).
    3.  **Documentation**: Generate the content for `graph-bank/style-guide.md`. The structure should be similar to the sample style guide created from the dashboard image.
    4.  **Save File**: The system should then create and save this content to the file `graph-bank/style-guide.md`.
* Once `graph-bank/style-guide.md` is created/loaded, it becomes the **single source of truth for visual design**.

## ğŸ–¼ï¸ Key UI/UX Design Considerations (To be applied using `graph-bank/style-guide.md`)

### 1. User Needs Analysis
* **Personas**: Define target user personas.
* **User Stories/Jobs-to-be-Done**: Clarify what users need to achieve.
* **Use Cases**: Detail specific interaction scenarios.

### 2. Information Architecture (IA)
* **Content Inventory & Audit**: Understand existing content.
* **Hierarchy & Structure**: Organize content logically.
* **Navigation Design**: Design intuitive navigation (menus, breadcrumbs) adhering to `graph-bank/style-guide.md` for appearance.
* **Labeling**: Use clear and consistent labels.

### 3. Interaction Design (IxD)
* **User Flows**: Map out the user's path.
* **Wireframes**: Create low-fidelity layouts.
* **Prototypes (Conceptual)**: Describe interactive elements and transitions.
* **Error Handling & Prevention**: Design clear error messages (styled per `graph-bank/style-guide.md`).
* **Feedback Mechanisms**: Implement visual/textual feedback (styled per `graph-bank/style-guide.md`).

### 4. Visual Design (Strictly follow `graph-bank/style-guide.md`)
* **Style Guide Adherence**: **CRITICAL** - All visual choices **MUST** conform to `graph-bank/style-guide.md`.
* **Visual Hierarchy**: Use the Style Guide's typography and spacing to guide the user.
* **Layout & Composition**: Arrange elements effectively using Angular Material 3, standalone components, and Style Guide spacing.
* **Typography**: Apply defined font families, sizes, and weights from the Style Guide.
* **Color Palette**: Exclusively use colors defined in the Style Guide.
* **Imagery & Iconography**: Use icons and images that match the Style Guide's defined style.
* **Branding**: Align with project branding guidelines as documented in the Style Guide.

### 5. Accessibility (A11y)
* **WCAG Compliance Level**: Target AA or AAA.
* **Semantic HTML**.
* **Keyboard Navigation**.
* **ARIA Attributes**.
* **Color Contrast**: Verify against Style Guide colors.
* **Alternative Text**.

### 6. Platform & Responsiveness
* **Responsive Design**: Ensure UI adapts to screen sizes using Style Guide's responsive principles (if defined).
* **Platform Conventions**: Adhere to UI patterns for the target platform(s).

## ğŸš€ MODERN ANGULAR UI/UX CONSIDERATIONS

### Modern Angular Features for UI/UX
* **Standalone Components**: Use standalone components for better tree-shaking and performance
* **Signals**: Implement reactive state management with Angular Signals
* **Control Flow**: Use new `@if`, `@for`, `@switch` template syntax
* **Material Design 3**: Leverage latest Material Design system with dynamic theming
* **Angular Universal**: Consider SSR for better performance and SEO
* **Web Components**: Use Angular Elements for framework-agnostic components

### Modern Angular UI Patterns
* **Component Composition**: Build complex UIs using standalone component composition
* **Reactive Forms**: Use reactive forms with signals for better performance
* **Lazy Loading**: Implement lazy loading with standalone components
* **Progressive Web App**: Consider PWA features for mobile-first design

## ğŸ› ï¸ UI/UX Option Evaluation & Decision Making

Reference the project's `optimized-creative-template.mdc`. Key evaluation criteria **must** include:

* Usability
* Learnability
* Efficiency
* Accessibility
* Aesthetics (as defined by `graph-bank/style-guide.md`)
* Feasibility (Modern Angular/Material Design 3)
* Alignment with Requirements
* **Adherence to `graph-bank/style-guide.md` (CRITICAL if guide exists)**
* **Modern Angular Architecture Compliance**

```mermaid
graph TD
    subgraph "UI/UX EVALUATION CRITERIA"
        C1["Usability"]
        C2["Learnability"]
        C3["Efficiency"]
        C4["Accessibility (A11y)"]
        C5["Aesthetics (Per Style Guide)"]
        C6["Feasibility (Modern Angular/Material Design 3)"]
        C7["Alignment with Requirements"]
        C8["<b>Style Guide Adherence</b>"]
    end

    style C8 fill:#ff5555,stroke:#c30052,color:white
```

## ğŸ“ Documentation Standards

* Use the project's `optimized-creative-template.mdc` for documenting UI/UX decisions.
* Clearly describe chosen UI patterns and rationale, referencing `graph-bank/style-guide.md`.
* Document considerations for responsive states and accessibility, as guided by `graph-bank/style-guide.md`.

## âœ… UI/UX Design Verification Checklist

* [ ] **Style Guide (`graph-bank/style-guide.md`) referenced or created?**
* [ ] User needs clearly understood and addressed?
* [ ] Information architecture logical and intuitive?
* [ ] Interaction design clear and efficient?
* [ ] **Visual design strictly adheres to `graph-bank/style-guide.md`?**
* [ ] Accessibility standards met?
* [ ] Responsive design addressed?
* [ ] Design decisions documented with rationale and Style Guide references?
* [ ] Alignment with modern Angular/Material Design 3 best practices and Style Guide considered?

## ğŸ”„ Integration with Other Creative Phases

* **Architecture Design**: Ensure UI/UX is compatible with system architecture.
* **Data Model Design**: UI should effectively present/capture data from the data model.
* **Style Guide**: All UI/UX work **must** be a direct application or extension of the established `graph-bank/style-guide.md`.

```
`````

## File: angular/src/app/features/user/auth/role.guard.ts
`````typescript
import { inject } from '@angular/core';
import { CanActivateFn, Router } from '@angular/router';
import { AuthService } from '../../../core/services/auth.service';
import { PermissionService } from '../../../core/services/permission.service';
import { OrgRole } from '../../../core/models/auth.model';
â‹®----
export function roleGuard(expectedRole: string): CanActivateFn
â‹®----
// æª¢æŸ¥ç”¨æˆ¶è§’è‰²
â‹®----
// æª¢æŸ¥æ˜¯å¦æœ‰é æœŸè§’è‰²
â‹®----
// å¦‚æœæ²’æœ‰é æœŸè§’è‰²ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
// çµ„ç¹”å¸³æˆ¶ä¸æ”¯æ´è§’è‰²å®ˆè¡›
â‹®----
// çµ„ç¹”è§’è‰²å®ˆè¡›
export function orgRoleGuard(expectedRole: OrgRole): CanActivateFn
â‹®----
// æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦ç‚ºçµ„ç¹”æˆå“¡
â‹®----
// æª¢æŸ¥çµ„ç¹”è§’è‰²
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
â‹®----
// çµ„ç¹”å¸³æˆ¶ä¸æ”¯æ´æ­¤å®ˆè¡›
â‹®----
// æ¬Šé™å®ˆè¡›
export function permissionGuard(action: string, resource: string): CanActivateFn
â‹®----
// æª¢æŸ¥æ¬Šé™
â‹®----
// æ²’æœ‰æ¬Šé™ï¼Œé‡å®šå‘åˆ°æœªæˆæ¬Šé é¢
`````

## File: angular/package.json
`````json
{
  "name": "angular-fire-rolekit",
  "version": "0.0.0",
  "scripts": {
    "ng": "ng",
    "start": "ng serve",
    "build": "ng build",
    "watch": "ng build --watch --configuration development",
    "test": "ng test"
  },
  "prettier": {
    "overrides": [
      {
        "files": "*.html",
        "options": {
          "parser": "angular"
        }
      }
    ]
  },
  "private": true,
  "dependencies": {
    "@angular/animations": "20.1.0",
    "@angular/cdk": "20.1.0",
    "@angular/common": "^20.1.0",
    "@angular/compiler": "^20.1.0",
    "@angular/core": "^20.1.0",
    "@angular/fire": "^20.0.1",
    "@angular/forms": "^20.1.0",
    "@angular/material": "20.1.0",
    "@angular/platform-browser": "^20.1.0",
    "@angular/router": "^20.1.0",
    "firebase": "^11.10.0",
    "rxjs": "~7.8.0",
    "tslib": "^2.3.0",
    "zone.js": "~0.15.0"
  },
  "devDependencies": {
    "@angular/build": "^20.1.0",
    "@angular/cli": "^20.1.0",
    "@angular/compiler-cli": "^20.1.0",
    "@types/jasmine": "~5.1.0",
    "jasmine-core": "~5.8.0",
    "karma": "~6.4.0",
    "karma-chrome-launcher": "~3.2.0",
    "karma-coverage": "~2.2.0",
    "karma-jasmine": "~5.1.0",
    "karma-jasmine-html-reporter": "~2.1.0",
    "typescript": "~5.8.2"
  }
}
`````

## File: .cursor/rules/isolation_rules/Modes/repo-mode-detailed.mdc
`````
---
description: Detailed REPO mode instructions for comprehensive repository analysis and documentation generation
globs: repo-mode-detailed.mdc
alwaysApply: false
---

# REPO MODE - è©³ç´°æŒ‡ä»¤

> **TL;DR:** æ­¤æ–‡ä»¶æä¾›è©³ç´°çš„ REPO æ¨¡å¼æŒ‡ä»¤ï¼Œç”¨æ–¼å…¨é¢çš„å€‰åº«åˆ†æå’Œæ–‡æª”ç”Ÿæˆï¼ŒåŒ…å«å…­ç¨®ä¸åŒçš„è¼¸å‡ºæ¨¡å¼ä»¥æ»¿è¶³å„ç¨®åˆ†æéœ€æ±‚ã€‚

## ğŸ”§ REPO MODE æŠ€è¡“æ¶æ§‹

### MCP å·¥å…·æ•´åˆ
REPO æ¨¡å¼ä½¿ç”¨ **repomix-docker** MCP å·¥å…·ï¼Œè©²å·¥å…·å·²é é…ç½®åœ¨ `.cursor/mcp.json` ä¸­ï¼š

```json
"repomix-docker": {
  "command": "docker",
  "args": [
    "run",
    "-i",
    "--rm",
    "ghcr.io/yamadashy/repomix",
    "--mcp"
  ],
  "disabled": false,
  "autoApprove": [],
  "retry": {
    "enabled": true,
    "maxAttempts": 3,
    "delay": 2000,
    "backoffMultiplier": 1.5,
    "maxDelay": 10000
  }
}
```

### å·¥å…·åŠŸèƒ½
- **pack_codebase**: æ‰“åŒ…æœ¬åœ°ä»£ç¢¼ç›®éŒ„é€²è¡Œ AI åˆ†æ
- **pack_remote_repository**: ç²å–ä¸¦æ‰“åŒ…é ç¨‹ GitHub å€‰åº«
- **attach_packed_output**: é™„åŠ ç¾æœ‰çš„ Repomix è¼¸å‡ºæ–‡ä»¶
- **read_repomix_output**: è®€å– Repomix ç”Ÿæˆçš„è¼¸å‡ºæ–‡ä»¶å…§å®¹
- **grep_repomix_output**: åœ¨ Repomix è¼¸å‡ºä¸­æœç´¢æ¨¡å¼
- **file_system_read_file**: è®€å–æœ¬åœ°æ–‡ä»¶ç³»çµ±æ–‡ä»¶
- **file_system_read_directory**: åˆ—å‡ºç›®éŒ„å…§å®¹

## ğŸš€ REPO MODE å•Ÿå‹•

**é‡è¦ï¼š** REPO æ¨¡å¼ä½¿ç”¨ **repomix-docker** MCP å·¥å…·é€²è¡Œå€‰åº«åˆ†æï¼Œè©²å·¥å…·å·²é…ç½®åœ¨ `.cursor/mcp.json` ä¸­ã€‚

ç•¶æ‚¨è¼¸å…¥ `repo` æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•é¡¯ç¤ºæ¨¡å¼é¸æ“‡é¸å–®ï¼š

```
ğŸ” REPO MODE - å€‰åº«åˆ†ææ¨¡å¼é¸æ“‡
=====================================

è«‹é¸æ“‡åˆ†ææ¨¡å¼ï¼š

1ï¸âƒ£  [å®Œæ•´æ¨¡å¼] - æ·±åº¦åˆ†æï¼Œå®Œæ•´ç†è§£ (351,116 tokens)
2ï¸âƒ£  [å£“ç¸®æ¨¡å¼] - å¿«é€Ÿå¯©æŸ¥ï¼Œä»£ç¢¼åˆ†æ (307,073 tokens)  
3ï¸âƒ£  [æºç¢¼æ¨¡å¼] - åŠŸèƒ½é–‹ç™¼ï¼Œä»£ç¢¼ç”Ÿæˆ (44,080 tokens)
4ï¸âƒ£  [æ¥µè‡´ç¯€çœ] - æˆæœ¬æ•æ„Ÿï¼Œå¿«é€Ÿæ¦‚è¦½ (41,433 tokens)
5ï¸âƒ£  [MCP æ•´åˆæ¨¡å¼] - èˆ‡ MCP æœå‹™å™¨æ•´åˆåˆ†æ (50,000 tokens)
6ï¸âƒ£  [æ™ºèƒ½åˆ†ææ¨¡å¼] - AI é©…å‹•çš„æ·±åº¦åˆ†æ (200,000 tokens)

ğŸ’¡ æç¤ºï¼šè¼¸å…¥å°æ‡‰æ•¸å­— (1-6) æˆ–æ¨¡å¼åç¨±ä¾†é¸æ“‡
```

## ğŸ“Š å…­ç¨®æ¨¡å¼ç¶œåˆå°æ¯”

> **æ³¨æ„ï¼š** ä»¥ä¸‹å‘½ä»¤ç‚º Docker ç›´æ¥ä½¿ç”¨æ–¹å¼ï¼Œå¯¦éš› REPO æ¨¡å¼æœƒé€šé **repomix-docker** MCP å·¥å…·åŸ·è¡Œï¼Œæä¾›æ›´å¥½çš„æ•´åˆé«”é©—ã€‚

| æ¨¡å¼ | Token | æ–‡ä»¶æ•¸ | é©ç”¨å ´æ™¯ | MCP å·¥å…·ä½¿ç”¨ |
|------|-------|--------|----------|-------------|
| **å®Œæ•´æ¨¡å¼** | 351,116 | 147 | æ–°å°ˆæ¡ˆæ¶æ§‹åˆ†æã€å®Œæ•´ä»£ç¢¼å¯©æŸ¥ | `pack_codebase` (style: markdown, topFilesLength: 20) |
| **å£“ç¸®æ¨¡å¼** | 307,073 | 147 | å¿«é€Ÿä»£ç¢¼å¯©æŸ¥ã€æ€§èƒ½ç“¶é ¸åˆ†æ | `pack_codebase` (compress: true, topFilesLength: 10) |
| **æºç¢¼æ¨¡å¼** | 44,080 | 5 | æ–°åŠŸèƒ½é–‹ç™¼ã€ä»£ç¢¼ç”Ÿæˆå’Œè£œå…¨ | `pack_codebase` (includePatterns: "src/**/*.ts,src/**/*.html,src/**/*.scss,*.md,*.json") |
| **æ¥µè‡´ç¯€çœ** | 41,433 | 4 | æˆæœ¬æ•æ„Ÿåˆ†æã€å¿«é€Ÿå°ˆæ¡ˆæ¦‚è¦½ | `pack_codebase` (compress: true, minimal output) |
| **MCP æ•´åˆ** | 50,000 | 8 | MCP æœå‹™å™¨é…ç½®åˆ†æã€å”è­°å…¼å®¹æ€§æª¢æŸ¥ | `pack_codebase` (includePatterns: "**/*.mcp.*,**/*mcp*,**/*.json,**/*.yaml,**/*.yml") |
| **æ™ºèƒ½åˆ†æ** | 200,000 | 50 | AI ä»£ç¢¼åˆ†æã€æ™ºèƒ½é‡æ§‹å»ºè­° | `pack_codebase` (compress: true, AI-optimized settings) |

### Docker å‘½ä»¤å°ç…§ï¼ˆåƒè€ƒç”¨ï¼‰
| æ¨¡å¼ | Docker å‘½ä»¤ |
|------|-------------|
| **å®Œæ•´æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style markdown --top-files-len 20 --output complete-analysis.md` |
| **å£“ç¸®æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --style markdown --top-files-len 10 --output compressed-analysis.md` |
| **æºç¢¼æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "src/**/*.ts,src/**/*.html,src/**/*.scss,*.md,*.json" --style markdown --top-files-len 5 --output source-code.md` |
| **æ¥µè‡´ç¯€çœ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --remove-comments --remove-empty-lines --no-file-summary --no-directory-structure --include "src/**/*.ts,src/**/*.html,*.md" --style markdown --output minimal-analysis.md` |
| **MCP æ•´åˆ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "**/*.mcp.*,**/*mcp*,**/*.json,**/*.yaml,**/*.yml" --style markdown --top-files-len 8 --output mcp-integration-analysis.md` |
| **æ™ºèƒ½åˆ†æ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --include "src/**/*,*.md,*.json,*.yaml,*.yml" --style markdown --top-files-len 15 --output ai-analysis.md` |

## ğŸ“‹ æ¨¡å¼é¸æ“‡æ±ºç­–æ¨¹

```mermaid
graph TD
    Start["é–‹å§‹ REPO åˆ†æ"] --> Q1{"éœ€è¦å®Œæ•´ç†è§£?"}
    Q1 -->|Yes| Q2{"æˆæœ¬æ•æ„Ÿ?"}
    Q1 -->|No| Q3{"å°ˆæ³¨ä»£ç¢¼é–‹ç™¼?"}
    Q1 -->|MCPæ•´åˆ| MCP["MCP æ•´åˆæ¨¡å¼"]
    
    Q2 -->|Yes| Minimal["æ¥µè‡´ç¯€çœæ¨¡å¼"]
    Q2 -->|No| Complete["å®Œæ•´æ¨¡å¼"]
    
    Q3 -->|Yes| Q4{"éœ€è¦ AI åˆ†æ?"}
    Q3 -->|No| Compressed["å£“ç¸®æ¨¡å¼"]
    
    Q4 -->|Yes| AI["æ™ºèƒ½åˆ†ææ¨¡å¼"]
    Q4 -->|No| Source["æºç¢¼æ¨¡å¼"]
    
    Complete --> Execute["åŸ·è¡Œåˆ†æ"]
    Compressed --> Execute
    Source --> Execute
    Minimal --> Execute
    MCP --> Execute
    AI --> Execute
```

## ğŸ® å¿«é€Ÿé¸æ“‡æŒ‡ä»¤

```bash
# ç›´æ¥åŸ·è¡Œæ¨¡å¼ï¼ˆè·³éé¸å–®ï¼‰
repo complete    # å®Œæ•´æ¨¡å¼
repo compressed  # å£“ç¸®æ¨¡å¼
repo source      # æºç¢¼æ¨¡å¼
repo minimal     # æ¥µè‡´ç¯€çœæ¨¡å¼
repo mcp         # MCP æ•´åˆæ¨¡å¼
repo ai          # æ™ºèƒ½åˆ†ææ¨¡å¼
```

## ğŸ”§ é€²éšé…ç½®é¸é …

### MCP å·¥å…·ä½¿ç”¨æ–¹å¼
REPO æ¨¡å¼é€šé **repomix-docker** MCP å·¥å…·æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

#### ä¸»è¦å·¥å…·å‡½æ•¸
- **`pack_codebase`**: æ‰“åŒ…æœ¬åœ°ä»£ç¢¼ç›®éŒ„
  - `directory`: è¦æ‰“åŒ…çš„ç›®éŒ„è·¯å¾‘
  - `style`: è¼¸å‡ºæ ¼å¼ (xml, markdown, json, plain)
  - `compress`: å•Ÿç”¨ Tree-sitter å£“ç¸®
  - `includePatterns`: åŒ…å«çš„æ–‡ä»¶æ¨¡å¼
  - `ignorePatterns`: å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼
  - `topFilesLength`: æ‘˜è¦æ–‡ä»¶æ•¸é‡

- **`pack_remote_repository`**: æ‰“åŒ…é ç¨‹ GitHub å€‰åº«
  - `remote`: GitHub å€‰åº« URL æˆ– user/repo æ ¼å¼
  - å…¶ä»–åƒæ•¸èˆ‡ `pack_codebase` ç›¸åŒ

- **`attach_packed_output`**: é™„åŠ ç¾æœ‰è¼¸å‡ºæ–‡ä»¶
- **`read_repomix_output`**: è®€å–è¼¸å‡ºæ–‡ä»¶å…§å®¹
- **`grep_repomix_output`**: æœç´¢è¼¸å‡ºæ–‡ä»¶æ¨¡å¼

### è‡ªå®šç¾©åŒ…å«æ¨¡å¼ï¼ˆDocker å‘½ä»¤åƒè€ƒï¼‰
```bash
# ç‰¹å®šæŠ€è¡“æ£§
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "src/**/*.ts,src/**/*.html,src/**/*.scss" --style markdown --output typescript-only.md

# é…ç½®æ–‡ä»¶
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "*.json,*.yaml,*.yml,*.config.*" --style markdown --output config-files.md

# Git æ­·å²
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include-logs --include-diffs --style markdown --output with-history.md

# ä¸åŒæ ¼å¼
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style json --output project-data.json
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style xml --output project-structure.xml
```

## ğŸš€ æœ€ä½³å¯¦è¸

### æ¨¡å¼é¸æ“‡åŸå‰‡
- **å®Œæ•´æ¨¡å¼**: æ–°å°ˆæ¡ˆã€é‡å¤§é‡æ§‹ã€æ¶æ§‹åˆ†æ
- **å£“ç¸®æ¨¡å¼**: ä»£ç¢¼å¯©æŸ¥ã€æ€§èƒ½åˆ†æã€æŠ€è¡“è©•ä¼°
- **æºç¢¼æ¨¡å¼**: åŠŸèƒ½é–‹ç™¼ã€æ¨¡çµ„è¨­è¨ˆã€API é–‹ç™¼
- **æ¥µè‡´ç¯€çœ**: æˆæœ¬æ•æ„Ÿã€å¿«é€Ÿæ¦‚è¦½ã€åˆæ­¥åˆ†æ
- **MCP æ•´åˆ**: MCP æœå‹™å™¨é…ç½®ã€å”è­°åˆ†æã€å·¥å…·æ•´åˆ
- **æ™ºèƒ½åˆ†æ**: AI é©…å‹•åˆ†æã€æ™ºèƒ½é‡æ§‹ã€æ¶æ§‹å„ªåŒ–

### è¼¸å‡ºå„ªåŒ–æŠ€å·§
- ä½¿ç”¨ `--top-files-len` æ§åˆ¶æ‘˜è¦é•·åº¦
- åˆ©ç”¨ `--include` å’Œ `--ignore` ç²¾ç¢ºæ§åˆ¶å…§å®¹
- æ ¹æ“šéœ€è¦é¸æ“‡ä¸åŒçš„è¼¸å‡ºæ ¼å¼
- å®šæœŸæ›´æ–° repomix è¼¸å‡ºä»¥ä¿æŒåŒæ­¥

## ğŸ“‹ æª¢æŸ¥æ¸…å–®

```
âœ“ REPO MODE æª¢æŸ¥æ¸…å–®
- MCP repomix-docker å·¥å…·å¯ç”¨? [YES/NO]
- åˆ†æç›®æ¨™æ˜ç¢º? [YES/NO]
- æˆæœ¬é™åˆ¶è€ƒæ…®? [YES/NO]
- Docker ç’°å¢ƒæ­£å¸¸? [YES/NO]
- å°ˆæ¡ˆè·¯å¾‘æ­£ç¢º? [YES/NO]
- è¼¸å‡ºæ–‡ä»¶ç”Ÿæˆ? [YES/NO]
- å…§å®¹å®Œæ•´æ€§é©—è­‰? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: REPO åˆ†æå®Œæˆ
â†’ å¦‚æœæœ‰ NO: æª¢æŸ¥ç’°å¢ƒå’Œé…ç½®
```

### MCP å·¥å…·ç‹€æ…‹æª¢æŸ¥
- **repomix-docker é€£æ¥**: ç¢ºèª MCP æœå‹™å™¨æ­£å¸¸é‹è¡Œ
- **å·¥å…·å‡½æ•¸å¯ç”¨æ€§**: é©—è­‰ `pack_codebase` ç­‰å‡½æ•¸å¯èª¿ç”¨
- **æ¬Šé™é…ç½®**: æª¢æŸ¥æ–‡ä»¶ç³»çµ±è®€å–æ¬Šé™
- **è¼¸å‡ºæ ¼å¼æ”¯æ´**: ç¢ºèªæ‰€éœ€çš„è¼¸å‡ºæ ¼å¼å¯ç”¨

## ğŸ”„ èˆ‡å…¶ä»–æ¨¡å¼æ•´åˆ

| æ•´åˆæ¨¡å¼ | ç”¨é€” | è¼¸å‡º |
|----------|------|------|
| **REPO â†’ VAN** | å°ˆæ¡ˆçµæ§‹åˆ†æã€æŠ€è¡“æ£§è­˜åˆ¥ã€è¤‡é›œåº¦è©•ä¼° | VAN æ¨¡å¼åˆ†æ |
| **REPO â†’ PLAN** | åŸºæ–¼ä»£ç¢¼çµæ§‹åˆ¶å®šè¨ˆåŠƒã€è­˜åˆ¥ä¾è³´é—œä¿‚ | PLAN æ¨¡å¼è¦åŠƒ |
| **REPO â†’ CREATIVE** | åˆ†æç¾æœ‰æ¶æ§‹ã€è­˜åˆ¥æ”¹é€²æ©Ÿæœƒ | CREATIVE æ¨¡å¼è¨­è¨ˆ |
| **REPO â†’ MCP** | MCP å·¥å…·é…ç½®ã€å”è­°å…¼å®¹æ€§æª¢æŸ¥ | MCP æœå‹™å™¨æ•´åˆ |

## ğŸš¨ å¸¸è¦‹å•é¡Œè§£æ±º

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| **Docker æ¬Šé™éŒ¯èª¤** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix` |
| **è¼¸å‡ºæ–‡ä»¶éå¤§** | ä½¿ç”¨å£“ç¸®æ¨¡å¼ï¼š`--compress` |
| **åŒ…å«ä¸éœ€è¦çš„æ–‡ä»¶** | ä½¿ç”¨ `--ignore "*.test.*,*.spec.*"` |
| **MCP æœå‹™å™¨é€£æ¥å¤±æ•—** | æª¢æŸ¥ MCP æœå‹™å™¨é…ç½®å’Œç¶²çµ¡é€£æ¥ |
| **AI åˆ†æçµæœä¸æº–ç¢º** | ä½¿ç”¨æ™ºèƒ½åˆ†ææ¨¡å¼ä¸¦æª¢æŸ¥é…ç½® |

## ğŸ“š ç›¸é—œè³‡æº

- [Repomix å®˜æ–¹æ–‡æª”](https://github.com/yamadashy/repomix)
- [Docker ä½¿ç”¨æŒ‡å—](https://docs.docker.com/)
- [MCP å”è­°æ–‡æª”](https://docs.claude.com/en/docs/agents-and-tools/mcp-connector)
- [Graph Bank æ•´åˆæŒ‡å—](graph-bank-integration.md)

---

é€™å€‹ REPO æ¨¡å¼æä¾›äº†å…¨é¢çš„å€‰åº«åˆ†æèƒ½åŠ›ï¼Œé€šéå…­ç¨®ä¸åŒçš„è¼¸å‡ºæ¨¡å¼æ»¿è¶³å„ç¨®åˆ†æéœ€æ±‚ï¼ŒåŒæ™‚å„ªåŒ–ä»¤ç‰Œä½¿ç”¨å’Œè™•ç†æ•ˆç‡ï¼Œä¸¦æ•´åˆ MCP å”è­°å’Œ AI åˆ†æåŠŸèƒ½ã€‚
`````

## File: angular/src/app/features/user/auth/login.component.ts
`````typescript
import {
  Component,
  inject,
  runInInjectionContext,
  EnvironmentInjector
} from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatButtonModule } from '@angular/material/button';
import { MatCardModule } from '@angular/material/card';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatIconModule } from '@angular/material/icon';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
â‹®----
import { AuthService } from '../../../core/services/auth.service';
import { Router } from '@angular/router';
â‹®----
export class LoginComponent
â‹®----
// ä½¿ç”¨ Signals ç²å–ç‹€æ…‹
â‹®----
async onLogin()
â‹®----
// éŒ¯èª¤è™•ç†å·²ç¶“åœ¨ AuthService ä¸­å®Œæˆ
â‹®----
async onGoogleLogin()
â‹®----
// éŒ¯èª¤è™•ç†å·²ç¶“åœ¨ AuthService ä¸­å®Œæˆ
`````

## File: angular/src/app/features/user/auth/signup.component.ts
`````typescript
import { Component, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatButtonModule } from '@angular/material/button';
import { MatCardModule } from '@angular/material/card';
import { MatToolbarModule } from '@angular/material/toolbar';
import { MatIconModule } from '@angular/material/icon';
import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';
import { MatCheckboxModule } from '@angular/material/checkbox';
import { RouterModule } from '@angular/router';
â‹®----
import { AuthService } from '../../../core/services/auth.service';
import { Router } from '@angular/router';
â‹®----
export class SignupComponent
â‹®----
// ä½¿ç”¨ Signals ç²å–ç‹€æ…‹
â‹®----
// å¯†ç¢¼å¼·åº¦è¦æ±‚
â‹®----
validateEmail(email: string): boolean
â‹®----
validatePassword(password: string): string[]
â‹®----
validateForm(): string[]
â‹®----
async onSignup()
â‹®----
// éŒ¯èª¤è™•ç†å·²ç¶“åœ¨ AuthService ä¸­å®Œæˆ
`````

## File: angular/src/environments/environment.prod.ts
`````typescript
// reCAPTCHA Enterprise site key for production
`````

## File: angular/angular.json
`````json
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "newProjectRoot": "projects",
  "projects": {
    "angular-fire-rolekit": {
      "projectType": "application",
      "schematics": {
        "@schematics/angular:component": {
          "style": "scss"
        }
      },
      "root": "",
      "sourceRoot": "src",
      "prefix": "app",
      "architect": {
        "build": {
          "builder": "@angular/build:application",
          "options": {
            "browser": "src/main.ts",
            "polyfills": [
              "zone.js"
            ],
            "tsConfig": "tsconfig.app.json",
            "inlineStyleLanguage": "scss",
            "assets": [
              {
                "glob": "**/*",
                "input": "public"
              }
            ],
            "styles": [
              "@angular/material/prebuilt-themes/azure-blue.css",
              "src/styles.scss"
            ]
          },
          "configurations": {
            "production": {
              "budgets": [
                {
                  "type": "initial",
                  "maximumWarning": "1MB",
                  "maximumError": "2MB"
                },
                {
                  "type": "anyComponentStyle",
                  "maximumWarning": "4kB",
                  "maximumError": "8kB"
                }
              ],
              "outputHashing": "all",
              "fileReplacements": [
                {
                  "replace": "src/environments/environment.ts",
                  "with": "src/environments/environment.prod.ts"
                }
              ]
            },
            "development": {
              "optimization": true,
              "extractLicenses": false,
              "sourceMap": true
            }
          },
          "defaultConfiguration": "production"
        },
        "serve": {
          "builder": "@angular/build:dev-server",
          "configurations": {
            "production": {
              "buildTarget": "angular-fire-rolekit:build:production"
            },
            "development": {
              "buildTarget": "angular-fire-rolekit:build:development"
            }
          },
          "defaultConfiguration": "development"
        },
        "extract-i18n": {
          "builder": "@angular/build:extract-i18n"
        },
        "test": {
          "builder": "@angular/build:karma",
          "options": {
            "polyfills": [
              "zone.js",
              "zone.js/testing"
            ],
            "tsConfig": "tsconfig.spec.json",
            "inlineStyleLanguage": "scss",
            "assets": [
              {
                "glob": "**/*",
                "input": "public"
              }
            ],
            "styles": [
              "@angular/material/prebuilt-themes/azure-blue.css",
              "src/styles.scss"
            ]
          }
        }
      }
    }
  },
  "cli": {
    "analytics": false
  }
}
`````

## File: memory.json
`````json
{
  "entities": [
    {
      "name": "Memory_Bank_System",
      "entityType": "project",
      "observations": [
        "AI Agent Collaboration Framework",
        "ä½¿ç”¨ç¹é«”ä¸­æ–‡é€²è¡Œäº¤æµ",
        "åŸºæ–¼ Cursor çš„è¨˜æ†¶éŠ€è¡Œç³»çµ±",
        "æä¾›åˆ†å±¤ä»»å‹™ç®¡ç†å’Œè‡ªå®šç¾©æ¨¡å¼æ•´åˆ",
        "é–‹ç™¼ç’°å¢ƒï¼šWindows 11ï¼ŒåŒ…ç®¡ç†å™¨ï¼šyarn",
        "ç·¨è¼¯å™¨ï¼šCursor (ç‰ˆæœ¬ 0.48 æˆ–æ›´é«˜)",
        "AI æ¨¡å‹ï¼šClaude 4 Sonnet æˆ– Claude 4 Opus"
      ]
    },
    {
      "name": "AI_Agents",
      "entityType": "agent_collection",
      "observations": [
        "VAN_Agentï¼šå°ˆæ¡ˆåˆ†æå¸«ï¼Œåˆ†æå°ˆæ¡ˆçµæ§‹å’Œè¤‡é›œåº¦ï¼Œç¢ºå®šä»»å‹™ç´šåˆ¥ (Level 1-4)",
        "PLAN_Agentï¼šå°ˆæ¡ˆè¦åŠƒå¸«ï¼Œå°‡è¤‡é›œä»»å‹™åˆ†è§£ç‚ºå¯ç®¡ç†çš„å­ä»»å‹™ï¼Œå»ºç«‹è©³ç´°çš„å¯¦æ–½è¨ˆåŠƒ",
        "CREATIVE_Agentï¼šè¨­è¨ˆæ±ºç­–å°ˆå®¶ï¼Œæ¢ç´¢è¨­è¨ˆé¸é …å’Œæ›¿ä»£æ–¹æ¡ˆï¼Œé€²è¡ŒæŠ€è¡“é¸å‹åˆ†æ",
        "IMPLEMENT_Agentï¼šä»£ç¢¼å¯¦æ–½å°ˆå®¶ï¼Œç³»çµ±æ€§åœ°å¯¦æ–½è¨ˆåŠƒçš„çµ„ä»¶ï¼Œç·¨å¯«é«˜å“è³ªçš„ä»£ç¢¼",
        "REFLECT_Agentï¼šä»£ç¢¼å¯©æŸ¥å’Œå­¸ç¿’å°ˆå®¶ï¼Œå¯©æŸ¥å¯¦æ–½çš„ä»£ç¢¼å“è³ªï¼Œè­˜åˆ¥æ”¹é€²æ©Ÿæœƒ",
        "ARCHIVE_Agentï¼šæ–‡ä»¶ç®¡ç†å°ˆå®¶ï¼Œå»ºç«‹å…¨é¢çš„å°ˆæ¡ˆæ–‡ä»¶ï¼Œæ•´ç†å’Œæ­¸æª”å°ˆæ¡ˆè³‡ç”¢"
      ]
    },
    {
      "name": "Workflow_Levels",
      "entityType": "workflow_collection",
      "observations": [
        "Level 1ï¼šå¿«é€ŸéŒ¯èª¤ä¿®å¾©ï¼Œå·¥ä½œæµç¨‹ VAN â†’ IMPLEMENTï¼Œé©ç”¨æ–¼å–®ä¸€çµ„ä»¶ï¼Œå®Œæˆæ™‚é–“ï¼šåˆ†é˜åˆ°å°æ™‚",
        "Level 2ï¼šç°¡å–®å¢å¼·ï¼Œå·¥ä½œæµç¨‹ VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECTï¼Œé©ç”¨æ–¼å–®ä¸€çµ„ä»¶æˆ–å­ç³»çµ±ï¼Œå®Œæˆæ™‚é–“ï¼šå°æ™‚åˆ° 1-2 å¤©",
        "Level 3-4ï¼šä¸­ç´šåŠŸèƒ½/è¤‡é›œç³»çµ±ï¼Œå·¥ä½œæµç¨‹ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVEï¼Œé©ç”¨æ–¼å¤šå€‹çµ„ä»¶æˆ–å®Œæ•´åŠŸèƒ½ï¼Œå®Œæˆæ™‚é–“ï¼šå¤©åˆ°é€±"
      ]
    },
    {
      "name": "Angular_v20_Technology_Stack",
      "entityType": "technology",
      "observations": [
        "Signalsï¼šéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†ï¼ŒComputed Signals è‡ªå‹•è¨ˆç®—è¡ç”Ÿç‹€æ…‹",
        "Control Flowï¼š@if, @for, @switch æ›¿ä»£å‚³çµ±çµæ§‹æŒ‡ä»¤ï¼Œå…§å»ºæ§åˆ¶æµç„¡éœ€å°å…¥ CommonModule",
        "Signal Inputsï¼šinput() å‡½æ•¸æ›¿ä»£ @Input() è£é£¾å™¨ï¼Œé¡å‹å®‰å…¨ä¸”ä¸å¯è®Š",
        "Standalone Componentsï¼šç„¡éœ€ NgModuleï¼Œinject() å‡½æ•¸ç¾ä»£åŒ–ä¾è³´æ³¨å…¥",
        "Type Narrowingï¼šæ›´å¥½çš„é¡å‹å®‰å…¨å’Œæ§åˆ¶æµåˆ†æ",
        "Performance Optimizationï¼šæ›´é«˜æ•ˆçš„è®Šæ›´æª¢æ¸¬å’Œæ¸²æŸ“ï¼Œä½¿ç”¨ track è¡¨é”å¼å„ªåŒ–åˆ—è¡¨æ¸²æŸ“"
      ]
    },
    {
      "name": "GitHub_Style_Permission_System",
      "entityType": "architecture",
      "observations": [
        "Angular v20 + Signals + Firebase å¯¦ç¾çš„ GitHub å¼æ¬Šé™ç³»çµ±",
        "ä½¿ç”¨çµ±ä¸€çš„ Account æ¨¡å‹ï¼Œé€šé type å€åˆ†ç”¨æˆ¶å’Œçµ„ç¹”ï¼Œä½¿ç”¨ login ä½œç‚ºå”¯ä¸€è­˜åˆ¥ç¢¼",
        "çµ±ä¸€çš„ /accounts é›†åˆè·¯å¾‘ï¼ŒRepository æ“æœ‰è€…æ”¯æ´ï¼ˆå€‹äºº/çµ„ç¹”ï¼‰ï¼Œå®Œæ•´çš„å”ä½œè€…ç³»çµ±",
        "å¤šå±¤ç´šæ¬Šé™ï¼šå€‹äºº â†’ çµ„ç¹” â†’ åœ˜éšŠ â†’ è³‡æºçš„å±¤ç´šçµæ§‹",
        "5 ç¨®çµ„ç¹”è§’è‰²ï¼šOwner, Admin, Member, Billing, Outside Collaborator",
        "2 ç¨®åœ˜éšŠè§’è‰²ï¼šMaintainer, Memberï¼ŒRepository æ¬Šé™ï¼šread, triage, write, maintain, admin"
      ]
    },
    {
      "name": "System_Architecture",
      "entityType": "architecture",
      "observations": [
        "Value Objects Patternï¼šProfileVO, PermissionVO, SettingsVO ç­‰ï¼Œæé«˜ç¨‹å¼ç¢¼å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ï¼Œç¬¦åˆé ˜åŸŸé©…å‹•è¨­è¨ˆï¼ˆDDDï¼‰åŸå‰‡",
        "Firestore Database Designï¼šçµ±ä¸€é›†åˆçµæ§‹ï¼Œæ‰€æœ‰ Account å­˜å„²åœ¨ accounts é›†åˆä¸­ï¼Œå­é›†åˆæ¨¡å¼å­˜å„²çµ„ç¹”æˆå“¡å’Œåœ˜éšŠï¼Œæ¬Šé™ç¹¼æ‰¿é€šéè³‡æ–™åº«çµæ§‹è¨­è¨ˆå¯¦ç¾",
        "Service Layer Architectureï¼šAuthService æ•´åˆ Firebase Auth å’Œ Firestoreï¼ŒOrganizationService è™•ç†çµ„ç¹”ç›¸é—œæ¥­å‹™é‚è¼¯ï¼ŒPermissionService ä½¿ç”¨ Signals ç®¡ç†æ¬Šé™ç‹€æ…‹",
        "Security Design Patternsï¼šå¤šå±¤å®‰å…¨é˜²è­·ï¼ˆå‰ç«¯è·¯ç”±å®ˆè¡› + Firestore å®‰å…¨è¦å‰‡ + å¾Œç«¯æ¬Šé™é©—è­‰ï¼‰ï¼ŒåŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œçµ±ä¸€çš„éŒ¯èª¤è™•ç†å’Œé‡å®šå‘"
      ]
    },
    {
      "name": "Modern_UI_Design",
      "entityType": "ui_design",
      "observations": [
        "ä½¿ç”¨ Control Flowï¼ˆ@if, @for, @switchï¼‰æ›¿ä»£å‚³çµ±çµæ§‹æŒ‡ä»¤",
        "Standalone Components ç„¡éœ€ NgModuleï¼ŒSignals åŸºç¤çš„éŸ¿æ‡‰å¼ UI",
        "æ¬Šé™é©…å‹•çš„ UIï¼šæ ¹æ“šæ¬Šé™å‹•æ…‹é¡¯ç¤º/éš±è—",
        "ä½¿ç”¨ Computed Signals è‡ªå‹•æ›´æ–° UI ç‹€æ…‹ï¼Œæ¬Šé™æª¢æŸ¥èˆ‡ UI é‚è¼¯åˆ†é›¢"
      ]
    },
    {
      "name": "User_Preferences",
      "entityType": "preferences",
      "observations": [
        "èªè¨€ï¼šç¹é«”ä¸­æ–‡",
        "æºé€šé¢¨æ ¼ï¼šå°ˆæ¥­ä¸”å‹å–„",
        "é–‹ç™¼ç’°å¢ƒï¼šWindows 11",
        "åŒ…ç®¡ç†å™¨ï¼šyarn",
        "åå¥½ AIï¼šClaude 4 Sonnet"
      ]
    }
  ],
  "relations": [
    {
      "from": "AI_Agents",
      "to": "Memory_Bank_System",
      "relationType": "collaborates_with"
    },
    {
      "from": "Workflow_Levels",
      "to": "AI_Agents",
      "relationType": "uses"
    },
    {
      "from": "GitHub_Style_Permission_System",
      "to": "Angular_v20_Technology_Stack",
      "relationType": "built_with"
    },
    {
      "from": "GitHub_Style_Permission_System",
      "to": "System_Architecture",
      "relationType": "implements"
    },
    {
      "from": "System_Architecture",
      "to": "Angular_v20_Technology_Stack",
      "relationType": "uses"
    },
    {
      "from": "Modern_UI_Design",
      "to": "Angular_v20_Technology_Stack",
      "relationType": "uses"
    },
    {
      "from": "Modern_UI_Design",
      "to": "GitHub_Style_Permission_System",
      "relationType": "displays"
    },
    {
      "from": "User_Preferences",
      "to": "Memory_Bank_System",
      "relationType": "configures"
    },
    {
      "from": "VAN_Agent",
      "to": "Memory_Bank_System",
      "relationType": "analyzes"
    },
    {
      "from": "PLAN_Agent",
      "to": "Memory_Bank_System",
      "relationType": "plans"
    },
    {
      "from": "CREATIVE_Agent",
      "to": "Memory_Bank_System",
      "relationType": "designs"
    },
    {
      "from": "IMPLEMENT_Agent",
      "to": "Memory_Bank_System",
      "relationType": "implements"
    },
    {
      "from": "REFLECT_Agent",
      "to": "Memory_Bank_System",
      "relationType": "reviews"
    },
    {
      "from": "ARCHIVE_Agent",
      "to": "Memory_Bank_System",
      "relationType": "archives"
    },
    {
      "from": "Workflow_Level_1",
      "to": "VAN_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_1",
      "to": "IMPLEMENT_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_2",
      "to": "VAN_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_2",
      "to": "PLAN_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_2",
      "to": "IMPLEMENT_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_2",
      "to": "REFLECT_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "VAN_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "PLAN_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "CREATIVE_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "IMPLEMENT_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "REFLECT_Agent",
      "relationType": "uses"
    },
    {
      "from": "Workflow_Level_3_4",
      "to": "ARCHIVE_Agent",
      "relationType": "uses"
    }
  ]
}
`````

## File: .cursor/mcp.json
`````json
{
  "retry": {
    "globalEnabled": true,
    "defaultMaxAttempts": 3,
    "defaultDelay": 2000,
    "defaultBackoffMultiplier": 1.5,
    "defaultMaxDelay": 10000
  },
  "errorHandling": {
    "logRetries": true,
    "logErrors": true,
    "fallbackEnabled": true
  },
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "./"
      ],
      "disabled": false,
      "autoApprove": [
        "read_text_file",
        "read_media_file",
        "list_directory",
        "list_directory_with_sizes",
        "directory_tree",
        "list_allowed_directories",
        "get_file_info",
        "search_files"
      ]
    },
    "sequential-thinking": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-sequential-thinking"
      ],
      "env": {
        "NODE_OPTIONS": "--max-old-space-size=1024"
      },
      "disabled": false,
      "autoApprove": [
        "sequentialthinking"
      ]
    },
    "memory": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-memory"
      ],
      "env": {
        "MEMORY_FILE_PATH": "./memory.json",
        "NODE_OPTIONS": "--max-old-space-size=2048"
      },
      "disabled": false,
      "autoApprove": [
        "create_entities",
        "create_relations",
        "read_graph",
        "search_nodes",
        "open_nodes",
        "add_observations"
      ],
      "retry": {
        "enabled": true,
        "maxAttempts": 5,
        "delay": 1000,
        "backoffMultiplier": 2.0,
        "maxDelay": 15000
      }
    },
    "fetch": {
      "command": "npx",
      "args": [
        "-y",
        "@kazuph/mcp-fetch"
      ],
      "disabled": false,
      "autoApprove": [
        "fetch_url",
        "fetch_content"
      ]
    },
    "playwright": {
      "command": "npx",
      "args": [
        "-y",
        "@playwright/mcp"
      ],
      "disabled": false,
      "autoApprove": [
        "navigate_to_url",
        "take_screenshot",
        "snapshot",
        "wait_for"
      ]
    },
    "Context7": {
      "url": "https://mcp.context7.com/mcp",
      "headers": {},
      "autoApprove": [
        "resolve-library-id",
        "get-library-docs"
      ],
      "retry": {
        "enabled": true,
        "maxAttempts": 3,
        "delay": 3000,
        "backoffMultiplier": 1.5,
        "maxDelay": 12000
      }
    },
    "repomix-docker": {
      "command": "docker",
      "args": [
        "run",
        "-i",
        "--rm",
        "ghcr.io/yamadashy/repomix",
        "--mcp"
      ],
      "disabled": false,
      "autoApprove": [],
      "retry": {
        "enabled": true,
        "maxAttempts": 3,
        "delay": 2000,
        "backoffMultiplier": 1.5,
        "maxDelay": 10000
      }
    }
  }
}
`````

## File: angular/src/app/app.config.ts
`````typescript
import { ApplicationConfig, provideBrowserGlobalErrorListeners, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';
import { routes } from './app.routes';
â‹®----
// Firebase
import { provideFirebaseApp, initializeApp } from '@angular/fire/app';
import { provideAuth, getAuth } from '@angular/fire/auth';
import { provideFirestore, getFirestore } from '@angular/fire/firestore';
import { environment } from '../environments/environment';
import { getAnalytics, provideAnalytics, ScreenTrackingService, UserTrackingService } from '@angular/fire/analytics';
import { initializeAppCheck, ReCaptchaEnterpriseProvider, provideAppCheck, CustomProvider } from '@angular/fire/app-check';
import { getMessaging, provideMessaging } from '@angular/fire/messaging';
import { getPerformance, providePerformance } from '@angular/fire/performance';
import { getStorage, provideStorage } from '@angular/fire/storage';
import { getRemoteConfig, provideRemoteConfig } from '@angular/fire/remote-config';
import { getVertexAI, provideVertexAI } from '@angular/fire/vertexai';
â‹®----
// æ ¹æ“šç’°å¢ƒé¸æ“‡ App Check provider
â‹®----
// ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ reCAPTCHA Enterprise
â‹®----
// é–‹ç™¼ç’°å¢ƒä½¿ç”¨ debug token
â‹®----
// è¿”å› debug token
â‹®----
expireTimeMillis: Date.now() + 3600000 // 1å°æ™‚å¾ŒéæœŸ
`````

## File: angular/src/app/app.routes.ts
`````typescript
import { Routes } from '@angular/router';
import { LoginComponent } from './features/user/auth/login.component';
import { SignupComponent } from './features/user/auth/signup.component';
import { LandingComponent } from './landing/landing.component';
â‹®----
import { authGuard } from './features/user/auth/auth.guard';
import { roleGuard, orgRoleGuard, permissionGuard } from './features/user/auth/role.guard';
import { orgAdminGuard, orgOwnerGuard } from './core/guards/permission.guard';
â‹®----
// é¦–é è·¯ç”± - Landing Page
â‹®----
// èªè­‰è·¯ç”±
â‹®----
// ç”¨æˆ¶å¸³æˆ¶ç®¡ç†è·¯ç”±
â‹®----
// çµ„ç¹”ç®¡ç†è·¯ç”±
â‹®----
// Repository ç®¡ç†è·¯ç”±
â‹®----
// è§’è‰²ç®¡ç†è·¯ç”±
â‹®----
// å„€è¡¨æ¿è·¯ç”±
â‹®----
// é è¨­é‡å®šå‘
`````

## File: graph-bank/tasks.md
`````markdown
# Memory Bank: Tasks

## Current Task
PLAN æ¨¡å¼ - è©³ç´°å¯¦æ–½è¨ˆåŠƒåˆ¶å®šå®Œæˆ

### ğŸ“‹ å¯¦æ–½è¨ˆåŠƒæ‘˜è¦
- **ç¸½ Phase æ•¸**ï¼š4å€‹ Phase
- **ç¸½ä»»å‹™æ•¸**ï¼š19å€‹ä»»å‹™
- **è¤‡é›œåº¦ç­‰ç´š**ï¼šLevel 4 - Complex System
- **é ä¼°æ™‚é–“**ï¼š9-14 å¤©
- **ç•¶å‰ç‹€æ…‹**ï¼šæº–å‚™é–‹å§‹ Phase 1 æ§‹å»ºéŒ¯èª¤ä¿®å¾©

### ğŸš¨ Phase 1: ä¿®å¾©æ§‹å»ºéŒ¯èª¤ï¼ˆç·Šæ€¥ï¼‰
**ç›®æ¨™**ï¼šä¿®å¾©æ§‹å»ºéŒ¯èª¤ï¼Œç¢ºä¿å°ˆæ¡ˆèƒ½å¤ æ­£å¸¸æ§‹å»º
**ä»»å‹™**ï¼š
- [ ] **task-1-1**: ä¿®å¾© Nl2brPipe ç¼ºå¤±å•é¡Œ
- [ ] **task-1-2**: ä¿®å¾© AuthService é¡å‹éŒ¯èª¤
- [ ] **task-1-3**: é©—è­‰æ§‹å»ºæˆåŠŸ

**é©—æ”¶æ¨™æº–**ï¼š
- âœ… å°ˆæ¡ˆèƒ½å¤ æˆåŠŸæ§‹å»ºï¼ˆyarn build æˆåŠŸï¼‰
- âœ… æ²’æœ‰ TypeScript ç·¨è­¯éŒ¯èª¤
- âœ… ç™»å…¥å’Œè¨»å†ŠåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰ç¾æœ‰åŠŸèƒ½ä¸å—å½±éŸ¿

### ğŸ¨ Phase 2: Phase 4 çµ„ç¹”/åœ˜éšŠç®¡ç† UIï¼ˆ6å€‹ä»»å‹™ï¼‰
**ç›®æ¨™**ï¼šå»ºç«‹ç¾ä»£åŒ– UI å…ƒä»¶
**ä»»å‹™**ï¼š
- [ ] **task-4-1**: å»ºç«‹ organization-detail.component.ts
- [ ] **task-4-2**: å»ºç«‹ members-list.component.ts
- [ ] **task-4-3**: å»ºç«‹ teams-list.component.ts
- [ ] **task-4-4**: å»ºç«‹ team-create.component.ts
- [ ] **task-4-5**: å»ºç«‹ organization-settings.component.ts
- [ ] **task-4-6**: å»ºç«‹ organization-dashboard.component.ts

**é©—æ”¶æ¨™æº–**ï¼š
- âœ… æ‰€æœ‰ UI å…ƒä»¶ä½¿ç”¨ Control Flow (@if, @for)
- âœ… æ¬Šé™æª¢æŸ¥èˆ‡ Signals æ•´åˆ
- âœ… çµ„ç¹”/åœ˜éšŠç®¡ç†åŠŸèƒ½å®Œæ•´
- âœ… UI éŸ¿æ‡‰å¼ä¸”ç”¨æˆ¶å‹å¥½

### ğŸ”— Phase 3: Phase 5 è·¯ç”±èˆ‡æ¬Šé™æ•´åˆï¼ˆ5å€‹ä»»å‹™ï¼‰
**ç›®æ¨™**ï¼šå»ºç«‹å®Œæ•´çš„è·¯ç”±ç³»çµ±
**ä»»å‹™**ï¼š
- [ ] **task-5-1**: æ›´æ–° app.routes.ts æ”¯æ´å®Œæ•´çµæ§‹
- [ ] **task-5-2**: æ›´æ–° organization.routes.ts æ•´åˆ Permission å®ˆè¡›
- [ ] **task-5-3**: å»ºç«‹å®Œæ•´çš„è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯
- [ ] **task-5-4**: æ•´åˆæ¬Šé™æ§åˆ¶åˆ°æ‰€æœ‰è·¯ç”±
- [ ] **task-5-5**: æ›´æ–°è·¯ç”±å®ˆè¡›ä½¿ç”¨ PermissionService

**é©—æ”¶æ¨™æº–**ï¼š
- âœ… è·¯ç”±çµæ§‹ç¬¦åˆ GitHub å¼è¨­è¨ˆ
- âœ… æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ¬Šé™ä¿è­·
- âœ… å°èˆªé‚è¼¯æ­£ç¢º
- âœ… æ¬Šé™æ§åˆ¶æ•´åˆåˆ°æ‰€æœ‰è·¯ç”±

### ğŸ”’ Phase 4: Phase 6 å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ï¼ˆ7å€‹ä»»å‹™ï¼‰
**ç›®æ¨™**ï¼šå»ºç«‹å®‰å…¨çš„å¾Œç«¯è¦å‰‡å’Œå®Œæ•´æ¸¬è©¦
**ä»»å‹™**ï¼š
- [ ] **task-6-1**: å¯¦ä½œ firebase.rules (accounts é›†åˆè¦å‰‡)
- [ ] **task-6-2**: å¯¦ä½œ Repository å®‰å…¨è¦å‰‡
- [ ] **task-6-3**: å¯¦ä½œçµ„ç¹”/åœ˜éšŠ/æˆå“¡æ¬Šé™è¦å‰‡
- [ ] **task-6-4**: å¯¦ä½œå–®å…ƒæ¸¬è©¦
- [ ] **task-6-5**: å¯¦ä½œæ•´åˆæ¸¬è©¦
- [ ] **task-6-6**: å¯¦ä½œ E2E æ¸¬è©¦
- [ ] **task-6-7**: é€²è¡Œå®Œæ•´åŠŸèƒ½æ¸¬è©¦å’Œé©—è­‰

**é©—æ”¶æ¨™æº–**ï¼š
- âœ… Firestore å®‰å…¨è¦å‰‡æ­£ç¢ºä¿è­·è³‡æ–™
- âœ… æ¸¬è©¦è¦†è“‹ç‡é”æ¨™
- âœ… å®Œæ•´åŠŸèƒ½æ¸¬è©¦é€šé
- âœ… å®‰å…¨è¦å‰‡å’Œæ¬Šé™ç³»çµ±é©—è­‰é€šé

### âš ï¸ é¢¨éšªè©•ä¼°èˆ‡ä¾è³´é—œä¿‚
**é«˜é¢¨éšªé …ç›®**ï¼š
1. **é¡å‹ä¿®å¾©**ï¼šAuthService é¡å‹éŒ¯èª¤ä¿®å¾©å¯èƒ½å½±éŸ¿ç¾æœ‰åŠŸèƒ½
2. **è·¯ç”±é‡æ§‹**ï¼šå¤§é‡è·¯ç”±è®Šæ›´å¯èƒ½ç ´å£ç¾æœ‰å°èˆª
3. **æ¬Šé™ç³»çµ±æ•´åˆ**ï¼šæ¬Šé™é‚è¼¯è®Šæ›´å¯èƒ½å°è‡´å®‰å…¨å•é¡Œ

**ä¾è³´é—œä¿‚**ï¼š
- Phase 1 â†’ Phase 2ï¼šä¿®å¾©æ§‹å»ºéŒ¯èª¤æ˜¯å¾ŒçºŒé–‹ç™¼çš„å‰æ
- Phase 2 â†’ Phase 3ï¼šUI å…ƒä»¶å®Œæˆå¾Œæ‰èƒ½æ•´åˆè·¯ç”±
- Phase 3 â†’ Phase 4ï¼šè·¯ç”±æ•´åˆå®Œæˆå¾Œæ‰èƒ½é€²è¡Œæ¸¬è©¦

**å»ºè­°å¯¦æ–½é †åº**ï¼š
1. Phase 1ï¼ˆä¿®å¾©æ§‹å»ºéŒ¯èª¤ï¼‰- é¢¨éšªä½ï¼Œå½±éŸ¿å°ï¼Œå¿…é ˆå…ˆå®Œæˆ
2. Phase 2ï¼ˆUI å…ƒä»¶ï¼‰- é¢¨éšªä¸­ï¼Œå½±éŸ¿ä¸­
3. Phase 3ï¼ˆè·¯ç”±æ•´åˆï¼‰- é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§
4. Phase 4ï¼ˆå®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ï¼‰- é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§

### ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•
- ç«‹å³é–‹å§‹ Phase 1 çš„æ§‹å»ºéŒ¯èª¤ä¿®å¾©
- å„ªå…ˆä¿®å¾© Nl2brPipe ç¼ºå¤±å•é¡Œ
- ä¿®å¾© AuthService é¡å‹éŒ¯èª¤
- é©—è­‰æ§‹å»ºæˆåŠŸå¾Œç¹¼çºŒ Phase 2

### å•é¡Œæè¿°
ç›®å‰çš„è©•åˆ†ç³»çµ±éæ–¼å›ºå®šï¼Œç¼ºä¹éˆæ´»æ€§ï¼Œé€™å¯èƒ½å°è‡´ï¼š
1. ç„¡æ³•æ ¹æ“šä»»å‹™è¤‡é›œåº¦èª¿æ•´è©•åˆ†æ¨™æº–
2. è©•åˆ†é …ç›®æ¬Šé‡ä¸åˆç†
3. ç„¡æ³•åæ˜ ä¸åŒé¡å‹ä»»å‹™çš„ç‰¹é»

### æ”¹é€²æ–¹æ¡ˆ
1. å¯¦ç¾å‹•æ…‹è©•åˆ†æ¨™æº–
   - [ ] è¨­è¨ˆè¤‡é›œåº¦åŸºç¤è©•åˆ†æ¨™æº–
   - [ ] å»ºç«‹è©•åˆ†èª¿æ•´æ©Ÿåˆ¶
   - [ ] å¯¦ç¾è‡ªå‹•è©•åˆ†å»ºè­°
   - [ ] åŠ å…¥è©•åˆ†æ­·å²è¨˜éŒ„

2. å»ºç«‹æ¬Šé‡é…ç½®ç³»çµ±
   - [ ] è¨­è¨ˆæ¬Šé‡é…ç½®ä»‹é¢
   - [ ] å¯¦ç¾æ¬Šé‡å‹•æ…‹èª¿æ•´
   - [ ] å»ºç«‹æ¬Šé‡æ¨¡æ¿ç³»çµ±
   - [ ] åŠ å…¥æ¬Šé‡é©—è­‰æ©Ÿåˆ¶

3. å„ªåŒ–è©•åˆ†å ±å‘Š
   - [ ] è¨­è¨ˆè©³ç´°è©•åˆ†å ±å‘Š
   - [ ] å¯¦ç¾è©•åˆ†è¶¨å‹¢åˆ†æ
   - [ ] åŠ å…¥æ”¹é€²å»ºè­°åŠŸèƒ½
   - [ ] å»ºç«‹è©•åˆ†å°æ¯”è¦–åœ–

### é æœŸæˆæœ
- æ›´éˆæ´»çš„è©•åˆ†æ¨™æº–
- åˆç†çš„æ¬Šé‡é…ç½®
- æ›´å¥½çš„è©•åˆ†å ±å‘Š
- æ›´æœ‰åƒ¹å€¼çš„æ”¹é€²å»ºè­°

### å•é¡Œæè¿°
ç›®å‰çš„ä»»å‹™è¿½è¹¤ç³»çµ±ç¼ºä¹ä¸¦è¡Œä»»å‹™å’Œå›æ»¾æ©Ÿåˆ¶ï¼Œé€™å¯èƒ½å°è‡´ï¼š
1. ç„¡æ³•æœ‰æ•ˆç®¡ç†ä¸¦è¡Œé–‹ç™¼ä»»å‹™
2. ä»»å‹™ä¾è³´é—œä¿‚ä¸æ˜ç¢º
3. ç¼ºä¹ä»»å‹™å›æ»¾å’Œæ¢å¾©æ©Ÿåˆ¶

### æ”¹é€²æ–¹æ¡ˆ
1. å¯¦ç¾ä¸¦è¡Œä»»å‹™ç®¡ç†
   - [ ] è¨­è¨ˆä¸¦è¡Œä»»å‹™ç‹€æ…‹æ¨¡å‹
   - [ ] å»ºç«‹ä»»å‹™ä¾è³´é—œä¿‚è¿½è¹¤
   - [ ] å¯¦ç¾ä¸¦è¡Œä»»å‹™é€²åº¦ç›£æ§
   - [ ] åŠ å…¥è¡çªæª¢æ¸¬æ©Ÿåˆ¶

2. å»ºç«‹ä»»å‹™å›æ»¾æ©Ÿåˆ¶
   - [ ] è¨­è¨ˆä»»å‹™ç‹€æ…‹æ­·å²è¨˜éŒ„
   - [ ] å¯¦ç¾ä»»å‹™å›æ»¾åŠŸèƒ½
   - [ ] å»ºç«‹å›æ»¾é»ç®¡ç†
   - [ ] åŠ å…¥ç›¸ä¾ä»»å‹™é€£å‹•å›æ»¾

3. å„ªåŒ–ä»»å‹™ç®¡ç†ä»‹é¢
   - [ ] è¨­è¨ˆä¸¦è¡Œä»»å‹™è¦–åœ–
   - [ ] å¯¦ç¾ä»»å‹™æ™‚é–“ç·šé¡¯ç¤º
   - [ ] åŠ å…¥ä»»å‹™ä¾è³´é—œä¿‚åœ–
   - [ ] å»ºç«‹å›æ»¾æ“ä½œä»‹é¢

### é æœŸæˆæœ
- æ›´æœ‰æ•ˆçš„ä¸¦è¡Œä»»å‹™ç®¡ç†
- æ¸…æ™°çš„ä»»å‹™ä¾è³´é—œä¿‚
- å¯é çš„ä»»å‹™å›æ»¾æ©Ÿåˆ¶
- æ›´å¥½çš„ä»»å‹™å¯è¦–åŒ–

### å•é¡Œæè¿°
ç›®å‰çš„å‰µæ„éšæ®µåŸ·è¡Œæµç¨‹éæ–¼ç·šæ€§ï¼Œç¼ºä¹è¿­ä»£å’Œä¸¦è¡Œæ©Ÿåˆ¶ï¼Œé€™å¯èƒ½å°è‡´ï¼š
1. ç„¡æ³•å¿«é€Ÿé©—è­‰å’Œèª¿æ•´è¨­è¨ˆæ±ºç­–
2. åœ˜éšŠå”ä½œæ•ˆç‡ä½ä¸‹
3. ç„¡æ³•éˆæ´»æ‡‰å°éœ€æ±‚è®Šæ›´

### æ”¹é€²æ–¹æ¡ˆ
1. å¼•å…¥è¿­ä»£å¾ªç’°æ©Ÿåˆ¶
   - [ ] å®šç¾©è¿­ä»£é€±æœŸï¼ˆå»ºè­° 1-2 é€±ï¼‰
   - [ ] å»ºç«‹è¿­ä»£è©•å¯©å’Œèª¿æ•´æ©Ÿåˆ¶
   - [ ] åŠ å…¥å¿«é€ŸåŸå‹é©—è­‰æµç¨‹

2. å¯¦ç¾ä¸¦è¡Œè¨­è¨ˆæµç¨‹
   - [ ] è­˜åˆ¥å¯ä¸¦è¡ŒåŸ·è¡Œçš„è¨­è¨ˆä»»å‹™
   - [ ] å»ºç«‹åœ˜éšŠå”ä½œæ©Ÿåˆ¶
   - [ ] è¨­è¨ˆè¡çªè§£æ±ºæµç¨‹

3. åŠ å¼·åé¥‹æ©Ÿåˆ¶
   - [ ] å»ºç«‹å®šæœŸè¨­è¨ˆè©•å¯©æ©Ÿåˆ¶
   - [ ] å¯¦ç¾å³æ™‚åé¥‹æ¸ é“
   - [ ] åŠ å…¥åˆ©å®³é—œä¿‚äººåƒèˆ‡æ©Ÿåˆ¶

### é æœŸæˆæœ
- æ›´éˆæ´»çš„è¨­è¨ˆæµç¨‹
- æé«˜åœ˜éšŠå”ä½œæ•ˆç‡
- æ›´å¿«çš„è¨­è¨ˆè¿­ä»£é€±æœŸ
- æ›´å¥½çš„è¨­è¨ˆå“è³ª

## Current Task
PLAN æ¨¡å¼ - å°ˆæ¡ˆç•¶å‰æƒ…æ³åˆ†æå®Œæˆï¼Œåˆ¶å®šè©³ç´°å¯¦æ–½ä»»å‹™

## Status
- [x] ä½¿ç”¨ sequential-thinking åˆ†æå°ˆæ¡ˆç•¶å‰æƒ…æ³
- [x] è­˜åˆ¥é‡è¤‡çš„èªè­‰çµ„ä»¶å’Œæœå‹™å•é¡Œ
- [x] è©•ä¼°æ¨¡å‹ä¸ä¸€è‡´å’Œæœå‹™å±¤æ··äº‚å•é¡Œ
- [x] åˆ¶å®š Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ–ä»»å‹™
- [ ] åˆ¶å®š Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ–ä»»å‹™
- [ ] åˆ¶å®š Phase 3: UI å…ƒä»¶ç¾ä»£åŒ–ä»»å‹™
- [ ] åˆ¶å®š Phase 4: å®‰å…¨è¦å‰‡å’Œæ¸¬è©¦ä»»å‹™

## PLAN æ¨¡å¼åˆ†æçµæœ

### ğŸ” å°ˆæ¡ˆç•¶å‰æƒ…æ³åˆ†æ
- âœ… **å°ˆæ¡ˆçµæ§‹ç¢ºèª**ï¼šAngular å°ˆæ¡ˆåœ¨ `angular/` å­ç›®éŒ„ä¸­
- âœ… **æ§‹å»ºç‹€æ…‹**ï¼šæ§‹å»ºæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š (1.11 MB > 1.00 MB)
- âœ… **ä¾è³´ç‹€æ…‹**ï¼šAngular 20.1.0 + Firebase 11.10.0 é…ç½®æ­£ç¢º
- âœ… **å•é¡Œè­˜åˆ¥**ï¼šç™¼ç¾å¤šå€‹é‡è¤‡å’Œæ¶æ§‹å•é¡Œ

### âš ï¸ ç™¼ç¾çš„é—œéµå•é¡Œ

#### 1. é‡è¤‡çš„èªè­‰çµ„ä»¶å’Œæœå‹™
- **å•é¡Œ**ï¼šå­˜åœ¨ä¸‰å€‹ä¸åŒçš„ AuthService å¯¦ç¾
  - `app/auth/auth.service.ts` - åŸºç¤ç‰ˆæœ¬
  - `features/user/auth/auth.service.ts` - æ“´å±•ç‰ˆæœ¬
  - `core/services/auth.service.ts` - ç¾ä»£åŒ–ç‰ˆæœ¬
- **å½±éŸ¿**ï¼šä¾è³´æ³¨å…¥è¡çªã€ç¶­è­·å›°é›£
- **è§£æ±ºæ–¹æ¡ˆ**ï¼šçµ±ä¸€ä½¿ç”¨ `core/services/auth.service.ts`

#### 2. é‡è¤‡çš„èªè­‰çµ„ä»¶
- **å•é¡Œ**ï¼š`app/auth/` èˆ‡ `features/user/auth/` é‡è¤‡
- **å½±éŸ¿**ï¼šä»£ç¢¼é‡è¤‡ã€è·¯ç”±æ··äº‚
- **è§£æ±ºæ–¹æ¡ˆ**ï¼šåˆªé™¤ `app/auth/` ç›®éŒ„ï¼Œçµ±ä¸€ä½¿ç”¨ `features/user/auth/`

#### 3. æ¨¡å‹ä¸ä¸€è‡´
- **å•é¡Œ**ï¼šå¤šå€‹ä¸åŒçš„æ¨¡å‹å®šç¾©
  - `core/models/auth.model.ts` - åŸºç¤æ¨¡å‹
  - `features/organization/models/github-aligned-organization.model.ts` - ä¸åŒçµ„ç¹”æ¨¡å‹
- **å½±éŸ¿**ï¼šé¡å‹ä¸åŒ¹é…ã€æœå‹™å±¤æ··äº‚
- **è§£æ±ºæ–¹æ¡ˆ**ï¼šçµ±ä¸€ä½¿ç”¨ account.md è¨­è¨ˆçš„æ¨¡å‹

#### 4. æœå‹™å±¤æ¶æ§‹æ··äº‚
- **å•é¡Œ**ï¼šå¤šå€‹ä¸åŒçš„æœå‹™å¯¦ç¾
  - `core/services/organization.service.ts` - Firestore å¯¦ç¾
  - `features/organization/services/github-aligned-api.service.ts` - HTTP API å¯¦ç¾
- **å½±éŸ¿**ï¼šæ¶æ§‹ä¸ä¸€è‡´ã€ç¶­è­·å›°é›£
- **è§£æ±ºæ–¹æ¡ˆ**ï¼šçµ±ä¸€æœå‹™å±¤æ¶æ§‹

#### 5. ç¼ºå°‘ account.md è¨­è¨ˆå¯¦ç¾
- **å•é¡Œ**ï¼šæ²’æœ‰å¯¦ç¾ account.md ä¸­çš„è¨­è¨ˆ
  - ç¼ºå°‘ Value Objects (ProfileVO, PermissionVO, SettingsVO)
  - ç¼ºå°‘ AccountState é¡åˆ¥
  - ç¼ºå°‘ Repository ç›¸é—œä»‹é¢
  - ç¼ºå°‘ ValidationUtils å·¥å…·é¡åˆ¥
- **å½±éŸ¿**ï¼šä¸ç¬¦åˆ GitHub å¼è¨­è¨ˆã€åŠŸèƒ½ä¸å®Œæ•´
- **è§£æ±ºæ–¹æ¡ˆ**ï¼šæŒ‰ç…§ account.md é‡æ§‹æ•´å€‹ç³»çµ±

## Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ– (8å€‹ä»»å‹™)

### ğŸ—‘ï¸ æ¸…ç†é‡è¤‡æª”æ¡ˆ
- [ ] **task-1-1**: åˆªé™¤ `app/auth/` æ•´å€‹ç›®éŒ„
  - åˆªé™¤ `app/auth/auth.guard.ts`
  - åˆªé™¤ `app/auth/auth.service.ts`
  - åˆªé™¤ `app/auth/login.component.ts`
  - åˆªé™¤ `app/auth/role.guard.ts`
  - åˆªé™¤ `app/auth/signup.component.ts`
  - åˆªé™¤ `app/auth/unauthorized.component.ts`

### ğŸ—ï¸ å¯¦ç¾ account.md è¨­è¨ˆçš„ auth.model.ts
- [ ] **task-1-2**: æ›´æ–° `core/models/auth.model.ts` å¯¦ç¾ account.md è¨­è¨ˆ
  - æ·»åŠ  Value Objects (ProfileVO, PermissionVO, SettingsVO)
  - æ·»åŠ  AccountState é¡åˆ¥ä½¿ç”¨ Signals
  - æ·»åŠ  Repository ç›¸é—œä»‹é¢
  - æ·»åŠ  ValidationUtils å·¥å…·é¡åˆ¥
  - æ·»åŠ  CertificateVO, SocialRelationVO, BusinessLicenseVO

### ğŸ”§ å¯¦ç¾ ValidationUtils å·¥å…·é¡åˆ¥
- [ ] **task-1-3**: å»ºç«‹ `core/utils/validation.utils.ts`
  - å¯¦ç¾ validateEmail() æ–¹æ³•
  - å¯¦ç¾ validateProfile() æ–¹æ³•
  - å¯¦ç¾ validatePermission() æ–¹æ³•
  - æ·»åŠ å…¶ä»–é©—è­‰å·¥å…·æ–¹æ³•

### ğŸ”„ çµ±ä¸€ AuthService å¯¦ç¾
- [ ] **task-1-4**: æ›´æ–° `core/services/auth.service.ts` ä½¿ç”¨ AccountState
  - å¯¦ç¾ AccountState ç‹€æ…‹ç®¡ç†
  - ä½¿ç”¨ Signals å’Œ Computed Signals
  - å¯¦ç¾ syncUserProfile() æ–¹æ³•
  - æ·»åŠ æ¬Šé™æª¢æŸ¥æ–¹æ³•

### ğŸ”„ æ›´æ–°èªè­‰çµ„ä»¶
- [ ] **task-1-5**: ä¿®æ”¹ `features/user/auth/login.component.ts`
  - ä½¿ç”¨æ–°çš„ `core/services/auth.service`
  - ä¿®å¾© loading ç‹€æ…‹é‡ç½®å•é¡Œ
  - ä½¿ç”¨ Control Flow (@if, @for) æ›¿ä»£å‚³çµ±çµæ§‹æŒ‡ä»¤

- [ ] **task-1-6**: ä¿®æ”¹ `features/user/auth/signup.component.ts`
  - ä½¿ç”¨æ–°çš„ `core/services/auth.service`
  - ä¿®å¾© loading ç‹€æ…‹é‡ç½®å•é¡Œ
  - ä½¿ç”¨ Control Flow (@if, @for) æ›¿ä»£å‚³çµ±çµæ§‹æŒ‡ä»¤

### ğŸ”„ æ›´æ–°è·¯ç”±å®ˆè¡›
- [ ] **task-1-7**: ä¿®æ”¹ `features/user/auth/role.guard.ts`
  - ä½¿ç”¨ accounts æ¨¡å‹æ›¿ä»£èˆŠæ¨¡å‹
  - ä½¿ç”¨æ–°çš„ auth.service
  - å¯¦ç¾æ­£ç¢ºçš„è§’è‰²æª¢æŸ¥é‚è¼¯

### ğŸ”„ æ›´æ–°è·¯ç”±é…ç½®
- [ ] **task-1-8**: æ›´æ–° `app.routes.ts`
  - ç¢ºä¿æ‰€æœ‰è·¯ç”±ä½¿ç”¨æ­£ç¢ºçš„çµ„ä»¶
  - ç§»é™¤å°å·²åˆªé™¤çµ„ä»¶çš„å¼•ç”¨
  - æ·»åŠ çµ„ç¹”/åœ˜éšŠ/Repository çµæ§‹æ”¯æ´

## Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ– (6å€‹ä»»å‹™)

### ğŸ›¡ï¸ å¯¦ç¾ PermissionService
- [ ] **task-2-1**: å»ºç«‹ `core/services/permission.service.ts`
  - ä½¿ç”¨ Signals ç®¡ç†æ¬Šé™ç‹€æ…‹
  - å¯¦ç¾ can() æ¬Šé™æª¢æŸ¥æ–¹æ³•
  - å¯¦ç¾ canManageTeam() åœ˜éšŠæ¬Šé™æª¢æŸ¥
  - å¯¦ç¾ canAccessRepository() Repository æ¬Šé™æª¢æŸ¥
  - æ›¿ä»£ç¾æœ‰çš„ permission-calculation.service

### ğŸ”’ å¯¦ç¾æ¬Šé™å®ˆè¡›
- [ ] **task-2-2**: å»ºç«‹ `core/guards/permission.guard.ts`
  - å¯¦ç¾ permissionGuard å‡½æ•¸
  - ä½¿ç”¨ PermissionService é€²è¡Œæ¬Šé™æª¢æŸ¥
  - å¯¦ç¾éŒ¯èª¤è™•ç†å’Œé‡å®šå‘

### ğŸ¢ æ›´æ–° OrganizationService
- [ ] **task-2-3**: æ›´æ–° `core/services/organization.service.ts`
  - ä½¿ç”¨ Value Objects (ProfileVO, PermissionVO, SettingsVO)
  - å¯¦ç¾ createOrganization() ä½¿ç”¨ ValidationUtils
  - å¯¦ç¾å®Œæ•´çš„ CRUD æ“ä½œ
  - ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

### ğŸ”„ æ›´æ–°ç¾æœ‰è·¯ç”±å®ˆè¡›
- [ ] **task-2-4**: ä¿®æ”¹ `features/user/auth/role.guard.ts`
  - ä½¿ç”¨ accounts æ¨¡å‹
  - æ•´åˆ PermissionService
  - å¯¦ç¾æ­£ç¢ºçš„æ¬Šé™æª¢æŸ¥é‚è¼¯

### ğŸ”— æ•´åˆæ¬Šé™åˆ°è·¯ç”±
- [ ] **task-2-5**: æ›´æ–°æ‰€æœ‰è·¯ç”±ä½¿ç”¨ Permission å®ˆè¡›
  - æ›´æ–° `app.routes.ts` ä½¿ç”¨ permissionGuard
  - æ›´æ–° `features/organization/routes/organization.routes.ts`
  - æ·»åŠ æ¬Šé™æª¢æŸ¥åˆ°æ‰€æœ‰å—ä¿è­·è·¯ç”±

### ğŸ”„ æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals
- [ ] **task-2-6**: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†
  - ç¢ºä¿æ‰€æœ‰æœå‹™ä½¿ç”¨ inject() å‡½æ•¸
  - å¯¦ç¾ Signals åŸºç¤çš„ç‹€æ…‹ç®¡ç†
  - æ·»åŠ  Computed Signals ç”¨æ–¼è¡ç”Ÿç‹€æ…‹

## Phase 3: Repository ç®¡ç†ç³»çµ± (7å€‹ä»»å‹™)

### ğŸ“ å¯¦ç¾ Repository æ¨¡å‹
- [ ] **task-3-1**: æ›´æ–° `core/models/auth.model.ts` æ·»åŠ  Repository ä»‹é¢
  - æ·»åŠ  Repository ä»‹é¢
  - æ·»åŠ  RepositoryCollaborator ä»‹é¢
  - æ·»åŠ  RepositoryTeamAccess ä»‹é¢
  - æ·»åŠ ç›¸é—œçš„æ¬Šé™å’Œè§’è‰²å®šç¾©

### ğŸ”§ å¯¦ç¾ RepositoryService
- [ ] **task-3-2**: å»ºç«‹ `core/services/repository.service.ts`
  - å¯¦ç¾ Repository CRUD æ“ä½œ
  - å¯¦ç¾å”ä½œè€…ç®¡ç†
  - å¯¦ç¾åœ˜éšŠè¨ªå•ç®¡ç†
  - ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

### ğŸ–¥ï¸ å¯¦ç¾ Repository UI å…ƒä»¶
- [ ] **task-3-3**: å»ºç«‹ `routes/repository-detail/repository-detail.component.ts`
  - ä½¿ç”¨ Control Flow (@if, @for, @switch)
  - å¯¦ç¾æ¬Šé™é©…å‹•çš„ UI
  - ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

- [ ] **task-3-4**: å»ºç«‹ `routes/repository-settings/repository-settings.component.ts`
  - å¯¦ç¾ Repository è¨­å®šåŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-3-5**: å»ºç«‹ `routes/collaborators-list/collaborators-list.component.ts`
  - å¯¦ç¾å”ä½œè€…ç®¡ç†åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-3-6**: å»ºç«‹ `routes/team-access-list/team-access-list.component.ts`
  - å¯¦ç¾åœ˜éšŠè¨ªå•ç®¡ç†åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

### ğŸ”— æ›´æ–°è·¯ç”±æ”¯æ´ Repository
- [ ] **task-3-7**: æ›´æ–°è·¯ç”±æ”¯æ´ Repository ç®¡ç†
  - æ›´æ–° `app.routes.ts` æ·»åŠ  Repository è·¯ç”±
  - å¯¦ç¾å®Œæ•´çš„è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯
  - æ•´åˆæ¬Šé™æ§åˆ¶åˆ°æ‰€æœ‰ Repository è·¯ç”±

## Phase 4: çµ„ç¹”/åœ˜éšŠç®¡ç† UI (6å€‹ä»»å‹™)

### ğŸ–¥ï¸ å¯¦ç¾çµ„ç¹”ç®¡ç† UI å…ƒä»¶
- [ ] **task-4-1**: å»ºç«‹ `routes/organization-detail/organization-detail.component.ts`
  - ä½¿ç”¨ Control Flow (@if, @for, @switch)
  - å¯¦ç¾æ¬Šé™é©…å‹•çš„ UI
  - ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

- [ ] **task-4-2**: å»ºç«‹ `routes/members-list/members-list.component.ts`
  - å¯¦ç¾æˆå“¡ç®¡ç†åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-4-3**: å»ºç«‹ `routes/teams-list/teams-list.component.ts`
  - å¯¦ç¾åœ˜éšŠåˆ—è¡¨åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-4-4**: å»ºç«‹ `routes/team-create/team-create.component.ts`
  - å¯¦ç¾åœ˜éšŠå»ºç«‹åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-4-5**: å»ºç«‹ `routes/organization-settings/organization-settings.component.ts`
  - å¯¦ç¾çµ„ç¹”è¨­å®šåŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

- [ ] **task-4-6**: å»ºç«‹ `routes/organization-dashboard/organization-dashboard.component.ts`
  - å¯¦ç¾çµ„ç¹”å„€è¡¨æ¿åŠŸèƒ½
  - ä½¿ç”¨ Control Flow å’Œ Signals

## Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆ (5å€‹ä»»å‹™)

### ğŸ”— æ›´æ–°æ‡‰ç”¨ç¨‹å¼è·¯ç”±
- [ ] **task-5-1**: æ›´æ–° `app.routes.ts` æ”¯æ´å®Œæ•´çµæ§‹
  - æ·»åŠ çµ„ç¹”/åœ˜éšŠ/Repository è·¯ç”±
  - å¯¦ç¾ GitHub å¼è·¯ç”±çµæ§‹
  - æ•´åˆæ¬Šé™æ§åˆ¶

### ğŸ”— æ›´æ–°çµ„ç¹”è·¯ç”±
- [ ] **task-5-2**: æ›´æ–° `features/organization/routes/organization.routes.ts`
  - æ•´åˆ Permission å®ˆè¡›
  - å¯¦ç¾å®Œæ•´çš„çµ„ç¹”è·¯ç”±çµæ§‹
  - æ·»åŠ æ¬Šé™æª¢æŸ¥

### ğŸ§­ å¯¦ç¾è·¯ç”±å±¤ç´šå’Œå°èˆª
- [ ] **task-5-3**: å»ºç«‹å®Œæ•´çš„è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯
  - å¯¦ç¾çµ„ç¹” â†’ åœ˜éšŠ â†’ Repository çš„å°èˆª
  - æ·»åŠ éºµåŒ…å±‘å°èˆª
  - å¯¦ç¾æ¬Šé™é©…å‹•çš„å°èˆª

### ğŸ›¡ï¸ æ•´åˆæ¬Šé™æ§åˆ¶
- [ ] **task-5-4**: æ•´åˆæ¬Šé™æ§åˆ¶åˆ°æ‰€æœ‰è·¯ç”±
  - ç¢ºä¿æ‰€æœ‰è·¯ç”±éƒ½æœ‰é©ç•¶çš„æ¬Šé™ä¿è­·
  - å¯¦ç¾æ¬Šé™æª¢æŸ¥å’Œé‡å®šå‘
  - æ·»åŠ éŒ¯èª¤è™•ç†

### ğŸ”„ æ›´æ–°è·¯ç”±å®ˆè¡›
- [ ] **task-5-5**: æ›´æ–°æ‰€æœ‰è·¯ç”±å®ˆè¡›ä½¿ç”¨ PermissionService
  - ç¢ºä¿æ‰€æœ‰å®ˆè¡›ä½¿ç”¨çµ±ä¸€çš„æ¬Šé™æª¢æŸ¥
  - å¯¦ç¾ä¸€è‡´çš„éŒ¯èª¤è™•ç†
  - æ·»åŠ æ—¥èªŒè¨˜éŒ„

## Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ (7å€‹ä»»å‹™)

### ğŸ”’ å¯¦ç¾ Firestore å®‰å…¨è¦å‰‡
- [ ] **task-6-1**: å»ºç«‹ `firebase.rules` å¯¦ç¾ accounts é›†åˆè¦å‰‡
  - å¯¦ç¾çµ±ä¸€çš„ accounts é›†åˆå®‰å…¨è¦å‰‡
  - å¯¦ç¾çµ„ç¹”æˆå“¡æ¬Šé™æª¢æŸ¥
  - å¯¦ç¾åœ˜éšŠæ¬Šé™æª¢æŸ¥

- [ ] **task-6-2**: å¯¦ç¾ Repository å®‰å…¨è¦å‰‡
  - å¯¦ç¾ Repository è®€å¯«æ¬Šé™
  - å¯¦ç¾å”ä½œè€…æ¬Šé™æª¢æŸ¥
  - å¯¦ç¾åœ˜éšŠè¨ªå•æ¬Šé™æª¢æŸ¥

- [ ] **task-6-3**: å¯¦ç¾çµ„ç¹”/åœ˜éšŠ/æˆå“¡æ¬Šé™è¦å‰‡
  - å¯¦ç¾å®Œæ•´çš„æ¬Šé™å±¤ç´šæª¢æŸ¥
  - å¯¦ç¾è¼”åŠ©å‡½æ•¸
  - æ·»åŠ å®‰å…¨è¦å‰‡æ¸¬è©¦

### ğŸ§ª å¯¦ç¾æ¸¬è©¦ç­–ç•¥
- [ ] **task-6-4**: å¯¦ç¾å–®å…ƒæ¸¬è©¦
  - æ¸¬è©¦ auth.service
  - æ¸¬è©¦ permission.service
  - æ¸¬è©¦ organization.service
  - æ¸¬è©¦ ValidationUtils

- [ ] **task-6-5**: å¯¦ç¾æ•´åˆæ¸¬è©¦
  - æ¸¬è©¦è·¯ç”±å®ˆè¡›
  - æ¸¬è©¦æ¬Šé™æª¢æŸ¥
  - æ¸¬è©¦æœå‹™æ•´åˆ

- [ ] **task-6-6**: å¯¦ç¾ E2E æ¸¬è©¦
  - æ¸¬è©¦å®Œæ•´ç”¨æˆ¶æµç¨‹
  - æ¸¬è©¦æ¬Šé™æ§åˆ¶
  - æ¸¬è©¦ UI äº’å‹•

- [ ] **task-6-7**: é€²è¡Œå®Œæ•´åŠŸèƒ½æ¸¬è©¦å’Œé©—è­‰
  - æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½
  - é©—è­‰æ¬Šé™ç³»çµ±
  - æ€§èƒ½æ¸¬è©¦
  - å®‰å…¨æ¸¬è©¦

## é©—æ”¶æ¨™æº–

### Phase 1 é©—æ”¶æ¨™æº–
- âœ… AccountState é¡åˆ¥æ­£ç¢ºä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
- âœ… ValidationUtils æä¾›å®Œæ•´çš„é©—è­‰åŠŸèƒ½
- âœ… auth.service ä½¿ç”¨ AccountState å’Œ Signals
- âœ… Login/Signup çµ„ä»¶æ­£å¸¸å·¥ä½œ
- âœ… Loading ç‹€æ…‹æ­£ç¢ºé‡ç½®
- âœ… é‡è¤‡çš„ app/auth/ çµ„ä»¶å·²åˆªé™¤

### Phase 2 é©—æ”¶æ¨™æº–
- âœ… PermissionService æ­£ç¢ºè¨ˆç®—æ¬Šé™
- âœ… permissionGuard æ­£ç¢ºä¿è­·è·¯ç”±
- âœ… organization.service ä½¿ç”¨ Value Objects
- âœ… æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†
- âœ… æ¬Šé™æª¢æŸ¥èˆ‡ UI é‚è¼¯åˆ†é›¢

### Phase 3 é©—æ”¶æ¨™æº–
- âœ… Repository æœå‹™ CRUD æ“ä½œæ­£å¸¸
- âœ… Repository UI å…ƒä»¶åŠŸèƒ½å®Œæ•´
- âœ… å”ä½œè€…å’Œåœ˜éšŠè¨ªå•ç®¡ç†æ­£å¸¸
- âœ… è·¯ç”±æ”¯æ´ Repository ç®¡ç†

### Phase 4 é©—æ”¶æ¨™æº–
- âœ… æ‰€æœ‰ UI å…ƒä»¶ä½¿ç”¨ Control Flow (@if, @for)
- âœ… æ¬Šé™æª¢æŸ¥èˆ‡ Signals æ•´åˆ
- âœ… çµ„ç¹”/åœ˜éšŠç®¡ç†åŠŸèƒ½å®Œæ•´
- âœ… UI éŸ¿æ‡‰å¼ä¸”ç”¨æˆ¶å‹å¥½

### Phase 5 é©—æ”¶æ¨™æº–
- âœ… è·¯ç”±çµæ§‹ç¬¦åˆ GitHub å¼è¨­è¨ˆ
- âœ… æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ¬Šé™ä¿è­·
- âœ… å°èˆªé‚è¼¯æ­£ç¢º
- âœ… æ¬Šé™æ§åˆ¶æ•´åˆåˆ°æ‰€æœ‰è·¯ç”±

### Phase 6 é©—æ”¶æ¨™æº–
- âœ… Firestore å®‰å…¨è¦å‰‡æ­£ç¢ºä¿è­·è³‡æ–™
- âœ… æ¸¬è©¦è¦†è“‹ç‡é”æ¨™
- âœ… å®Œæ•´åŠŸèƒ½æ¸¬è©¦é€šé
- âœ… å®‰å…¨è¦å‰‡å’Œæ¬Šé™ç³»çµ±é©—è­‰é€šé

## é¢¨éšªè©•ä¼°èˆ‡ä¾è³´é—œä¿‚

### é«˜é¢¨éšªé …ç›®
1. **Signals ç‹€æ…‹ç®¡ç†è¤‡é›œåŒ–**ï¼šAccountState å’Œ PermissionService ä½¿ç”¨ Signals
   - **é¢¨éšª**ï¼šç‹€æ…‹ç®¡ç†é‚è¼¯è¤‡é›œï¼Œå¯èƒ½å°è‡´æ€§èƒ½å•é¡Œ
   - **ç·©è§£**ï¼šè©³ç´°æ¸¬è©¦å’Œæ€§èƒ½ç›£æ§

2. **Repository ç³»çµ±æ–°å¢åŠŸèƒ½**ï¼šå®Œæ•´çš„ Repository ç®¡ç†ç³»çµ±
   - **é¢¨éšª**ï¼šåŠŸèƒ½è¤‡é›œåº¦é«˜ï¼Œå¯èƒ½å½±éŸ¿ç¾æœ‰ç³»çµ±
   - **ç·©è§£**ï¼šåˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

3. **æ¬Šé™ç³»çµ±é‡æ§‹**ï¼šACLService â†’ PermissionService
   - **é¢¨éšª**ï¼šæ¬Šé™é‚è¼¯è®Šæ›´å¯èƒ½å°è‡´å®‰å…¨å•é¡Œ
   - **ç·©è§£**ï¼šè©³ç´°æ¸¬è©¦èˆ‡å®‰å…¨è¦å‰‡é©—è­‰

4. **è·¯ç”±çµæ§‹é‡æ§‹**ï¼šå¤§é‡è·¯ç”±è®Šæ›´
   - **é¢¨éšª**ï¼šå¯èƒ½ç ´å£ç¾æœ‰å°èˆª
   - **ç·©è§£**ï¼šåˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

### ä¾è³´é—œä¿‚
- **Phase 1** â†’ **Phase 2**ï¼šæ ¸å¿ƒæœå‹™ä¾è³´åŸºç¤æ¸…ç†
- **Phase 2** â†’ **Phase 3**ï¼šRepository æœå‹™ä¾è³´ Permission æœå‹™
- **Phase 2** â†’ **Phase 4**ï¼šUI å…ƒä»¶ä¾è³´ Permission æœå‹™
- **Phase 3** â†’ **Phase 5**ï¼šè·¯ç”±æ•´åˆä¾è³´ Repository åŠŸèƒ½
- **Phase 4** â†’ **Phase 5**ï¼šè·¯ç”±æ•´åˆä¾è³´ UI å…ƒä»¶
- **Phase 5** â†’ **Phase 6**ï¼šæ¸¬è©¦ä¾è³´å®Œæ•´åŠŸèƒ½

### å»ºè­°å¯¦æ–½é †åº
1. **Phase 1** (åŸºç¤æ¸…ç†) - é¢¨éšªä½ï¼Œå½±éŸ¿å°
2. **Phase 2** (æ ¸å¿ƒæœå‹™) - é¢¨éšªä¸­ï¼Œå½±éŸ¿ä¸­
3. **Phase 3** (Repository ç³»çµ±) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
4. **Phase 4** (UI å…ƒä»¶) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
5. **Phase 5** (è·¯ç”±æ•´åˆ) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§
6. **Phase 6** (å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§

## ç•¶å‰ç‹€æ…‹
- Phase: PLAN Mode - å°ˆæ¡ˆç•¶å‰æƒ…æ³åˆ†æå®Œæˆ
- Status: Level 4 è¤‡é›œåº¦ï¼Œ39å€‹ä»»å‹™ï¼Œ6å€‹ Phase
- Blockers: ç„¡
- Next: æº–å‚™é€²å…¥ IMPLEMENT æ¨¡å¼é–‹å§‹å¯¦æ–½

---

## Status
- [x] ä¿®å¾©åœ–æ¨™æ··æ·†ï¼šç‚º REFLECT æ¨¡å¼åˆ†é…å”¯ä¸€åœ–æ¨™ (ğŸ” â†’ ğŸ“)
- [x] ä¿®å¾©å·¥ä½œæµç¨‹è¡çªï¼šçµ±ä¸€ Level 1 ä»»å‹™è™•ç†æµç¨‹ (æ·»åŠ  REFLECT éšæ®µ)
- [x] è£œå…… MCP Memory Server æŒ‡ä»¤ï¼šåœ¨ .cursorrules ä¸­æ·»åŠ å®Œæ•´æŒ‡ä»¤åˆ—è¡¨
- [x] ä¿®å¾©æ–‡ä»¶è·¯å¾‘è¡çªï¼šçµ±ä¸€æ–‡ä»¶ä½ç½®è¦ç¯„ (æ˜ç¢º graph-bank/ ç›®éŒ„)
- [x] ä¿®å¾©æ–‡ä»¶å‘½åä¸ä¸€è‡´ï¼šçµ±ä¸€å‘½åè¦ç¯„
- [x] è£œå…… INIT Agent æª¢æŸ¥æ™‚æ©Ÿï¼šåœ¨ .cursorrules ä¸­å®šç¾©
- [x] BUILD æ¨¡å¼ä¿®å¾©å®Œæˆ

## Status
- [x] VAN Agent åˆå§‹åŒ–å®Œæˆ
- [x] MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- [x] å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- [x] æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- [x] è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- [x] ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- [x] ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- [x] ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- [x] é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- [x] Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- [x] èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- [x] Graph Bank æ–‡ä»¶æ›´æ–°å®Œæˆ
- [x] account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- [x] GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- [x] PLAN Agent åˆå§‹åŒ– - ä½¿ç”¨ sequential-thinking æ·±å…¥åˆ†æ account.md
- [x] Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”
- [x] GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- [x] åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- [x] é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ
- [x] QA æª¢æŸ¥ - åŒ…ç®¡ç†å™¨ yarn é…ç½®é©—è­‰
- [x] æª¢æŸ¥ yarn.lock æ–‡ä»¶å®Œæ•´æ€§
- [x] é©—è­‰ package.json èˆ‡ yarn.lock ä¸€è‡´æ€§
- [x] æª¢æŸ¥ä¾è³´ç‰ˆæœ¬å…¼å®¹æ€§
- [x] é©—è­‰ yarn å®‰è£ç‹€æ…‹
- [x] QA æª¢æŸ¥ - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰
- [x] æª¢æŸ¥æ¬Šé™/è§’è‰²ç³»çµ±å¯¦æ–½é †åº
- [x] é©—è­‰çµ„ç¹”/å€‹äººå»ºç«‹æµç¨‹ä¾è³´é—œä¿‚
- [x] æª¢æŸ¥ä»»å‹™é–“çš„å‰ç½®æ¢ä»¶
- [x] é©—è­‰ Phase é–“çš„ä¾è³´é—œä¿‚
- [x] PLAN QA æª¢æŸ¥ - é©—è­‰ PLAN Agent è¼¸å‡ºå“è³ª
- [x] æª¢æŸ¥å¯¦æ–½è¨ˆç•«çš„å®Œæ•´æ€§
- [x] é©—è­‰ä»»å‹™åˆ†è§£çš„åˆç†æ€§
- [x] æª¢æŸ¥é¢¨éšªè©•ä¼°çš„æº–ç¢ºæ€§
- [x] é©—è­‰ä¾è³´é—œä¿‚çš„æ­£ç¢ºæ€§
- [x] æª¢æŸ¥é©—æ”¶æ¨™æº–çš„æ˜ç¢ºæ€§
- [x] PLAN ä¿®æ­£ - Phase 2 ä»»å‹™é †åºä¿®æ­£
- [x] æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶
- [x] æ›´æ–°ä¾è³´é—œä¿‚åœ–
- [x] é©—è­‰ä¿®æ­£å¾Œçš„é‚è¼¯
- [x] æº–å‚™é–‹å§‹å¯¦æ–½
- [x] PLAN QA æœ€çµ‚æª¢æŸ¥ - ä¿®æ­£å¾Œçš„å¯¦æ–½è¨ˆç•«å“è³ªå„ªç§€

## VAN Agent åˆå§‹åŒ–æ‘˜è¦

### ğŸ¯ å°ˆæ¡ˆæ¦‚è¦½
- **å°ˆæ¡ˆåç¨±**: angular-fire-rolekit
- **æ¡†æ¶ç‰ˆæœ¬**: Angular 20.1.0 + Firebase 11.10.0
- **è¤‡é›œåº¦ç­‰ç´š**: Level 4 - Complex System
- **ä¸»è¦ç›®æ¨™**: GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±é‡æ§‹

### ğŸ” æŠ€è¡“æ£§åˆ†æ
- **å‰ç«¯æ¡†æ¶**: Angular 20.1.0 (æœ€æ–°ç‰ˆæœ¬)
- **UI å…ƒä»¶åº«**: Angular Material 20.1.0
- **å¾Œç«¯æœå‹™**: Firebase 11.10.0 (å®Œæ•´æœå‹™å¥—ä»¶)
- **èªè­‰æœå‹™**: Firebase Auth + Firestore
- **ç‹€æ…‹ç®¡ç†**: Angular å…§å»ºç‹€æ…‹ç®¡ç† + RxJS
- **åŒ…ç®¡ç†å™¨**: yarn
- **TypeScript**: 5.8.2 (åš´æ ¼æ¨¡å¼)

### ğŸ—ï¸ æ¶æ§‹åˆ†æ
- **çµ±ä¸€æ¨¡å‹**: ä½¿ç”¨ `accounts/{uid}` è·¯å¾‘å­˜å„²æ‰€æœ‰ Account é¡å‹
- **GitHub å°é½Š**: Account/User/Organization æ¨¡å‹è¨­è¨ˆ
- **æ¬Šé™ç³»çµ±**: å¤šå±¤ç´šæ¬Šé™æ§åˆ¶ (å€‹äºº â†’ çµ„ç¹” â†’ åœ˜éšŠ â†’ è³‡æº)
- **è§’è‰²ç®¡ç†**: 5 ç¨®çµ„ç¹”è§’è‰² + 2 ç¨®åœ˜éšŠè§’è‰²
- **Firebase æ•´åˆ**: å®Œæ•´çš„ Firebase æœå‹™é…ç½®

### âš ï¸ ç™¼ç¾çš„å•é¡Œ
1. **é‡è¤‡çš„èªè­‰çµ„ä»¶**: `app/auth/` èˆ‡ `features/user/auth/` é‡è¤‡
2. **TypeScript éŒ¯èª¤**: å·²ä¿®å¾© `data['type']` é¡å‹å•é¡Œ
3. **Loading ç‹€æ…‹**: Login/Signup çµ„ä»¶ä¸­ loading ç‹€æ…‹æœªæ­£ç¢ºé‡ç½®

### ğŸ“‹ å»ºè­°æ”¹é€²
1. æ¸…ç†é‡è¤‡çš„èªè­‰çµ„ä»¶ (`app/auth/` ç›®éŒ„)
2. ä¿®å¾© loading ç‹€æ…‹è™•ç†
3. çµ±ä¸€èªè­‰çµ„ä»¶çµæ§‹
4. æ·»åŠ éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### ğŸš€ ä¸‹ä¸€æ­¥å»ºè­°
- å»ºè­°åˆ‡æ›è‡³ PLAN æ¨¡å¼ï¼Œåˆ¶å®šåˆ†éšæ®µå¯¦æ–½è¨ˆç•«ï¼š
  - Phase 1: æ¸…ç†é‡è¤‡æª”æ¡ˆï¼Œçµ±ä¸€èªè­‰æœå‹™
  - Phase 2: å¯¦ä½œ ACL æœå‹™èˆ‡å®ˆè¡›
  - Phase 3: å»ºç«‹çµ„ç¹”/åœ˜éšŠç®¡ç† UI
  - Phase 4: æ•´åˆè·¯ç”±èˆ‡æ¬Šé™æ§åˆ¶
  - Phase 5: Firestore å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦

## Status
- [x] VAN æ¨¡å¼åˆå§‹åŒ–å®Œæˆ
- [x] PLAN æ¨¡å¼ Firebase Auth é…ç½®åˆ†æå®Œæˆ
- [x] app.config.ts Firebase Auth é…ç½®é©—è­‰å®Œæˆ
- [x] æ‰€æœ‰èªè­‰çµ„ä»¶æ•´åˆæª¢æŸ¥å®Œæˆ
- [x] è·¯ç”±å®ˆè¡›é…ç½®é©—è­‰å®Œæˆ
- [x] Firestore æ•´åˆåˆ†æå®Œæˆ
- [x] èªè­‰é…ç½®å ±å‘Šå»ºç«‹å®Œæˆ
- [x] account.md å®Œæ•´åˆ†æå®Œæˆ
- [x] PLAN é‡æ–°è¦åŠƒå®Œæˆ

## Firebase Auth é…ç½®åˆ†æçµæœ

### âœ… app.config.ts é…ç½®å®Œæ•´æ€§
**Firebase æœå‹™é…ç½®**:
- âœ… provideFirebaseApp: æ­£ç¢ºåˆå§‹åŒ– Firebase æ‡‰ç”¨
- âœ… provideAuth: æ­£ç¢ºæä¾› Firebase Auth æœå‹™  
- âœ… provideFirestore: æ­£ç¢ºæä¾› Firestore æœå‹™
- âœ… provideAppCheck: æ­£ç¢ºé…ç½® App Check å®‰å…¨æœå‹™
- âœ… ç’°å¢ƒè®Šæ•¸æ•´åˆ: æ­£ç¢ºä½¿ç”¨ environment.firebase é…ç½®

### âœ… èªè­‰çµ„ä»¶æ•´åˆç‹€æ³
**LoginComponent** (`features/user/auth/login.component.ts`):
- âœ… ä½¿ç”¨ AuthService é€²è¡Œç™»å…¥
- âœ… æ•´åˆ Firestore é€²è¡Œè§’è‰²æŸ¥è©¢
- âœ… æ­£ç¢ºçš„ runInInjectionContext ä½¿ç”¨
- âœ… è§’è‰²å°èˆªé‚è¼¯å®Œæ•´

**SignupComponent** (`features/user/auth/signup.component.ts`):
- âœ… ä½¿ç”¨ AuthService é€²è¡Œè¨»å†Š
- âœ… è‡ªå‹•å‰µå»º Firestore ç”¨æˆ¶æ–‡æª”
- âœ… é è¨­è§’è‰²è¨­å®š (viewer)

**AuthService** (`features/user/auth/auth.service.ts`):
- âœ… å®Œæ•´çš„ Firebase Auth æ–¹æ³•å°è£
- âœ… login, signup, logout æ–¹æ³•å¯¦ç¾
- âœ… æ­£ç¢ºçš„ä¾è³´æ³¨å…¥

### âœ… è·¯ç”±å®ˆè¡›é…ç½®
**authGuard** (`features/user/auth/auth.guard.ts`):
- âœ… ä½¿ç”¨ authState ç›£è½èªè­‰ç‹€æ…‹
- âœ… æ­£ç¢ºçš„æœªèªè­‰ç”¨æˆ¶é‡å®šå‘

**roleGuard** (`features/user/auth/role.guard.ts`):
- âœ… çµåˆ Firebase Auth å’Œ Firestore
- âœ… æ­£ç¢ºçš„è§’è‰²é©—è­‰é‚è¼¯
- âœ… runInInjectionContext æ­£ç¢ºä½¿ç”¨

### âš ï¸ ç™¼ç¾çš„å•é¡Œ
1. **é‡è¤‡çš„èªè­‰çµ„ä»¶çµæ§‹**:
   - `app/auth/` ç›®éŒ„ä¸‹çš„çµ„ä»¶èˆ‡ `features/user/auth/` é‡è¤‡
   - å»ºè­°çµ±ä¸€ä½¿ç”¨ `features/user/auth/` çµæ§‹

2. **loading ç‹€æ…‹è™•ç†**:
   - LoginComponent ä¸­ loading ç‹€æ…‹æœªæ­£ç¢ºé‡ç½®
   - SignupComponent ä¸­ loading ç‹€æ…‹æœªæ­£ç¢ºé‡ç½®

### ğŸ“‹ å»ºè­°æ”¹é€²
1. æ¸…ç†é‡è¤‡çš„èªè­‰çµ„ä»¶
2. ä¿®å¾© loading ç‹€æ…‹è™•ç†
3. çµ±ä¸€èªè­‰çµ„ä»¶çµæ§‹
4. æ·»åŠ éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

## Requirements
### æ ¸å¿ƒéœ€æ±‚
- [x] Firebase Auth é…ç½®å®Œæ•´æ€§åˆ†æ
- [x] èªè­‰çµ„ä»¶æ•´åˆç‹€æ³æª¢æŸ¥
- [x] è·¯ç”±å®ˆè¡›é…ç½®é©—è­‰
- [x] Firestore æ•´åˆåˆ†æ
- [ ] é‡è¤‡çµ„ä»¶æ¸…ç†
- [ ] loading ç‹€æ…‹ä¿®å¾©

### æŠ€è¡“ç´„æŸ
- [x] Angular 20.1.0 æ¡†æ¶é™åˆ¶
- [x] Firebase 11.10.0 æœå‹™é™åˆ¶
- [x] ç¾æœ‰å°ˆæ¡ˆçµæ§‹é™åˆ¶
- [x] ä¾è³´é—œä¿‚é™åˆ¶

## Components Affected
### éœ€è¦ä¿®æ”¹çš„çµ„ä»¶
- [ ] LoginComponent (loading ç‹€æ…‹ä¿®å¾©)
- [ ] SignupComponent (loading ç‹€æ…‹ä¿®å¾©)
- [ ] æ¸…ç†é‡è¤‡çš„ app/auth/ çµ„ä»¶

### éœ€è¦æ–°å¢çš„çµ„ä»¶
- [ ] éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- [ ] çµ±ä¸€çš„èªè­‰çµ„ä»¶çµæ§‹

## Implementation Steps
1. [x] Phase 1: Firebase Auth é…ç½®åˆ†æ
2. [x] Phase 2: èªè­‰çµ„ä»¶æ•´åˆæª¢æŸ¥
3. [x] Phase 3: è·¯ç”±å®ˆè¡›é…ç½®é©—è­‰
4. [ ] Phase 4: é‡è¤‡çµ„ä»¶æ¸…ç†
5. [ ] Phase 5: loading ç‹€æ…‹ä¿®å¾©

## Creative Phases Required
- [x] ğŸ¨ Firebase Auth æ¶æ§‹è¨­è¨ˆ (å·²å®Œæˆ)
- [x] ğŸ—ï¸ è§’è‰²ç®¡ç†ç³»çµ±è¨­è¨ˆ (å·²å®Œæˆ)
- [x] âš™ï¸ è·¯ç”±å®ˆè¡›è¨­è¨ˆ (å·²å®Œæˆ)

## Checkpoints
- [x] Firebase Auth é…ç½®é©—è­‰å®Œæˆ
- [x] èªè­‰çµ„ä»¶æ•´åˆæª¢æŸ¥å®Œæˆ
- [x] è·¯ç”±å®ˆè¡›é…ç½®é©—è­‰å®Œæˆ
- [x] Firestore æ•´åˆåˆ†æå®Œæˆ
- [ ] é‡è¤‡çµ„ä»¶æ¸…ç†å®Œæˆ
- [ ] loading ç‹€æ…‹ä¿®å¾©å®Œæˆ

## Current Status
- Phase: PLAN Mode - Angular v20 + Signals + Firebase GitHub å¼æ¬Šé™ç³»çµ±å®Œæ•´é‡æ§‹
- Status: Level 4 è¤‡é›œåº¦ï¼Œ39å€‹ä»»å‹™ï¼Œ6å€‹ Phase
- Blockers: ç„¡

---

## PLAN - Angular v20 + Signals + Firebase GitHub å¼æ¬Šé™ç³»çµ±å®Œæ•´é‡æ§‹

### ğŸ¯ ç›®æ¨™
å¯¦ç¾å®Œæ•´çš„ Angular v20 ç¾ä»£åŒ– GitHub å¼å¤šå±¤ç´šæ¬Šé™ç³»çµ±ï¼ŒåŒ…å«ï¼š
- **Signals ç‹€æ…‹ç®¡ç†**: AccountState é¡åˆ¥èˆ‡ Computed Signals
- **Control Flow**: @if, @for, @switch ç¾ä»£åŒ–æ¨¡æ¿èªæ³•
- **Value Objects**: ProfileVO, PermissionVO, SettingsVO é ˜åŸŸé©…å‹•è¨­è¨ˆ
- **Repository ç®¡ç†**: å®Œæ•´çš„ Repository å”ä½œè€…èˆ‡åœ˜éšŠè¨ªå•ç³»çµ±
- **æ¬Šé™ç³»çµ±**: PermissionService æ›¿ä»£ ACLService
- **æ¸¬è©¦ç­–ç•¥**: å–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ã€E2E æ¸¬è©¦

### ğŸ“Š è¤‡é›œåº¦è©•ä¼°
- **ç­‰ç´š**: Level 4 - Complex System
- **ç¯„åœ**: èªè­‰ç³»çµ±ã€çµ„ç¹”ç®¡ç†ã€åœ˜éšŠç®¡ç†ã€Repository ç®¡ç†ã€æ¬Šé™æ§åˆ¶ã€UI å…ƒä»¶ã€è·¯ç”±é‡æ§‹ã€æ¸¬è©¦ç­–ç•¥
- **å½±éŸ¿æª”æ¡ˆ**: 30+ å€‹æª”æ¡ˆéœ€è¦æ–°å¢/ä¿®æ”¹/åˆªé™¤
- **ç¸½ä»»å‹™æ•¸**: 39å€‹ä»»å‹™

### ğŸ—‚ï¸ æª”æ¡ˆè®Šæ›´æ¸…å–®

#### ğŸ—‘ï¸ éœ€è¦åˆªé™¤çš„æª”æ¡ˆ (6å€‹)
- `angular/src/app/auth/` æ•´å€‹ç›®éŒ„
  - `auth.guard.ts`, `auth.service.ts`, `login.component.ts`, `role.guard.ts`, `signup.component.ts`, `unauthorized.component.ts`

#### âœï¸ éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ (8å€‹)
- `angular/src/app/core/models/auth.model.ts`ï¼šå¢åŠ  Value Objects å’Œ Repository ä»‹é¢
- `angular/src/app/core/services/auth.service.ts`ï¼šä½¿ç”¨ AccountState å’Œ Signals
- `angular/src/app/core/services/organization.service.ts`ï¼šä½¿ç”¨ Value Objects
- `angular/src/app/features/user/auth/login.component.ts`ï¼šä½¿ç”¨æ–°çš„ auth.service
- `angular/src/app/features/user/auth/signup.component.ts`ï¼šä½¿ç”¨æ–°çš„ auth.service
- `angular/src/app/features/user/auth/role.guard.ts`ï¼šä½¿ç”¨ accounts æ¨¡å‹
- `angular/src/app/app.routes.ts`ï¼šæ”¯æ´çµ„ç¹”/åœ˜éšŠ/Repository çµæ§‹
- `angular/src/app/features/organization/routes/organization.routes.ts`ï¼šæ•´åˆ Permission å®ˆè¡›

#### â• éœ€è¦æ–°å¢çš„æª”æ¡ˆ (16å€‹)
- `angular/src/app/core/models/account-state.ts`ï¼šAccountState é¡åˆ¥
- `angular/src/app/core/utils/validation.utils.ts`ï¼šValidationUtils å·¥å…·é¡åˆ¥
- `angular/src/app/core/services/permission.service.ts`ï¼šPermissionService (æ›¿ä»£ ACLService)
- `angular/src/app/core/guards/permission.guard.ts`ï¼špermissionGuard (æ›¿ä»£ aclGuard)
- `angular/src/app/core/services/repository.service.ts`ï¼šRepository ç®¡ç†æœå‹™
- `angular/src/app/routes/organization-detail/organization-detail.component.ts`ï¼šçµ„ç¹”è©³æƒ…é 
- `angular/src/app/routes/members-list/members-list.component.ts`ï¼šæˆå“¡ç®¡ç†é 
- `angular/src/app/routes/teams-list/teams-list.component.ts`ï¼šåœ˜éšŠç®¡ç†é 
- `angular/src/app/routes/team-create/team-create.component.ts`ï¼šåœ˜éšŠå»ºç«‹é 
- `angular/src/app/routes/organization-settings/organization-settings.component.ts`ï¼šçµ„ç¹”è¨­å®šé 
- `angular/src/app/routes/organization-dashboard/organization-dashboard.component.ts`ï¼šçµ„ç¹”å„€è¡¨æ¿
- `angular/src/app/routes/repository-detail/repository-detail.component.ts`ï¼šRepository è©³æƒ…é 
- `angular/src/app/routes/repository-settings/repository-settings.component.ts`ï¼šRepository è¨­å®šé 
- `angular/src/app/routes/collaborators-list/collaborators-list.component.ts`ï¼šå”ä½œè€…ç®¡ç†é 
- `angular/src/app/routes/team-access-list/team-access-list.component.ts`ï¼šåœ˜éšŠè¨ªå•ç®¡ç†é 
- `firebase.rules`ï¼šFirestore å®‰å…¨è¦å‰‡ï¼ˆaccounts å’Œ repositories é›†åˆçµæ§‹ï¼‰

### ğŸš€ åˆ†éšæ®µå¯¦æ–½è¨ˆç•«

#### Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ– (8å€‹ä»»å‹™)
**ç›®æ¨™**: æ¸…ç†é‡è¤‡æª”æ¡ˆï¼Œå»ºç«‹ç¾ä»£åŒ–åŸºç¤æ¶æ§‹
**ä»»å‹™**:
- [ ] **task-1-1**: åˆªé™¤ `app/auth/` æ•´å€‹ç›®éŒ„
- [ ] **task-1-2**: å»ºç«‹ `core/models/account-state.ts` (AccountState é¡åˆ¥)
- [ ] **task-1-3**: å»ºç«‹ `core/utils/validation.utils.ts` (ValidationUtils)
- [ ] **task-1-4**: æ›´æ–° `core/models/auth.model.ts` (å¢åŠ  Value Objects)
- [ ] **task-1-5**: æ›´æ–° `core/services/auth.service.ts` (ä½¿ç”¨ AccountState å’Œ Signals)
- [ ] **task-1-6**: ä¿®æ”¹ `LoginComponent` ä½¿ç”¨æ–°çš„ auth.service
- [ ] **task-1-7**: ä¿®æ”¹ `SignupComponent` ä½¿ç”¨æ–°çš„ auth.service
- [ ] **task-1-8**: ä¿®å¾© loading ç‹€æ…‹é‡ç½®å•é¡Œ

**é©—æ”¶æ¨™æº–**:
- AccountState é¡åˆ¥æ­£ç¢ºä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
- ValidationUtils æä¾›å®Œæ•´çš„é©—è­‰åŠŸèƒ½
- auth.service ä½¿ç”¨ AccountState å’Œ Signals
- Login/Signup çµ„ä»¶æ­£å¸¸å·¥ä½œ
- Loading ç‹€æ…‹æ­£ç¢ºé‡ç½®

#### Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ– (6å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹ç¾ä»£åŒ–æ¬Šé™ç®¡ç†ç³»çµ±
**ä»»å‹™**:
- [ ] **task-2-1**: å¯¦ä½œ `core/services/permission.service.ts` (ä½¿ç”¨ Signals)
- [ ] **task-2-2**: å¯¦ä½œ `core/guards/permission.guard.ts` (æ›¿ä»£ aclGuard)
- [ ] **task-2-3**: æ›´æ–° `core/services/organization.service.ts` (ä½¿ç”¨ Value Objects)
- [ ] **task-2-4**: ä¿®æ”¹ `role.guard.ts` ä½¿ç”¨ accounts æ¨¡å‹
- [ ] **task-2-5**: æ•´åˆ Permission åˆ°ç¾æœ‰è·¯ç”±
- [ ] **task-2-6**: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

**é©—æ”¶æ¨™æº–**:
- PermissionService æ­£ç¢ºè¨ˆç®—æ¬Šé™
- permissionGuard æ­£ç¢ºä¿è­·è·¯ç”±
- organization.service ä½¿ç”¨ Value Objects
- æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

#### Phase 3: Repository ç®¡ç†ç³»çµ± (7å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„ Repository ç®¡ç†åŠŸèƒ½
**ä»»å‹™**:
- [ ] **task-3-1**: æ›´æ–° `core/models/auth.model.ts` (å¢åŠ  Repository ç›¸é—œä»‹é¢)
- [ ] **task-3-2**: å¯¦ä½œ `core/services/repository.service.ts`
- [ ] **task-3-3**: å¯¦ä½œ `routes/repository-detail/repository-detail.component.ts`
- [ ] **task-3-4**: å¯¦ä½œ `routes/repository-settings/repository-settings.component.ts`
- [ ] **task-3-5**: å¯¦ä½œ `routes/collaborators-list/collaborators-list.component.ts`
- [ ] **task-3-6**: å¯¦ä½œ `routes/team-access-list/team-access-list.component.ts`
- [ ] **task-3-7**: æ›´æ–°è·¯ç”±æ”¯æ´ Repository ç®¡ç†

**é©—æ”¶æ¨™æº–**:
- Repository æœå‹™ CRUD æ“ä½œæ­£å¸¸
- Repository UI å…ƒä»¶åŠŸèƒ½å®Œæ•´
- å”ä½œè€…å’Œåœ˜éšŠè¨ªå•ç®¡ç†æ­£å¸¸

#### Phase 4: çµ„ç¹”/åœ˜éšŠç®¡ç† UI (6å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹ç¾ä»£åŒ– UI å…ƒä»¶
**ä»»å‹™**:
- [ ] **task-4-1**: å¯¦ä½œ `organization-detail.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-2**: å¯¦ä½œ `members-list.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-3**: å¯¦ä½œ `teams-list.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-4**: å¯¦ä½œ `team-create.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-5**: å¯¦ä½œ `organization-settings.component.ts` (ä½¿ç”¨ Control Flow + Signals)
- [ ] **task-4-6**: å¯¦ä½œ `organization-dashboard.component.ts` (ä½¿ç”¨ Control Flow + Signals)

**é©—æ”¶æ¨™æº–**:
- æ‰€æœ‰ UI å…ƒä»¶ä½¿ç”¨ Control Flow (@if, @for)
- æ¬Šé™æª¢æŸ¥èˆ‡ Signals æ•´åˆ
- çµ„ç¹”/åœ˜éšŠç®¡ç†åŠŸèƒ½å®Œæ•´

#### Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆ (5å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„è·¯ç”±ç³»çµ±
**ä»»å‹™**:
- [ ] **task-5-1**: æ›´æ–° `app.routes.ts` æ”¯æ´çµ„ç¹”/åœ˜éšŠ/Repository çµæ§‹
- [ ] **task-5-2**: æ›´æ–° `organization.routes.ts` æ•´åˆ Permission å®ˆè¡›
- [ ] **task-5-3**: å»ºç«‹å®Œæ•´çš„è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯
- [ ] **task-5-4**: æ•´åˆæ¬Šé™æ§åˆ¶åˆ°æ‰€æœ‰è·¯ç”±
- [ ] **task-5-5**: æ›´æ–°è·¯ç”±å®ˆè¡›ä½¿ç”¨ PermissionService

**é©—æ”¶æ¨™æº–**:
- è·¯ç”±çµæ§‹ç¬¦åˆ GitHub å¼è¨­è¨ˆ
- æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ¬Šé™ä¿è­·
- å°èˆªé‚è¼¯æ­£ç¢º

#### Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ (7å€‹ä»»å‹™)
**ç›®æ¨™**: å»ºç«‹å®‰å…¨çš„å¾Œç«¯è¦å‰‡å’Œå®Œæ•´æ¸¬è©¦
**ä»»å‹™**:
- [ ] **task-6-1**: å¯¦ä½œ `firebase.rules` (accounts é›†åˆè¦å‰‡)
- [ ] **task-6-2**: å¯¦ä½œ Repository å®‰å…¨è¦å‰‡
- [ ] **task-6-3**: å¯¦ä½œçµ„ç¹”/åœ˜éšŠ/æˆå“¡æ¬Šé™è¦å‰‡
- [ ] **task-6-4**: å¯¦ä½œå–®å…ƒæ¸¬è©¦ (auth.service, permission.service, organization.service)
- [ ] **task-6-5**: å¯¦ä½œæ•´åˆæ¸¬è©¦ (è·¯ç”±å®ˆè¡›, æ¬Šé™æª¢æŸ¥)
- [ ] **task-6-6**: å¯¦ä½œ E2E æ¸¬è©¦ (å®Œæ•´ç”¨æˆ¶æµç¨‹)
- [ ] **task-6-7**: é€²è¡Œå®Œæ•´åŠŸèƒ½æ¸¬è©¦å’Œé©—è­‰

**é©—æ”¶æ¨™æº–**:
- Firestore å®‰å…¨è¦å‰‡æ­£ç¢ºä¿è­·è³‡æ–™
- æ¸¬è©¦è¦†è“‹ç‡é”æ¨™
- å®Œæ•´åŠŸèƒ½æ¸¬è©¦é€šé

### ğŸ” è©³ç´°å¯¦æ–½æª¢æŸ¥é»

#### Phase 1 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 1.1**: ç¢ºèª `app/auth/` ç›®éŒ„å®Œå…¨ç§»é™¤
- [ ] **æª¢æŸ¥é» 1.2**: AccountState é¡åˆ¥æ­£ç¢ºä½¿ç”¨ Signals
- [ ] **æª¢æŸ¥é» 1.3**: ValidationUtils æä¾›å®Œæ•´é©—è­‰åŠŸèƒ½
- [ ] **æª¢æŸ¥é» 1.4**: auth.model.ts åŒ…å« Value Objects
- [ ] **æª¢æŸ¥é» 1.5**: auth.service.ts ä½¿ç”¨ AccountState å’Œ Signals
- [ ] **æª¢æŸ¥é» 1.6**: LoginComponent ä½¿ç”¨æ–°çš„ auth.service
- [ ] **æª¢æŸ¥é» 1.7**: SignupComponent ä½¿ç”¨æ–°çš„ auth.service
- [ ] **æª¢æŸ¥é» 1.8**: Loading ç‹€æ…‹æ­£ç¢ºé‡ç½®

#### Phase 2 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 2.1**: PermissionService æ­£ç¢ºè¨ˆç®—æ¬Šé™
- [ ] **æª¢æŸ¥é» 2.2**: permissionGuard æ­£ç¢ºä¿è­·è·¯ç”±
- [ ] **æª¢æŸ¥é» 2.3**: organization.service.ts ä½¿ç”¨ Value Objects
- [ ] **æª¢æŸ¥é» 2.4**: role.guard.ts ä½¿ç”¨ accounts æ¨¡å‹
- [ ] **æª¢æŸ¥é» 2.5**: Permission æ•´åˆåˆ°ç¾æœ‰è·¯ç”±
- [ ] **æª¢æŸ¥é» 2.6**: æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

#### Phase 3 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 3.1**: auth.model.ts åŒ…å« Repository ä»‹é¢
- [ ] **æª¢æŸ¥é» 3.2**: repository.service.ts åŠŸèƒ½å®Œæ•´
- [ ] **æª¢æŸ¥é» 3.3**: repository-detail.component.ts åŠŸèƒ½æ­£å¸¸
- [ ] **æª¢æŸ¥é» 3.4**: repository-settings.component.ts åŠŸèƒ½æ­£å¸¸
- [ ] **æª¢æŸ¥é» 3.5**: collaborators-list.component.ts åŠŸèƒ½æ­£å¸¸
- [ ] **æª¢æŸ¥é» 3.6**: team-access-list.component.ts åŠŸèƒ½æ­£å¸¸
- [ ] **æª¢æŸ¥é» 3.7**: è·¯ç”±æ”¯æ´ Repository ç®¡ç†

#### Phase 4 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 4.1**: organization-detail.component.ts ä½¿ç”¨ Control Flow
- [ ] **æª¢æŸ¥é» 4.2**: members-list.component.ts ä½¿ç”¨ Control Flow
- [ ] **æª¢æŸ¥é» 4.3**: teams-list.component.ts ä½¿ç”¨ Control Flow
- [ ] **æª¢æŸ¥é» 4.4**: team-create.component.ts ä½¿ç”¨ Control Flow
- [ ] **æª¢æŸ¥é» 4.5**: organization-settings.component.ts ä½¿ç”¨ Control Flow
- [ ] **æª¢æŸ¥é» 4.6**: organization-dashboard.component.ts ä½¿ç”¨ Control Flow

#### Phase 5 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 5.1**: app.routes.ts æ”¯æ´å®Œæ•´çµæ§‹
- [ ] **æª¢æŸ¥é» 5.2**: organization.routes.ts æ•´åˆ Permission å®ˆè¡›
- [ ] **æª¢æŸ¥é» 5.3**: è·¯ç”±å±¤ç´šå’Œå°èˆªé‚è¼¯æ­£ç¢º
- [ ] **æª¢æŸ¥é» 5.4**: æ¬Šé™æ§åˆ¶æ•´åˆåˆ°æ‰€æœ‰è·¯ç”±
- [ ] **æª¢æŸ¥é» 5.5**: è·¯ç”±å®ˆè¡›ä½¿ç”¨ PermissionService

#### Phase 6 æª¢æŸ¥é»
- [ ] **æª¢æŸ¥é» 6.1**: firebase.rules å®‰å…¨è¦å‰‡æ­£ç¢º
- [ ] **æª¢æŸ¥é» 6.2**: Repository å®‰å…¨è¦å‰‡æ­£ç¢º
- [ ] **æª¢æŸ¥é» 6.3**: çµ„ç¹”/åœ˜éšŠ/æˆå“¡æ¬Šé™è¦å‰‡æ­£ç¢º
- [ ] **æª¢æŸ¥é» 6.4**: å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡é”æ¨™
- [ ] **æª¢æŸ¥é» 6.5**: æ•´åˆæ¸¬è©¦é€šé
- [ ] **æª¢æŸ¥é» 6.6**: E2E æ¸¬è©¦é€šé
- [ ] **æª¢æŸ¥é» 6.7**: å®Œæ•´åŠŸèƒ½æ¸¬è©¦é€šé

### âš ï¸ é¢¨éšªè©•ä¼°èˆ‡ä¾è³´é—œä¿‚

#### é«˜é¢¨éšªé …ç›®
1. **Signals ç‹€æ…‹ç®¡ç†è¤‡é›œåŒ–**: AccountState å’Œ PermissionService ä½¿ç”¨ Signals
   - **é¢¨éšª**: ç‹€æ…‹ç®¡ç†é‚è¼¯è¤‡é›œï¼Œå¯èƒ½å°è‡´æ€§èƒ½å•é¡Œ
   - **ç·©è§£**: è©³ç´°æ¸¬è©¦å’Œæ€§èƒ½ç›£æ§

2. **Repository ç³»çµ±æ–°å¢åŠŸèƒ½**: å®Œæ•´çš„ Repository ç®¡ç†ç³»çµ±
   - **é¢¨éšª**: åŠŸèƒ½è¤‡é›œåº¦é«˜ï¼Œå¯èƒ½å½±éŸ¿ç¾æœ‰ç³»çµ±
   - **ç·©è§£**: åˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

3. **æ¬Šé™ç³»çµ±é‡æ§‹**: ACLService â†’ PermissionService
   - **é¢¨éšª**: æ¬Šé™é‚è¼¯è®Šæ›´å¯èƒ½å°è‡´å®‰å…¨å•é¡Œ
   - **ç·©è§£**: è©³ç´°æ¸¬è©¦èˆ‡å®‰å…¨è¦å‰‡é©—è­‰

4. **è·¯ç”±çµæ§‹é‡æ§‹**: å¤§é‡è·¯ç”±è®Šæ›´
   - **é¢¨éšª**: å¯èƒ½ç ´å£ç¾æœ‰å°èˆª
   - **ç·©è§£**: åˆ†éšæ®µå¯¦æ–½ï¼Œä¿æŒå‘å¾Œç›¸å®¹

#### ä¾è³´é—œä¿‚
- **Phase 1** â†’ **Phase 2**: æ ¸å¿ƒæœå‹™ä¾è³´åŸºç¤æ¸…ç†
- **Phase 2** â†’ **Phase 3**: Repository æœå‹™ä¾è³´ Permission æœå‹™
- **Phase 2** â†’ **Phase 4**: UI å…ƒä»¶ä¾è³´ Permission æœå‹™
- **Phase 3** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ Repository åŠŸèƒ½
- **Phase 4** â†’ **Phase 5**: è·¯ç”±æ•´åˆä¾è³´ UI å…ƒä»¶
- **Phase 5** â†’ **Phase 6**: æ¸¬è©¦ä¾è³´å®Œæ•´åŠŸèƒ½

#### å»ºè­°å¯¦æ–½é †åº
1. **Phase 1** (åŸºç¤æ¸…ç†) - é¢¨éšªä½ï¼Œå½±éŸ¿å°
2. **Phase 2** (æ ¸å¿ƒæœå‹™) - é¢¨éšªä¸­ï¼Œå½±éŸ¿ä¸­
3. **Phase 3** (Repository ç³»çµ±) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
4. **Phase 4** (UI å…ƒä»¶) - é¢¨éšªä¸­ï¼Œå½±éŸ¿å¤§
5. **Phase 5** (è·¯ç”±æ•´åˆ) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§
6. **Phase 6** (å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦) - é¢¨éšªé«˜ï¼Œå½±éŸ¿å¤§

### ğŸ¯ é©—æ”¶æ¨™æº–
- ç™»å…¥/è¨»å†ŠæˆåŠŸå¾Œï¼Œ`accounts/{uid}` ç”¨æˆ¶æ–‡ä»¶æ­£ç¢ºåŒæ­¥
- çµ„ç¹”/æˆå“¡/åœ˜éšŠ/Repository æŸ¥è©¢æ­£å¸¸ï¼Œè§’è‰²æª¢æŸ¥èˆ‡å®ˆè¡›å¯ç”¨
- Login/Signup loading ç‹€æ…‹åœ¨æˆåŠŸèˆ‡å¤±æ•—æ™‚æ­£ç¢ºé‡ç½®
- ç§»é™¤é‡è¤‡çš„ `app/auth/` ä»£ç¢¼ï¼Œä¸å½±éŸ¿ç¾æœ‰ UI èˆ‡è·¯ç”±
- PermissionService æ¬Šé™æ§åˆ¶æ­£ç¢ºé‹ä½œ
- Firestore å®‰å…¨è¦å‰‡ä¿è­·è³‡æ–™å®‰å…¨
- å®Œæ•´çš„ GitHub å¼çµ„ç¹”ç®¡ç†å’Œ Repository ç®¡ç†åŠŸèƒ½
- ä½¿ç”¨ Angular v20 ç¾ä»£åŒ–ç‰¹æ€§ (Signals, Control Flow)
- æ¸¬è©¦è¦†è“‹ç‡é”æ¨™ï¼ŒåŠŸèƒ½æ¸¬è©¦é€šé
`````

## File: AGENTS.md
`````markdown
# Graph Bank System - AI Agents æ“ä½œæŒ‡å—

## æ¦‚è¿°
Graph Bank System ä½¿ç”¨å¤šå€‹å°ˆé–€çš„ AI ä»£ç†ä¾†è™•ç†é–‹ç™¼éç¨‹çš„ä¸åŒéšæ®µã€‚æ¯å€‹ä»£ç†éƒ½æœ‰ç‰¹å®šçš„è§’è‰²å’Œè·è²¬ï¼Œå…±åŒæ§‹æˆä¸€å€‹å”èª¿çš„é–‹ç™¼ç³»çµ±ã€‚

> **æ³¨æ„**ï¼šæœ¬æ–‡ä»¶æä¾›è©³ç´°çš„æ“ä½œæŒ‡å—å’Œå…·é«”å¯¦ç¾ï¼ŒåŸºç¤å”è­°è«‹åƒè€ƒ `.cursorrules`

## MCP Memory Server è©³ç´°æ“ä½œæŒ‡å—

### ğŸš¨ å¼·åˆ¶è¨˜æ†¶é«”æª¢æŸ¥å”è­°

#### æ ¸å¿ƒåŸå‰‡
**æ¯å€‹ AI Agent åœ¨åŸ·è¡Œä»»ä½•å‹•ä½œä¹‹å‰ï¼Œéƒ½å¿…é ˆå…ˆæª¢æŸ¥ memory.json ä¸¦å»ºç«‹å°è©±åŸºç·šã€‚**

### ğŸ“‹ è¨˜æ†¶é«”æª¢æŸ¥æŒ‡ä»¤

#### é€šç”¨æŒ‡ä»¤
| æŒ‡ä»¤ | åŠŸèƒ½ | ä½¿ç”¨æ™‚æ©Ÿ |
|------|------|----------|
| `MEMORY.CHECK` | æª¢æŸ¥ memory.json ç‹€æ…‹ | ä»»ä½• Agent é–‹å§‹å·¥ä½œå‰ |
| `MEMORY.LOAD` | è¼‰å…¥è¨˜æ†¶é«”ä¸Šä¸‹æ–‡ | å»ºç«‹å°è©±åŸºç·šæ™‚ |
| `MEMORY.UPDATE` | æ›´æ–°è¨˜æ†¶é«”å…§å®¹ | å®Œæˆä»»å‹™å¾Œ |

#### Agent ç‰¹å®šæŒ‡ä»¤
| Agent | æŒ‡ä»¤ | æª¢æŸ¥å…§å®¹ |
|-------|------|----------|
| **INIT** | `INIT.MEMORY` | ç³»çµ±åˆå§‹åŒ–æ­·å²ã€ç’°å¢ƒé…ç½® |
| **VAN** | `VAN.MEMORY` | å°ˆæ¡ˆæ­·å²ã€æŠ€è¡“åå¥½ |
| **PLAN** | `PLAN.MEMORY` | è¦åŠƒæ­·å²ã€è³‡æºé…ç½® |
| **CREATIVE** | `CREATIVE.MEMORY` | è¨­è¨ˆæ­·å²ã€å‰µæ„åå¥½ |
| **IMPLEMENT** | `IMPLEMENT.MEMORY` | å¯¦æ–½æ­·å²ã€ä»£ç¢¼é¢¨æ ¼ |
| **REFLECT** | `REFLECT.MEMORY` | å¯©æŸ¥æ­·å²ã€æ”¹é€²è¨˜éŒ„ |
| **ARCHIVE** | `ARCHIVE.MEMORY` | æ­¸æª”æ­·å²ã€æ–‡ä»¶çµæ§‹ |
| **REPO** | `REPO.MEMORY` | å€‰åº«åˆ†ææ­·å²ã€æ–‡æª”åå¥½ |

### ğŸ”„ è¨˜æ†¶é«”æª¢æŸ¥æµç¨‹

#### æ¨™æº–æµç¨‹
```mermaid
graph TD
    Start["Agent å•Ÿå‹•"] --> Check["MEMORY.CHECK"]
    Check --> Load["MEMORY.LOAD"]
    Load --> Baseline["å»ºç«‹å°è©±åŸºç·š"]
    Baseline --> Work["é–‹å§‹ Agent å·¥ä½œ"]
    Work --> Update["MEMORY.UPDATE"]
```

#### è©³ç´°æ­¥é©Ÿ
1. **MEMORY.CHECK**
   - ä½¿ç”¨ MCP memory server è®€å– memory.json
   - é©—è­‰è¨˜æ†¶é«”çµæ§‹å®Œæ•´æ€§
   - æª¢æŸ¥è¨˜æ†¶é«”å…§å®¹æ˜¯å¦ç‚ºç©º

2. **MEMORY.LOAD**
   - æå–ç”¨æˆ¶åå¥½è¨­å®š
   - è¼‰å…¥å°ˆæ¡ˆæ­·å²è¨˜éŒ„
   - ç²å–ç›¸é—œæ±ºç­–è¨˜éŒ„
   - å»ºç«‹ Agent ç‰¹å®šä¸Šä¸‹æ–‡

3. **å»ºç«‹å°è©±åŸºç·š**
   - åŸºæ–¼è¨˜æ†¶é«”å…§å®¹å»ºç«‹å›æ‡‰åŸºç·š
   - ç¢ºä¿å›æ‡‰çš„ä¸€è‡´æ€§å’Œé€£çºŒæ€§
   - æ‡‰ç”¨ç”¨æˆ¶åå¥½å’Œå°ˆæ¡ˆä¸Šä¸‹æ–‡

4. **MEMORY.UPDATE**
   - è¨˜éŒ„ Agent å·¥ä½œçµæœ
   - æ›´æ–°å°ˆæ¡ˆæ­·å²
   - ä¿å­˜æ±ºç­–è¨˜éŒ„

### âš ï¸ é‡è¦æé†’

#### å¼·åˆ¶åŸ·è¡Œ
- **è¨˜æ†¶é«”æª¢æŸ¥æ˜¯å¼·åˆ¶çš„**ï¼Œä¸èƒ½è·³é
- å¦‚æœ memory.json ç‚ºç©ºï¼Œä½¿ç”¨é è¨­é…ç½®
- å¦‚æœè¨˜æ†¶é«”æª¢æŸ¥å¤±æ•—ï¼Œå ±å‘ŠéŒ¯èª¤ä¸¦ä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆ

#### éŒ¯èª¤è™•ç†
- å¦‚æœ MCP memory server ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°è¨˜æ†¶é«”
- å¦‚æœ memory.json æ ¼å¼éŒ¯èª¤ï¼Œä½¿ç”¨é è¨­é…ç½®
- è¨˜éŒ„æ‰€æœ‰è¨˜æ†¶é«”æª¢æŸ¥éŒ¯èª¤

#### æ•ˆèƒ½è€ƒé‡
- è¨˜æ†¶é«”æª¢æŸ¥æ‡‰è©²å¿«é€ŸåŸ·è¡Œï¼ˆ< 5ç§’ï¼‰
- ä½¿ç”¨å¿«å–æ©Ÿåˆ¶é¿å…é‡è¤‡æª¢æŸ¥
- åªåœ¨å¿…è¦æ™‚æ›´æ–°è¨˜æ†¶é«”

### ğŸ“Š è¨˜æ†¶é«”æª¢æŸ¥ç‹€æ…‹

#### æª¢æŸ¥çµæœ
- âœ… **æˆåŠŸ**ï¼šè¨˜æ†¶é«”è¼‰å…¥å®Œæˆï¼ŒåŸºç·šå»ºç«‹
- âš ï¸ **è­¦å‘Š**ï¼šè¨˜æ†¶é«”éƒ¨åˆ†è¼‰å…¥ï¼Œä½¿ç”¨é è¨­é…ç½®
- âŒ **éŒ¯èª¤**ï¼šè¨˜æ†¶é«”æª¢æŸ¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆ

#### ç‹€æ…‹å ±å‘Šç¯„ä¾‹
```
è¨˜æ†¶é«”æª¢æŸ¥ç‹€æ…‹ï¼šâœ… æˆåŠŸ
- è¼‰å…¥å¯¦é«”ï¼š15 å€‹
- è¼‰å…¥é—œä¿‚ï¼š23 å€‹
- ç”¨æˆ¶åå¥½ï¼šå·²è¼‰å…¥
- å°ˆæ¡ˆæ­·å²ï¼šå·²è¼‰å…¥
- å°è©±åŸºç·šï¼šå·²å»ºç«‹
```

### ğŸ”§ æŠ€è¡“å¯¦ç¾

#### MCP Memory Server æŒ‡ä»¤
```javascript
// æª¢æŸ¥è¨˜æ†¶é«”
await memory.read_graph()

// æœå°‹ç›¸é—œå¯¦é«”
await memory.search_nodes("VAN Agent å°ˆæ¡ˆåˆ†æ")

// æ·»åŠ æ–°è§€å¯Ÿ
await memory.add_observations({
  entityName: "VAN_Agent",
  contents: ["æˆåŠŸåˆ†æäº†æ–°å°ˆæ¡ˆçš„è¤‡é›œåº¦"]
})
```

#### è¨˜æ†¶é«”çµæ§‹é©—è­‰
```javascript
// é©—è­‰è¨˜æ†¶é«”çµæ§‹
function validateMemoryStructure(memoryData) {
  return memoryData.entities && 
         memoryData.relations &&
         Array.isArray(memoryData.entities) &&
         Array.isArray(memoryData.relations);
}
```

### ğŸ“ æœ€ä½³å¯¦è¸

1. **å§‹çµ‚æª¢æŸ¥è¨˜æ†¶é«”**ï¼šæ¯å€‹ Agent éƒ½å¿…é ˆåŸ·è¡Œè¨˜æ†¶é«”æª¢æŸ¥
2. **å»ºç«‹å°è©±åŸºç·š**ï¼šåŸºæ–¼è¨˜æ†¶é«”å…§å®¹å»ºç«‹ä¸€è‡´çš„å›æ‡‰åŸºç·š
3. **æ›´æ–°è¨˜æ†¶é«”**ï¼šå®Œæˆä»»å‹™å¾Œæ›´æ–°è¨˜æ†¶é«”å…§å®¹
4. **éŒ¯èª¤è™•ç†**ï¼šå¦¥å–„è™•ç†è¨˜æ†¶é«”æª¢æŸ¥å¤±æ•—çš„æƒ…æ³
5. **æ•ˆèƒ½å„ªåŒ–**ï¼šä½¿ç”¨å¿«å–å’Œå„ªåŒ–æ©Ÿåˆ¶

### ğŸš¨ ç·Šæ€¥æƒ…æ³

å¦‚æœè¨˜æ†¶é«”ç³»çµ±å®Œå…¨ä¸å¯ç”¨ï¼š
1. ä½¿ç”¨é è¨­é…ç½®ç¹¼çºŒå·¥ä½œ
2. è¨˜éŒ„è¨˜æ†¶é«”ç³»çµ±éŒ¯èª¤
3. åœ¨æ¢å¾©å¾Œé‡æ–°è¼‰å…¥è¨˜æ†¶é«”
4. é€šçŸ¥ç”¨æˆ¶è¨˜æ†¶é«”ç³»çµ±ç‹€æ…‹

## Graph Bank ç®¡ç†æŒ‡ä»¤

### Graph Bank æ–‡ä»¶ç®¡ç†æŒ‡ä»¤
| æŒ‡ä»¤ | åŠŸèƒ½ | ä½¿ç”¨æ™‚æ©Ÿ |
|------|------|----------|
| `GRAPH.UPDATE` | æ›´æ–° Graph Bank æ–‡ä»¶ | Agent å·¥ä½œéç¨‹ä¸­ |
| `GRAPH.SYNC` | åŒæ­¥ Graph Bank ç‹€æ…‹ | æ¨¡å¼è½‰æ›æ™‚ |
| `GRAPH.ARCHIVE` | æ­¸æª” Graph Bank å…§å®¹ | ä»»å‹™å®Œæˆå¾Œ |

### Graph Bank åŒæ­¥æµç¨‹
1. **åŸ·è¡Œ `GRAPH.SYNC`** åŒæ­¥ Graph Bank æ–‡ä»¶ç‹€æ…‹
   - æª¢æŸ¥ tasks.md ä»»å‹™ç‹€æ…‹
   - ç¶­è­· activeContext.md ç•¶å‰ç„¦é»
   - è¨˜éŒ„ progress.md é€²åº¦
   - ç¢ºä¿æ–‡ä»¶ç‹€æ…‹ä¸€è‡´æ€§

2. **å»ºç«‹å°è©±åŸºç·š**
   - åŸºæ–¼ MCP Memory å’Œ Graph Bank å…§å®¹å»ºç«‹å°è©±åŸºç·š
   - ç¢ºä¿å›æ‡‰çš„ä¸€è‡´æ€§å’Œé€£çºŒæ€§
   - è¼‰å…¥ç›¸é—œæ­·å²è¨˜æ†¶

3. **é–‹å§‹ Agent ç‰¹å®šå·¥ä½œæµç¨‹**
   - æ ¹æ“š Agent é¡å‹åŸ·è¡Œç›¸æ‡‰çš„æª¢æŸ¥æµç¨‹
   - è¼‰å…¥ Agent ç‰¹å®šçš„è¨˜æ†¶é«”å…§å®¹
   - é–‹å§‹ä¸»è¦å·¥ä½œä»»å‹™

## Agent è©³ç´°æ“ä½œæŒ‡å—

### INIT Agent (ğŸš€ ç³»çµ±åˆå§‹åŒ–ä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šç³»çµ±åˆå§‹åŒ–å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **ç³»çµ±å¥åº·æª¢æŸ¥**
   - æª¢æŸ¥ MCP Memory Server ç‹€æ…‹
   - é©—è­‰ Graph Bank æ–‡ä»¶çµæ§‹
   - æª¢æŸ¥é–‹ç™¼ç’°å¢ƒé…ç½®
   - é©—è­‰å°ˆæ¡ˆä¾è³´å®Œæ•´æ€§

2. **ç³»çµ±çµ„ä»¶åˆå§‹åŒ–**
   - åˆå§‹åŒ– MCP Memory Server é€£æ¥
   - å»ºç«‹ Graph Bank æ–‡ä»¶çµæ§‹
   - è¨­ç½®åŸºç¤ç³»çµ±ä¸Šä¸‹æ–‡
   - è¼‰å…¥æ ¸å¿ƒé…ç½®å’Œè¦å‰‡

3. **ç’°å¢ƒé©—è­‰**
   - æª¢æŸ¥ Node.js å’Œ yarn ç‰ˆæœ¬
   - é©—è­‰æ–‡ä»¶ç³»çµ±æ¬Šé™
   - æ¸¬è©¦ç¶²è·¯é€£æ¥ç‹€æ…‹
   - æª¢æŸ¥å·¥å…·å¯ç”¨æ€§

4. **ç‹€æ…‹å ±å‘Šç”Ÿæˆ**
   - ç”Ÿæˆç³»çµ±ç‹€æ…‹æ¦‚è¦½
   - æä¾›æº–å‚™å°±ç·’ç¢ºèª
   - çµ¦å‡ºä¸‹ä¸€æ­¥å»ºè­°
   - è¨˜éŒ„åˆå§‹åŒ–çµæœ

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- é–‹å§‹æ–°å°ˆæ¡ˆæ™‚
- ç³»çµ±ç’°å¢ƒç™¼ç”Ÿè®ŠåŒ–æ™‚
- é•·æ™‚é–“æœªä½¿ç”¨ç³»çµ±å¾Œé‡æ–°å•Ÿå‹•æ™‚
- é‡åˆ°ç³»çµ±éŒ¯èª¤éœ€è¦é‡æ–°åˆå§‹åŒ–æ™‚

### VAN Agent (ğŸ” å°ˆæ¡ˆåˆ†æä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šå°ˆæ¡ˆåˆ†æå¸«å’ŒæŠ€è¡“è©•ä¼°å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **å°ˆæ¡ˆçµæ§‹åˆ†æ**
   - æƒæå°ˆæ¡ˆç›®éŒ„çµæ§‹
   - è­˜åˆ¥æŠ€è¡“æ£§å’Œæ¡†æ¶
   - åˆ†æä¾è³´é—œä¿‚
   - è©•ä¼°å°ˆæ¡ˆè¦æ¨¡

2. **æŠ€è¡“æ£§è­˜åˆ¥**
   - è­˜åˆ¥å‰ç«¯æ¡†æ¶ (Angular, React, Vue ç­‰)
   - æª¢æŸ¥å¾Œç«¯æŠ€è¡“ (Node.js, Python, Java ç­‰)
   - åˆ†ææ•¸æ“šåº«æŠ€è¡“ (MongoDB, PostgreSQL ç­‰)
   - è­˜åˆ¥æ§‹å»ºå·¥å…·å’Œæ¸¬è©¦æ¡†æ¶

3. **è¤‡é›œåº¦ç¢ºå®š**
   - è©•ä¼°ä»£ç¢¼è¤‡é›œåº¦
   - åˆ†ææ¶æ§‹è¤‡é›œåº¦
   - ç¢ºå®šä»»å‹™ç´šåˆ¥ (Level 1-4)
   - å»ºç«‹å°ˆæ¡ˆä¸Šä¸‹æ–‡

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°å°ˆæ¡ˆçµæ§‹è¨˜éŒ„
   - è¨˜éŒ„æŠ€è¡“æ£§è³‡è¨Š
   - å»ºç«‹ä»»å‹™åŸºç¤æª”æ¡ˆ
   - æä¾›æ¨¡å¼è½‰æ›å»ºè­°

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- INIT æ¨¡å¼å®Œæˆå¾Œé€²è¡Œå°ˆæ¡ˆåˆ†ææ™‚
- éœ€è¦é‡æ–°è©•ä¼°å°ˆæ¡ˆç‹€æ…‹æ™‚
- å°ˆæ¡ˆçµæ§‹ç™¼ç”Ÿé‡å¤§è®ŠåŒ–æ™‚
- éœ€è¦ç¢ºå®šä»»å‹™è¤‡é›œåº¦æ™‚

### PLAN Agent (ğŸ“‹ è¦åŠƒä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šå°ˆæ¡ˆè¦åŠƒå¸«å’Œä»»å‹™åˆ†è§£å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`PLAN.MEMORY`)
   - è¼‰å…¥è¦åŠƒæ­·å²è¨˜éŒ„
   - æª¢æŸ¥è³‡æºé…ç½®åå¥½
   - ç²å–éå¾€è¦åŠƒç¶“é©—

2. **ä»»å‹™åˆ†è§£**
   - å°‡è¤‡é›œä»»å‹™åˆ†è§£ç‚ºå¯ç®¡ç†çš„å­ä»»å‹™
   - è­˜åˆ¥ä¾è³´é—œä¿‚å’Œå„ªå…ˆç´š
   - é ä¼°æ™‚é–“å’Œè³‡æºéœ€æ±‚

3. **å¯¦æ–½è¨ˆåŠƒå»ºç«‹**
   - å»ºç«‹è©³ç´°çš„å¯¦æ–½è¨ˆåŠƒ
   - å®šç¾©é‡Œç¨‹ç¢‘å’Œæª¢æŸ¥é»
   - è¦åŠƒé¢¨éšªæ‡‰å°ç­–ç•¥

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°ä»»å‹™æ¸…å–®
   - è¨˜éŒ„è¦åŠƒé€²åº¦
   - å»ºç«‹å¯¦æ–½è¨ˆåŠƒæª”æ¡ˆ

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- Level 2-4 ä»»å‹™çš„è¦åŠƒéšæ®µ
- éœ€è¦è©³ç´°å¯¦æ–½è¨ˆåŠƒæ™‚
- ä»»å‹™è¤‡é›œåº¦è¼ƒé«˜æ™‚

### CREATIVE Agent (ğŸ¨ å‰µæ„ä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šè¨­è¨ˆæ±ºç­–å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`CREATIVE.MEMORY`)
   - è¼‰å…¥è¨­è¨ˆæ­·å²è¨˜éŒ„
   - æª¢æŸ¥å‰µæ„åå¥½è¨­å®š
   - ç²å–éå¾€è¨­è¨ˆæ±ºç­–

2. **è¨­è¨ˆé¸é …æ¢ç´¢**
   - æ¢ç´¢å¤šç¨®è¨­è¨ˆé¸é …å’Œæ›¿ä»£æ–¹æ¡ˆ
   - é€²è¡ŒæŠ€è¡“é¸å‹åˆ†æ
   - è©•ä¼°å„ç¨®è§£æ±ºæ–¹æ¡ˆ

3. **è¨­è¨ˆæ±ºç­–å»ºç«‹**
   - å»ºç«‹è¨­è¨ˆæ±ºç­–æ–‡ä»¶
   - è¨˜éŒ„æ±ºç­–ç†ç”±å’Œå½±éŸ¿
   - æä¾›å‰µæ„è§£æ±ºæ–¹æ¡ˆ

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°è¨­è¨ˆæ–‡ä»¶
   - è¨˜éŒ„æ±ºç­–è¨˜éŒ„
   - å»ºç«‹å‰µæ„æª”æ¡ˆ

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- Level 3-4 ä»»å‹™çš„è¨­è¨ˆéšæ®µ
- éœ€è¦æ¢ç´¢å¤šç¨®è¨­è¨ˆé¸é …æ™‚
- é¢è‡¨è¤‡é›œæŠ€è¡“æ±ºç­–æ™‚

### IMPLEMENT Agent (âš’ï¸ å¯¦æ–½ä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šä»£ç¢¼å¯¦æ–½å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`IMPLEMENT.MEMORY`)
   - è¼‰å…¥å¯¦æ–½æ­·å²è¨˜éŒ„
   - æª¢æŸ¥ä»£ç¢¼é¢¨æ ¼åå¥½
   - ç²å–éå¾€å¯¦æ–½ç¶“é©—

2. **ä»£ç¢¼å¯¦æ–½**
   - ç³»çµ±æ€§åœ°å¯¦æ–½è¨ˆåŠƒçš„çµ„ä»¶
   - ç·¨å¯«é«˜å“è³ªçš„ä»£ç¢¼
   - éµå¾ªæœ€ä½³å¯¦è¸å’Œç·¨ç¢¼æ¨™æº–

3. **ä»£ç¢¼å„ªåŒ–**
   - é€²è¡Œä»£ç¢¼å„ªåŒ–å’Œé‡æ§‹
   - ç¢ºä¿ä»£ç¢¼å¯è®€æ€§å’Œå¯ç¶­è­·æ€§
   - é€²è¡Œä»£ç¢¼å¯©æŸ¥

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°å¯¦æ–½é€²åº¦
   - è¨˜éŒ„ä»£ç¢¼è®Šæ›´
   - å»ºç«‹å¯¦æ–½æª”æ¡ˆ

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- æ‰€æœ‰ç´šåˆ¥ä»»å‹™çš„å¯¦æ–½éšæ®µ
- éœ€è¦ç·¨å¯«æˆ–ä¿®æ”¹ä»£ç¢¼æ™‚
- é€²è¡Œä»£ç¢¼é‡æ§‹æ™‚

### REFLECT Agent (ğŸ” åæ€ä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šä»£ç¢¼å¯©æŸ¥å’Œå­¸ç¿’å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`REFLECT.MEMORY`)
   - è¼‰å…¥å¯©æŸ¥æ­·å²è¨˜éŒ„
   - æª¢æŸ¥æ”¹é€²è¨˜éŒ„
   - ç²å–éå¾€å¯©æŸ¥ç¶“é©—

2. **ä»£ç¢¼å¯©æŸ¥**
   - å¯©æŸ¥å¯¦æ–½çš„ä»£ç¢¼å“è³ª
   - è­˜åˆ¥æ”¹é€²æ©Ÿæœƒ
   - è¨˜éŒ„ç¶“é©—æ•™è¨“

3. **å„ªåŒ–å»ºè­°**
   - æä¾›å„ªåŒ–å»ºè­°
   - å»ºç«‹æ”¹é€²è¨ˆåŠƒ
   - è¨˜éŒ„å­¸ç¿’æˆæœ

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°å¯©æŸ¥çµæœ
   - è¨˜éŒ„æ”¹é€²å»ºè­°
   - å»ºç«‹åæ€æª”æ¡ˆ

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- å¯¦æ–½å®Œæˆå¾Œçš„å¯©æŸ¥éšæ®µ
- éœ€è¦ä»£ç¢¼å“è³ªè©•ä¼°æ™‚
- å­¸ç¿’å’Œæ”¹é€²æ™‚

### ARCHIVE Agent (ğŸ“ æ­¸æª”ä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šæ–‡ä»¶ç®¡ç†å°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`ARCHIVE.MEMORY`)
   - è¼‰å…¥æ­¸æª”æ­·å²è¨˜éŒ„
   - æª¢æŸ¥æ–‡ä»¶çµæ§‹åå¥½
   - ç²å–éå¾€æ­¸æª”ç¶“é©—

2. **æ–‡ä»¶æ•´ç†**
   - å»ºç«‹å…¨é¢çš„å°ˆæ¡ˆæ–‡ä»¶
   - æ•´ç†å’Œæ­¸æª”å°ˆæ¡ˆè³‡ç”¢
   - å»ºç«‹çŸ¥è­˜åº«

3. **å°ˆæ¡ˆæ­·å²ç¶­è­·**
   - ç¶­è­·å°ˆæ¡ˆæ­·å²
   - å»ºç«‹æ–‡ä»¶ç´¢å¼•
   - ç¢ºä¿çŸ¥è­˜å¯è¿½æº¯æ€§

4. **Graph Bank æ›´æ–°**
   - æ›´æ–°æ­¸æª”æ–‡ä»¶
   - å»ºç«‹çŸ¥è­˜åº«
   - å®Œæˆå°ˆæ¡ˆæ­¸æª”

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- å°ˆæ¡ˆå®Œæˆå¾Œçš„æ­¸æª”éšæ®µ
- éœ€è¦å»ºç«‹å®Œæ•´æ–‡ä»¶æ™‚
- çŸ¥è­˜è½‰ç§»æ™‚

### REPO Agent (ğŸ“š å€‰åº«åˆ†æä»£ç†) æ“ä½œæµç¨‹
**è§’è‰²**ï¼šå€‰åº«åˆ†æå’Œæ–‡æª”ç”Ÿæˆå°ˆå®¶

**è©³ç´°æ“ä½œæ­¥é©Ÿ**ï¼š
1. **MCP Memory æª¢æŸ¥** (`REPO.MEMORY`)
   - è¼‰å…¥å€‰åº«åˆ†ææ­·å²è¨˜éŒ„
   - æª¢æŸ¥æ–‡æª”ç”Ÿæˆåå¥½
   - ç²å–éå¾€åˆ†æç¶“é©—

2. **æ¨¡å¼é¸æ“‡**
   - æä¾›å…­ç¨®åˆ†ææ¨¡å¼é¸å–®
   - æ ¹æ“šéœ€æ±‚é¸æ“‡é©ç•¶æ¨¡å¼
   - é…ç½®åˆ†æåƒæ•¸

3. **å€‰åº«åˆ†æåŸ·è¡Œ**
   - ä½¿ç”¨ Repomix é€²è¡Œå€‰åº«åˆ†æ
   - ç”Ÿæˆçµæ§‹åŒ–æ–‡æª”
   - å„ªåŒ–ä»¤ç‰Œä½¿ç”¨æ•ˆç‡

4. **æ–‡æª”ç”Ÿæˆå’Œæ•´åˆ**
   - ç”Ÿæˆåˆ†æå ±å‘Š
   - æ•´åˆåˆ° Graph Bank ç³»çµ±
   - å»ºç«‹çŸ¥è­˜åº«ç´¢å¼•

**ä½¿ç”¨æ™‚æ©Ÿ**ï¼š
- æ–°å°ˆæ¡ˆæ¶æ§‹åˆ†æ
- ä»£ç¢¼å¯©æŸ¥å’Œæ€§èƒ½åˆ†æ
- æŠ€è¡“æ–‡æª”ç”Ÿæˆ
- MCP æœå‹™å™¨æ•´åˆåˆ†æ
- AI é©…å‹•çš„æ™ºèƒ½åˆ†æ

**å…­ç¨®åˆ†ææ¨¡å¼**ï¼š
- **å®Œæ•´æ¨¡å¼** (351,116 tokens) - æ·±åº¦åˆ†æï¼Œå®Œæ•´ç†è§£
- **å£“ç¸®æ¨¡å¼** (307,073 tokens) - å¿«é€Ÿå¯©æŸ¥ï¼Œä»£ç¢¼åˆ†æ
- **æºç¢¼æ¨¡å¼** (44,080 tokens) - åŠŸèƒ½é–‹ç™¼ï¼Œä»£ç¢¼ç”Ÿæˆ
- **æ¥µè‡´ç¯€çœ** (41,433 tokens) - æˆæœ¬æ•æ„Ÿï¼Œå¿«é€Ÿæ¦‚è¦½
- **MCP æ•´åˆ** (50,000 tokens) - MCP æœå‹™å™¨é…ç½®åˆ†æ
- **æ™ºèƒ½åˆ†æ** (200,000 tokens) - AI é©…å‹•çš„æ·±åº¦åˆ†æ

## ä»£ç†å”ä½œæ¨¡å¼

### é †åºå”ä½œ
```
VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE
REPO â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE
```

### ä¸¦è¡Œå”ä½œ
- å¤šå€‹ä»£ç†å¯ä»¥åŒæ™‚è™•ç†ä¸åŒçš„ä»»å‹™
- ä»£ç†é–“å¯ä»¥å…±äº«ä¸Šä¸‹æ–‡å’Œç‹€æ…‹
- æ”¯æ´å‹•æ…‹ä»»å‹™åˆ†é…

### å›é¥‹å¾ªç’°
- æ¯å€‹ä»£ç†çš„è¼¸å‡ºå¯ä»¥ä½œç‚ºå…¶ä»–ä»£ç†çš„è¼¸å…¥
- æ”¯æ´è¿­ä»£æ”¹é€²å’Œå„ªåŒ–
- ä¿æŒä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§

## ä»£ç†é…ç½®

### å·¥å…·é…ç½®
æ¯å€‹ä»£ç†éƒ½æœ‰ç‰¹å®šçš„å·¥å…·é…ç½®ï¼š
- **VAN**ï¼šCodebase Search, Read File, Terminal, List Directory, Fetch Rules
- **PLAN**ï¼šCodebase Search, Read File, Terminal, List Directory
- **CREATIVE**ï¼šCodebase Search, Read File, Terminal, List Directory, Edit File, Fetch Rules
- **IMPLEMENT**ï¼šæ‰€æœ‰å·¥å…·
- **REFLECT**ï¼šCodebase Search, Read File, Terminal, List Directory
- **ARCHIVE**ï¼šCodebase Search, Read File, Terminal, List Directory
- **REPO**ï¼šCodebase Search, Read File, Terminal, List Directory, Docker Commands, Repomix Integration

### ç’°å¢ƒè®Šæ•¸
- `NODE_OPTIONS`ï¼šNode.js è¨˜æ†¶é«”é…ç½®
- `MEMORY_FILE_PATH`ï¼šè¨˜æ†¶é«”æ–‡ä»¶è·¯å¾‘

## æœ€ä½³å¯¦è¸

### ä»£ç†é¸æ“‡
- æ ¹æ“šä»»å‹™è¤‡é›œåº¦é¸æ“‡é©ç•¶çš„ä»£ç†
- éµå¾ªå»ºè­°çš„å·¥ä½œæµç¨‹é †åº
- å¿…è¦æ™‚å¯ä»¥è·³éæŸäº›éšæ®µ

### ä¸Šä¸‹æ–‡ç®¡ç†
- ä¿æŒä»£ç†é–“çš„ä¸Šä¸‹æ–‡ä¸€è‡´æ€§
- ä½¿ç”¨ Graph Bank æ–‡ä»¶å„²å­˜ç‹€æ…‹
- å®šæœŸæ›´æ–°å’ŒåŒæ­¥ä¸Šä¸‹æ–‡

### å“è³ªæ§åˆ¶
- ä½¿ç”¨ QA åŠŸèƒ½é€²è¡ŒæŠ€è¡“é©—è­‰
- å®šæœŸé€²è¡Œä»£ç¢¼å¯©æŸ¥
- ä¿æŒä»£ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **ä»£ç†ç„¡éŸ¿æ‡‰**ï¼šæª¢æŸ¥å·¥å…·é…ç½®å’ŒæŒ‡ä»¤è¤‡è£½
2. **ä¸Šä¸‹æ–‡ä¸Ÿå¤±**ï¼šç¢ºä¿ Graph Bank æ–‡ä»¶æ­£ç¢ºæ›´æ–°
3. **å·¥å…·éŒ¯èª¤**ï¼šé©—è­‰å·¥å…·æ¬Šé™å’Œé…ç½®

### é™¤éŒ¯æŠ€å·§
- æª¢æŸ¥ä»£ç†çš„è¼¸å‡ºæ—¥èªŒ
- é©—è­‰å·¥å…·é…ç½®
- ç¢ºèªä¸Šä¸‹æ–‡ç‹€æ…‹
- ä½¿ç”¨ QA åŠŸèƒ½é€²è¡Œé©—è­‰
`````

## File: angular/src/app/core/services/auth.service.ts
`````typescript
// src/app/core/services/auth.service.ts
â‹®----
import { Injectable, inject, signal, computed, effect, DestroyRef } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { 
  Auth, 
  authState, 
  signInWithPopup, 
  signOut,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  updateProfile,
  GoogleAuthProvider,
  User as FirebaseUser
} from '@angular/fire/auth';
import {
  Firestore,
  doc,
  docData,
  collection,
  collectionData,
  query,
  where,
  setDoc,
  writeBatch,
  DocumentData
} from '@angular/fire/firestore';
import { Observable, of, switchMap, map, combineLatest, firstValueFrom } from 'rxjs';
import { 
  User, 
  Organization, 
  Account, 
  AccountState, 
  ProfileVO, 
  PermissionVO, 
  SettingsVO 
} from '../models/auth.model';
import { ValidationUtils } from '../utils/validation.utils';
â‹®----
export class AuthService
â‹®----
// ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
â‹®----
// å…¬é–‹çš„ Signals
â‹®----
// Computed Signals for organizations
â‹®----
// é€™è£¡æ‡‰è©²å¯¦ç¾çµ„ç¹”æŸ¥è©¢é‚è¼¯
// ç‚ºäº†ç°¡åŒ–ï¼Œè¿”å›ç©ºæ•¸çµ„
â‹®----
constructor()
â‹®----
// ç›£è½ Firebase Auth ç‹€æ…‹è®ŠåŒ–
â‹®----
async signInWithGoogle()
â‹®----
async signOut()
â‹®----
private getFirebaseAuthErrorMessage(error: any): string
â‹®----
// Firebase Auth éŒ¯èª¤ä»£ç¢¼å°æ‡‰çš„ä¸­æ–‡è¨Šæ¯
â‹®----
async signInWithEmailAndPassword(email: string, password: string)
â‹®----
async createUserWithEmailAndPassword(email: string, password: string, displayName?: string)
â‹®----
// å¦‚æœæä¾›äº†é¡¯ç¤ºåç¨±ï¼Œæ›´æ–°ç”¨æˆ¶è³‡æ–™
â‹®----
private async loadUserAccount(uid: string)
â‹®----
private async syncUserProfile(firebaseUser: FirebaseUser)
â‹®----
// æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å·²å­˜åœ¨
â‹®----
// å»ºç«‹æˆ–æ›´æ–° ProfileVO
â‹®----
avatar: firebaseUser.photoURL || 'avatar.jpg', // é è¨­é ­åƒ
â‹®----
// é©—è­‰ Profile
â‹®----
// å»ºç«‹æˆ–ä¿ç•™ç¾æœ‰çš„ PermissionVO
â‹®----
// å»ºç«‹æˆ–ä¿ç•™ç¾æœ‰çš„ SettingsVO
â‹®----
// æº–å‚™ç”¨æˆ¶è³‡æ–™
â‹®----
photoURL: firebaseUser.photoURL || 'avatar.jpg', // é è¨­é ­åƒ
â‹®----
// å¦‚æœæ˜¯æ–°ç”¨æˆ¶ï¼Œæ·»åŠ å‰µå»ºæ™‚é–“
â‹®----
// ä½¿ç”¨äº‹å‹™ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
â‹®----
// æ›´æ–°ç”¨æˆ¶è³‡æ–™
â‹®----
// å¦‚æœæ˜¯æ–°ç”¨æˆ¶ï¼Œå‰µå»ºé»˜èªçš„å€‹äººè¨­å®š
â‹®----
// æäº¤äº‹å‹™
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
// å›æ»¾æœ¬åœ°ç‹€æ…‹
â‹®----
// é‡æ–°æ‹‹å‡ºéŒ¯èª¤
â‹®----
// æ¬Šé™æª¢æŸ¥æ–¹æ³•
can(action: string, resource: string): boolean
â‹®----
// è§’è‰²æª¢æŸ¥æ–¹æ³•
hasRole(role: string): boolean
â‹®----
// ç²å–ç•¶å‰ç”¨æˆ¶
getCurrentUser(): User | null
â‹®----
// ç²å–ç•¶å‰çµ„ç¹”
getCurrentOrganization(): Organization | null
â‹®----
// æ›´æ–°ç”¨æˆ¶æª”æ¡ˆ
async updateUserProfile(profile: ProfileVO): Promise<void>
â‹®----
// é©—è­‰ Profile
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
// æ›´æ–°ç”¨æˆ¶è¨­å®š
async updateUserSettings(settings: SettingsVO): Promise<void>
â‹®----
// é©—è­‰ Settings
â‹®----
// æ›´æ–°æœ¬åœ°ç‹€æ…‹
â‹®----
// è¨­ç½®éŒ¯èª¤
setError(error: string)
â‹®----
// æ¸…é™¤éŒ¯èª¤
clearError()
`````

## File: .cursorrules
`````
# Graph Bank System - Cursor Rules

## å°ˆæ¡ˆæ¦‚è¿°
é€™æ˜¯ä¸€å€‹åŸºæ–¼ Cursor çš„ **Memory + Graph** è¨˜æ†¶éŠ€è¡Œç³»çµ±ï¼Œæ•´åˆ MCP Memory Server å’Œ Graph Bankï¼Œæä¾›åˆ†å±¤ä»»å‹™ç®¡ç†å’Œè‡ªå®šç¾©æ¨¡å¼æ•´åˆï¼Œç”¨æ–¼é«˜æ•ˆçš„é–‹ç™¼å·¥ä½œæµç¨‹ã€‚

## é–‹ç™¼ç’°å¢ƒ
- ä½œæ¥­ç³»çµ±ï¼šWindows 11
- åŒ…ç®¡ç†å™¨ï¼šyarn
- ç·¨è¼¯å™¨ï¼šCursor (ç‰ˆæœ¬ 0.48 æˆ–æ›´é«˜)
- AI æ¨¡å‹ï¼šClaude 4 Sonnet æˆ– Claude 4 Opus (æ¨è–¦)

## æ ¸å¿ƒæ¶æ§‹
- **åˆ†å±¤è¦å‰‡è¼‰å…¥**ï¼šåƒ…è¼‰å…¥å¿…è¦è¦å‰‡ï¼Œä½¿ç”¨å°ˆé–€çš„å»¶é²è¼‰å…¥
- **æ¼¸é€²å¼æ–‡ä»¶**ï¼šç°¡æ½”çš„æ¨¡æ¿ï¼Œéš¨ä»»å‹™è¤‡é›œåº¦æ“´å±•
- **çµ±ä¸€ä¸Šä¸‹æ–‡å‚³è¼¸**ï¼šæ¨¡å¼é–“é«˜æ•ˆçš„ä¸Šä¸‹æ–‡ä¿å­˜
- **æ¨¡å¼ç‰¹å®šè¦–è¦ºåœ°åœ–**ï¼šæ¯å€‹é–‹ç™¼éšæ®µçš„æ¸…æ™°è¦–è¦ºè¡¨ç¤º

## è‡ªå®šç¾©æ¨¡å¼
1. **INIT** (ğŸš€) - ç³»çµ±åˆå§‹åŒ–ï¼šçµ±ä¸€ç³»çµ±å¥åº·æª¢æŸ¥å’Œç’°å¢ƒé©—è­‰
2. **VAN** (ğŸ”) - å°ˆæ¡ˆåˆ†æï¼šåˆ†æå°ˆæ¡ˆçµæ§‹ä¸¦ç¢ºå®šè¤‡é›œåº¦
3. **PLAN** (ğŸ“‹) - ä»»å‹™è¦åŠƒï¼šå»ºç«‹è©³ç´°çš„å¯¦æ–½è¨ˆåŠƒ
4. **CREATIVE** (ğŸ¨) - è¨­è¨ˆæ±ºç­–ï¼šæ¢ç´¢è¤‡é›œçµ„ä»¶çš„è¨­è¨ˆé¸é …
5. **IMPLEMENT** (âš’ï¸) - ä»£ç¢¼å¯¦æ–½ï¼šç³»çµ±æ€§åœ°æ§‹å»ºè¨ˆåŠƒçš„çµ„ä»¶
6. **REFLECT** (ğŸ“) - å¯©æŸ¥ï¼šå›é¡§ä¸¦è¨˜éŒ„ç¶“é©—æ•™è¨“
7. **ARCHIVE** (ğŸ“) - æ­¸æª”ï¼šå»ºç«‹å…¨é¢çš„æ–‡ä»¶
8. **REPO** (ğŸ“š) - å€‰åº«åˆ†æï¼šå…¨é¢çš„å€‰åº«åˆ†æå’Œæ–‡æª”ç”Ÿæˆ

### å¢å¼·æ¨¡å¼é…ç½®
- **åŸºç¤é…ç½®**ï¼šä½¿ç”¨æœ¬æ–‡ä»¶çš„æ ¸å¿ƒæ¨¡å¼å®šç¾©
- **è©³ç´°é…ç½®**ï¼šåƒè€ƒ `.cursor/rules/isolation_rules/Modes/` ç›®éŒ„ä¸­çš„è©³ç´°æŒ‡ä»¤æ–‡ä»¶
- **æ“ä½œæŒ‡å—**ï¼šè©³ç´°æ­¥é©Ÿè«‹åƒè€ƒ `AGENTS.md`

> **é…ç½®é¸æ“‡**ï¼šLevel 1-2 ä»»å‹™ä½¿ç”¨åŸºç¤é…ç½®ï¼ŒLevel 3-4 ä»»å‹™å»ºè­°ä½¿ç”¨è©³ç´°é…ç½®

### è©³ç´°æ¨¡å¼è¦å‰‡æ–‡ä»¶
- `init-mode-detailed.mdc` - INIT æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `van-mode-detailed.mdc` - VAN æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `plan-mode-detailed.mdc` - PLAN æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `creative-mode-detailed.mdc` - CREATIVE æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `implement-mode-detailed.mdc` - IMPLEMENT æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `reflect-archive-mode-detailed.mdc` - REFLECT+ARCHIVE æ¨¡å¼è©³ç´°æŒ‡ä»¤
- `repo-mode-detailed.mdc` - REPO æ¨¡å¼è©³ç´°æŒ‡ä»¤

## å·¥ä½œæµç¨‹
- **Level 1 ä»»å‹™**ï¼šINIT â†’ VAN â†’ IMPLEMENT â†’ REFLECT
- **Level 2 ä»»å‹™**ï¼šINIT â†’ VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECT
- **Level 3-4 ä»»å‹™**ï¼šINIT â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE

## æ ¸å¿ƒæ–‡ä»¶
**ğŸ“ é‡è¦ï¼šæ‰€æœ‰æ ¸å¿ƒ Graph Bank æ–‡ä»¶å¿…é ˆä½æ–¼ `graph-bank/` ç›®éŒ„ä¸‹**

- `graph-bank/tasks.md`ï¼šä»»å‹™è¿½è¹¤çš„ä¸­å¤®çœŸå¯¦ä¾†æº
- `graph-bank/activeContext.md`ï¼šç¶­è­·ç•¶å‰é–‹ç™¼éšæ®µçš„ç„¦é»
- `graph-bank/progress.md`ï¼šè¿½è¹¤å¯¦æ–½ç‹€æ…‹
- `graph-bank/projectbrief.md`ï¼šå°ˆæ¡ˆç°¡ä»‹å’Œæ¦‚è¿°
- `graph-bank/productContext.md`ï¼šç”¢å“ä¸Šä¸‹æ–‡å’Œéœ€æ±‚
- `graph-bank/systemPatterns.md`ï¼šç³»çµ±æ¨¡å¼å’Œæ¶æ§‹
- `graph-bank/techContext.md`ï¼šæŠ€è¡“ä¸Šä¸‹æ–‡å’Œæ±ºç­–
- `graph-bank/creative/creative-[feature_name].md`ï¼šCREATIVE æ¨¡å¼æœŸé–“ç”Ÿæˆçš„è¨­è¨ˆæ±ºç­–æ–‡ä»¶
- `graph-bank/reflection/reflection-[task_id].md`ï¼šREFLECT æ¨¡å¼æœŸé–“å‰µå»ºçš„å¯©æŸ¥æ–‡ä»¶
- `graph-bank/archive/archive-[task_id].md`ï¼šä»»å‹™æ­¸æª”æ–‡ä»¶

## é–‹ç™¼è¦ç¯„
- ä½¿ç”¨ç¹é«”ä¸­æ–‡é€²è¡Œäº¤æµ
- éµå¾ªåˆ†å±¤è¦å‰‡è¼‰å…¥æ¶æ§‹
- ä¿æŒä»£ç¢¼çš„æ¨¡çµ„åŒ–å’Œå¯æ“´å±•æ€§
- å„ªåŒ– token ä½¿ç”¨æ•ˆç‡
- ç¢ºä¿æ¨¡å¼é–“çš„ç„¡ç¸«è½‰æ›

## MCP Memory Server åˆå§‹åŒ–å”è­°
**ğŸš¨ å¼·åˆ¶åŸ·è¡Œï¼šåœ¨åŸ·è¡Œä»»ä½• AI agent å‹•ä½œä¹‹å‰ï¼Œå¿…é ˆï¼š**

1. **æª¢æŸ¥ MCP Memory Server ç‹€æ…‹**
2. **è¼‰å…¥ MCP Memory ä¸Šä¸‹æ–‡**
3. **å»ºç«‹å°è©±åŸºç·š**

### MCP Memory Server æŒ‡ä»¤
- **MEMORY.CHECK** - æª¢æŸ¥ MCP Memory Server ç‹€æ…‹å’Œé€£æ¥
- **MEMORY.LOAD** - è¼‰å…¥ MCP Memory Server ä¸Šä¸‹æ–‡å’Œæ­·å²æ•¸æ“š
- **MEMORY.UPDATE** - æ›´æ–° MCP Memory Server è¨˜æ†¶å…§å®¹
- **MEMORY.SAVE** - å„²å­˜æ–°ä¿¡æ¯åˆ° MCP Memory Server
- **MEMORY.FIND** - èªç¾©æœç´¢è¨˜æ†¶å…§å®¹
- **MEMORY.RECALL** - åŸºæ–¼æ™‚é–“ç¯„åœå›æ†¶è¨˜æ†¶
- **MEMORY.TAG** - æŒ‰æ¨™ç±¤æª¢ç´¢è¨˜æ†¶
- **MEMORY.DELETE** - åˆªé™¤ç‰¹å®šè¨˜æ†¶
- **MEMORY.HEALTH** - æª¢æŸ¥è¨˜æ†¶ç³»çµ±å¥åº·ç‹€æ…‹
- **MEMORY.SUMMARY** - ç”Ÿæˆè¨˜æ†¶æ‘˜è¦

> **è©³ç´°æ“ä½œæŒ‡å—è«‹åƒè€ƒ `AGENTS.md`**

## Graph Bank æ–‡ä»¶ç®¡ç†å”è­°
**ğŸ“ å°ˆæ¡ˆæ–‡ä»¶ç®¡ç†ï¼šåœ¨ä»»å‹™é€²è¡Œéç¨‹ä¸­ï¼Œå¿…é ˆï¼š**

1. **æ›´æ–° Graph Bank æ–‡ä»¶**
2. **åŒæ­¥ Graph Bank ç‹€æ…‹**

> **è©³ç´°æ“ä½œæŒ‡å—è«‹åƒè€ƒ `AGENTS.md`**

## Agent æª¢æŸ¥æ™‚æ©Ÿ
- **INIT Agent**: ç³»çµ±åˆå§‹åŒ–å‰æª¢æŸ¥ MCP Memoryï¼Œåˆå§‹åŒ–å¾Œæ›´æ–° Graph Bank
- **VAN Agent**: å°ˆæ¡ˆåˆ†æå‰æª¢æŸ¥ MCP Memoryï¼Œåˆ†æå¾Œæ›´æ–° Graph Bank
- **PLAN Agent**: ä»»å‹™è¦åŠƒå‰æª¢æŸ¥ MCP Memoryï¼Œè¦åŠƒå¾Œæ›´æ–° Graph Bank
- **CREATIVE Agent**: è¨­è¨ˆæ±ºç­–å‰æª¢æŸ¥ MCP Memoryï¼Œæ±ºç­–å¾Œæ›´æ–° Graph Bank
- **IMPLEMENT Agent**: ä»£ç¢¼å¯¦æ–½å‰æª¢æŸ¥ MCP Memoryï¼Œå¯¦æ–½å¾Œæ›´æ–° Graph Bank
- **REFLECT Agent**: å¯©æŸ¥é–‹å§‹å‰æª¢æŸ¥ MCP Memoryï¼Œå®Œæˆå¾Œæ›´æ–° Graph Bank
- **ARCHIVE Agent**: æ­¸æª”é–‹å§‹å‰æª¢æŸ¥ MCP Memoryï¼Œå®Œæˆå¾Œæ›´æ–° Graph Bank

> **è©³ç´°æ“ä½œæµç¨‹è«‹åƒè€ƒ `AGENTS.md`**

## å“è³ªä¿è­‰
- åœ¨ä»»ä½•æ¨¡å¼ä¸‹è¼¸å…¥ "QA" å¯åŸ·è¡ŒæŠ€è¡“é©—è­‰
- éµå¾ªæ¼¸é€²å¼æ–‡ä»¶æ–¹æ³•
- ä¿æŒä»£ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§
- å®šæœŸé€²è¡Œä»£ç¢¼å¯©æŸ¥å’Œå„ªåŒ–
`````

## File: graph-bank/progress.md
`````markdown
# Memory Bank: Progress

## Current Progress
INIT æ¨¡å¼ - ç³»çµ±åˆå§‹åŒ–æª¢æŸ¥å®Œæˆ

## ç³»çµ±ç‹€æ…‹å ±å‘Š (æ›´æ–°æ™‚é–“ï¼š2025/10/18)

### ğŸ” ç³»çµ±çµ„ä»¶ç‹€æ…‹
- **MCP Memory Server**: âœ… READY
  - memory.json æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
  - åŒ…å«å®Œæ•´çš„å°ˆæ¡ˆè¨˜æ†¶å’Œä¸Šä¸‹æ–‡
  - èªç¾©æœç´¢åŠŸèƒ½å¯ç”¨

- **Graph Bank**: âœ… READY
  - æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
  - æ–‡ä»¶çµæ§‹ç¬¦åˆè¦ç¯„
  - ç‹€æ…‹åŒæ­¥æ­£å¸¸

- **é–‹ç™¼ç’°å¢ƒ**: âœ… READY
  - Node.js: v22.20.0
  - npm: v10.9.3
  - yarn: v1.22.22
  - TypeScript: 5.8.2

- **å°ˆæ¡ˆä¾è³´**: âœ… READY
  - Angular: 20.1.0
  - Firebase: 11.10.0
  - Angular Material: 20.1.0
  - RxJS: 7.8.0

### ğŸ“‹ å°ˆæ¡ˆç‹€æ…‹
- **ç•¶å‰éšæ®µ**: Phase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- **æ§‹å»ºç‹€æ…‹**: å¤±æ•—ï¼ˆTypeScript é¡å‹éŒ¯èª¤å’Œç¼ºå¤± Nl2brPipeï¼‰
- **æ¸¬è©¦ç‹€æ…‹**: ç„¡æ³•æ¸¬è©¦ï¼ˆæ§‹å»ºå¤±æ•—ï¼‰
- **ä»£ç¢¼å“è³ª**: éœ€è¦ä¿®å¾©æ§‹å»ºéŒ¯èª¤
- **ç’°å¢ƒç‰ˆæœ¬**: Node.js v20.19.3, npm v10.8.2, yarn v1.22.22

### ğŸš€ åˆå§‹åŒ–ä»»å‹™é€²åº¦
1. âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥
2. âœ… Graph Bank æ–‡ä»¶çµæ§‹é©—è­‰
3. âœ… é–‹ç™¼ç’°å¢ƒé…ç½®æª¢æŸ¥
4. âœ… å°ˆæ¡ˆä¾è³´é©—è­‰
5. â³ ç³»çµ±åŸºç¤ä¸Šä¸‹æ–‡å»ºç«‹
6. â³ ç³»çµ±ç‹€æ…‹å ±å‘Šç”Ÿæˆ

### âš ï¸ æ³¨æ„äº‹é …
- æ§‹å»ºå¤±æ•—ï¼šTypeScript é¡å‹éŒ¯èª¤å’Œç¼ºå¤± Nl2brPipe
- auth.service.ts ä¸­ userDoc é¡å‹å•é¡Œéœ€è¦ä¿®å¾©
- signup.component.ts ä¸­ç¼ºå¤± Nl2brPipe å°å…¥éœ€è¦è§£æ±º
- éœ€è¦ä¿®å¾©é€™äº›æ§‹å»ºéŒ¯èª¤æ‰èƒ½ç¹¼çºŒé–‹ç™¼
- å»ºè­°å®šæœŸæª¢æŸ¥ MCP Memory Server ç‹€æ…‹
- ä¿æŒ Graph Bank æ–‡ä»¶çš„åŒæ­¥æ›´æ–°

## INIT æ¨¡å¼é‡æ–°å•Ÿå‹•æ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆï¼ˆåŒ…å«å®Œæ•´çš„å°ˆæ¡ˆè¨˜æ†¶ï¼‰
- âœ… ç³»çµ±ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v20.19.3, npm v10.8.2, yarn v1.22.22)
- âœ… Angular å°ˆæ¡ˆæ§‹å»ºæ¸¬è©¦å®Œæˆï¼ˆæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š 1.14 MB > 1.00 MBï¼‰
- âœ… Graph Bank æ–‡ä»¶ç‹€æ…‹åŒæ­¥å®Œæˆ
- âœ… å°ˆæ¡ˆç•¶å‰ç‹€æ…‹ç¢ºèªï¼šPhase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- âœ… å°è©±åŸºç·šå»ºç«‹å®Œæˆï¼Œæº–å‚™é€²å…¥ä¸‹ä¸€å€‹é–‹ç™¼éšæ®µ

## INIT æ¨¡å¼é‡æ–°å•Ÿå‹•æ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆï¼ˆåŒ…å«å®Œæ•´çš„å°ˆæ¡ˆè¨˜æ†¶ï¼‰
- âœ… ç³»çµ±ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v20.19.3, npm v10.8.2, yarn v1.22.22)
- âœ… Angular å°ˆæ¡ˆæ§‹å»ºæ¸¬è©¦å®Œæˆï¼ˆæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š 1.14 MB > 1.00 MBï¼‰
- âœ… Graph Bank æ–‡ä»¶ç‹€æ…‹åŒæ­¥å®Œæˆ
- âœ… å°ˆæ¡ˆç•¶å‰ç‹€æ…‹ç¢ºèªï¼šPhase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- âœ… å°è©±åŸºç·šå»ºç«‹å®Œæˆï¼Œæº–å‚™é€²å…¥ä¸‹ä¸€å€‹é–‹ç™¼éšæ®µ

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 3: Repository ç®¡ç†ç³»çµ± (7å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-3-1: å»ºç«‹ core/services/repository.service.ts
- âœ… task-3-2: å»ºç«‹ features/repository/models/repository.model.ts
- âœ… task-3-3: å»ºç«‹ features/repository/components/repository-list.component.ts
- âœ… task-3-4: å»ºç«‹ features/repository/components/repository-detail.component.ts
- âœ… task-3-5: å»ºç«‹ features/repository/components/collaborator-management.component.ts
- âœ… task-3-6: å»ºç«‹ features/repository/routes/repository.routes.ts
- âœ… task-3-7: æ›´æ–° app.routes.ts å•Ÿç”¨ Repository è·¯ç”±

## Phase 3 å¯¦æ–½çµæœ

### âœ… å®Œæˆçš„ Repository ç®¡ç†ç³»çµ±
1. **RepositoryService**ï¼šå®Œæ•´çš„ Repository ç®¡ç†æœå‹™
2. **Repository æ¨¡å‹**ï¼šæ“´å±•çš„ Repository ç›¸é—œæ¨¡å‹
3. **Repository åˆ—è¡¨çµ„ä»¶**ï¼šRepository åˆ—è¡¨é¡¯ç¤ºå’Œç®¡ç†
4. **Repository è©³æƒ…çµ„ä»¶**ï¼šRepository è©³ç´°ä¿¡æ¯å’Œæ“ä½œ
5. **å”ä½œè€…ç®¡ç†çµ„ä»¶**ï¼šRepository å”ä½œè€…æ¬Šé™ç®¡ç†
6. **Repository è·¯ç”±**ï¼šå®Œæ•´çš„ Repository è·¯ç”±é…ç½®
7. **è·¯ç”±æ•´åˆ**ï¼šå•Ÿç”¨ Repository ç®¡ç†è·¯ç”±

### ğŸ—ï¸ æŠ€è¡“æ¶æ§‹æ”¹é€²
- **Repository ç®¡ç†**ï¼šå®Œæ•´çš„ Repository CRUD æ“ä½œ
- **å”ä½œè€…ç³»çµ±**ï¼šå¤šå±¤ç´šå”ä½œè€…æ¬Šé™ç®¡ç†
- **æ¬Šé™å®ˆè¡›**ï¼šRepository è®€å–ã€å¯«å…¥ã€ç®¡ç†æ¬Šé™æª¢æŸ¥
- **ç¾ä»£åŒ– UI**ï¼šä½¿ç”¨ Angular v20 Control Flow å’Œ Signals

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ– (6å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-2-1: å»ºç«‹ core/services/permission.service.ts
- âœ… task-2-2: å»ºç«‹ core/guards/permission.guard.ts
- âœ… task-2-3: æ›´æ–° core/services/organization.service.ts
- âœ… task-2-4: ä¿®æ”¹ features/user/auth/role.guard.ts
- âœ… task-2-5: æ›´æ–°æ‰€æœ‰è·¯ç”±ä½¿ç”¨ Permission å®ˆè¡›
- âœ… task-2-6: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

## Phase 2 å¯¦æ–½çµæœ

### âœ… å®Œæˆçš„æœå‹™ç¾ä»£åŒ–
1. **PermissionService**ï¼šä½¿ç”¨ Signals ç®¡ç†æ¬Šé™ç‹€æ…‹
2. **Permission Guards**ï¼šå®Œæ•´çš„æ¬Šé™å®ˆè¡›ç³»çµ±
3. **OrganizationService**ï¼šç¾ä»£åŒ–çµ„ç¹”ç®¡ç†æœå‹™
4. **Role Guards**ï¼šæ•´åˆ PermissionService çš„è§’è‰²å®ˆè¡›
5. **è·¯ç”±æ¬Šé™**ï¼šæ‰€æœ‰è·¯ç”±ä½¿ç”¨æ¬Šé™å®ˆè¡›
6. **Signals ç‹€æ…‹ç®¡ç†**ï¼šæ‰€æœ‰æœå‹™ä½¿ç”¨ Signals

### ğŸ—ï¸ æŠ€è¡“æ¶æ§‹æ”¹é€²
- **æ¬Šé™ç³»çµ±**ï¼šå¤šå±¤ç´šæ¬Šé™æª¢æŸ¥å’Œè§’è‰²ç®¡ç†
- **Signals ç‹€æ…‹ç®¡ç†**ï¼šéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
- **å®ˆè¡›ç³»çµ±**ï¼šå®Œæ•´çš„è·¯ç”±å®ˆè¡›å’Œæ¬Šé™æª¢æŸ¥
- **æœå‹™å±¤çµ±ä¸€**ï¼šæ‰€æœ‰æœå‹™ä½¿ç”¨ç›¸åŒçš„æ¶æ§‹æ¨¡å¼

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ– (8å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-1-1: åˆªé™¤ app/auth/ æ•´å€‹ç›®éŒ„
- âœ… task-1-2: æ›´æ–° core/models/auth.model.ts å¯¦ç¾ account.md è¨­è¨ˆ
- âœ… task-1-3: å»ºç«‹ core/utils/validation.utils.ts
- âœ… task-1-4: æ›´æ–° core/services/auth.service.ts ä½¿ç”¨ AccountState
- âœ… task-1-5: ä¿®æ”¹ features/user/auth/login.component.ts
- âœ… task-1-6: ä¿®æ”¹ features/user/auth/signup.component.ts
- âœ… task-1-7: ä¿®æ”¹ features/user/auth/role.guard.ts
- âœ… task-1-8: æ›´æ–° app.routes.ts

## Phase 1 å¯¦æ–½çµæœ

### âœ… å®Œæˆçš„ç¾ä»£åŒ–æ”¹é€²
1. **é‡è¤‡çµ„ä»¶æ¸…ç†**ï¼šæˆåŠŸåˆªé™¤ `app/auth/` ç›®éŒ„ï¼Œæ¶ˆé™¤ä»£ç¢¼é‡è¤‡
2. **æ¨¡å‹ç¾ä»£åŒ–**ï¼šå¯¦ç¾ account.md è¨­è¨ˆçš„å®Œæ•´æ¨¡å‹çµæ§‹
3. **Value Objects æ¨¡å¼**ï¼šæ·»åŠ  ProfileVO, PermissionVO, SettingsVO
4. **AccountState é¡åˆ¥**ï¼šä½¿ç”¨ Angular v20 Signals é€²è¡Œç‹€æ…‹ç®¡ç†
5. **ValidationUtils**ï¼šå»ºç«‹å®Œæ•´çš„é©—è­‰å·¥å…·é¡åˆ¥
6. **AuthService ç¾ä»£åŒ–**ï¼šä½¿ç”¨ inject() å‡½æ•¸å’Œ Signals
7. **Control Flow**ï¼šçµ„ä»¶ä½¿ç”¨ @if æ›¿ä»£ *ngIf
8. **è·¯ç”±å®ˆè¡›æ›´æ–°**ï¼šä½¿ç”¨æ–°çš„æ¬Šé™æª¢æŸ¥é‚è¼¯

### ğŸ—ï¸ æŠ€è¡“æ¶æ§‹æ”¹é€²
- **Angular v20 ç‰¹æ€§**ï¼šSignals, Control Flow, inject() å‡½æ•¸
- **GitHub å¼è¨­è¨ˆ**ï¼šçµ±ä¸€ Account æ¨¡å‹ï¼Œtype å€åˆ†ç”¨æˆ¶/çµ„ç¹”
- **æ¬Šé™ç³»çµ±**ï¼šå¤šå±¤ç´šæ¬Šé™æª¢æŸ¥å’Œè§’è‰²ç®¡ç†
- **ä»£ç¢¼å“è³ª**ï¼šæ¶ˆé™¤é‡è¤‡ï¼Œçµ±ä¸€æ¶æ§‹ï¼Œæé«˜å¯ç¶­è­·æ€§

## PLAN æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… ä½¿ç”¨ sequential-thinking åˆ†æå°ˆæ¡ˆç•¶å‰æƒ…æ³
- âœ… è­˜åˆ¥é‡è¤‡çš„èªè­‰çµ„ä»¶å’Œæœå‹™å•é¡Œ
- âœ… è©•ä¼°æ¨¡å‹ä¸ä¸€è‡´å’Œæœå‹™å±¤æ··äº‚å•é¡Œ
- âœ… åˆ¶å®š Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ–ä»»å‹™ (8å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ–ä»»å‹™ (6å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 3: Repository ç®¡ç†ç³»çµ±ä»»å‹™ (7å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 4: çµ„ç¹”/åœ˜éšŠç®¡ç† UI ä»»å‹™ (6å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆä»»å‹™ (5å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ä»»å‹™ (7å€‹ä»»å‹™)

## å°ˆæ¡ˆç•¶å‰æƒ…æ³åˆ†æçµæœ

### ğŸ” å°ˆæ¡ˆç‹€æ…‹ç¢ºèª
- âœ… **å°ˆæ¡ˆçµæ§‹**ï¼šAngular å°ˆæ¡ˆåœ¨ `angular/` å­ç›®éŒ„ä¸­
- âœ… **æ§‹å»ºç‹€æ…‹**ï¼šæ§‹å»ºæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š (1.11 MB > 1.00 MB)
- âœ… **ä¾è³´ç‹€æ…‹**ï¼šAngular 20.1.0 + Firebase 11.10.0 é…ç½®æ­£ç¢º
- âœ… **å•é¡Œè­˜åˆ¥**ï¼šç™¼ç¾å¤šå€‹é‡è¤‡å’Œæ¶æ§‹å•é¡Œ

### âš ï¸ é—œéµå•é¡Œè­˜åˆ¥
1. **é‡è¤‡çš„èªè­‰çµ„ä»¶å’Œæœå‹™**ï¼šä¸‰å€‹ä¸åŒçš„ AuthService å¯¦ç¾
2. **é‡è¤‡çš„èªè­‰çµ„ä»¶**ï¼š`app/auth/` èˆ‡ `features/user/auth/` é‡è¤‡
3. **æ¨¡å‹ä¸ä¸€è‡´**ï¼šå¤šå€‹ä¸åŒçš„æ¨¡å‹å®šç¾©
4. **æœå‹™å±¤æ¶æ§‹æ··äº‚**ï¼šå¤šå€‹ä¸åŒçš„æœå‹™å¯¦ç¾
5. **ç¼ºå°‘ account.md è¨­è¨ˆå¯¦ç¾**ï¼šæ²’æœ‰å¯¦ç¾ Value Objectsã€AccountStateã€PermissionService

### ğŸ“‹ å¯¦æ–½ä»»å‹™è¦åŠƒ
- **ç¸½ä»»å‹™æ•¸**ï¼š39å€‹ä»»å‹™
- **Phase æ•¸**ï¼š6å€‹ Phase
- **è¤‡é›œåº¦ç­‰ç´š**ï¼šLevel 4 - Complex System
- **å¯¦æ–½é †åº**ï¼šPhase 1 â†’ Phase 2 â†’ Phase 3 â†’ Phase 4 â†’ Phase 5 â†’ Phase 6

## VAN æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… account.md å®Œæ•´åˆ†æå®Œæˆ (2126 è¡Œè©³ç´°æ¶æ§‹è¨­è¨ˆ)
- âœ… GitHub å¼ account çµæ§‹è¨­è¨ˆè©•ä¼°å®Œæˆ
- âœ… Angular v20 ç¾ä»£åŒ–ç‰¹æ€§æ•´åˆåˆ†æå®Œæˆ
- âœ… æ¬Šé™å’Œè§’è‰²ç³»çµ±æ¶æ§‹åˆ†æå®Œæˆ
- âœ… Firestore é›†åˆçµæ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… å®‰å…¨è¦å‰‡å’Œæ¸¬è©¦ç­–ç•¥åˆ†æå®Œæˆ
- âœ… å¯¦ç¾è¦åŠƒå’Œå»ºè­°åˆ¶å®šå®Œæˆ

## GitHub å¼ Account çµæ§‹åˆ†æçµæœ

### ğŸ¯ æ ¸å¿ƒè¨­è¨ˆåŸå‰‡
- **çµ±ä¸€ Account æ¨¡å‹**ï¼šä½¿ç”¨ type å€åˆ† 'user' | 'organization'
- **login å”¯ä¸€è­˜åˆ¥ç¢¼**ï¼šé¡ä¼¼ GitHub çš„ username/org-slug
- **çµ±ä¸€çš„ /accounts é›†åˆ**ï¼šæ‰€æœ‰ Account å­˜å„²åœ¨åŒä¸€é›†åˆ
- **Repository æ“æœ‰è€…æ”¯æ´**ï¼šownerId + ownerType å€åˆ†å€‹äºº/çµ„ç¹”æ“æœ‰è€…

### ğŸ—ï¸ æŠ€è¡“æ¶æ§‹è©•ä¼°
- **Angular v20 ç¾ä»£åŒ–ç‰¹æ€§**ï¼šSignals, Control Flow, Standalone Components
- **Value Objects æ¨¡å¼**ï¼šProfileVO, PermissionVO, SettingsVO
- **Firestore å­é›†åˆæ¨¡å¼**ï¼šå¯¦ç¾è¤‡é›œçš„æ¬Šé™é—œä¿‚
- **æ¬Šé™å±¤ç´šè¨­è¨ˆ**ï¼šå€‹äºº â†’ çµ„ç¹” â†’ åœ˜éšŠ â†’ Repository

### ğŸ“Š è¤‡é›œåº¦è©•ä¼°
- **ç­‰ç´š**: Level 4 - Complex System
- **ç¯„åœ**: èªè­‰ç³»çµ±ã€çµ„ç¹”ç®¡ç†ã€åœ˜éšŠç®¡ç†ã€Repository ç®¡ç†ã€æ¬Šé™æ§åˆ¶
- **å½±éŸ¿æª”æ¡ˆ**: 30+ å€‹æª”æ¡ˆéœ€è¦æ–°å¢/ä¿®æ”¹/åˆªé™¤
- **ç¸½ä»»å‹™æ•¸**: 39å€‹ä»»å‹™ï¼Œ6å€‹ Phase

## INIT æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… ç³»çµ±ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v20.19.3, npm v10.8.2, yarn v1.22.22)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn install æˆåŠŸ)
- âœ… å°ˆæ¡ˆæ§‹å»ºæ¸¬è©¦å®Œæˆ (æ§‹å»ºæˆåŠŸï¼Œæœ‰é ç®—è­¦å‘Šä½†æ­£å¸¸)
- âœ… é–‹ç™¼æœå‹™å™¨å•Ÿå‹•æ¸¬è©¦å®Œæˆ
- âœ… Graph Bank æ–‡ä»¶ç‹€æ…‹åŒæ­¥å®Œæˆ

## ç³»çµ±ç‹€æ…‹å ±å‘Š
- **Node.js**: v20.19.3 âœ…
- **npm**: v10.8.2 âœ…
- **yarn**: v1.22.22 âœ…
- **Angular å°ˆæ¡ˆ**: æ§‹å»ºæˆåŠŸ âœ…
- **é–‹ç™¼æœå‹™å™¨**: å·²å•Ÿå‹• âœ…
- **ä¾è³´ç‹€æ…‹**: æ‰€æœ‰ä¾è³´å·²å®‰è£ âœ…

## Completed Tasks
- âœ… åˆ†æç¾æœ‰ Production æ–‡ä»¶çµæ§‹
- âœ… å»ºç«‹çµæ§‹åŒ–çš„ç³»çµ±æ¶æ§‹æ–‡ä»¶ (SYSTEM_ARCHITECTURE.md)
- âœ… å»ºç«‹çµæ§‹åŒ–çš„å°ˆæ¡ˆæ¨¹ç‹€çµæ§‹æ–‡ä»¶ (PROJECT_STRUCTURE.md)
- âœ… æ›´æ–° Memory Bank æ–‡ä»¶ (projectbrief.md, activeContext.md, systemPatterns.md, techContext.md)

## Pending Tasks
- â³ å»ºç«‹é–‹ç™¼æŒ‡å—å’Œæ¨™æº–
- â³ å»ºç«‹é–‹ç™¼ç’°å¢ƒè¨­å®šæŒ‡å—
- â³ å»ºç«‹ä»£ç¢¼å¯©æŸ¥æ¨™æº–
- â³ å»ºç«‹æ¸¬è©¦ç­–ç•¥æ–‡ä»¶

## Key Achievements
1. **ç³»çµ±æ¶æ§‹æ–‡ä»¶**: å°‡åŸæœ¬çš„è³‡æ–™æ¨¡å‹çµæ§‹åœ–æ“´å±•ç‚ºå®Œæ•´çš„ç³»çµ±æ¶æ§‹æ–‡ä»¶ï¼ŒåŒ…å«æŠ€è¡“æ¶æ§‹ã€å®‰å…¨è¨­è¨ˆã€æ•ˆèƒ½ç­–ç•¥ç­‰
2. **å°ˆæ¡ˆçµæ§‹æ–‡ä»¶**: å°‡åŸæœ¬çš„æª”æ¡ˆæ¨¹ç‹€åœ–é‡æ§‹ç‚ºè©³ç´°çš„å°ˆæ¡ˆçµæ§‹æ–‡ä»¶ï¼ŒåŒ…å«æ¨¡çµ„çµ„ç¹”ã€é–‹ç™¼æŒ‡å—ã€æ¸¬è©¦ç­–ç•¥ç­‰
3. **Memory Bank æ•´åˆ**: æ›´æ–°æ‰€æœ‰ç›¸é—œçš„ Memory Bank æ–‡ä»¶ï¼Œç¢ºä¿è³‡è¨Šä¸€è‡´æ€§å’Œå®Œæ•´æ€§

## Next Steps
- å®Œæˆé–‹ç™¼æŒ‡å—å’Œæ¨™æº–æ–‡ä»¶
- å»ºç«‹é–‹ç™¼ç’°å¢ƒè¨­å®šæŒ‡å—
- å»ºç«‹ä»£ç¢¼å¯©æŸ¥å’Œæ¸¬è©¦æ¨™æº–
- é€²è¡Œæœ€çµ‚çš„æ–‡ä»¶å¯©æŸ¥å’Œå„ªåŒ–
`````

## File: README.md
`````markdown
# Graph Bank System v0.8-beta

## A Message from the Creator

Hey everyone! ğŸ‘‹

When I built cursor-memory-bank, it was my personal project to solve a problem I faced daily as a software engineer. With extensive experience in the field, I knew there had to be a better way to harness AI for actual development work.

Your **2,400+ stars** and incredible feedback proved this vision resonated - but also showed me what I was really after wasn't just setup tools. **I wanted working prototypes.**

So I went back to my software engineering roots and built something that delivers on the original promise: **Three-Tier Orchestration Architecture** that uses advanced prompt engineering and specialized agents to handle all the heavy lifting - from natural language request to browser-tested application.

**What cursor-memory-bank started as my personal solution, this completes:**
- Say "implement this PRD.md" â†’ Get complete project breakdown with TaskMaster coordination
- Say "build a user management system with RBAC" â†’ Get 5-tier role hierarchy with 28 permissions
- Say "create an e-commerce platform" â†’ Get product catalog, cart, checkout, and payment integration
- Say "add real-time collaboration features" â†’ Get WebSocket implementation with conflict resolution

Drawing on my engineering experience, the new system addresses major limitations while keeping the same core vision: **AI that actually builds working software.** As we discover new challenges, we add specialized agents to keep evolving the system.

cursor-memory-bank will stay here as the foundation that made this possible. But if you want to see where my engineering journey leads, check out the evolution:

**ğŸ‘‰ [Claude Code Sub-Agent Collective](https://github.com/vanzan01/claude-code-sub-agent-collective)**

Thank you for making my personal project a success. The future is even more exciting! ğŸš€

*- vanzan*

---

A **Memory + Graph** system that integrates MCP Memory Server, Graph Bank, and Context7 for zero-cognition AI agent workflows with hierarchical task management.

```mermaid
graph TD
    Main["Graph Bank System"] --> Modes["Custom Modes"]
    Main --> Rules["Hierarchical Rule Loading"]
    Main --> Visual["Visual Process Maps"]
    Main --> Token["Token Optimization"]
    Main --> MCP["MCP Integration"]
    
    Modes --> INIT["INIT: System Initialization"]
    Modes --> VAN["VAN: Project Analysis"]
    Modes --> PLAN["PLAN: Task Planning"]
    Modes --> CREATIVE["CREATIVE: Design"]
    Modes --> IMPLEMENT["IMPLEMENT: Building"]
    Modes --> REFLECT["REFLECT: Review"]
    Modes --> ARCHIVE["ARCHIVE: Documentation"]
    
    MCP --> Memory["MCP Memory Server"]
    MCP --> Context7["Context7"]
    MCP --> GraphBank["Graph Bank"]
    
    style Main fill:#4da6ff,stroke:#0066cc,color:white
    style Modes fill:#f8d486,stroke:#e8b84d,color:black
    style Rules fill:#80ffaa,stroke:#4dbb5f,color:black
    style Visual fill:#d9b3ff,stroke:#b366ff,color:black
    style Token fill:#ff9980,stroke:#ff5533,color:black
    style MCP fill:#ff6b9d,stroke:#e91e63,color:white
    style INIT fill:#ff9f43,stroke:#ff6b35,color:white
```

> **Personal Note**: Graph Bank is my personal hobby project that I develop for my own use in coding projects. As this is a personal project, I don't maintain an issues tracker or actively collect feedback. However, if you're using these rules and encounter issues, one of the great advantages is that you can ask the Cursor AI directly to modify or update the rules to better suit your specific workflow. The system is designed to be adaptable by the AI, allowing you to customize it for your own needs without requiring external support.

## About Graph Bank

Graph Bank is a personal project that provides a structured approach to development using specialized modes for different phases of the development process. It uses a hierarchical rule loading architecture that loads only the rules needed for each phase, optimizing token usage and providing tailored guidance.

### Memory + Graph Architecture

Version 0.8-beta introduces the **Memory + Graph** architecture that integrates:

- **MCP Memory Server**: Persistent memory management with semantic search
- **Graph Bank**: Structured project documentation and task tracking
- **Context7**: Up-to-date library documentation and code examples
- **Zero-Cognition Design**: AI agents interact with complex systems using simplified commands

### Token-Optimized Architecture

Version 0.8-beta introduces significant token optimization improvements:

- **Hierarchical Rule Loading**: Only loads essential rules initially with specialized lazy-loading
- **Progressive Documentation**: Implements concise templates that scale with task complexity
- **Optimized Mode Transitions**: Preserves critical context efficiently between modes
- **Level-Specific Workflows**: Adapts documentation requirements to task complexity
- **MCP Integration**: Zero-cognition commands for Memory Server and Context7 operations

### Beyond Basic Custom Modes

While Cursor's documentation describes custom modes as primarily standalone configurations with basic prompts and tool selections, Graph Bank significantly extends this concept:

- **Graph-Based Mode Integration**: Modes are interconnected nodes in a development workflow rather than isolated tools
- **Workflow Progression**: Modes are designed to transition from one to another in a logical sequence (INIT â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE)
- **Shared Memory**: Persistent state maintained across mode transitions via Graph Bank files and MCP Memory Server
- **Adaptive Behavior**: Each mode adjusts its recommendations based on project complexity
- **Built-in QA Functions**: QA capabilities can be called from any mode for technical validation
- **Zero-Cognition MCP Integration**: Simplified commands for Memory Server and Context7 operations

This approach transforms custom modes from simple AI personalities into components of a coordinated development system with specialized phases working together.

### CREATIVE Mode and Claude's "Think" Tool

The CREATIVE mode in Graph Bank is conceptually based on Anthropic's Claude "Think" tool methodology, as described in their [engineering blog](https://www.anthropic.com/engineering/claude-think-tool). The v0.7-beta implements an optimized version with:

- Progressive documentation with tabular option comparison
- "Detail-on-demand" approach that preserves token efficiency
- Structured templates that scale with complexity level
- Efficient context preservation for implementation phases

For a detailed explanation of how Graph Bank implements these principles, see the [CREATIVE Mode and Claude's "Think" Tool](creative_mode_think_tool.md) document.

## Key Features

- **Memory + Graph Architecture**: Integrates MCP Memory Server, Graph Bank, and Context7
- **Zero-Cognition Design**: AI agents use simplified commands without understanding underlying MCP implementation
- **Hierarchical Rule Loading**: Load only the essential rules with specialized lazy-loading
- **Progressive Documentation**: Concise templates that scale with task complexity
- **Unified Context Transfer**: Efficient context preservation between modes
- **Mode-Specific Visual Maps**: Clear visual representations for each development phase
- **Level-Specific Workflows**: Adapted processes based on complexity (Levels 1-4)
- **Platform-Aware Commands**: Automatically adapts commands to your operating system
- **INIT Mode**: Unified system initialization and health checks

## Installation Instructions

### Prerequisites

- **Cursor Editor**: Version 0.48 or higher is required.
- **Custom Modes**: Feature must be enabled in Cursor (Settings â†’ Features â†’ Chat â†’ Custom modes).
<img src="assets/open_custom_modes.png" alt="Opening Custom Modes Menu"/>

- **AI Model**: Claude 4 Sonnet or Claude 4 Opus is recommended for best results, especially for CREATIVE mode's "Think" tool methodology.

### Step 1: Get the Files

Simply clone this repository into your project directory:

```
git clone https://github.com/vanzan01/cursor-memory-bank.git
```

#### Alternative (Manual)

After extracting it from the ZIP file, follow the steps below.

- Copy the `.cursor` and `custom_modes` folders to the project directory

Note: other documents are not necessary for memory bank operation, they are explanatory documents. You can copy them to a folder like `memory_bank_documents`.

### Step 2: Setting Up Custom Modes in Cursor

**This is the most critical and challenging part of the setup.** You'll need to manually create seven custom modes in Cursor and copy the instruction content from the provided files:

#### How to Add a Custom Mode in Cursor

1. Open Cursor and click on the mode selector in the chat panel
2. Select "Add custom mode"
<img src="assets/add_custom_mode.png" alt="Add Custom Mode"/>

3. In the configuration screen:
   - Enter the mode name (you can include emoji icons like ğŸš€, ğŸ”, ğŸ“‹, ğŸ¨, âš’ï¸ by copy-pasting them at the beginning of the name)
   - Select an icon from Cursor's limited predefined options
   - Add a shortcut (optional)
   - Check the required tools
   - Click on **Advanced options**
   - In the empty text box that appears at the bottom, paste the custom instruction content from the corresponding file

#### Mode Configuration

For each mode, configure as follows (If MCPs are showing, you can keep them on, they probably won't work):

1. **INIT MODE** (System Initialization)
   - **Name**: ğŸš€ INIT
   - **Tools**: Enable "Codebase Search", "Read File", "Terminal", "List Directory", "Fetch Rules"
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/init-mode-detailed.mdc`

2. **VAN MODE** (Project Analysis)
   - **Name**: ğŸ” VAN
   - **Tools**: Enable "Codebase Search", "Read File", "Terminal", "List Directory", "Fetch Rules"
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/van-mode-detailed.mdc`


<img src="assets/van_mode_1.png" height="300" style="display: inline-block;"/> <img src="assets/van_mode_2.png" height="300" style="display: inline-block;"/>

3. **PLAN MODE** (Task Planning)
   - **Name**: ğŸ“‹ PLAN
   - **Tools**: Enable "Codebase Search", "Read File", "Terminal", "List Directory"
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/plan-mode-detailed.mdc`

4. **CREATIVE MODE** (Design Decisions)
   - **Name**: ğŸ¨ CREATIVE
   - **Tools**: Enable "Codebase Search", "Read File", "Terminal", "List Directory", "Edit File", "Fetch Rules"
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/creative-mode-detailed.mdc`

5. **IMPLEMENT MODE** (Code Implementation)
   - **Name**: âš’ï¸ IMPLEMENT
   - **Tools**: Enable all tools
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/implement-mode-detailed.mdc`

6. **REFLECT & ARCHIVE MODE** (Review)
   - **Name**: ğŸ” REFLECT or ARCHIVE
   - **Tools**: Enable "Codebase Search", "Read File", "Terminal", "List Directory"
   - **Advanced options**: Paste from `.cursor/rules/isolation_rules/Modes/reflect-archive-mode-detailed.mdc`
   

> **Note**: REFLECT and ARCHIVE instructions are combined in a single file and mode to optimize for Cursor's character and custom mode limits  while maintaining functionality. Thanks to GitHub user @joshmac007 for implementing this optimization.

For additional help on setting up custom modes in Cursor, refer to the [official Cursor documentation on custom modes](https://docs.cursor.com/chat/custom-modes).

### QA Functionality

QA is not a separate custom mode but rather a set of validation functions that can be called from any mode. You can invoke QA capabilities by typing "QA" in any mode when you need to perform technical validation. This approach provides flexibility to conduct verification at any point in the development process.

## Basic Usage

1. **Start with INIT Mode**:
   - Switch to INIT mode in Cursor
   - Type "INIT" to initiate the system initialization process
   - INIT will perform system health checks and prepare the environment

2. **Follow the Workflow Based on Complexity**:
   - **Level 1 tasks**: INIT â†’ VAN â†’ IMPLEMENT
   - **Level 2 tasks**: INIT â†’ VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECT
   - **Level 3-4 tasks**: INIT â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE
   - **At any point**: Type "QA" to perform technical validation

3. **Mode-Specific Commands**:
   ```
   INIT - System initialization and health checks
   VAN - Analyze project structure and determine complexity
   PLAN - Create detailed implementation plan
   CREATIVE - Explore design options for complex components
   IMPLEMENT - Systematically build planned components
   REFLECT - Review and document lessons learned
   ARCHIVE - Create comprehensive documentation
   QA - Validate technical implementation (can be called from any mode)
   ```

4. **Starting to work with your project**:
   
After successfully installing Graph Bank...

## Core Files and Their Purposes

```mermaid
graph LR
    subgraph "Graph Bank Files"
        Tasks["tasks.md<br>Source of Truth"]
        Active["activeContext.md<br>Current Focus"]
        Progress["progress.md<br>Implementation Status"]
        Creative["creative-*.md<br>Design Decisions"]
        Reflect["reflect-*.md<br>Review Documents"]
    end
    
    style Tasks fill:#f9d77e,stroke:#d9b95c,stroke-width:3px,color:black
    style Active fill:#a8d5ff,stroke:#88b5e0,color:black
    style Progress fill:#c5e8b7,stroke:#a5c897,color:black
    style Creative fill:#f4b8c4,stroke:#d498a4,color:black
    style Reflect fill:#b3e6cc,stroke:#66c999,color:black
```

- **tasks.md**: Central source of truth for task tracking
- **activeContext.md**: Maintains focus of current development phase
- **progress.md**: Tracks implementation status
- **creative-*.md**: Design decision documents generated during CREATIVE mode
- **reflect-*.md**: Review documents created during REFLECT mode

## Troubleshooting

### Common Issues

1. **Mode not responding correctly**:
   - Verify custom instructions were copied completely (this is the most common issue)
   - Ensure the correct tools are enabled for each mode
   - Check that you've switched to the correct mode before issuing commands
   - Make sure you pasted the instructions in the "Advanced options" text box

2. **Rules not loading**:
   - Make sure the `.cursor/rules/isolation_rules/` directory is in the correct location
   - Verify file permissions allow reading the rule files

3. **Command execution issues**:
   - Ensure you're running commands from the correct directory
   - Verify platform-specific commands are being used correctly

### Ongoing Development

The Graph Bank system is actively being developed and improved. Key points to understand:

- **Work in Progress**: This is a beta version with ongoing development. Expect regular updates, optimizations, and new features.
- **Feature Optimization**: The modular architecture enables continuous refinement without breaking existing functionality.
- **Previous Version Available**: If you prefer the stability of the previous version (v0.1-legacy), you can continue using it while this version matures.
- **Architectural Benefits**: Before deciding which version to use, please read the [Graph Bank Upgrade Guide](memory_bank_upgrade_guide.md) to understand the significant benefits of the new architecture.

## Release Notes

### Version 0.8-beta - Memory + Graph Architecture

> Building upon the architectural foundations established in v0.7-beta, this release introduces the **Memory + Graph** architecture with MCP integration, unified system initialization, and enhanced workflow capabilities.

#### ğŸŒŸ Major Features

**Memory + Graph Architecture _(New)_**
- **MCP Memory Server Integration**: Persistent memory management with semantic search
- **Graph Bank Enhancement**: Structured project documentation and task tracking
- **Context7 Integration**: Up-to-date library documentation and code examples
- **Zero-Cognition Design**: AI agents interact with complex systems using simplified commands

**INIT Mode _(New)_**
- Unified system initialization and health checks
- MCP Memory Server status verification
- Graph Bank file structure validation
- Development environment configuration checks
- Project dependency integrity verification
- System component initialization
- Status report generation

**Enhanced Workflow System _(Enhanced)_**
- **New Workflow**: INIT â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE
- **Level 1 tasks**: INIT â†’ VAN â†’ IMPLEMENT
- **Level 2 tasks**: INIT â†’ VAN â†’ PLAN â†’ IMPLEMENT â†’ REFLECT
- **Level 3-4 tasks**: INIT â†’ VAN â†’ PLAN â†’ CREATIVE â†’ IMPLEMENT â†’ REFLECT â†’ ARCHIVE

#### ğŸ”„ Process Improvements

**MCP Integration Architecture**
- **Zero-Cognition Commands**: Simplified interface for Memory Server and Context7 operations
- **Command Mapping**: Abstract commands mapped to specific MCP tool calls
- **Memory Management**: Persistent cross-session memory with semantic search
- **Documentation Access**: Real-time library documentation and code examples

**Mode-Based Optimization**
- **INIT Mode**: Unified system initialization and health checks
- **VAN Mode**: Focused project analysis without system initialization overhead
- **PLAN Mode**: Complexity-appropriate planning templates
- **CREATIVE Mode**: Progressive documentation with tabular comparisons
- **IMPLEMENT Mode**: Streamlined implementation guidance
- **REFLECT Mode**: Context-aware review mechanisms
- **ARCHIVE Mode**: Efficient knowledge preservation

**Enhanced Workflow Optimization**
- **Separation of Concerns**: Clear separation between system initialization and project analysis
- **Unified Entry Point**: All workflows start with INIT mode
- **Intelligent Level Transition**: Automatic complexity assessment and workflow selection
- **Enhanced Task Tracking**: Improved Graph Bank integration and MCP Memory Server coordination

#### ğŸ“š Documentation Enhancements
- **INIT Mode Documentation**: Comprehensive system initialization guides
- **MCP Integration Guides**: Zero-cognition command references
- **Enhanced Mode Instructions**: Detailed workflows for each mode
- **Level-specific Documentation Templates**: Adapted to task complexity
- **Progressive Disclosure Model**: Efficient documentation scaling
- **Standardized Comparison Formats**: Improved design decision documentation

#### ğŸ›  Technical Improvements
- **MCP Server Integration**: Memory Server and Context7 integration
- **Command Mapping System**: Abstract to concrete command translation
- **Enhanced Rule Architecture**: Improved rule loading and management
- **Context Compression**: Optimized memory bank file management
- **Adaptive Rule Partitioning**: Targeted rule loading based on context
- **File Structure Migration**: Moved from `custom_modes/` to `.cursor/rules/isolation_rules/Modes/`

#### ğŸ”œ Upcoming Features
- Enhanced MCP Memory Server features
- Advanced Context7 integration
- Dynamic template generation based on task characteristics
- Automatic context summarization for long-running tasks
- Cross-task knowledge preservation
- Partial rule loading within specialized rule files
- Advanced MCP workflow adherence mechanisms

#### ğŸ“ Notes
- This release builds upon v0.7-beta's architectural foundation
- Introduces Memory + Graph architecture with MCP integration
- Adds INIT mode for unified system initialization
- Migrates mode files to `.cursor/rules/isolation_rules/Modes/` directory
- No manual migration required for existing installations

#### ğŸ”§ Requirements
- Requires Cursor version 0.48 or higher
- Compatible with Claude 4 Sonnet (recommended) and newer models
- Compatible with all existing Graph Bank v0.7-beta installations
- MCP Memory Server and Context7 integration (optional but recommended)

#### ğŸ“ˆ Optimization Approaches
- **MCP Integration**: Zero-cognition commands with abstract-to-concrete mapping
- **INIT Mode**: Unified system initialization and health checks
- **Memory Management**: Persistent cross-session memory with semantic search
- **Documentation Access**: Real-time library documentation and code examples
- **Rule Loading**: Hierarchical loading with core caching and specialized lazy-loading
- **Creative Phase**: Progressive documentation with tabular comparisons
- **Mode Transitions**: Unified context transfer with selective preservation
- **Graph Bank**: Differential updates and context compression

---

Released on: January 15, 2025

## Terminology Guide

### ğŸ“‹ Terminology Standards

This guide ensures consistent terminology usage throughout the Graph Bank System.

#### ğŸ”„ Graph Bank Related Terms

**Purpose**: Refer to the project's internal memory management system

**Terms**:
- **Graph Bank System** - System's English name
- **è¨˜æ†¶éŠ€è¡Œç³»çµ±** - System's Chinese name (project name)
- **Graph Bank** - Short form
- **graph-bank** - Directory name
- **Graph Bank Files** - Files within the system

**Usage Scenarios**:
- System architecture descriptions
- File titles
- Feature descriptions
- Workflow descriptions

#### âœ… Memory Related Terms

**Purpose**: Refer to MCP memory server and related functions

**Terms**:
- **memory.json** - MCP memory server file
- **MEMORY.CHECK** - MCP memory check command
- **MEMORY.LOAD** - MCP memory load command
- **MEMORY.UPDATE** - MCP memory update command
- **è¨˜æ†¶é«”åˆå§‹åŒ–å”è­°** - MCP memory initialization
- **è¨˜æ†¶é«”æª¢æŸ¥æŒ‡ä»¤** - MCP memory check
- **è¨˜æ†¶é«”ä¸Šä¸‹æ–‡è¼‰å…¥** - MCP memory context
- **MEMORY_FILE_PATH** - MCP memory configuration

**Usage Scenarios**:
- MCP memory server configuration
- Agent memory check processes
- Memory initialization protocols
- Technical implementation details

#### ğŸ”’ Unchanged Terms

**Project Names and Directories**:
- **cursor-memory-bank** - Project directory name
- **è¨˜æ†¶éŠ€è¡Œç³»çµ±** - Project's Chinese name

### ğŸ“ Usage Examples

#### âœ… Correct Usage

```markdown
# Graph Bank System - AI Agents Guide

## Overview
Graph Bank System uses specialized AI agents to handle different phases of development.

## Agent Memory Check Commands
Each Agent must perform memory checks before starting work:

### General Commands
- `MEMORY.CHECK` - Check memory.json status
- `MEMORY.LOAD` - Load memory context
- `MEMORY.UPDATE` - Update memory content
```

#### âŒ Incorrect Usage

```markdown
# Memory Bank System - AI Agents Guide  âŒ Wrong

## Overview
Memory Bank System uses specialized AI agents...  âŒ Wrong

## Agent Memory Check Commands
Each Agent must perform memory checks before starting work:

### General Commands
- `GRAPH.CHECK` - Check graph-bank status  âŒ Wrong
- `GRAPH.LOAD` - Load Graph Bank context  âŒ Wrong
```

### ğŸ” Checklist

When writing or modifying files, please check:

#### Graph Bank Terminology Check
- [ ] System name uses "Graph Bank System"
- [ ] Feature descriptions use "Graph Bank"
- [ ] File titles use correct terminology
- [ ] Workflow descriptions use correct terminology

#### Memory Terminology Check
- [ ] MCP memory server related uses "memory"
- [ ] Agent commands use "MEMORY.*"
- [ ] Memory check processes use correct terminology
- [ ] Technical implementation details use correct terminology

#### Project Name Check
- [ ] Project directory name remains "cursor-memory-bank"
- [ ] Project Chinese name remains "è¨˜æ†¶éŠ€è¡Œç³»çµ±"
- [ ] Don't confuse project name with system name

### ğŸš¨ Common Errors

#### Error 1: Confusing System Names
```markdown
âŒ Memory Bank System uses Graph Bank files
âœ… Graph Bank System uses Graph Bank files
```

#### Error 2: Confusing MCP memory and Graph Bank
```markdown
âŒ Use GRAPH.CHECK to check memory.json
âœ… Use MEMORY.CHECK to check memory.json
```

#### Error 3: Wrong Terminology Combinations
```markdown
âŒ Memory Bank uses MEMORY.CHECK commands
âœ… Graph Bank System uses MEMORY.CHECK commands
```

## Resources

- [Graph Bank Optimizations](MEMORY_BANK_OPTIMIZATIONS.md) - Detailed overview of token efficiency improvements
- [Cursor Custom Modes Documentation](https://docs.cursor.com/chat/custom-modes)
- [Graph Bank Upgrade Guide](memory_bank_upgrade_guide.md)
- [CREATIVE Mode and Claude's "Think" Tool](creative_mode_think_tool.md)
- Mode-specific instruction files in the `.cursor/rules/isolation_rules/Modes/` directory

---

*Note: This README is for v0.8-beta and subject to change as the system evolves.*
`````

## File: graph-bank/activeContext.md
`````markdown
# Memory Bank: Active Context

## Current Focus
BUILD æ¨¡å¼ - Phase 1 æ§‹å»ºéŒ¯èª¤ä¿®å¾©å®Œæˆ

### ç³»çµ±ç‹€æ…‹æ‘˜è¦ (2025/10/18)
- âœ… MCP Memory Server ç‹€æ…‹ï¼šæ­£å¸¸ï¼ŒåŒ…å«å®Œæ•´å°ˆæ¡ˆè¨˜æ†¶
- âœ… Graph Bank æ–‡ä»¶ï¼šçµæ§‹å®Œæ•´ï¼Œç‹€æ…‹åŒæ­¥æ­£å¸¸
- âœ… å°ˆæ¡ˆç‹€æ…‹ï¼šPhase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- âœ… æ§‹å»ºç‹€æ…‹ï¼šæˆåŠŸï¼ˆ1.20 MBï¼Œè¶…éé ç®—ä½†æ­£å¸¸ï¼‰
- âœ… é–‹ç™¼ç’°å¢ƒï¼šWindows 11, Node.js v20.19.3, yarn v1.22.22
- âœ… Phase 1 å®Œæˆï¼šæ‰€æœ‰æ§‹å»ºéŒ¯èª¤å·²ä¿®å¾©

## INIT æ¨¡å¼åˆå§‹åŒ–æ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆï¼ˆåŒ…å«å®Œæ•´çš„å°ˆæ¡ˆè¨˜æ†¶ï¼‰
- âœ… Graph Bank æ–‡ä»¶çµæ§‹é©—è­‰å®Œæˆï¼ˆæ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢ºï¼‰
- âœ… é–‹ç™¼ç’°å¢ƒé…ç½®æª¢æŸ¥å®Œæˆï¼ˆNode.js v22.20.0, npm v10.9.3, yarn v1.22.22ï¼‰
- âœ… å°ˆæ¡ˆä¾è³´é©—è­‰å®Œæˆï¼ˆAngular 20.1.0, Firebase 11.10.0, TypeScript 5.8.2ï¼‰
- âœ… ç³»çµ±åŸºç¤ä¸Šä¸‹æ–‡å»ºç«‹å®Œæˆ
- â³ ç³»çµ±ç‹€æ…‹å ±å‘Šç”Ÿæˆå¾…å®Œæˆ

## REPO æ¨¡å¼å£“ç¸®åˆ†ææ‘˜è¦
- âœ… å£“ç¸®æ¨¡å¼åˆ†æå®Œæˆ (158,762 tokens, 79 å€‹æ–‡ä»¶)
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æï¼šAngular 20.1.0 + Firebase 11.10.0
- âœ… æ ¸å¿ƒæœå‹™åˆ†æï¼šAuthService, PermissionService, RepositoryService
- âœ… ç¾ä»£åŒ–çµ„ä»¶æª¢æŸ¥ï¼šAngular v20 Control Flow (@if, @for)
- âœ… Signals ç‹€æ…‹ç®¡ç†é©—è­‰å®Œæˆ
- âœ… GitHub å¼æ¬Šé™ç³»çµ±æ¶æ§‹ç¢ºèª
- âœ… Repository ç®¡ç†ç³»çµ±çµ„ä»¶åˆ†æå®Œæˆ
- âœ… Dashboard çµ„ä»¶å’Œè·¯ç”±é…ç½®æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆç‹€æ…‹ï¼šPhase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- âœ… ä»£ç¢¼å“è³ªï¼šå„ªç§€ï¼Œé©åˆå¿«é€Ÿä»£ç¢¼å¯©æŸ¥
- âœ… æ§‹å»ºç‹€æ…‹ï¼šæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š (1.14 MB > 1.00 MB)
- âœ… Git ç‹€æ…‹ï¼šå·¥ä½œç›®éŒ„ä¹¾æ·¨ï¼Œç„¡æœªæäº¤è®Šæ›´
- âœ… åˆ†ææ–‡ä»¶ï¼šcompressed-analysis.md (158,762 tokens)
- âœ… å®‰å…¨æª¢æŸ¥ï¼šç„¡å¯ç–‘æ–‡ä»¶æª¢æ¸¬
- âœ… æ–‡ä»¶æ’åºï¼šæŒ‰ Git è®Šæ›´é »ç‡æ’åº
- âœ… å°ˆæ¡ˆå¥åº·åº¦è©•ä¼°ï¼š7.5/10 - å„ªç§€çš„ç¾ä»£åŒ– Angular å°ˆæ¡ˆ
- âœ… ç™¼ç¾é‡è¤‡æœå‹™å•é¡Œï¼šfeatures/user/auth/auth.service.ts èˆ‡ core/services/auth.service.ts
- âœ… æä¾›çŸ­æœŸã€ä¸­æœŸã€é•·æœŸæ”¹é€²å»ºè­°
- âœ… å»ºè­°å„ªå…ˆæ¸…ç†é‡è¤‡ä»£ç¢¼å’Œå®Œå–„é¦–é çµ„ä»¶

## PLAN æ¨¡å¼è¦åŠƒæ‘˜è¦
- âœ… Landing Page çµ„ä»¶è¦åŠƒå®Œæˆ
- âœ… ä½¿ç”¨ landing ä½œç‚ºå…¬é–‹é é¢åç¨±
- âœ… è¨­è¨ˆäº†å®Œæ•´çš„ LandingComponent æ¶æ§‹
- âœ… è¦åŠƒäº†è·¯ç”±é…ç½®ä¿®æ”¹æ–¹æ¡ˆ
- âœ… è¨­è¨ˆäº†å…¬é–‹é é¢å…§å®¹çµæ§‹ï¼ˆHero Section + Features Sectionï¼‰
- âœ… è¦åŠƒäº†èªè­‰æµç¨‹æ•´åˆ
- âœ… åˆ¶å®šäº†è©³ç´°çš„å¯¦æ–½æ­¥é©Ÿå’Œæª¢æŸ¥é»
- ğŸ’¡ è§£æ±ºæ–¹æ¡ˆï¼šå»ºç«‹ LandingComponent æ›¿ä»£ç›´æ¥è·³è½‰ç™»å…¥
- ğŸ¨ ä¿æŒèˆ‡ç¾æœ‰æ¶æ§‹ä¸€è‡´çš„ Material Design é¢¨æ ¼
- ğŸš€ æä¾›æ›´å¥½çš„ç”¨æˆ¶é«”é©—å’Œç”¢å“ä»‹ç´¹

## INIT æ¨¡å¼é‡æ–°å•Ÿå‹•æ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆï¼ˆåŒ…å«å®Œæ•´çš„å°ˆæ¡ˆè¨˜æ†¶ï¼‰
- âœ… ç³»çµ±ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v20.19.3, npm v10.8.2, yarn v1.22.22)
- âœ… Angular å°ˆæ¡ˆæ§‹å»ºæ¸¬è©¦å®Œæˆï¼ˆæˆåŠŸä½†æœ‰é ç®—è­¦å‘Š 1.14 MB > 1.00 MBï¼‰
- âœ… Graph Bank æ–‡ä»¶ç‹€æ…‹åŒæ­¥å®Œæˆ
- âœ… å°ˆæ¡ˆç•¶å‰ç‹€æ…‹ç¢ºèªï¼šPhase 3 Repository ç®¡ç†ç³»çµ±å·²å®Œæˆ
- âœ… å°è©±åŸºç·šå»ºç«‹å®Œæˆï¼Œæº–å‚™é€²å…¥ä¸‹ä¸€å€‹é–‹ç™¼éšæ®µ

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 3: Repository ç®¡ç†ç³»çµ± (7å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-3-1: å»ºç«‹ core/services/repository.service.ts
- âœ… task-3-2: å»ºç«‹ features/repository/models/repository.model.ts
- âœ… task-3-3: å»ºç«‹ features/repository/components/repository-list.component.ts
- âœ… task-3-4: å»ºç«‹ features/repository/components/repository-detail.component.ts
- âœ… task-3-5: å»ºç«‹ features/repository/components/collaborator-management.component.ts
- âœ… task-3-6: å»ºç«‹ features/repository/routes/repository.routes.ts
- âœ… task-3-7: æ›´æ–° app.routes.ts å•Ÿç”¨ Repository è·¯ç”±

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ– (6å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-2-1: å»ºç«‹ core/services/permission.service.ts
- âœ… task-2-2: å»ºç«‹ core/guards/permission.guard.ts
- âœ… task-2-3: æ›´æ–° core/services/organization.service.ts
- âœ… task-2-4: ä¿®æ”¹ features/user/auth/role.guard.ts
- âœ… task-2-5: æ›´æ–°æ‰€æœ‰è·¯ç”±ä½¿ç”¨ Permission å®ˆè¡›
- âœ… task-2-6: æ›´æ–°æ‰€æœ‰æœå‹™ä½¿ç”¨ Signals ç‹€æ…‹ç®¡ç†

## BUILD æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ– (8å€‹ä»»å‹™) å…¨éƒ¨å®Œæˆ
- âœ… task-1-1: åˆªé™¤ app/auth/ æ•´å€‹ç›®éŒ„
- âœ… task-1-2: æ›´æ–° core/models/auth.model.ts å¯¦ç¾ account.md è¨­è¨ˆ
- âœ… task-1-3: å»ºç«‹ core/utils/validation.utils.ts
- âœ… task-1-4: æ›´æ–° core/services/auth.service.ts ä½¿ç”¨ AccountState
- âœ… task-1-5: ä¿®æ”¹ features/user/auth/login.component.ts
- âœ… task-1-6: ä¿®æ”¹ features/user/auth/signup.component.ts
- âœ… task-1-7: ä¿®æ”¹ features/user/auth/role.guard.ts
- âœ… task-1-8: æ›´æ–° app.routes.ts

## PLAN æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… ä½¿ç”¨ sequential-thinking åˆ†æå°ˆæ¡ˆç•¶å‰æƒ…æ³
- âœ… è­˜åˆ¥é‡è¤‡çš„èªè­‰çµ„ä»¶å’Œæœå‹™å•é¡Œ
- âœ… è©•ä¼°æ¨¡å‹ä¸ä¸€è‡´å’Œæœå‹™å±¤æ··äº‚å•é¡Œ
- âœ… åˆ¶å®š Phase 1: åŸºç¤æ¸…ç†èˆ‡ç¾ä»£åŒ–ä»»å‹™ (8å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 2: æ ¸å¿ƒæœå‹™ç¾ä»£åŒ–ä»»å‹™ (6å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 3: Repository ç®¡ç†ç³»çµ±ä»»å‹™ (7å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 4: çµ„ç¹”/åœ˜éšŠç®¡ç† UI ä»»å‹™ (6å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 5: è·¯ç”±èˆ‡æ¬Šé™æ•´åˆä»»å‹™ (5å€‹ä»»å‹™)
- âœ… åˆ¶å®š Phase 6: å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦ä»»å‹™ (7å€‹ä»»å‹™)
- âœ… æ›´æ–° Graph Bank æ–‡ä»¶ç‹€æ…‹

## VAN æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… account.md å®Œæ•´åˆ†æå®Œæˆ (2126 è¡Œè©³ç´°æ¶æ§‹è¨­è¨ˆ)
- âœ… GitHub å¼ account çµæ§‹è¨­è¨ˆè©•ä¼°å®Œæˆ
- âœ… Angular v20 ç¾ä»£åŒ–ç‰¹æ€§æ•´åˆåˆ†æå®Œæˆ
- âœ… æ¬Šé™å’Œè§’è‰²ç³»çµ±æ¶æ§‹åˆ†æå®Œæˆ
- âœ… Firestore é›†åˆçµæ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… å®‰å…¨è¦å‰‡å’Œæ¸¬è©¦ç­–ç•¥åˆ†æå®Œæˆ
- âœ… å¯¦ç¾è¦åŠƒå’Œå»ºè­°åˆ¶å®šå®Œæˆ

## INIT æ¨¡å¼å®Œæˆæ‘˜è¦
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… ç³»çµ±ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v20.19.3, npm v10.8.2, yarn v1.22.22)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn install æˆåŠŸ)
- âœ… å°ˆæ¡ˆæ§‹å»ºæ¸¬è©¦å®Œæˆ (æ§‹å»ºæˆåŠŸï¼Œæœ‰é ç®—è­¦å‘Šä½†æ­£å¸¸)
- âœ… é–‹ç™¼æœå‹™å™¨å•Ÿå‹•æ¸¬è©¦å®Œæˆ
- âœ… Graph Bank æ–‡ä»¶ç‹€æ…‹åŒæ­¥å®Œæˆ

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- âœ… account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- âœ… GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- âœ… PLAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”å®Œæˆ
- âœ… GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- âœ… é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ
- âœ… QA æª¢æŸ¥ - åŒ…ç®¡ç†å™¨ yarn é…ç½®é©—è­‰å®Œæˆ
- âœ… QA æª¢æŸ¥ - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å®Œæˆ
- âœ… PLAN QA æª¢æŸ¥ - å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥å®Œæˆ
- âœ… PLAN ä¿®æ­£ - Phase 2 ä»»å‹™é †åºä¿®æ­£å®Œæˆ
- âœ… æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶å®Œæˆ
- âœ… æ›´æ–°ä¾è³´é—œä¿‚åœ–å®Œæˆ
- âœ… é©—è­‰ä¿®æ­£å¾Œçš„é‚è¼¯å®Œæˆ
- âœ… æº–å‚™é–‹å§‹å¯¦æ–½å®Œæˆ
- âœ… PLAN QA æœ€çµ‚æª¢æŸ¥å®Œæˆ - ä¿®æ­£å¾Œçš„å¯¦æ–½è¨ˆç•«å“è³ªå„ªç§€

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- âœ… account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- âœ… GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- âœ… PLAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”å®Œæˆ
- âœ… GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- âœ… é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ
- âœ… QA æª¢æŸ¥ - åŒ…ç®¡ç†å™¨ yarn é…ç½®é©—è­‰å®Œæˆ
- âœ… QA æª¢æŸ¥ - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å®Œæˆ
- âœ… PLAN QA æª¢æŸ¥ - å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥å®Œæˆ
- âœ… PLAN ä¿®æ­£ - Phase 2 ä»»å‹™é †åºä¿®æ­£å®Œæˆ
- âœ… æ›´æ–°å¯¦æ–½è¨ˆç•«æ–‡ä»¶å®Œæˆ
- âœ… æ›´æ–°ä¾è³´é—œä¿‚åœ–å®Œæˆ
- âœ… é©—è­‰ä¿®æ­£å¾Œçš„é‚è¼¯å®Œæˆ
- âœ… æº–å‚™é–‹å§‹å¯¦æ–½å®Œæˆ

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- âœ… account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- âœ… GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- âœ… PLAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”å®Œæˆ
- âœ… GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- âœ… é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ
- âœ… QA æª¢æŸ¥ - åŒ…ç®¡ç†å™¨ yarn é…ç½®é©—è­‰å®Œæˆ
- âœ… QA æª¢æŸ¥ - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å®Œæˆ
- âœ… PLAN QA æª¢æŸ¥ - å¯¦æ–½è¨ˆç•«å“è³ªæª¢æŸ¥å®Œæˆ
- âš ï¸ ç™¼ç¾ Phase 2 ä»»å‹™é †åºå•é¡Œï¼Œå·²æä¾›ä¿®æ­£å»ºè­°

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- âœ… account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- âœ… GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- âœ… PLAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”å®Œæˆ
- âœ… GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- âœ… é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ
- âœ… QA æª¢æŸ¥ - åŒ…ç®¡ç†å™¨ yarn é…ç½®é©—è­‰å®Œæˆ
- âœ… QA æª¢æŸ¥ - ä»»å‹™æ–‡ä»¶é‚è¼¯å’Œé †åºé©—è­‰å®Œæˆ
- âš ï¸ ç™¼ç¾ Phase 2 ä»»å‹™é †åºå•é¡Œï¼Œå·²æä¾›ä¿®æ­£å»ºè­°

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)
- âœ… account.md å®Œæ•´é–±è®€å’Œåˆ†æå®Œæˆ
- âœ… GitHub å¼ account çµæ§‹å¯¦ç¾ç­–ç•¥åˆ¶å®šå®Œæˆ
- âœ… PLAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… Context7 æŸ¥è©¢ Angular Signals å’Œ Firebase Firestore æ–‡æª”å®Œæˆ
- âœ… GitHub å¼ account æ¶æ§‹è¨­è¨ˆåˆ†æå®Œæˆ
- âœ… åˆ†éšæ®µå¯¦æ–½è¨ˆç•«åˆ¶å®šå®Œæˆ (6å€‹ Phase, 39å€‹ä»»å‹™)
- âœ… é¢¨éšªè©•ä¼°å’Œä¾è³´é—œä¿‚åˆ†æå®Œæˆ

## Status
- âœ… VAN Agent åˆå§‹åŒ–å®Œæˆ
- âœ… MCP Memory Server ç‹€æ…‹æª¢æŸ¥å®Œæˆ
- âœ… å°ˆæ¡ˆçµæ§‹åˆ†æå®Œæˆ (Angular 20.1.0 + Firebase 11.10.0)
- âœ… æŠ€è¡“æ£§è­˜åˆ¥å®Œæˆ (Angular Material, Firestore, Firebase Auth)
- âœ… è¤‡é›œåº¦è©•ä¼°å®Œæˆ (Level 4 - Complex System)
- âœ… ç’°å¢ƒé©—è­‰å®Œæˆ (Node.js v22.20.0, npm v10.9.3)
- âœ… ä¾è³´å®‰è£é©—è­‰å®Œæˆ (yarn.lock å­˜åœ¨)
- âœ… ç·¨è­¯ç’°å¢ƒé©—è­‰å®Œæˆ (TypeScript éŒ¯èª¤å·²ä¿®å¾©ï¼Œæ§‹å»ºæˆåŠŸ)
- âœ… é‡è¤‡çµ„ä»¶è­˜åˆ¥å®Œæˆ (app/auth/ èˆ‡ features/user/auth/ é‡è¤‡)
- âœ… Firebase é…ç½®åˆ†æå®Œæˆ (app.config.ts é…ç½®å®Œæ•´)
- âœ… èªè­‰ç³»çµ±åˆ†æå®Œæˆ (ä½¿ç”¨ accounts/{uid} çµ±ä¸€æ¨¡å‹)

## Implementation Results
- **å°ˆæ¡ˆé¡å‹**: Angular 20.1.0 æ‡‰ç”¨ç¨‹å¼ (angular-fire-rolekit)
- **æŠ€è¡“æ£§**: Angular + Firebase + Material Design 3
- **è¤‡é›œåº¦ç­‰ç´š**: Level 4 - Complex System (GitHub å¼æ¬Šé™ç³»çµ±é‡æ§‹)
- **ç•¶å‰ç‹€æ…‹**: æ‰€æœ‰æ ¸å¿ƒçµ„ä»¶å¯¦ä½œå®Œæˆï¼Œæ‡‰ç”¨ç¨‹å¼å¯æ­£å¸¸é‹è¡Œ
- **æ§‹å»ºç‹€æ…‹**: æˆåŠŸ (1.11 MB ç¸½å¤§å°ï¼Œé ç®—è­¦å‘Šæ­£å¸¸)
- **æœå‹™å™¨ç‹€æ…‹**: æº–å‚™é‹è¡Œ

## VAN Agent åˆ†æçµæœ

### âœ… å°ˆæ¡ˆçµæ§‹åˆ†æ
- **æ¡†æ¶ç‰ˆæœ¬**: Angular 20.1.0 (æœ€æ–°ç‰ˆæœ¬)
- **Firebase ç‰ˆæœ¬**: 11.10.0 (å®Œæ•´æœå‹™å¥—ä»¶)
- **UI æ¡†æ¶**: Angular Material 20.1.0
- **åŒ…ç®¡ç†å™¨**: yarn (yarn.lock å­˜åœ¨)
- **TypeScript**: 5.8.2 (åš´æ ¼æ¨¡å¼)

### âœ… Firebase é…ç½®å®Œæ•´æ€§
- **app.config.ts**: å®Œæ•´é…ç½®æ‰€æœ‰ Firebase æœå‹™
- **ç’°å¢ƒè®Šæ•¸**: é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒé…ç½®å®Œæ•´
- **å®‰å…¨æœå‹™**: App Check é…ç½®æ­£ç¢º
- **èªè­‰æœå‹™**: Firebase Auth æ•´åˆå®Œæ•´

### âœ… èªè­‰ç³»çµ±æ¶æ§‹
- **çµ±ä¸€æ¨¡å‹**: ä½¿ç”¨ `accounts/{uid}` è·¯å¾‘
- **GitHub å°é½Š**: Account/User/Organization æ¨¡å‹è¨­è¨ˆ
- **æ¬Šé™ç³»çµ±**: å¤šå±¤ç´šæ¬Šé™æ§åˆ¶ (å€‹äºº â†’ çµ„ç¹” â†’ åœ˜éšŠ â†’ è³‡æº)
- **è§’è‰²ç®¡ç†**: 5 ç¨®çµ„ç¹”è§’è‰² + 2 ç¨®åœ˜éšŠè§’è‰²

### âš ï¸ ç™¼ç¾çš„å•é¡Œ
1. **é‡è¤‡çš„èªè­‰çµ„ä»¶**: `app/auth/` èˆ‡ `features/user/auth/` é‡è¤‡
2. **TypeScript éŒ¯èª¤**: å·²ä¿®å¾© `data['type']` é¡å‹å•é¡Œ
3. **Loading ç‹€æ…‹**: Login/Signup çµ„ä»¶ä¸­ loading ç‹€æ…‹æœªæ­£ç¢ºé‡ç½®

### ğŸ“‹ å»ºè­°æ”¹é€²
1. æ¸…ç†é‡è¤‡çš„èªè­‰çµ„ä»¶ (`app/auth/` ç›®éŒ„)
2. ä¿®å¾© loading ç‹€æ…‹è™•ç†
3. çµ±ä¸€èªè­‰çµ„ä»¶çµæ§‹
4. æ·»åŠ éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

## Completed Components
1. âœ… ç’°å¢ƒé…ç½®æ–‡ä»¶ (environment.ts, environment.prod.ts)
2. âœ… å®‰å…¨ç®¡ç†å™¨çµ„ä»¶ (SecurityManagerComponent)
3. âœ… çµ„ç¹”è§’è‰²ç³»çµ±çµ„ä»¶ (OrganizationRolesComponent)
4. âœ… è·¯ç”±é…ç½®æ›´æ–° (github-aligned.routes.ts)
5. âœ… æ‡‰ç”¨ç¨‹å¼æ§‹å»ºå’Œå•Ÿå‹•é©—è­‰

## Next Steps
1. é€²å…¥ REFLECT æ¨¡å¼é€²è¡Œä»£ç¢¼å¯©æŸ¥
2. å„ªåŒ–å’Œæ”¹é€²å¯¦ä½œ
3. æº–å‚™ ARCHIVE æ¨¡å¼å»ºç«‹æ–‡ä»¶

## VAN åˆå§‹åŒ–æ‘˜è¦
- å¹³å°: Windows 11 (PowerShell)
- å¥—ä»¶ç®¡ç†å™¨: yarn
- å°ˆæ¡ˆæ¡†æ¶: Angular 20.1.0, Firebase 11.10.0
- è¨­å®šæª”: `angular/angular.json`ã€`angular/tsconfig*.json` é©—è­‰é€šé
- Memory Bank: çµæ§‹å®Œæ•´ (`memory-bank/` æ ¸å¿ƒæª”é½Šå…¨)
- ç›®éŒ„çµæ§‹: `angular/src/app/features/...` æ­£å¸¸
- ä¾è³´: `angular/yarn.lock` å­˜åœ¨

### GitHub Account æ¶æ§‹éª¨æ¶ï¼ˆæ–°å¢ï¼‰
- æ–°å¢ `angular/src/app/core/models/auth.model.ts`ï¼šå®šç¾© `Account`/`User`/`Organization`/`Team` èˆ‡ ACL èƒ½åŠ›
- æ–°å¢ `angular/src/app/core/services/auth.service.ts`ï¼šä»¥ `accounts/{uid}` åŒæ­¥ç”¨æˆ¶æ–‡ä»¶ï¼ˆä»¥ `login`ã€`displayName` ç­‰æ¬„ä½ï¼‰
- æ–°å¢ `angular/src/app/core/services/organization.service.ts`ï¼šçµ„ç¹”/æˆå“¡/åœ˜éšŠ CRUD èˆ‡æŸ¥è©¢
- ä¿æŒ Firebase ä»¥ `app.config.ts` ç‚ºä¸»é…ç½®ï¼ˆ`provideFirebaseApp` ç­‰ï¼‰

### account.md æ¶æ§‹åˆ†æçµæœ
**éœ€è¦è®Šæ›´çš„æª”æ¡ˆæ¸…å–®**ï¼š

#### ğŸ—‘ï¸ éœ€è¦åˆªé™¤çš„æª”æ¡ˆ
- `angular/src/app/auth/` æ•´å€‹ç›®éŒ„ï¼ˆé‡è¤‡çš„èªè­‰çµ„ä»¶ï¼‰
  - `auth.guard.ts`, `auth.service.ts`, `login.component.ts`, `role.guard.ts`, `signup.component.ts`, `unauthorized.component.ts`

#### âœï¸ éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ
- `angular/src/app/features/user/auth/login.component.ts`ï¼šæ”¹ç”¨ `core/services/auth.service`ï¼Œä¿®å¾© loading ç‹€æ…‹
- `angular/src/app/features/user/auth/signup.component.ts`ï¼šæ”¹ç”¨ `core/services/auth.service`ï¼Œä¿®å¾© loading ç‹€æ…‹
- `angular/src/app/features/user/auth/role.guard.ts`ï¼šæ”¹ç”¨ `accounts/{uid}` è·¯å¾‘èˆ‡æ–°æ¨¡å‹
- `angular/src/app/features/user/auth/auth.service.ts`ï¼šæ¨™è¨˜ç‚º deprecated æˆ–ç§»é™¤
- `angular/src/app/app.routes.ts`ï¼šæ›´æ–°è·¯ç”±ä»¥æ”¯æ´çµ„ç¹”/åœ˜éšŠçµæ§‹
- `angular/src/app/features/organization/routes/organization.routes.ts`ï¼šæ•´åˆ ACL å®ˆè¡›

#### â• éœ€è¦æ–°å¢çš„æª”æ¡ˆ
- `angular/src/app/core/services/acl.service.ts`ï¼šACL æ¬Šé™æ§åˆ¶æ ¸å¿ƒ
- `angular/src/app/core/guards/acl.guard.ts`ï¼šACL è·¯ç”±å®ˆè¡›
- `angular/src/app/routes/organization-detail/organization-detail.component.ts`ï¼šçµ„ç¹”è©³æƒ…é 
- `angular/src/app/routes/members-list/members-list.component.ts`ï¼šæˆå“¡ç®¡ç†é 
- `angular/src/app/routes/teams-list/teams-list.component.ts`ï¼šåœ˜éšŠç®¡ç†é 
- `angular/src/app/routes/team-create/team-create.component.ts`ï¼šåœ˜éšŠå»ºç«‹é 
- `angular/src/app/routes/organization-settings/organization-settings.component.ts`ï¼šçµ„ç¹”è¨­å®šé 
- `firebase.rules`ï¼šFirestore å®‰å…¨è¦å‰‡ï¼ˆaccounts é›†åˆçµæ§‹ï¼‰

### è¤‡é›œåº¦è©•ä¼°
- ç­‰ç´š: Level 4 - Complex Systemï¼ˆå®Œæ•´ GitHub å¼æ¬Šé™ç³»çµ±é‡æ§‹ï¼‰
- ç¯„åœ: èªè­‰ç³»çµ±ã€çµ„ç¹”ç®¡ç†ã€åœ˜éšŠç®¡ç†ã€ACL æ¬Šé™æ§åˆ¶ã€UI å…ƒä»¶ã€è·¯ç”±é‡æ§‹

### ä¸‹ä¸€æ­¥
- å»ºè­°åˆ‡æ›è‡³ PLAN æ¨¡å¼ï¼Œåˆ¶å®šåˆ†éšæ®µå¯¦æ–½è¨ˆç•«ï¼š
  - Phase 1: æ¸…ç†é‡è¤‡æª”æ¡ˆï¼Œçµ±ä¸€èªè­‰æœå‹™
  - Phase 2: å¯¦ä½œ ACL æœå‹™èˆ‡å®ˆè¡›
  - Phase 3: å»ºç«‹çµ„ç¹”/åœ˜éšŠç®¡ç† UI
  - Phase 4: æ•´åˆè·¯ç”±èˆ‡æ¬Šé™æ§åˆ¶
  - Phase 5: Firestore å®‰å…¨è¦å‰‡èˆ‡æ¸¬è©¦
`````
