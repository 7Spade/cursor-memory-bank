---
description: Detailed REPO mode instructions for comprehensive repository analysis and documentation generation
globs: repo-mode-detailed.mdc
alwaysApply: false
---

# REPO MODE - è©³ç´°æŒ‡ä»¤

> **TL;DR:** æ­¤æ–‡ä»¶æä¾›è©³ç´°çš„ REPO æ¨¡å¼æŒ‡ä»¤ï¼Œç”¨æ–¼å…¨é¢çš„å€‰åº«åˆ†æå’Œæ–‡æª”ç”Ÿæˆï¼ŒåŒ…å«å…­ç¨®ä¸åŒçš„è¼¸å‡ºæ¨¡å¼ä»¥æ»¿è¶³å„ç¨®åˆ†æéœ€æ±‚ã€‚

## ğŸ”§ REPO MODE æŠ€è¡“æ¶æ§‹

### Docker ç›´æ¥æ•´åˆ
REPO æ¨¡å¼ä½¿ç”¨ **Docker** ç›´æ¥åŸ·è¡Œ repomix å®¹å™¨ï¼Œæä¾›æ›´ç©©å®šå’Œé«˜æ•ˆçš„åˆ†æé«”é©—ï¼š

```bash
# åŸºæœ¬ Docker å‘½ä»¤æ ¼å¼
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix [é¸é …]
```

### Docker åŠŸèƒ½
- **æœ¬åœ°ä»£ç¢¼åˆ†æ**: ç›´æ¥æ›è¼‰ç•¶å‰ç›®éŒ„é€²è¡Œåˆ†æ
- **é ç¨‹å€‰åº«åˆ†æ**: æ”¯æ´ GitHub å€‰åº« URL åˆ†æ
- **å¤šç¨®è¼¸å‡ºæ ¼å¼**: Markdown, JSON, XML, Plain Text
- **å£“ç¸®é¸é …**: Tree-sitter å£“ç¸®æ¸›å°‘ token ä½¿ç”¨
- **è‡ªå®šç¾©åŒ…å«**: ç²¾ç¢ºæ§åˆ¶åˆ†æç¯„åœ
- **å®‰å…¨æª¢æŸ¥**: è‡ªå‹•æª¢æ¸¬å¯ç–‘æ–‡ä»¶

## ğŸš€ REPO MODE å•Ÿå‹•

**é‡è¦ï¼š** REPO æ¨¡å¼ä½¿ç”¨ **Docker** ç›´æ¥åŸ·è¡Œ repomix å®¹å™¨é€²è¡Œå€‰åº«åˆ†æï¼Œç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§å’Œç©©å®šæ€§ã€‚

ç•¶æ‚¨è¼¸å…¥ `repo` æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•é¡¯ç¤ºæ¨¡å¼é¸æ“‡é¸å–®ï¼š

```
ğŸ” REPO MODE - å€‰åº«åˆ†ææ¨¡å¼é¸æ“‡
=====================================

è«‹é¸æ“‡åˆ†ææ¨¡å¼ï¼š

1ï¸âƒ£  [å®Œæ•´æ¨¡å¼] - æ·±åº¦åˆ†æï¼Œå®Œæ•´ç†è§£ (351,116 tokens)
2ï¸âƒ£  [å£“ç¸®æ¨¡å¼] - å¿«é€Ÿå¯©æŸ¥ï¼Œä»£ç¢¼åˆ†æ (307,073 tokens)  
3ï¸âƒ£  [æºç¢¼æ¨¡å¼] - åŠŸèƒ½é–‹ç™¼ï¼Œä»£ç¢¼ç”Ÿæˆ (44,080 tokens)
4ï¸âƒ£  [æ¥µè‡´ç¯€çœ] - æˆæœ¬æ•æ„Ÿï¼Œå¿«é€Ÿæ¦‚è¦½ (41,433 tokens)
5ï¸âƒ£  [MCP æ•´åˆæ¨¡å¼] - èˆ‡ MCP æœå‹™å™¨æ•´åˆåˆ†æ (50,000 tokens)
6ï¸âƒ£  [æ™ºèƒ½åˆ†ææ¨¡å¼] - AI é©…å‹•çš„æ·±åº¦åˆ†æ (200,000 tokens)

ğŸ’¡ æç¤ºï¼šè¼¸å…¥å°æ‡‰æ•¸å­— (1-6) æˆ–æ¨¡å¼åç¨±ä¾†é¸æ“‡
```

## ğŸ“Š å…­ç¨®æ¨¡å¼ç¶œåˆå°æ¯”

> **æ³¨æ„ï¼š** æ‰€æœ‰æ¨¡å¼éƒ½ä½¿ç”¨ Docker ç›´æ¥åŸ·è¡Œï¼Œç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§å’Œç©©å®šæ€§ã€‚

| æ¨¡å¼ | Token | æ–‡ä»¶æ•¸ | é©ç”¨å ´æ™¯ | Docker å‘½ä»¤ |
|------|-------|--------|----------|-------------|
| **å®Œæ•´æ¨¡å¼** | 351,116 | 147 | æ–°å°ˆæ¡ˆæ¶æ§‹åˆ†æã€å®Œæ•´ä»£ç¢¼å¯©æŸ¥ | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style markdown --top-files-len 20 --output complete-analysis.md` |
| **å£“ç¸®æ¨¡å¼** | 307,073 | 147 | å¿«é€Ÿä»£ç¢¼å¯©æŸ¥ã€æ€§èƒ½ç“¶é ¸åˆ†æ | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --style markdown --top-files-len 10 --output compressed-analysis.md` |
| **æºç¢¼æ¨¡å¼** | 44,080 | 5 | æ–°åŠŸèƒ½é–‹ç™¼ã€ä»£ç¢¼ç”Ÿæˆå’Œè£œå…¨ | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "src/**/*.ts,src/**/*.html,src/**/*.scss,*.md,*.json" --style markdown --top-files-len 5 --output source-code.md` |
| **æ¥µè‡´ç¯€çœ** | 41,433 | 4 | æˆæœ¬æ•æ„Ÿåˆ†æã€å¿«é€Ÿå°ˆæ¡ˆæ¦‚è¦½ | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --remove-comments --remove-empty-lines --no-file-summary --no-directory-structure --include "src/**/*.ts,src/**/*.html,*.md" --style markdown --output minimal-analysis.md` |
| **MCP æ•´åˆ** | 50,000 | 8 | MCP æœå‹™å™¨é…ç½®åˆ†æã€å”è­°å…¼å®¹æ€§æª¢æŸ¥ | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "**/*.mcp.*,**/*mcp*,**/*.json,**/*.yaml,**/*.yml" --style markdown --top-files-len 8 --output mcp-integration-analysis.md` |
| **æ™ºèƒ½åˆ†æ** | 200,000 | 50 | AI ä»£ç¢¼åˆ†æã€æ™ºèƒ½é‡æ§‹å»ºè­° | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --include "src/**/*,*.md,*.json,*.yaml,*.yml" --style markdown --top-files-len 15 --output ai-analysis.md` |

### Docker å‘½ä»¤è©³ç´°èªªæ˜
| æ¨¡å¼ | Docker å‘½ä»¤ | èªªæ˜ |
|------|-------------|------|
| **å®Œæ•´æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style markdown --top-files-len 20 --output complete-analysis.md` | å®Œæ•´åˆ†æï¼ŒåŒ…å«æ‰€æœ‰æ–‡ä»¶ |
| **å£“ç¸®æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --style markdown --top-files-len 10 --output compressed-analysis.md` | å£“ç¸®åˆ†æï¼Œæ¸›å°‘ token ä½¿ç”¨ |
| **æºç¢¼æ¨¡å¼** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "src/**/*.ts,src/**/*.html,src/**/*.scss,*.md,*.json" --style markdown --top-files-len 5 --output source-code.md` | å°ˆæ³¨æºä»£ç¢¼æ–‡ä»¶ |
| **æ¥µè‡´ç¯€çœ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --remove-comments --remove-empty-lines --no-file-summary --no-directory-structure --include "src/**/*.ts,src/**/*.html,*.md" --style markdown --output minimal-analysis.md` | æœ€å°åŒ–åˆ†æ |
| **MCP æ•´åˆ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "**/*.mcp.*,**/*mcp*,**/*.json,**/*.yaml,**/*.yml" --style markdown --top-files-len 8 --output mcp-integration-analysis.md` | MCP é…ç½®åˆ†æ |
| **æ™ºèƒ½åˆ†æ** | `docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --compress --include "src/**/*,*.md,*.json,*.yaml,*.yml" --style markdown --top-files-len 15 --output ai-analysis.md` | AI å„ªåŒ–åˆ†æ |

## ğŸ“‹ æ¨¡å¼é¸æ“‡æ±ºç­–æ¨¹

```mermaid
graph TD
    Start["é–‹å§‹ REPO åˆ†æ"] --> Q1{"éœ€è¦å®Œæ•´ç†è§£?"}
    Q1 -->|Yes| Q2{"æˆæœ¬æ•æ„Ÿ?"}
    Q1 -->|No| Q3{"å°ˆæ³¨ä»£ç¢¼é–‹ç™¼?"}
    Q1 -->|MCPæ•´åˆ| MCP["MCP æ•´åˆæ¨¡å¼"]
    
    Q2 -->|Yes| Minimal["æ¥µè‡´ç¯€çœæ¨¡å¼"]
    Q2 -->|No| Complete["å®Œæ•´æ¨¡å¼"]
    
    Q3 -->|Yes| Q4{"éœ€è¦ AI åˆ†æ?"}
    Q3 -->|No| Compressed["å£“ç¸®æ¨¡å¼"]
    
    Q4 -->|Yes| AI["æ™ºèƒ½åˆ†ææ¨¡å¼"]
    Q4 -->|No| Source["æºç¢¼æ¨¡å¼"]
    
    Complete --> Execute["åŸ·è¡Œåˆ†æ"]
    Compressed --> Execute
    Source --> Execute
    Minimal --> Execute
    MCP --> Execute
    AI --> Execute
```

## ğŸ® å¿«é€Ÿé¸æ“‡æŒ‡ä»¤

```bash
# ç›´æ¥åŸ·è¡Œæ¨¡å¼ï¼ˆè·³éé¸å–®ï¼‰
repo complete    # å®Œæ•´æ¨¡å¼
repo compressed  # å£“ç¸®æ¨¡å¼
repo source      # æºç¢¼æ¨¡å¼
repo minimal     # æ¥µè‡´ç¯€çœæ¨¡å¼
repo mcp         # MCP æ•´åˆæ¨¡å¼
repo ai          # æ™ºèƒ½åˆ†ææ¨¡å¼
```

## ğŸ”§ é€²éšé…ç½®é¸é …

### Docker å‘½ä»¤ä½¿ç”¨æ–¹å¼
REPO æ¨¡å¼é€šé **Docker** ç›´æ¥åŸ·è¡Œ repomix å®¹å™¨æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

#### ä¸»è¦ Docker åƒæ•¸
- **`-v ${PWD}:/app`**: æ›è¼‰ç•¶å‰ç›®éŒ„åˆ°å®¹å™¨
- **`-it`**: äº’å‹•å¼çµ‚ç«¯
- **`--rm`**: è‡ªå‹•æ¸…ç†å®¹å™¨
- **`--style`**: è¼¸å‡ºæ ¼å¼ (markdown, json, xml, plain)
- **`--compress`**: å•Ÿç”¨ Tree-sitter å£“ç¸®
- **`--include`**: åŒ…å«çš„æ–‡ä»¶æ¨¡å¼
- **`--ignore`**: å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼
- **`--top-files-len`**: æ‘˜è¦æ–‡ä»¶æ•¸é‡
- **`--output`**: è¼¸å‡ºæ–‡ä»¶å

#### é ç¨‹å€‰åº«åˆ†æ
```bash
# GitHub å€‰åº«åˆ†æ
docker run -it --rm ghcr.io/yamadashy/repomix --remote "user/repo" --style markdown --output remote-analysis.md
```

### è‡ªå®šç¾©åŒ…å«æ¨¡å¼ï¼ˆDocker å‘½ä»¤ï¼‰
```bash
# ç‰¹å®šæŠ€è¡“æ£§
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "src/**/*.ts,src/**/*.html,src/**/*.scss" --style markdown --output typescript-only.md

# é…ç½®æ–‡ä»¶
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include "*.json,*.yaml,*.yml,*.config.*" --style markdown --output config-files.md

# Git æ­·å²
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --include-logs --include-diffs --style markdown --output with-history.md

# ä¸åŒæ ¼å¼
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style json --output project-data.json
docker run -v ${PWD}:/app -it --rm ghcr.io/yamadashy/repomix --style xml --output project-structure.xml
```

## ğŸš€ æœ€ä½³å¯¦è¸

### æ¨¡å¼é¸æ“‡åŸå‰‡
- **å®Œæ•´æ¨¡å¼**: æ–°å°ˆæ¡ˆã€é‡å¤§é‡æ§‹ã€æ¶æ§‹åˆ†æ
- **å£“ç¸®æ¨¡å¼**: ä»£ç¢¼å¯©æŸ¥ã€æ€§èƒ½åˆ†æã€æŠ€è¡“è©•ä¼°
- **æºç¢¼æ¨¡å¼**: åŠŸèƒ½é–‹ç™¼ã€æ¨¡çµ„è¨­è¨ˆã€API é–‹ç™¼
- **æ¥µè‡´ç¯€çœ**: æˆæœ¬æ•æ„Ÿã€å¿«é€Ÿæ¦‚è¦½ã€åˆæ­¥åˆ†æ
- **MCP æ•´åˆ**: MCP æœå‹™å™¨é…ç½®ã€å”è­°åˆ†æã€å·¥å…·æ•´åˆ
- **æ™ºèƒ½åˆ†æ**: AI é©…å‹•åˆ†æã€æ™ºèƒ½é‡æ§‹ã€æ¶æ§‹å„ªåŒ–

### è¼¸å‡ºå„ªåŒ–æŠ€å·§
- ä½¿ç”¨ `--top-files-len` æ§åˆ¶æ‘˜è¦é•·åº¦
- åˆ©ç”¨ `--include` å’Œ `--ignore` ç²¾ç¢ºæ§åˆ¶å…§å®¹
- æ ¹æ“šéœ€è¦é¸æ“‡ä¸åŒçš„è¼¸å‡ºæ ¼å¼
- å®šæœŸæ›´æ–° repomix è¼¸å‡ºä»¥ä¿æŒåŒæ­¥

## ğŸ“‹ æª¢æŸ¥æ¸…å–®

```
âœ“ REPO MODE æª¢æŸ¥æ¸…å–®
- Docker ç’°å¢ƒæ­£å¸¸? [YES/NO]
- repomix é¡åƒå¯ç”¨? [YES/NO]
- åˆ†æç›®æ¨™æ˜ç¢º? [YES/NO]
- æˆæœ¬é™åˆ¶è€ƒæ…®? [YES/NO]
- å°ˆæ¡ˆè·¯å¾‘æ­£ç¢º? [YES/NO]
- è¼¸å‡ºæ–‡ä»¶ç”Ÿæˆ? [YES/NO]
- å…§å®¹å®Œæ•´æ€§é©—è­‰? [YES/NO]

â†’ å¦‚æœå…¨éƒ¨ YES: REPO åˆ†æå®Œæˆ
â†’ å¦‚æœæœ‰ NO: æª¢æŸ¥ç’°å¢ƒå’Œé…ç½®
```

### Docker ç’°å¢ƒæª¢æŸ¥
- **Docker å®‰è£**: ç¢ºèª Docker å·²å®‰è£ä¸¦é‹è¡Œ
- **repomix é¡åƒ**: ç¢ºèª `ghcr.io/yamadashy/repomix` é¡åƒå¯ç”¨
- **æ¬Šé™é…ç½®**: æª¢æŸ¥ Docker æ›è¼‰æ¬Šé™
- **è¼¸å‡ºæ ¼å¼æ”¯æ´**: ç¢ºèªæ‰€éœ€çš„è¼¸å‡ºæ ¼å¼å¯ç”¨

## ğŸ”„ èˆ‡å…¶ä»–æ¨¡å¼æ•´åˆ

| æ•´åˆæ¨¡å¼ | ç”¨é€” | è¼¸å‡º |
|----------|------|------|
| **REPO â†’ VAN** | å°ˆæ¡ˆçµæ§‹åˆ†æã€æŠ€è¡“æ£§è­˜åˆ¥ã€è¤‡é›œåº¦è©•ä¼° | VAN æ¨¡å¼åˆ†æ |
| **REPO â†’ PLAN** | åŸºæ–¼ä»£ç¢¼çµæ§‹åˆ¶å®šè¨ˆåŠƒã€è­˜åˆ¥ä¾è³´é—œä¿‚ | PLAN æ¨¡å¼è¦åŠƒ |
| **REPO â†’ CREATIVE** | åˆ†æç¾æœ‰æ¶æ§‹ã€è­˜åˆ¥æ”¹é€²æ©Ÿæœƒ | CREATIVE æ¨¡å¼è¨­è¨ˆ |
| **REPO â†’ IMPLEMENT** | åŸºæ–¼åˆ†æçµæœå¯¦æ–½ä»£ç¢¼æ”¹é€² | IMPLEMENT æ¨¡å¼å¯¦æ–½ |

## ğŸš¨ å¸¸è¦‹å•é¡Œè§£æ±º

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| **Docker æ¬Šé™éŒ¯èª¤** | æª¢æŸ¥ Docker æœå‹™ç‹€æ…‹ï¼š`docker --version` |
| **è¼¸å‡ºæ–‡ä»¶éå¤§** | ä½¿ç”¨å£“ç¸®æ¨¡å¼ï¼š`--compress` |
| **åŒ…å«ä¸éœ€è¦çš„æ–‡ä»¶** | ä½¿ç”¨ `--ignore "*.test.*,*.spec.*"` |
| **Docker é¡åƒä¸‹è¼‰å¤±æ•—** | æª¢æŸ¥ç¶²è·¯é€£æ¥ï¼š`docker pull ghcr.io/yamadashy/repomix` |
| **AI åˆ†æçµæœä¸æº–ç¢º** | ä½¿ç”¨æ™ºèƒ½åˆ†ææ¨¡å¼ä¸¦æª¢æŸ¥é…ç½® |

## ğŸ“š ç›¸é—œè³‡æº

- [Repomix å®˜æ–¹æ–‡æª”](https://github.com/yamadashy/repomix)
- [Docker ä½¿ç”¨æŒ‡å—](https://docs.docker.com/)
- [Graph Bank æ•´åˆæŒ‡å—](graph-bank-integration.md)

---

é€™å€‹ REPO æ¨¡å¼æä¾›äº†å…¨é¢çš„å€‰åº«åˆ†æèƒ½åŠ›ï¼Œé€šéå…­ç¨®ä¸åŒçš„è¼¸å‡ºæ¨¡å¼æ»¿è¶³å„ç¨®åˆ†æéœ€æ±‚ï¼Œä½¿ç”¨ Docker ç›´æ¥åŸ·è¡Œç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§å’Œç©©å®šæ€§ï¼ŒåŒæ™‚å„ªåŒ–ä»¤ç‰Œä½¿ç”¨å’Œè™•ç†æ•ˆç‡ã€‚