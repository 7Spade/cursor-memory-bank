# Graph Bank System - Cursor Rules

## 專案概述
這是一個基於 Cursor 的 **Memory + Graph** 記憶銀行系統，整合 MCP Memory Server 和 Graph Bank，提供分層任務管理和自定義模式整合，用於高效的開發工作流程。

## 開發環境
- 作業系統：Windows 11
- 包管理器：yarn
- 編輯器：Cursor (版本 0.48 或更高)
- AI 模型：Claude 4 Sonnet 或 Claude 4 Opus (推薦)

## 核心架構
- **分層規則載入**：僅載入必要規則，使用專門的延遲載入
- **漸進式文件**：簡潔的模板，隨任務複雜度擴展
- **統一上下文傳輸**：模式間高效的上下文保存
- **模式特定視覺地圖**：每個開發階段的清晰視覺表示

## 自定義模式
1. **INIT** (🚀) - 系統初始化：統一系統健康檢查和環境驗證
2. **VAN** (🔍) - 專案分析：分析專案結構並確定複雜度
3. **PLAN** (📋) - 任務規劃：建立詳細的實施計劃
4. **CREATIVE** (🎨) - 設計決策：探索複雜組件的設計選項
5. **IMPLEMENT** (⚒️) - 代碼實施：系統性地構建計劃的組件
6. **REFLECT** (🔍) - 審查：回顧並記錄經驗教訓
7. **ARCHIVE** (📁) - 歸檔：建立全面的文件

### 增強模式配置
- **基礎配置**：使用本文件的核心模式定義
- **詳細配置**：參考 `.cursor/rules/isolation_rules/Modes/` 目錄中的詳細指令文件
- **操作指南**：詳細步驟請參考 `AGENTS.md`

> **配置選擇**：Level 1-2 任務使用基礎配置，Level 3-4 任務建議使用詳細配置

### 詳細模式規則文件
- `init-mode-detailed.mdc` - INIT 模式詳細指令
- `van-mode-detailed.mdc` - VAN 模式詳細指令
- `plan-mode-detailed.mdc` - PLAN 模式詳細指令
- `creative-mode-detailed.mdc` - CREATIVE 模式詳細指令
- `implement-mode-detailed.mdc` - IMPLEMENT 模式詳細指令
- `reflect-archive-mode-detailed.mdc` - REFLECT+ARCHIVE 模式詳細指令

## 工作流程
- **Level 1 任務**：INIT → VAN → IMPLEMENT
- **Level 2 任務**：INIT → VAN → PLAN → IMPLEMENT → REFLECT
- **Level 3-4 任務**：INIT → VAN → PLAN → CREATIVE → IMPLEMENT → REFLECT → ARCHIVE

## 核心文件
- `tasks.md`：任務追蹤的中央真實來源
- `activeContext.md`：維護當前開發階段的焦點
- `progress.md`：追蹤實施狀態
- `creative-*.md`：CREATIVE 模式期間生成的設計決策文件
- `reflect-*.md`：REFLECT 模式期間創建的審查文件

## 開發規範
- 使用繁體中文進行交流
- 遵循分層規則載入架構
- 保持代碼的模組化和可擴展性
- 優化 token 使用效率
- 確保模式間的無縫轉換

## MCP Memory Server 初始化協議
**🚨 強制執行：在執行任何 AI agent 動作之前，必須：**

1. **檢查 MCP Memory Server 狀態**
2. **載入 MCP Memory 上下文**
3. **建立對話基線**

> **詳細操作指南請參考 `AGENTS.md`**

## Graph Bank 文件管理協議
**📁 專案文件管理：在任務進行過程中，必須：**

1. **更新 Graph Bank 文件**
2. **同步 Graph Bank 狀態**

> **詳細操作指南請參考 `AGENTS.md`**

## Agent 檢查時機
- **VAN Agent**: 專案分析前檢查 MCP Memory，分析後更新 Graph Bank
- **PLAN Agent**: 任務規劃前檢查 MCP Memory，規劃後更新 Graph Bank
- **CREATIVE Agent**: 設計決策前檢查 MCP Memory，決策後更新 Graph Bank
- **IMPLEMENT Agent**: 代碼實施前檢查 MCP Memory，實施後更新 Graph Bank
- **REFLECT Agent**: 審查開始前檢查 MCP Memory，完成後更新 Graph Bank
- **ARCHIVE Agent**: 歸檔開始前檢查 MCP Memory，完成後更新 Graph Bank

> **詳細操作流程請參考 `AGENTS.md`**

## 品質保證
- 在任何模式下輸入 "QA" 可執行技術驗證
- 遵循漸進式文件方法
- 保持代碼的可讀性和可維護性
- 定期進行代碼審查和優化